{"version":3,"sources":["../src/mod/core/styles.ts","../src/mod/core/scheduler.ts","../src/mod/core/component.ts","../src/mod/core/decorators.ts","../src/mod/core/context.ts","../src/mod/core/hooks.ts","../src/mod/core/router.ts","../src/mod/core/store.ts","../src/mod/services/i18n.ts","../src/mod/core/client.ts","../src/mod/components/toast.ts","../src/mod/components/loader.ts","../src/mod/components/smart_form.ts","../src/mod/components/popup.ts","../src/mod/components/tabbed_view.ts","../src/mod/components/items_loader.ts","../src/mod/help.ts","../src/mod/utils/intersection-observer.ts","../src/mod/utils/dropdown-manager.ts","../src/mod/utils/time_formatter.ts","../src/main.ts"],"names":["StyleManager","css","componentName","id","styleElement","scopedCSS","scope","lines","scopedLines","braceCount","line","selector","rest","scopedSelector","element","strings","values","result","i","UpdateScheduler","callback","callbacks","error","scheduler","Component","props","initialState","partialState","prevState","newState","newProps","prevProps","updater","prevIsScheduled","key","container","unsubscribe","name","el","compute","deps","cached","subscription","fn","delay","timeoutId","args","lastCall","now","timeSinceLastCall","newVNode","parent","index","oldVDomNode","newVDomNode","patch","vnode","convertedProps","value","convertedChildren","child","eventName","errorInfo","prevDeps","nextDeps","dep","propertyName","newValue","oldValue","watchers","methodName","state","target","context","propertyKey","instance","initialValue","hiddenKey","inst","targetConstructor","initKey","computed","targetOrGetter","descriptor","ctx","originalGetter","cacheKey","dirtyKey","watch","decorator","targetOrMethod","Context","defaultValue","subscriber","createContext","Provider","children","html","useContext","component","CombinedContext","initialValues","createCombinedContext","currentComponent","currentHookIndex","hookStates","setHookContext","clearHookContext","getHookStates","useState","hookIndex","states","setState","nextValue","useEffect","effect","areDepsEqual","cleanup","useMemo","factory","useCallback","useRef","useReducer","reducer","dispatch","action","useLocalStorage","storedValue","setStoredValue","item","prevValue","valueToStore","useDebounce","debouncedValue","setDebouncedValue","handler","usePrevious","ref","useToggle","setValue","toggle","v","useInterval","savedCallback","useFetch","url","options","data","setData","loading","setLoading","setError","fetchData","response","json","e","useWindowSize","size","setSize","handleResize","useEventListener","savedHandler","eventListener","event","createFunctionalComponent","displayName","FunctionalComponent","Router","routes","mode","base","scrollBehavior","path","delta","hook","exact","createElement","r","params","route","matchedRoute","link","href","to","from","guard","resolve","nextPath","ComponentClass","ComponentCtor","proto","exp","errorMessage","normalizedPath","cleanPath","pattern","paramNames","regexPattern","_","paramName","regex","match","search","query","pair","router","navigate","replace","goBack","goForward","getCurrentPath","isCurrentPath","isCurrentPathPrefix","prefix","reloadRoute","currentPath","navigateWithQuery","getQueryParams","getQueryParam","Store","stored","update","middleware","listener","updates","prevNotify","shouldNotify","stateCopy","createStore","createComputedStore","stores","computer","computedStore","s","store","connect","mapStateToProps","I18nManager","config","lang","translations","trans","translation","param","paramValue","currentLang","updateCallback","urlPattern","urls","langCodes","langMatch","i18nInstance","initI18n","getI18n","t","tLang","setLanguage","getCurrentLanguage","loadLanguage","loadTranslations","getSupportedLanguages","hasKey","getTranslations","createTranslator","loadFromUrl","initializeI18n","client","_config","stylesDir","outputPath","sass","writeFileSync","existsSync","mkdirSync","join","dirname","outputDir","outputFile","mainScssFile","fullOutputPath","dir","readdirSync","statSync","extname","files","entries","entry","fullPath","stat","entryDir","eventType","filename","capiConfig","configureApi","bb_","Toast","message","type","duration","translateKey","m","msg","icons","displayMessage","__decorateClass","globalToast","initToast","toastContainer","getToast","toast","Loader","containerClasses","spinnerClass","text","progress","increment","SmartFormComponent","field","fieldName","f","validation","stringValue","isValid","errors","firstErrorField","api","labelNode","optionNodes","opt","submitButton","fieldNodes","SmartForm","Popup","popup","sizeClass","variantClass","button","_reject","wrappedFormConfig","p","lastPopup","globalPopup","initPopup","popupContainer","getPopup","TabbedView","savedTab","tabId","tab","containerClass","headerClass","isActive","tabClass","label","contentClass","activeTab","wrappedProps","wrappedVNode","createTabbedView","view","mountTabbedView","ItemsLoader","scrollTop","scrollHeight","clientHeight","nextPage","separator","headers","token","newItems","total","newFilters","emptyVNode","emptyElement","createDOMElement","searchQuery","updatedItems","startIndex","itemElement","loadingEl","triggerVNode","triggerElement","endMsgVNode","endMsgElement","tryObserve","trigger","createItemsLoader","loader","debounce","throttle","classNames","classes","cls","formatDate","date","format","d","year","month","day","hours","minutes","seconds","deepClone","obj","clonedMap","clonedSet","cloned","deepMerge","sources","source","isObject","sourceValue","targetValue","uniqueIdCounter","uniqueId","timestamp","randomPart","counter","sleep","ms","isEmpty","capitalize","str","kebabCase","camelCase","char","pascalCase","camel","truncate","length","suffix","parseQuery","queryString","cleaned","pairs","decodedValue","actualKey","stringifyQuery","clamp","min","max","isBrowser","safeJsonParse","fallback","utils","VisibilityObserver","wasVisible","isNowVisible","observeVisibility","observer","DropdownManager","_DropdownManager","parentId","parentChain","toClose","openId","closeId","chain","currentId","childrenToClose","childId","getDropdownManager","formatRelativeTime","diffMs","diffSecs","diffMins","diffHours","diffDays","diffWeeks","diffMonths","diffYears","formatted","getTimeDisplay","title","formatTimeAgo","getTimeTitle","setConfig"],"mappings":"kZAWW,IAAMA,CAAAA,CAAN,KAAmB,CACtB,YAAe,MAAA,CAAS,IAAI,IAAA,CAC5B,OAAA,IAAA,CAAe,YAAA,CAAe,EAAA,CAK9B,OAAO,MAAA,CAAOC,CAAAA,CAAaC,CAAAA,CAAgC,CACvD,IAAMC,CAAAA,CAAKD,GAAiB,CAAA,MAAA,EAAS,IAAA,CAAK,YAAA,EAAc,CAAA,CAAA,CAExD,GAAI,IAAA,CAAK,OAAO,GAAA,CAAIC,CAAE,CAAA,CAClB,OAAOA,CAAAA,CAGX,IAAMC,EAAe,QAAA,CAAS,aAAA,CAAc,OAAO,CAAA,CACnDA,CAAAA,CAAa,YAAA,CAAa,iBAAkBD,CAAE,CAAA,CAG9C,IAAME,CAAAA,CAAY,IAAA,CAAK,WAAA,CAAYJ,EAAKE,CAAE,CAAA,CAC1C,OAAAC,CAAAA,CAAa,WAAA,CAAcC,EAE3B,QAAA,CAAS,IAAA,CAAK,WAAA,CAAYD,CAAY,CAAA,CACtC,IAAA,CAAK,OAAO,GAAA,CAAID,CAAAA,CAAIC,CAAY,CAAA,CAEzBD,CACX,CAKA,OAAO,MAAA,CAAOA,CAAAA,CAAkB,CAC5B,IAAMC,CAAAA,CAAe,IAAA,CAAK,OAAO,GAAA,CAAID,CAAE,CAAA,CACnCC,CAAAA,EAAgBA,CAAAA,CAAa,aAAA,GAC7BA,EAAa,aAAA,CAAc,WAAA,CAAYA,CAAY,CAAA,CACnD,IAAA,CAAK,MAAA,CAAO,OAAOD,CAAE,CAAA,EAE7B,CAKA,OAAe,WAAA,CAAYF,CAAAA,CAAaK,EAAuB,CAI3D,IAAMC,CAAAA,CAAQN,CAAAA,CAAI,KAAA,CAAM;AAAA,CAAI,CAAA,CACtBO,CAAAA,CAAwB,EAAC,CAE3BC,CAAAA,CAAa,EAEjB,IAAA,IAASC,CAAAA,IAAQH,CAAAA,CAAO,CAIpB,GAHAG,CAAAA,CAAOA,CAAAA,CAAK,IAAA,EAAK,CAGbA,CAAAA,CAAK,UAAA,CAAW,QAAQ,CAAA,CAAG,CAE3BF,CAAAA,CAAY,IAAA,CAAKE,CAAI,CAAA,CACrB,QACJ,CAWA,GARAD,CAAAA,EAAAA,CAAeC,CAAAA,CAAK,KAAA,CAAM,IAAI,CAAA,EAAK,EAAC,EAAG,MAAA,CACvCD,CAAAA,EAAAA,CAAeC,CAAAA,CAAK,KAAA,CAAM,IAAI,CAAA,EAAK,EAAC,EAAG,MAAA,CAOnCA,CAAAA,CAAK,QAAA,CAAS,GAAG,CAAA,EAAK,CAACA,CAAAA,CAAK,UAAA,CAAW,GAAG,CAAA,EAAK,CAACA,CAAAA,CAAK,UAAA,CAAW,GAAG,CAAA,CAAG,CACtE,IAAMC,CAAAA,CAAWD,CAAAA,CAAK,SAAA,CAAU,CAAA,CAAGA,CAAAA,CAAK,OAAA,CAAQ,GAAG,CAAC,CAAA,CAAE,IAAA,EAAK,CACrDE,CAAAA,CAAOF,CAAAA,CAAK,SAAA,CAAUA,CAAAA,CAAK,OAAA,CAAQ,GAAG,CAAC,CAAA,CAG7C,GAAIC,CAAAA,GAAa,OAAA,EAAWA,CAAAA,GAAa,GAAA,EAAOD,CAAAA,CAAK,UAAA,CAAW,GAAG,CAAA,CAC/DF,CAAAA,CAAY,IAAA,CAAKE,CAAI,CAAA,CAAA,KAClB,CACH,IAAMG,CAAAA,CAAiB,CAAA,aAAA,EAAgBP,CAAK,CAAA,GAAA,EAAMK,CAAQ,CAAA,CAAA,CAC1DH,CAAAA,CAAY,IAAA,CAAK,CAAA,EAAGK,CAAc,CAAA,CAAA,EAAID,CAAI,CAAA,CAAE,EAChD,CACJ,CAAA,KACIJ,CAAAA,CAAY,IAAA,CAAKE,CAAI,EAE7B,CAEA,OAAOF,EAAY,IAAA,CAAK;AAAA,CAAI,CAChC,CAKA,OAAO,KAAA,EAAc,CACjB,IAAA,GAAW,EAAGM,CAAO,CAAA,GAAK,IAAA,CAAK,MAAA,CACvBA,CAAAA,CAAQ,eACRA,CAAAA,CAAQ,aAAA,CAAc,WAAA,CAAYA,CAAO,CAAA,CAGjD,IAAA,CAAK,MAAA,CAAO,KAAA,GAChB,CACJ,EAMO,SAASb,EAAAA,CACZc,CAAAA,CAAAA,GACGC,EACG,CACN,IAAIC,CAAAA,CAAS,EAAA,CAEb,IAAA,IAASC,CAAAA,CAAI,CAAA,CAAGA,CAAAA,CAAIH,CAAAA,CAAQ,MAAA,CAAQG,CAAAA,EAAAA,CAChCD,CAAAA,EAAUF,CAAAA,CAAQG,CAAC,CAAA,CACfA,CAAAA,CAAIF,CAAAA,CAAO,MAAA,GACXC,CAAAA,EAAUD,CAAAA,CAAOE,CAAC,CAAA,CAAA,CAI1B,OAAOD,CACX,CC9GA,IAAME,CAAAA,CAAN,KAAsB,CAAtB,WAAA,EAAA,CACI,KAAQ,KAAA,CAAQ,IAAI,GAAA,CACpB,IAAA,CAAQ,gBAAA,CAAmB,KAAA,CAC3B,IAAA,CAAQ,UAAA,CAAa,MAAA,CAKrB,QAAA,CAASC,CAAAA,CAAgC,CACrC,GAAI,IAAA,CAAK,WAAY,CAEjB,qBAAA,CAAsB,IAAM,IAAA,CAAK,QAAA,CAASA,CAAQ,CAAC,CAAA,CACnD,MACJ,CAEA,IAAA,CAAK,KAAA,CAAM,GAAA,CAAIA,CAAQ,EAElB,IAAA,CAAK,gBAAA,GACN,IAAA,CAAK,gBAAA,CAAmB,IAAA,CAGxB,OAAA,CAAQ,OAAA,EAAQ,CAAE,IAAA,CAAK,IAAM,CACzB,qBAAA,CAAsB,IAAM,IAAA,CAAK,KAAA,EAAO,EAC5C,CAAC,CAAA,EAET,CAKA,SAAA,CAAUA,CAAAA,CAAgC,CACtCA,CAAAA,GACJ,CAKQ,KAAA,EAAc,CAClB,GAAI,IAAA,CAAK,MAAM,IAAA,GAAS,CAAA,CAAG,CACvB,IAAA,CAAK,gBAAA,CAAmB,KAAA,CACxB,MACJ,CAEA,IAAA,CAAK,UAAA,CAAa,IAAA,CAClB,IAAA,CAAK,gBAAA,CAAmB,KAAA,CAExB,IAAMC,CAAAA,CAAY,KAAA,CAAM,IAAA,CAAK,IAAA,CAAK,KAAK,CAAA,CACvC,IAAA,CAAK,KAAA,CAAM,KAAA,EAAM,CAGjB,IAAA,IAAWD,CAAAA,IAAYC,CAAAA,CACnB,GAAI,CACAD,CAAAA,GACJ,CAAA,MAASE,CAAAA,CAAO,CACZ,OAAA,CAAQ,KAAA,CAAM,sBAAA,CAAwBA,CAAK,EAC/C,CAGJ,IAAA,CAAK,UAAA,CAAa,KAAA,CAGd,IAAA,CAAK,KAAA,CAAM,IAAA,CAAO,CAAA,EAClB,IAAA,CAAK,QAAA,CAAS,IAAM,CAAC,CAAC,EAE9B,CAKA,KAAA,EAAc,CACV,IAAA,CAAK,KAAA,CAAM,KAAA,GACX,IAAA,CAAK,gBAAA,CAAmB,MAC5B,CAKA,IAAI,IAAA,EAAe,CACf,OAAO,IAAA,CAAK,KAAA,CAAM,IACtB,CACJ,CAAA,CAGaC,CAAAA,CAAY,IAAIJ,ECpFtB,IAAeK,CAAAA,CAAf,KAAmF,CAetF,WAAA,CAAYC,CAAAA,CAAWC,CAAAA,CAAkB,CAZzC,IAAA,CAAO,UAAA,CAAsB,KAAA,CAE7B,IAAA,CAAQ,aAAA,CAAyB,MACjC,IAAA,CAAQ,QAAA,CAA+B,IAAA,CACvC,IAAA,CAAQ,MAAA,CAAuB,IAAA,CAC/B,IAAA,CAAQ,QAAA,CAA0B,IAAA,CAClC,IAAA,CAAQ,qBAAA,CAAiC,KAAA,CACzC,IAAA,CAAQ,YAAA,CAAe,IAAI,GAAA,CAC3B,IAAA,CAAQ,KAAA,CAAQ,IAAI,GAAA,CACpB,IAAA,CAAQ,cAAA,CAAiC,EAAC,CAC1C,IAAA,CAAQ,UAAA,CAAa,IAAI,GAAA,CAGrB,IAAA,CAAK,KAAA,CAAQD,GAAS,EAAC,CACvB,IAAA,CAAK,KAAA,CAAQC,CAAAA,EAAgB,GACjC,CAsBA,QAAA,CACIC,CAAAA,CACAP,CAAAA,CACI,CACJ,IAAMQ,CAAAA,CAAY,CAAE,GAAG,IAAA,CAAK,KAAM,CAAA,CAC5BC,CAAAA,CAAW,OAAOF,CAAAA,EAAiB,UAAA,CACnCA,CAAAA,CAAa,IAAA,CAAK,KAAK,CAAA,CACvBA,CAAAA,CAEN,IAAA,CAAK,MAAQ,CAAE,GAAG,IAAA,CAAK,KAAA,CAAO,GAAGE,CAAS,CAAA,CAE1C,IAAA,CAAK,aAAA,GAAgBD,CAAAA,CAAW,IAAA,CAAK,KAAK,CAAA,CAC1C,IAAA,CAAK,MAAA,EAAO,CAERR,CAAAA,EACAG,CAAAA,CAAU,QAAA,CAASH,CAAQ,EAEnC,CAEA,QAAA,CAASU,CAAAA,CAA4B,CACjC,IAAMC,CAAAA,CAAY,CAAE,GAAG,IAAA,CAAK,KAAM,CAAA,CAClC,IAAA,CAAK,KAAA,CAAQ,CAAE,GAAG,IAAA,CAAK,KAAA,CAAO,GAAGD,CAAS,CAAA,CAE1C,IAAA,CAAK,aAAA,GAAgBC,CAAAA,CAAW,IAAA,CAAK,KAAK,CAAA,CAC1C,IAAA,CAAK,MAAA,GACT,CAIA,WAAA,CAAYC,CAAAA,CAA2B,CACnC,IAAMC,CAAAA,CAAkB,IAAA,CAAK,qBAAA,CAC7B,IAAA,CAAK,qBAAA,CAAwB,KAE7B,GAAI,CACAD,CAAAA,GACJ,CAAA,OAAE,CACOC,CAAAA,GACD,IAAA,CAAK,qBAAA,CAAwB,KAAA,CAC7B,IAAA,CAAK,MAAA,EAAO,EAEpB,CACJ,CAEA,MAAA,CAAOC,CAAAA,CAAoB,CACnB,CAAC,IAAA,CAAK,UAAA,EAAc,IAAA,CAAK,aAAA,GAEzBA,CAAAA,EACA,IAAA,CAAK,YAAA,CAAa,GAAA,CAAIA,CAAG,CAAA,CAGzB,CAAA,IAAA,CAAK,wBAET,IAAA,CAAK,qBAAA,CAAwB,IAAA,CAC7BX,CAAAA,CAAU,QAAA,CAAS,IAAM,CACrB,IAAA,CAAK,qBAAA,CAAwB,KAAA,CAC7B,IAAA,CAAK,YAAA,CAAa,KAAA,EAAM,CACxB,KAAK,cAAA,GACT,CAAC,CAAA,CAAA,EACL,CAEA,WAAA,EAAoB,CACZ,CAAC,IAAA,CAAK,UAAA,EAAc,IAAA,CAAK,aAAA,EAE7BA,CAAAA,CAAU,SAAA,CAAU,IAAM,CACtB,IAAA,CAAK,cAAA,GACT,CAAC,EACL,CAIA,MAAM,KAAA,CAAMY,CAAAA,CAAuC,CAC/C,GAAI,IAAA,CAAK,UAAA,CAAY,CACjB,OAAA,CAAQ,IAAA,CAAK,8BAA8B,CAAA,CAC3C,MACJ,CAEA,GAAI,CACA,MAAM,IAAA,CAAK,aAAA,IAAgB,CAE3B,IAAA,CAAK,MAAA,CAAS,IAAA,CAAK,QAAO,CAC1B,IAAA,CAAK,QAAA,CAAW,IAAA,CAAK,uBAAA,CAAwB,IAAA,CAAK,MAAM,CAAA,CAEpD,IAAA,CAAK,MAAA,GACL,IAAA,CAAK,QAAA,CAAWnC,CAAAA,CAAa,MAAA,CACzB,IAAA,CAAK,MAAA,EAAO,CACZ,IAAA,CAAK,WAAA,CAAY,IACrB,CAAA,CACA,IAAA,CAAK,QAAA,EAAU,YAAA,CAAa,YAAA,CAAc,IAAA,CAAK,WAAA,CAAY,IAAI,CAAA,CAAA,CAGnEmC,CAAAA,CAAU,YAAY,IAAA,CAAK,QAAQ,CAAA,CACnC,IAAA,CAAK,UAAA,CAAa,CAAA,CAAA,CAElB,MAAM,IAAA,CAAK,OAAA,KACf,CAAA,MAASb,CAAAA,CAAO,CACZ,IAAA,CAAK,YAAA,CAAaA,CAAAA,CAAgB,CAAE,cAAA,CAAgB,IAAA,CAAK,WAAA,CAAY,IAAK,CAAC,EAC/E,CACJ,CAEA,OAAA,EAAgB,CACZ,GAAI,EAAA,CAAC,IAAA,CAAK,YAAc,IAAA,CAAK,aAAA,CAAA,CAE7B,CAAA,IAAA,CAAK,aAAA,CAAgB,IAAA,CAErB,GAAI,CACA,IAAA,CAAK,eAAA,IAAkB,CAGvB,IAAA,CAAK,qBAAA,CAAwB,CAAA,CAAA,CAC7B,IAAA,CAAK,aAAa,KAAA,EAAM,CAEpB,IAAA,CAAK,QAAA,EACLtB,CAAAA,CAAa,MAAA,CAAO,IAAA,CAAK,QAAQ,CAAA,CAGrC,IAAA,CAAK,cAAA,CAAe,OAAA,CAAQoC,CAAAA,EAAeA,CAAAA,EAAa,CAAA,CACxD,IAAA,CAAK,cAAA,CAAiB,EAAC,CAEnB,IAAA,CAAK,QAAA,EAAU,aAAA,EACf,IAAA,CAAK,QAAA,CAAS,aAAA,CAAc,WAAA,CAAY,IAAA,CAAK,QAAQ,CAAA,CAGzD,IAAA,CAAK,UAAA,CAAa,CAAA,CAAA,CAClB,IAAA,CAAK,QAAA,CAAW,IAAA,CAChB,IAAA,CAAK,MAAA,CAAS,IAAA,CAEd,IAAA,CAAK,SAAA,IAAY,CAEjB,IAAA,CAAK,KAAA,CAAM,KAAA,GACX,IAAA,CAAK,UAAA,CAAW,KAAA,GACpB,CAAA,MAASd,CAAAA,CAAO,CACZ,IAAA,CAAK,YAAA,CAAaA,CAAAA,CAAgB,CAAE,cAAA,CAAgB,IAAA,CAAK,WAAA,CAAY,IAAK,CAAC,EAC/E,CAAA,OAAE,CACE,IAAA,CAAK,aAAA,CAAgB,MACzB,CAAA,CACJ,CAIA,MAAA,CAAOe,CAAAA,CAAuC,CAC1C,OAAO,IAAA,CAAK,MAAM,GAAA,CAAIA,CAAI,CAC9B,CAEA,SAAA,CAAUA,CAAAA,CAAgD,CACtD,OAAQC,CAAAA,EAA2B,CAC3BA,CAAAA,CACA,IAAA,CAAK,KAAA,CAAM,GAAA,CAAID,CAAAA,CAAMC,CAAE,CAAA,CAEvB,IAAA,CAAK,KAAA,CAAM,MAAA,CAAOD,CAAI,EAE9B,CACJ,CAEA,IAAA,CAAQH,CAAAA,CAAaK,CAAAA,CAAkBC,CAAAA,CAAoB,CACvD,IAAMC,EAAS,IAAA,CAAK,UAAA,CAAW,GAAA,CAAIP,CAAG,CAAA,CAEtC,GAAIO,CAAAA,EAAU,IAAA,CAAK,aAAA,CAAcA,CAAAA,CAAO,IAAA,CAAMD,CAAI,CAAA,CAC9C,OAAOC,EAAO,MAAA,CAGlB,IAAMxB,CAAAA,CAASsB,CAAAA,EAAQ,CACvB,OAAA,IAAA,CAAK,UAAA,CAAW,GAAA,CAAIL,CAAAA,CAAK,CAAE,IAAA,CAAMM,CAAAA,CAAM,MAAA,CAAAvB,CAAO,CAAC,CAAA,CACxCA,CACX,CAEA,SAAA,CAAUyB,CAAAA,CAAgC,CACtC,IAAA,CAAK,cAAA,CAAe,IAAA,CAAKA,CAAY,EACzC,CAEA,QAAA,CACIC,CAAAA,CACAC,CAAAA,CACgC,CAChC,IAAIC,CAAAA,CAAkD,IAAA,CAEtD,OAAO,CAAA,GAAIC,CAAAA,GAA8B,CACjCD,CAAAA,GAAc,IAAA,EACd,YAAA,CAAaA,CAAS,CAAA,CAG1BA,CAAAA,CAAY,UAAA,CAAW,IAAM,CACzBA,CAAAA,CAAY,IAAA,CACZF,CAAAA,CAAG,KAAA,CAAM,IAAA,CAAMG,CAAI,EACvB,CAAA,CAAGF,CAAK,EACZ,CACJ,CAEA,QAAA,CACID,EACAC,CAAAA,CACgC,CAChC,IAAIG,CAAAA,CAAW,CAAA,CACXF,CAAAA,CAAkD,IAAA,CAEtD,OAAO,CAAA,GAAIC,CAAAA,GAA8B,CACrC,IAAME,CAAAA,CAAM,IAAA,CAAK,KAAI,CACfC,CAAAA,CAAoBD,CAAAA,CAAMD,CAAAA,CAE5BE,CAAAA,EAAqBL,CAAAA,EACrBG,CAAAA,CAAWC,CAAAA,CACXL,CAAAA,CAAG,KAAA,CAAM,IAAA,CAAMG,CAAI,CAAA,EACXD,CAAAA,GACRA,CAAAA,CAAY,UAAA,CAAW,IAAM,CACzBE,CAAAA,CAAW,IAAA,CAAK,GAAA,EAAI,CACpBF,CAAAA,CAAY,IAAA,CACZF,CAAAA,CAAG,KAAA,CAAM,IAAA,CAAMG,CAAI,EACvB,CAAA,CAAGF,EAAQK,CAAiB,CAAA,EAEpC,CACJ,CAIA,IAAI,OAAA,EAA8B,CAC9B,OAAO,IAAA,CAAK,QAChB,CAEA,IAAI,SAAA,EAAqB,CACrB,OAAO,IAAA,CAAK,UAChB,CAEA,IAAI,YAAA,EAAwB,CACxB,OAAO,IAAA,CAAK,aAChB,CAIA,MAAc,cAAA,EAAgC,CAC1C,GAAI,CAAC,IAAA,CAAK,UAAA,EAAc,CAAC,IAAA,CAAK,QAAA,EAAY,IAAA,CAAK,aAAA,CAAe,OAE9D,IAAMlB,CAAAA,CAAY,CAAE,GAAG,IAAA,CAAK,KAAM,CAAA,CAC5BH,CAAAA,CAAY,CAAE,GAAG,IAAA,CAAK,KAAM,CAAA,CAElC,GAAI,CACA,GAAI,IAAA,CAAK,YAAA,EAAgB,CAAC,IAAA,CAAK,YAAA,CAAaG,CAAAA,CAAWH,CAAS,CAAA,CAC5D,OAGJ,MAAM,IAAA,CAAK,cAAA,GAAiBG,CAAAA,CAAWH,CAAS,CAAA,CAEhD,IAAMsB,CAAAA,CAAW,IAAA,CAAK,MAAA,EAAO,CACvBC,CAAAA,CAAS,KAAK,QAAA,CAAS,aAAA,CAE7B,GAAI,IAAA,CAAK,MAAA,EAAUA,CAAAA,CAAQ,CACvB,IAAMC,CAAAA,CAAQ,KAAA,CAAM,IAAA,CAAKD,CAAAA,CAAO,UAAU,CAAA,CAAE,QAAQ,IAAA,CAAK,QAAQ,CAAA,CAE3DE,CAAAA,CAAc,IAAA,CAAK,kBAAA,CAAmB,IAAA,CAAK,MAAM,CAAA,CACjDC,CAAAA,CAAc,IAAA,CAAK,kBAAA,CAAmBJ,CAAQ,CAAA,CACpDK,KAAAA,CAAMJ,CAAAA,CAAQE,CAAAA,CAAaC,CAAAA,CAAaF,CAAK,CAAA,CAC7C,IAAA,CAAK,QAAA,CAAWD,CAAAA,CAAO,UAAA,CAAWC,CAAK,EAC3C,CAEA,IAAA,CAAK,MAAA,CAASF,CAAAA,CACd,KAAK,QAAA,GAAWnB,CAAAA,CAAWH,CAAS,EACxC,CAAA,MAASN,CAAAA,CAAO,CACZ,IAAA,CAAK,YAAA,CAAaA,CAAAA,CAAgB,CAAE,cAAA,CAAgB,IAAA,CAAK,WAAA,CAAY,IAAK,CAAC,EAC/E,CACJ,CAEQ,kBAAA,CAAmBkC,CAAAA,CAAyB,CAChD,GAAI,OAAOA,CAAAA,CAAM,IAAA,EAAS,QAAA,CACtB,MAAM,IAAI,MAAM,oDAAoD,CAAA,CAIxE,IAAMC,CAAAA,CAA0C,EAAC,CACjD,IAAA,GAAW,CAACvB,CAAAA,CAAKwB,CAAK,CAAA,GAAK,MAAA,CAAO,OAAA,CAAQF,CAAAA,CAAM,KAAK,CAAA,CAC7CtB,CAAAA,GAAQ,UAAA,GAIRuB,CAAAA,CAAevB,CAAG,CAAA,CAAIwB,CAAAA,CAAAA,CAM9B,IAAMC,CAAAA,CAAoBH,CAAAA,CAAM,QAAA,CAAS,GAAA,CAAII,CAAAA,EACrCA,CAAAA,EAAS,IAAA,EAAQ,OAAOA,CAAAA,EAAU,SAAA,CAAkB,IAAA,CACpD,OAAOA,CAAAA,EAAU,QAAA,EAAY,OAAOA,CAAAA,EAAU,QAAA,CAAiBA,CAAAA,CAC5D,IAAA,CAAK,kBAAA,CAAmBA,CAAc,CAChD,CAAA,CAAE,MAAA,CAAQA,CAAAA,EAAgDA,CAAAA,GAAU,IAAI,EAEzE,OAAO,CACH,IAAA,CAAMJ,CAAAA,CAAM,IAAA,CACZ,KAAA,CAAOC,CAAAA,CACP,QAAA,CAAUE,CACd,CACJ,CAEQ,uBAAA,CAAwBH,CAAAA,CAA2B,CACvD,GAAI,OAAOA,CAAAA,CAAM,IAAA,EAAS,QAAA,CACtB,MAAM,IAAI,KAAA,CAAM,2DAA2D,CAAA,CAG/E,IAAM1C,CAAAA,CAAU,QAAA,CAAS,aAAA,CAAc0C,CAAAA,CAAM,IAAI,EAGjD,IAAA,GAAW,CAACtB,CAAAA,CAAKwB,CAAK,CAAA,GAAK,MAAA,CAAO,OAAA,CAAQF,CAAAA,CAAM,KAAK,CAAA,CAC7CtB,CAAAA,GAAQ,UAAA,EACZ,IAAA,CAAK,mBAAA,CAAoBpB,EAASoB,CAAAA,CAAKwB,CAAK,CAAA,CAIhD,IAAA,IAAWE,CAAAA,IAASJ,CAAAA,CAAM,QAAA,CAClBI,CAAAA,EAAS,IAAA,EAAQA,CAAAA,GAAU,KAAA,GAE3B,OAAOA,CAAAA,EAAU,QAAA,EAAY,OAAOA,CAAAA,EAAU,QAAA,CAC9C9C,CAAAA,CAAQ,WAAA,CAAY,QAAA,CAAS,cAAA,CAAe,MAAA,CAAO8C,CAAK,CAAC,CAAC,CAAA,CACnD,OAAOA,CAAAA,EAAU,QAAA,EAAY,MAAA,GAAUA,CAAAA,EAC9C9C,CAAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,uBAAA,CAAwB8C,CAAc,CAAC,CAAA,CAAA,CAIxE,OAAO9C,CACX,CAEQ,mBAAA,CAAoBA,CAAAA,CAAsBoB,CAAAA,CAAawB,CAAAA,CAAsB,CAEjF,GAAIxB,CAAAA,CAAI,UAAA,CAAW,IAAI,CAAA,EAAK,OAAOwB,CAAAA,EAAU,UAAA,CAAY,CACrD,IAAMG,CAAAA,CAAY3B,CAAAA,CAAI,SAAA,CAAU,CAAC,EAAE,WAAA,EAAY,CAC/CpB,CAAAA,CAAQ,gBAAA,CAAiB+C,CAAAA,CAAWH,CAAsB,CAAA,CAC1D,MACJ,CAGA,GAAIxB,CAAAA,GAAQ,WAAA,EAAe,OAAOwB,CAAAA,EAAU,SAAU,CAClD5C,CAAAA,CAAQ,SAAA,CAAY4C,CAAAA,CACpB,MACJ,CAGA,GAAIxB,CAAAA,GAAQ,OAAA,CAAS,CACb,OAAOwB,CAAAA,EAAU,QAAA,CACjB5C,CAAAA,CAAQ,YAAA,CAAa,OAAA,CAAS4C,CAAK,CAAA,CAC5B,OAAOA,CAAAA,EAAU,QAAA,EAAYA,CAAAA,GAAU,IAAA,EAC9C,MAAA,CAAO,MAAA,CAAO5C,CAAAA,CAAQ,KAAA,CAAO4C,CAAK,CAAA,CAEtC,MACJ,CAGA,GAAIxB,CAAAA,GAAQ,KAAA,EAAS,OAAOwB,CAAAA,EAAU,UAAA,CAAY,CAC7CA,CAAAA,CAAoC5C,CAAO,CAAA,CAC5C,MACJ,CAGA,GAAIoB,CAAAA,GAAQ,WAAaA,CAAAA,GAAQ,UAAA,EAAcA,CAAAA,GAAQ,UAAA,CAAY,CAAA,CAC7CwB,CAAAA,GAAU,MAAA,EAAUA,CAAAA,GAAU,IAAA,EAAQA,CAAAA,GAAU,EAAA,GAE9D5C,CAAAA,CAAQ,YAAA,CAAaoB,CAAAA,CAAK,EAAE,CAAA,CAEhC,MACJ,CAGIwB,CAAAA,EAAS,IAAA,EAAQA,CAAAA,GAAU,KAAA,EAC3B5C,CAAAA,CAAQ,YAAA,CAAaoB,CAAAA,CAAK,MAAA,CAAOwB,CAAK,CAAC,EAE/C,CAEQ,YAAA,CAAapC,CAAAA,CAAcwC,CAAAA,CAA8C,CAG7E,GAFA,OAAA,CAAQ,KAAA,CAAM,CAAA,mBAAA,EAAsB,IAAA,CAAK,WAAA,CAAY,IAAI,CAAA,CAAA,CAAA,CAAKxC,CAAK,CAAA,CAE/D,IAAA,CAAK,QACL,IAAA,CAAK,OAAA,CAAQA,CAAAA,CAAOwC,CAAS,CAAA,CAAA,KAE7B,MAAMxC,CAEd,CAEQ,aAAA,CAAcyC,CAAAA,CAAqBC,CAAAA,CAA8B,CACrE,OAAID,CAAAA,CAAS,SAAWC,CAAAA,CAAS,MAAA,CAAe,KAAA,CACzCD,CAAAA,CAAS,KAAA,CAAM,CAACE,CAAAA,CAAK/C,CAAAA,GAAM+C,CAAAA,GAAQD,CAAAA,CAAS9C,CAAC,CAAC,CACzD,CAKA,wBAA+B,CAC3B,IAAA,IAAWgB,CAAAA,IAAO,IAAA,CACVA,CAAAA,CAAI,UAAA,CAAW,kBAAkB,CAAA,GAChC,IAAA,CAAiCA,CAAG,CAAA,CAAI,IAAA,EAGrD,CAKA,gBAAA,CAAiBgC,CAAAA,CAAsBC,CAAAA,CAAmBC,CAAAA,CAAyB,CAC/E,IAAMC,CAAAA,CAAY,IAAA,CAAK,WAAA,CAAqC,YAAA,CAC5D,GAAKA,CAAAA,GAAWH,CAAY,CAAA,CAAA,CAE5B,IAAA,IAAWI,CAAAA,IAAcD,CAAAA,CAASH,CAAY,CAAA,CAC1C,GAAI,OAAQ,IAAA,CAAiCI,CAAU,CAAA,EAAM,UAAA,CACzD,GAAI,CACE,IAAA,CAAiCA,CAAU,CAAA,CAAyC,IAAA,CAAK,IAAA,CAAMH,EAAUC,CAAQ,EACvH,CAAA,MAAS9C,CAAAA,CAAO,CACZ,OAAA,CAAQ,KAAA,CAAM,CAAA,iBAAA,EAAoBgD,CAAU,CAAA,CAAA,CAAA,CAAKhD,CAAK,EAC1D,CAAA,CAGZ,CACJ,ECxYO,SAASiD,CAAAA,CACZC,CAAAA,CACAC,CAAAA,CACO,CAEP,GAAIA,CAAAA,EAAW,OAAOA,CAAAA,EAAY,QAAA,EAAY,MAAA,GAAUA,CAAAA,CAAS,CAC7D,IAAMC,CAAAA,CAAcD,CAAAA,CAAQ,IAAA,CAE5B,OAAAA,CAAAA,CAAQ,cAAA,CAAe,UAAwB,CAC3C,IAAME,CAAAA,CAAW,IAAA,CACZA,CAAAA,CAAS,WAAA,CAAY,iBAAA,GACtBA,CAAAA,CAAS,WAAA,CAAY,kBAAoB,EAAC,CAAA,CAEzCA,CAAAA,CAAS,WAAA,CAAY,iBAAA,CAAkB,QAAA,CAASD,CAAW,CAAA,EAC5DC,CAAAA,CAAS,WAAA,CAAY,iBAAA,CAAkB,IAAA,CAAKD,CAAW,EAE/D,CAAC,CAAA,CAEM,SAAqBE,CAAAA,CAA4B,CACpD,IAAMD,CAAAA,CAAW,IAAA,CACXE,CAAAA,CAAY,CAAA,OAAA,EAAUH,CAAW,CAAA,CAAA,CAGvC,OAAAC,CAAAA,CAASE,CAAS,EAAID,CAAAA,CAGtB,MAAA,CAAO,cAAA,CAAe,IAAA,CAAMF,CAAAA,CAAa,CACrC,GAAA,EAAgB,CAEZ,OADa,IAAA,CACDG,CAAS,CACzB,CAAA,CACA,GAAA,CAAgBV,CAAAA,CAAiB,CAC7B,IAAMW,CAAAA,CAAO,IAAA,CACPV,CAAAA,CAAWU,CAAAA,CAAKD,CAAS,CAAA,CAE3BT,CAAAA,GAAaD,CAAAA,GACbW,CAAAA,CAAKD,CAAS,CAAA,CAAIV,CAAAA,CAGd,OAAOW,EAAK,sBAAA,EAA2B,UAAA,EACvCA,CAAAA,CAAK,sBAAA,EAAuB,CAI5B,OAAOA,CAAAA,CAAK,gBAAA,EAAqB,UAAA,EACjCA,CAAAA,CAAK,gBAAA,CAAiBJ,CAAAA,CAAaP,CAAAA,CAAUC,CAAQ,EAIrDU,CAAAA,CAAK,UAAA,EAAc,OAAOA,CAAAA,CAAK,MAAA,EAAW,UAAA,EAC1CA,CAAAA,CAAK,MAAA,EAAO,EAGxB,CAAA,CACA,UAAA,CAAY,IAAA,CACZ,YAAA,CAAc,IAClB,CAAC,CAAA,CAEMF,CACX,CACJ,CAGA,IAAMF,CAAAA,CAAcD,CAAAA,CAGdM,CAAAA,CAAqBP,CAAAA,CAA8C,WAAA,CACpEO,CAAAA,CAAkB,iBAAA,GACnBA,CAAAA,CAAkB,iBAAA,CAAoB,EAAC,CAAA,CAEtCA,CAAAA,CAAkB,iBAAA,CAAkB,QAAA,CAASL,CAAW,CAAA,EACzDK,CAAAA,CAAkB,iBAAA,CAAkB,IAAA,CAAKL,CAAW,CAAA,CAIxD,IAAMG,CAAAA,CAAY,CAAA,OAAA,EAAUH,CAAW,GACjCM,CAAAA,CAAU,CAAA,YAAA,EAAeN,CAAW,CAAA,CAAA,CAG1C,MAAA,CAAO,cAAA,CAAeF,CAAAA,CAAQE,CAAAA,CAAa,CACvC,GAAA,EAAmB,CACf,IAAMC,CAAAA,CAAW,IAAA,CAEjB,GAAKA,CAAAA,CAASK,CAAO,CAAA,CAGrB,OAAOL,CAAAA,CAASE,CAAS,CAC7B,CAAA,CACA,GAAA,CAAmBV,CAAAA,CAAmB,CAClC,IAAMQ,CAAAA,CAAW,IAAA,CAEjB,GAAI,CAACA,CAAAA,CAASK,CAAO,CAAA,CAAG,CACpBL,CAAAA,CAASE,CAAS,CAAA,CAAIV,CAAAA,CACtBQ,CAAAA,CAASK,CAAO,CAAA,CAAI,IAAA,CACpB,MACJ,CAEA,IAAMZ,CAAAA,CAAWO,CAAAA,CAASE,CAAS,CAAA,CAE/BT,CAAAA,GAAaD,CAAAA,GACbQ,CAAAA,CAASE,CAAS,CAAA,CAAIV,CAAAA,CAGlB,OAAOQ,CAAAA,CAAS,sBAAA,EAA2B,UAAA,EAC3CA,CAAAA,CAAS,wBAAuB,CAIhC,OAAOA,CAAAA,CAAS,gBAAA,EAAqB,UAAA,EACrCA,CAAAA,CAAS,gBAAA,CAAiBD,CAAAA,CAAaP,CAAAA,CAAUC,CAAQ,CAAA,CAIzDO,CAAAA,CAAS,UAAA,EAAc,OAAOA,EAAS,MAAA,EAAW,UAAA,EAClDA,CAAAA,CAAS,MAAA,EAAO,EAG5B,CAAA,CACA,UAAA,CAAY,IAAA,CACZ,YAAA,CAAc,IAClB,CAAC,EACL,CAoBO,SAASM,GACZC,CAAAA,CACAT,CAAAA,CACAU,CAAAA,CACO,CAEP,GAAIV,CAAAA,EAAW,OAAOA,CAAAA,EAAY,QAAA,EAAY,MAAA,GAAUA,CAAAA,CAAS,CAC7D,IAAMW,CAAAA,CAAMX,CAAAA,CACZ,GAAIW,CAAAA,CAAI,IAAA,GAAS,QAAA,CACb,MAAM,IAAI,KAAA,CAAM,uCAAuC,CAAA,CAG3D,IAAMC,CAAAA,CAAiBH,CAAAA,CACjBR,CAAAA,CAAcU,CAAAA,CAAI,IAAA,CAClBE,EAAW,CAAA,gBAAA,EAAmBZ,CAAW,CAAA,CAAA,CACzCa,CAAAA,CAAW,CAAA,gBAAA,EAAmBb,CAAW,CAAA,CAAA,CAE/C,OAAO,UAA4B,CAC/B,IAAMC,CAAAA,CAAW,IAAA,CAEjB,OAAIA,EAASY,CAAQ,CAAA,GAAM,MAAA,GACvBZ,CAAAA,CAASY,CAAQ,CAAA,CAAI,IAAA,CAAA,CAIrBZ,CAAAA,CAASY,CAAQ,CAAA,GAAM,IAAA,GACvBZ,CAAAA,CAASW,CAAQ,CAAA,CAAID,EAAe,IAAA,CAAK,IAAI,CAAA,CAC7CV,CAAAA,CAASY,CAAQ,CAAA,CAAI,KAAA,CAAA,CAGlBZ,CAAAA,CAASW,CAAQ,CAC5B,CACJ,CAGA,IAAMZ,CAAAA,CAAcD,CAAAA,CACpB,GAAI,CAACU,CAAAA,CACD,MAAM,IAAI,KAAA,CAAM,0CAA0C,CAAA,CAG9D,IAAME,CAAAA,CAAiBF,CAAAA,CAAW,GAAA,CAElC,GAAI,CAACE,CAAAA,CACD,MAAM,IAAI,KAAA,CAAM,uCAAuC,CAAA,CAG3D,IAAMC,CAAAA,CAAW,CAAA,gBAAA,EAAmBZ,CAAW,CAAA,CAAA,CACzCa,CAAAA,CAAW,CAAA,gBAAA,EAAmBb,CAAW,CAAA,CAAA,CAE/C,OAAO,CACH,GAAA,EAAmB,CACf,IAAMC,CAAAA,CAAW,IAAA,CAEjB,OAAIA,CAAAA,CAASY,CAAQ,CAAA,GAAM,MAAA,GACvBZ,CAAAA,CAASY,CAAQ,CAAA,CAAI,IAAA,CAAA,CAIrBZ,EAASY,CAAQ,CAAA,GAAM,IAAA,GACvBZ,CAAAA,CAASW,CAAQ,CAAA,CAAID,CAAAA,CAAe,IAAA,CAAK,IAAI,CAAA,CAC7CV,CAAAA,CAASY,CAAQ,CAAA,CAAI,KAAA,CAAA,CAGlBZ,CAAAA,CAASW,CAAQ,CAC5B,CAAA,CACA,UAAA,CAAYH,CAAAA,CAAW,UAAA,CACvB,YAAA,CAAcA,CAAAA,CAAW,YAC7B,CACJ,CAMO,SAASK,EAAAA,CAAMtB,CAAAA,CAAsB,CAUxC,SAASuB,CAAAA,CACLC,CAAAA,CACAjB,CAAAA,CACAU,CAAAA,CACyB,CAEzB,GAAIV,CAAAA,EAAW,OAAOA,CAAAA,EAAY,QAAA,EAAY,MAAA,GAAUA,CAAAA,CAAS,CAC7D,GAAIA,CAAAA,CAAQ,IAAA,GAAS,QAAA,CACjB,MAAM,IAAI,KAAA,CAAM,oCAAoC,CAAA,CAGxD,IAAMH,CAAAA,CAAaG,CAAAA,CAAQ,IAAA,CAE3BA,CAAAA,CAAQ,cAAA,CAAe,UAAwB,CAC3C,IAAME,CAAAA,CAAW,IAAA,CACZA,CAAAA,CAAS,WAAA,CAAY,YAAA,GACtBA,CAAAA,CAAS,WAAA,CAAY,YAAA,CAAe,EAAC,CAAA,CAEpCA,CAAAA,CAAS,WAAA,CAAY,YAAA,CAAaT,CAAY,CAAA,GAC/CS,CAAAA,CAAS,WAAA,CAAY,YAAA,CAAaT,CAAY,CAAA,CAAI,EAAC,CAAA,CAElDS,CAAAA,CAAS,WAAA,CAAY,YAAA,CAAaT,CAAY,CAAA,CAAE,QAAA,CAASI,CAAU,CAAA,EACpEK,EAAS,WAAA,CAAY,YAAA,CAAaT,CAAY,CAAA,CAAE,IAAA,CAAKI,CAAU,EAEvE,CAAC,CAAA,CAED,MACJ,CAGA,IAAMA,CAAAA,CAAaG,CAAAA,CACnB,GAAI,CAACU,CAAAA,CACD,MAAM,IAAI,KAAA,CAAM,uCAAuC,CAAA,CAI3D,IAAMJ,CAAAA,CADSW,CAAAA,CAC0D,WAAA,CACzE,OAAKX,CAAAA,CAAkB,YAAA,GACnBA,EAAkB,YAAA,CAAe,EAAC,CAAA,CAEjCA,CAAAA,CAAkB,YAAA,CAAab,CAAY,CAAA,GAC5Ca,CAAAA,CAAkB,YAAA,CAAab,CAAY,CAAA,CAAI,EAAC,CAAA,CAE/Ca,CAAAA,CAAkB,YAAA,CAAab,CAAY,CAAA,CAAE,QAAA,CAASI,CAAU,CAAA,EACjES,CAAAA,CAAkB,YAAA,CAAab,CAAY,CAAA,CAAE,IAAA,CAAKI,CAAU,CAAA,CAGzDa,CACX,CAEA,OAAOM,CACX,CC1TO,IAAME,CAAAA,CAAN,KAA2B,CAK9B,WAAA,CAAYC,CAAAA,CAAiB,CAH7B,IAAA,CAAQ,YAAA,CAAe,IAAI,GAAA,CAIvB,IAAA,CAAK,MAAA,CAASA,CAAAA,CACd,IAAA,CAAK,aAAA,CAAgBA,EACzB,CAEA,IAAI,KAAA,EAAW,CACX,OAAO,IAAA,CAAK,MAChB,CAEA,IAAI,KAAA,CAAMzB,CAAAA,CAAa,CACf,IAAA,CAAK,MAAA,GAAWA,CAAAA,GAChB,IAAA,CAAK,MAAA,CAASA,CAAAA,CACd,IAAA,CAAK,OAAA,EAAQ,EAErB,CAEA,SAAA,CAAU0B,CAAAA,CAA8C,CACpD,IAAA,CAAK,YAAA,CAAa,GAAA,CAAIA,CAAU,CAAA,CAGhC,GAAI,CACAA,CAAAA,CAAW,IAAA,CAAK,MAAM,EAC1B,CAAA,MAASvE,CAAAA,CAAO,CACZ,OAAA,CAAQ,KAAA,CAAM,2BAAA,CAA6BA,CAAK,EAEpD,CAGA,OAAO,IAAM,CACT,IAAA,CAAK,YAAA,CAAa,MAAA,CAAOuE,CAAU,EACvC,CACJ,CAEA,KAAA,EAAc,CACV,IAAA,CAAK,KAAA,CAAQ,IAAA,CAAK,cACtB,CAEA,MAAA,CAAO7D,CAAAA,CAA+B,CAClC,IAAA,CAAK,KAAA,CAAQA,CAAAA,CAAQ,KAAK,MAAM,EACpC,CAEQ,OAAA,EAAgB,CACpB,IAAA,IAAW6D,CAAAA,IAAc,IAAA,CAAK,YAAA,CAC1B,GAAI,CACAA,CAAAA,CAAW,IAAA,CAAK,MAAM,EAC1B,CAAA,MAASvE,CAAAA,CAAO,CACZ,OAAA,CAAQ,KAAA,CAAM,2BAAA,CAA6BA,CAAK,EAEpD,CAER,CAEA,IAAI,eAAA,EAA0B,CAC1B,OAAO,IAAA,CAAK,aAAa,IAC7B,CACJ,EAKO,SAASwE,EAAAA,CAAiBF,CAAAA,CAA6B,CAC1D,OAAO,IAAID,CAAAA,CAAQC,CAAY,CACnC,CAEO,IAAMG,EAAAA,CAAN,cAA0BvE,CAA4B,CACzD,OAAA,EAAgB,CAEZ,IAAA,CAAK,KAAA,CAAM,OAAA,CAAQ,KAAA,CAAQ,IAAA,CAAK,KAAA,CAAM,MAC1C,CAEA,QAAA,EAAiB,CAEb,KAAK,KAAA,CAAM,OAAA,CAAQ,KAAA,CAAQ,IAAA,CAAK,KAAA,CAAM,MAC1C,CAEA,SAAA,EAAkB,CAGlB,CAEA,MAAA,EAAgB,CACZ,IAAMwE,CAAAA,CAAW,KAAA,CAAM,OAAA,CAAQ,IAAA,CAAK,KAAA,CAAM,QAAQ,CAAA,CAC5C,IAAA,CAAK,KAAA,CAAM,QAAA,CACX,CAAC,IAAA,CAAK,KAAA,CAAM,QAAQ,CAAA,CAE1B,OAAOC,IAAAA;AAAA;AAAA,oBAAA,EAEGD,CAAQ;AAAA;AAAA,YAAA,CAGtB,CACJ,EAMO,SAASE,EAAAA,CAAczB,CAAAA,CAAqB0B,CAAAA,CAAyB,CAExE,IAAM/D,CAAAA,CAAcqC,CAAAA,CAAQ,SAAA,CAAU,IAAM,CACpC0B,CAAAA,CAAU,SAAA,EACVA,CAAAA,CAAU,MAAA,GAElB,CAAC,CAAA,CAGD,OAAAA,CAAAA,CAAU,SAAA,CAAU,IAAM/D,CAAW,CAAA,CAE9BqC,CAAAA,CAAQ,KACnB,KAKa2B,EAAAA,CAAN,KAAyD,CAG5D,WAAA,CAAYC,CAAAA,CAAkB,CAF9B,IAAA,CAAQ,QAAA,CAAW,IAAI,GAAA,CAGnB,IAAA,GAAW,CAACnE,CAAAA,CAAKwB,CAAK,CAAA,GAAK,MAAA,CAAO,OAAA,CAAQ2C,CAAa,CAAA,CACnD,IAAA,CAAK,QAAA,CAAS,GAAA,CAAInE,CAAAA,CAAgB,IAAIyD,CAAAA,CAAQjC,CAAK,CAAmC,EAE9F,CAEA,GAAA,CAAuBxB,EAAuB,CAC1C,IAAMuC,CAAAA,CAAU,IAAA,CAAK,QAAA,CAAS,GAAA,CAAIvC,CAAG,CAAA,CACrC,GAAI,CAACuC,CAAAA,CACD,MAAM,IAAI,KAAA,CAAM,CAAA,aAAA,EAAgB,MAAA,CAAOvC,CAAG,CAAC,CAAA,WAAA,CAAa,CAAA,CAE5D,OAAOuC,CACX,CAEA,GAAA,CAAuBvC,CAAAA,CAAQwB,CAAAA,CAAmB,CAC9C,IAAMe,CAAAA,CAAU,IAAA,CAAK,SAAS,GAAA,CAAIvC,CAAG,CAAA,CACjCuC,CAAAA,GACCA,CAAAA,CAAqC,KAAA,CAAQf,CAAAA,EAEtD,CAEA,SAAA,CACIxB,CAAAA,CACA2D,CAAAA,CACU,CACV,IAAMpB,CAAAA,CAAU,IAAA,CAAK,QAAA,CAAS,GAAA,CAAIvC,CAAG,CAAA,CACrC,GAAI,CAACuC,CAAAA,CACD,MAAM,IAAI,KAAA,CAAM,CAAA,aAAA,EAAgB,MAAA,CAAOvC,CAAG,CAAC,CAAA,WAAA,CAAa,EAE5D,OAAQuC,CAAAA,CAAqC,SAAA,CAAUoB,CAAU,CACrE,CAEA,KAAA,EAAc,CACV,IAAA,IAAWpB,CAAAA,IAAW,IAAA,CAAK,QAAA,CAAS,MAAA,EAAO,CACvCA,CAAAA,CAAQ,KAAA,GAEhB,CACJ,EAKO,SAAS6B,EAAAA,CACZD,CAAAA,CACkB,CAClB,OAAO,IAAID,EAAAA,CAAgBC,CAAa,CAC5C,CC9KA,IAAIE,EAAqC,IAAA,CACrCC,CAAAA,CAA2B,CAAA,CACzBC,EAAAA,CAAa,IAAI,OAAA,CAWhB,SAASC,EAAAA,CAAeP,CAAAA,CAA4B,CACvDI,CAAAA,CAAmBJ,CAAAA,CACnBK,CAAAA,CAAmB,EACvB,CAKO,SAASG,EAAAA,EAAyB,CACrCJ,CAAAA,CAAmB,IAAA,CACnBC,CAAAA,CAAmB,EACvB,CAKA,SAASI,CAAAA,CAAcT,CAAAA,CAAmC,CACtD,OAAKM,EAAAA,CAAW,GAAA,CAAIN,CAAS,CAAA,EACzBM,EAAAA,CAAW,GAAA,CAAIN,CAAAA,CAAW,EAAE,CAAA,CAEzBM,EAAAA,CAAW,GAAA,CAAIN,CAAS,CACnC,CAOO,SAASU,CAAAA,CAAYjC,CAAAA,CAA4E,CACpG,GAAI,CAAC2B,CAAAA,CACD,MAAM,IAAI,KAAA,CAAM,4CAA4C,CAAA,CAGhE,IAAMJ,CAAAA,CAAYI,CAAAA,CACZO,CAAAA,CAAYN,CAAAA,EAAAA,CACZO,CAAAA,CAASH,EAAcT,CAAS,CAAA,CAGlCY,CAAAA,CAAOD,CAAS,CAAA,GAAM,MAAA,GACtBC,CAAAA,CAAOD,CAAS,CAAA,CAAI,CAChB,KAAA,CAAO,OAAOlC,CAAAA,EAAiB,UAAA,CAAcA,CAAAA,EAAyB,CAAIA,CAC9E,CAAA,CAAA,CAGJ,IAAMoC,CAAAA,CAAY7C,CAAAA,EAAmC,CACjD,IAAMI,CAAAA,CAAQwC,CAAAA,CAAOD,CAAS,CAAA,CACxBG,CAAAA,CAAY,OAAO9C,CAAAA,EAAa,WAC/BA,CAAAA,CAA4BI,CAAAA,CAAM,KAAU,CAAA,CAC7CJ,CAAAA,CAEFI,CAAAA,CAAM,KAAA,GAAU0C,CAAAA,GAChB1C,CAAAA,CAAM,KAAA,CAAQ0C,CAAAA,CACdd,CAAAA,CAAU,MAAA,EAAO,EAEzB,CAAA,CAEA,OAAO,CAACY,CAAAA,CAAOD,CAAS,CAAA,CAAE,KAAA,CAAYE,CAAQ,CAClD,CAKO,SAASE,CAAAA,CACZC,CAAAA,CACA3E,CAAAA,CACI,CACJ,GAAI,CAAC+D,CAAAA,CACD,MAAM,IAAI,KAAA,CAAM,6CAA6C,CAAA,CAGjE,IAAMJ,CAAAA,CAAYI,CAAAA,CACZO,CAAAA,CAAYN,CAAAA,EAAAA,CACZO,CAAAA,CAASH,CAAAA,CAAcT,CAAS,CAAA,CAEhCvE,CAAAA,CAAYmF,CAAAA,CAAOD,CAAS,CAAA,CAGlC,GAFmB,CAAClF,CAAAA,EAAa,CAACY,CAAAA,EAAQ,CAAC4E,EAAAA,CAAaxF,CAAAA,CAAU,IAAA,CAAMY,CAAI,CAAA,CAE5D,CAEZ,GAAIZ,CAAAA,EAAW,KAAA,EAAS,OAAOA,CAAAA,CAAU,KAAA,EAAU,UAAA,CAC/C,GAAI,CACCA,CAAAA,CAAU,KAAA,GACf,CAAA,MAASN,CAAAA,CAAO,CACZ,OAAA,CAAQ,KAAA,CAAM,0BAAA,CAA4BA,CAAK,EACnD,CAIJ,OAAA,CAAQ,OAAA,EAAQ,CAAE,IAAA,CAAK,IAAM,CACzB,GAAI,CACA,IAAM+F,EAAUF,CAAAA,EAAO,CAGvBJ,CAAAA,CAAOD,CAAS,CAAA,CAAI,CAChB,KAAA,CAAOO,CAAAA,CACP,IAAA,CAAM7E,CAAAA,CAAO,CAAC,GAAGA,CAAI,CAAA,CAAI,KAAA,CAC7B,EACJ,CAAA,MAASlB,CAAAA,CAAO,CACZ,OAAA,CAAQ,KAAA,CAAM,kBAAA,CAAoBA,CAAK,EAC3C,CACJ,CAAC,EACL,CACJ,CAKO,SAASgG,GACZC,CAAAA,CACA/E,CAAAA,CACC,CACD,GAAI,CAAC+D,CAAAA,CACD,MAAM,IAAI,KAAA,CAAM,2CAA2C,CAAA,CAG/D,IAAMO,CAAAA,CAAYN,CAAAA,EAAAA,CACZO,CAAAA,CAASH,CAAAA,CAAcL,CAAgB,CAAA,CAEvC3E,CAAAA,CAAYmF,CAAAA,CAAOD,CAAS,CAAA,CAGlC,OAAA,CAFmB,CAAClF,CAAAA,EAAa,CAACwF,EAAAA,CAAaxF,CAAAA,CAAU,IAAA,CAAMY,CAAI,KAG/DuE,CAAAA,CAAOD,CAAS,CAAA,CAAI,CAChB,KAAA,CAAOS,CAAAA,EAAQ,CACf,IAAA,CAAM,CAAC,GAAG/E,CAAI,CAClB,CAAA,CAAA,CAGGuE,CAAAA,CAAOD,CAAS,CAAA,CAAE,KAC7B,CAKO,SAASU,EAAAA,CACZpG,CAAAA,CACAoB,CAAAA,CACC,CACD,OAAO8E,EAAAA,CAAQ,IAAMlG,CAAAA,CAAUoB,CAAI,CACvC,CAKO,SAASiF,EAAAA,CAAU7C,CAAAA,CAAiC,CACvD,GAAI,CAAC2B,CAAAA,CACD,MAAM,IAAI,KAAA,CAAM,0CAA0C,CAAA,CAG9D,IAAMO,CAAAA,CAAYN,CAAAA,EAAAA,CACZO,CAAAA,CAASH,CAAAA,CAAcL,CAAgB,CAAA,CAE7C,OAAIQ,CAAAA,CAAOD,CAAS,CAAA,GAAM,MAAA,GACtBC,CAAAA,CAAOD,CAAS,CAAA,CAAI,CAChB,KAAA,CAAO,CAAE,OAAA,CAASlC,CAAa,CACnC,CAAA,CAAA,CAGGmC,CAAAA,CAAOD,CAAS,CAAA,CAAE,KAC7B,CAKO,SAASY,EAAAA,CACZC,CAAAA,CACAjG,CAAAA,CACwB,CACxB,GAAM,CAAC6C,CAAAA,CAAOyC,CAAQ,CAAA,CAAIH,CAAAA,CAASnF,CAAY,CAAA,CAEzCkG,CAAAA,CAAWJ,EAAAA,CAAaK,CAAAA,EAAoB,CAC9Cb,CAAAA,CAASpF,CAAAA,EAAa+F,CAAAA,CAAQ/F,CAAAA,CAAWiG,CAAW,CAAC,EACzD,EAAG,CAACF,CAAO,CAAC,CAAA,CAEZ,OAAO,CAACpD,CAAAA,CAAOqD,CAAQ,CAC3B,CAOO,SAASE,EAAAA,CACZ5F,CAAAA,CACA0C,CAAAA,CAC0C,CAE1C,GAAM,CAACmD,CAAAA,CAAaC,CAAc,CAAA,CAAInB,CAAAA,CAAY,IAAM,CACpD,GAAI,CACA,IAAMoB,CAAAA,CAAO,MAAA,CAAO,YAAA,CAAa,OAAA,CAAQ/F,CAAG,CAAA,CAC5C,OAAO+F,CAAAA,CAAO,IAAA,CAAK,KAAA,CAAMA,CAAI,CAAA,CAASrD,CAC1C,CAAA,MAAStD,CAAAA,CAAO,CACZ,OAAA,OAAA,CAAQ,KAAA,CAAM,kCAAA,CAAoCA,CAAK,CAAA,CAChDsD,CACX,CACJ,CAAC,CAAA,CAoBD,OAAO,CAACmD,CAAAA,CAjBU5D,CAAAA,EAAmC,CACjD6D,CAAAA,CAAgBE,CAAAA,EAAiB,CAC7B,IAAMC,CAAAA,CAAehE,aAAoB,QAAA,CACnCA,CAAAA,CAAS+D,CAAS,CAAA,CAClB/D,CAAAA,CAGN,GAAI,CACA,MAAA,CAAO,YAAA,CAAa,OAAA,CAAQjC,CAAAA,CAAK,IAAA,CAAK,SAAA,CAAUiG,CAAY,CAAC,EACjE,CAAA,MAAS7G,CAAAA,CAAO,CACZ,OAAA,CAAQ,KAAA,CAAM,+BAAA,CAAiCA,CAAK,EACxD,CAEA,OAAO6G,CACX,CAAC,EACL,CAE6B,CACjC,CAKO,SAASC,EAAAA,CAAe1E,CAAAA,CAAUd,CAAAA,CAAkB,CACvD,GAAM,CAACyF,CAAAA,CAAgBC,CAAiB,CAAA,CAAIzB,CAAAA,CAASnD,CAAK,CAAA,CAE1D,OAAAwD,CAAAA,CAAU,IAAM,CAEZ,IAAMqB,CAAAA,CAAU,UAAA,CAAW,IAAM,CAC7BD,CAAAA,CAAkB5E,CAAK,EAC3B,CAAA,CAAGd,CAAK,CAAA,CAGR,OAAO,IAAM,CACT,YAAA,CAAa2F,CAAO,EACxB,CACJ,CAAA,CAAG,CAAC7E,CAAAA,CAAOd,CAAK,CAAC,CAAA,CAEVyF,CACX,CAKO,SAASG,EAAAA,CAAe9E,CAAAA,CAAyB,CACpD,IAAM+E,CAAAA,CAAMhB,EAAAA,CAAsB,MAAS,CAAA,CAG3C,OAAAP,CAAAA,CAAU,IAAM,CACZuB,CAAAA,CAAI,OAAA,CAAU/E,EAClB,CAAC,EAGiB+E,CAAAA,CAAI,OAG1B,CAKO,SAASC,EAAAA,CAAU9D,CAAAA,CAAwB,KAAA,CAA8B,CAC5E,GAAM,CAAClB,CAAAA,CAAOiF,CAAQ,CAAA,CAAI9B,CAAAA,CAASjC,CAAY,CAAA,CAEzCgE,CAAAA,CAASpB,EAAAA,CAAY,IAAM,CAC7BmB,CAAAA,CAASE,CAAAA,EAAK,CAACA,CAAC,EACpB,CAAA,CAAG,EAAE,CAAA,CAEL,OAAO,CAACnF,CAAAA,CAAOkF,CAAM,CACzB,CAKO,SAASE,EAAAA,CAAY1H,CAAAA,CAAsBwB,CAAAA,CAA4B,CAC1E,IAAMmG,CAAAA,CAAgBtB,EAAAA,CAAOrG,CAAQ,CAAA,CAErC8F,CAAAA,CAAU,IAAM,CACZ6B,CAAAA,CAAc,OAAA,CAAU3H,EAC5B,CAAA,CAAG,CAACA,CAAQ,CAAC,CAAA,CAEb8F,CAAAA,CAAU,IAAM,CACZ,GAAItE,CAAAA,GAAU,KAAM,OAEpB,IAAMzC,CAAAA,CAAK,WAAA,CAAY,IAAM4I,CAAAA,CAAc,OAAA,EAAQ,CAAGnG,CAAK,CAAA,CAE3D,OAAO,IAAM,aAAA,CAAczC,CAAE,CACjC,CAAA,CAAG,CAACyC,CAAK,CAAC,EACd,CAKO,SAASoG,EAAAA,CACZC,CAAAA,CACAC,CAAAA,CAMF,CACE,GAAM,CAACC,CAAAA,CAAMC,CAAO,EAAIvC,CAAAA,CAAmB,IAAI,CAAA,CACzC,CAACwC,CAAAA,CAASC,CAAU,CAAA,CAAIzC,CAAAA,CAAS,IAAI,CAAA,CACrC,CAACvF,CAAAA,CAAOiI,CAAQ,CAAA,CAAI1C,CAAAA,CAAuB,IAAI,CAAA,CAE/C2C,CAAAA,CAAYhC,EAAAA,CAAY,SAAY,CACtC8B,CAAAA,CAAW,IAAI,CAAA,CACfC,CAAAA,CAAS,IAAI,CAAA,CAEb,GAAI,CACA,IAAME,EAAW,MAAM,KAAA,CAAMR,CAAAA,CAAKC,CAAO,CAAA,CACzC,GAAI,CAACO,CAAAA,CAAS,EAAA,CACV,MAAM,IAAI,KAAA,CAAM,CAAA,oBAAA,EAAuBA,CAAAA,CAAS,MAAM,CAAA,CAAE,CAAA,CAE5D,IAAMC,CAAAA,CAAO,MAAMD,CAAAA,CAAS,IAAA,EAAK,CACjCL,CAAAA,CAAQM,CAAI,EAChB,CAAA,MAASC,CAAAA,CAAG,CACRJ,CAAAA,CAASI,CAAU,EACvB,CAAA,OAAE,CACEL,CAAAA,CAAW,KAAK,EACpB,CACJ,CAAA,CAAG,CAACL,CAAG,CAAC,CAAA,CAER,OAAA/B,CAAAA,CAAU,IAAM,CACZsC,CAAAA,GACJ,CAAA,CAAG,CAACA,CAAS,CAAC,CAAA,CAEP,CAAE,IAAA,CAAAL,CAAAA,CAAM,OAAA,CAAAE,CAAAA,CAAS,KAAA,CAAA/H,CAAAA,CAAO,QAASkI,CAAU,CACtD,CAKO,SAASI,EAAAA,EAAmD,CAC/D,GAAM,CAACC,CAAAA,CAAMC,CAAO,CAAA,CAAIjD,CAAAA,CAAS,CAC7B,KAAA,CAAO,MAAA,CAAO,UAAA,CACd,MAAA,CAAQ,MAAA,CAAO,WACnB,CAAC,CAAA,CAED,OAAAK,CAAAA,CAAU,IAAM,CACZ,IAAM6C,CAAAA,CAAe,IAAM,CACvBD,CAAAA,CAAQ,CACJ,KAAA,CAAO,MAAA,CAAO,UAAA,CACd,MAAA,CAAQ,MAAA,CAAO,WACnB,CAAC,EACL,CAAA,CAEA,OAAA,MAAA,CAAO,gBAAA,CAAiB,QAAA,CAAUC,CAAY,CAAA,CACvC,IAAM,MAAA,CAAO,mBAAA,CAAoB,QAAA,CAAUA,CAAY,CAClE,CAAA,CAAG,EAAE,CAAA,CAEEF,CACX,CAKO,SAASG,EAAAA,CACZnG,CAAAA,CACA0E,CAAAA,CACAzH,EAAgC,MAAA,CAC5B,CACJ,IAAMmJ,CAAAA,CAAexC,EAAAA,CAAOc,CAAO,CAAA,CAEnCrB,CAAAA,CAAU,IAAM,CACZ+C,CAAAA,CAAa,OAAA,CAAU1B,EAC3B,CAAA,CAAG,CAACA,CAAO,CAAC,CAAA,CAEZrB,CAAAA,CAAU,IAAM,CAEZ,GAAI,EADgBpG,CAAAA,EAAW,kBAAA,GAAsBA,CAAAA,CAAAA,CACnC,OAElB,IAAMoJ,CAAAA,CAAiBC,CAAAA,EAAiB,CACpCF,CAAAA,CAAa,OAAA,CAAQE,CAA0B,EACnD,CAAA,CAEA,OAAArJ,CAAAA,CAAQ,gBAAA,CAAiB+C,CAAAA,CAAWqG,CAAa,CAAA,CAE1C,IAAM,CACTpJ,CAAAA,CAAQ,mBAAA,CAAoB+C,CAAAA,CAAWqG,CAAa,EACxD,CACJ,CAAA,CAAG,CAACrG,CAAAA,CAAW/C,CAAO,CAAC,EAC3B,CAMO,SAASsJ,EAAAA,CACZzH,CAAAA,CACA0H,CAAAA,CAC+B,CAC/B,MAAMC,CAAAA,SAA4B9I,CAAa,CAC3C,MAAA,EAAgB,CACZkF,EAAAA,CAAe,IAAI,CAAA,CACnB,GAAI,CACA,OAAO/D,CAAAA,CAAG,IAAA,CAAK,KAAK,CACxB,CAAA,OAAE,CACEgE,EAAAA,GACJ,CACJ,CACJ,CAEA,OAAI0D,CAAAA,EACA,MAAA,CAAO,cAAA,CAAeC,CAAAA,CAAqB,MAAA,CAAQ,CAAE,KAAA,CAAOD,CAAY,CAAC,CAAA,CAGtEC,CACX,CAQA,SAASlD,EAAAA,CAAarD,CAAAA,CAAiCC,CAAAA,CAA8B,CACjF,GAAI,CAACD,CAAAA,EAAYA,CAAAA,CAAS,MAAA,GAAWC,CAAAA,CAAS,MAAA,CAC1C,OAAO,MAAA,CAGX,IAAA,IAAS9C,CAAAA,CAAI,CAAA,CAAGA,CAAAA,CAAI6C,CAAAA,CAAS,MAAA,CAAQ7C,CAAAA,EAAAA,CACjC,GAAI6C,CAAAA,CAAS7C,CAAC,CAAA,GAAM8C,CAAAA,CAAS9C,CAAC,CAAA,CAC1B,OAAO,MAAA,CAIf,OAAO,KACX,CClbO,IAAMqJ,EAAAA,CAAN,KAAa,CAAb,WAAA,EAAA,CACH,IAAA,CAAQ,MAAA,CAAwB,EAAC,CACjC,IAAA,CAAQ,YAAA,CAA6B,IAAA,CACrC,IAAA,CAAQ,IAAA,CAA2B,SAAA,CACnC,IAAA,CAAQ,IAAA,CAAe,GAAA,CACvB,IAAA,CAAQ,eAAA,CAAqC,EAAC,CAC9C,IAAA,CAAQ,cAAA,CAAuD,EAAC,CAChE,IAAA,CAAQ,gBAAA,CAAqC,IAAA,CAC7C,IAAA,CAAQ,YAAA,CAAmC,IAAA,CAC3C,IAAA,CAAQ,YAAA,CAAwB,KAAA,CAChC,IAAA,CAAQ,cAAA,CAAgD,MAAA,CACxD,IAAA,CAAQ,eAAA,CAAuC,IAAA,CAC/C,IAAA,CAAQ,aAAA,CAA+B,KAAA,CAKvC,IAAA,CACIC,CAAAA,CACAC,CAAAA,CAA2B,SAAA,CAC3BC,CAAAA,CAAe,GAAA,CACfC,CAAAA,CAAgD,OAC5C,CACJ,IAAA,CAAK,MAAA,CAASH,CAAAA,CACd,IAAA,CAAK,IAAA,CAAOC,CAAAA,CACZ,IAAA,CAAK,IAAA,CAAOC,CAAAA,CAAK,QAAA,CAAS,GAAG,CAAA,CAAIA,CAAAA,CAAK,KAAA,CAAM,CAAA,CAAG,EAAE,CAAA,CAAIA,CAAAA,CACrD,IAAA,CAAK,cAAA,CAAiBC,CAAAA,CAEtB,IAAA,CAAK,kBAAA,EAAmB,CACxB,IAAA,CAAK,YAAA,GACT,CAKA,MAAM,KAAKC,CAAAA,CAAcrG,CAAAA,CAAgD,CACjE,IAAA,CAAK,YAAA,GAEL,IAAA,CAAK,YAAA,CAAe,KAAA,CAAA,CAIxB,IAAA,CAAK,aAAA,CAAgBqG,CAAAA,CAEjB,IAAA,CAAK,IAAA,GAAS,SAAA,CACd,MAAA,CAAO,OAAA,CAAQ,SAAA,CAAUrG,CAAAA,EAAS,EAAC,CAAG,EAAA,CAAI,IAAA,CAAK,cAAA,CAAeqG,CAAI,CAAC,CAAA,CAEnE,MAAA,CAAO,QAAA,CAAS,IAAA,CAAOA,CAAAA,CAG3B,MAAM,IAAA,CAAK,YAAA,GACf,CAKA,MAAM,OAAA,CAAQA,CAAAA,CAAcrG,CAAAA,CAAgD,CACxE,OAAA,IAAA,CAAK,aAAA,CAAgBqG,CAAAA,CAEjB,IAAA,CAAK,IAAA,GAAS,SAAA,CACd,MAAA,CAAO,OAAA,CAAQ,YAAA,CAAarG,CAAAA,EAAS,EAAC,CAAG,EAAA,CAAI,IAAA,CAAK,cAAA,CAAeqG,CAAI,CAAC,CAAA,CAEtE,MAAA,CAAO,QAAA,CAAS,IAAA,CAAOA,EAGpB,IAAA,CAAK,YAAA,EAChB,CAEA,IAAA,EAAa,CAAE,MAAA,CAAO,OAAA,CAAQ,IAAA,GAAQ,CACtC,OAAA,EAAgB,CAAE,MAAA,CAAO,OAAA,CAAQ,OAAA,GAAW,CAC5C,EAAA,CAAGC,CAAAA,CAAqB,CAAE,MAAA,CAAO,OAAA,CAAQ,EAAA,CAAGA,CAAK,EAAG,CAKpD,UAAA,CAAWC,CAAAA,CAA6B,CACpC,KAAK,eAAA,CAAgB,IAAA,CAAKA,CAAI,EAClC,CAEA,SAAA,CAAUA,CAAAA,CAA8C,CACpD,IAAA,CAAK,cAAA,CAAe,IAAA,CAAKA,CAAI,EACjC,CAEA,UAAA,CAAWvC,CAAAA,CAA2B,CAClC,IAAA,CAAK,eAAA,CAAkBA,EAC3B,CAKA,eAAA,EAAgC,CAC5B,OAAO,IAAA,CAAK,YAAA,CAAe,CAAE,GAAG,IAAA,CAAK,YAAa,EAAI,IAC1D,CAEA,QAAA,CAASqC,CAAAA,CAAcG,CAAAA,CAAiB,KAAA,CAAgB,CACpD,OAAK,IAAA,CAAK,YAAA,CACHA,CAAAA,CACD,IAAA,CAAK,YAAA,CAAa,IAAA,GAASH,CAAAA,CAC3B,IAAA,CAAK,YAAA,CAAa,IAAA,CAAK,UAAA,CAAWA,CAAI,CAAA,CAHb,KAInC,CAEA,MAAA,EAAgB,CACZ,OAAOI,aAAAA,CAAc,KAAA,CAAO,CACxB,oBAAA,CAAsB,OACtB,KAAA,CAAO,oBACX,CAAC,CACL,CAEA,QAAA,CAAS3I,CAAAA,CAAuC,CAC5C,OAAO,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK4I,CAAAA,EAAKA,CAAAA,CAAE,IAAA,GAAS5I,CAAI,CAChD,CAEA,MAAM,SAAA,CAAUA,CAAAA,CAAc6I,CAAAA,CAAgD,CAC1E,IAAMC,CAAAA,CAAQ,IAAA,CAAK,QAAA,CAAS9I,CAAI,CAAA,CAChC,GAAI,CAAC8I,CAAAA,CAAO,CACR,OAAA,CAAQ,KAAA,CAAM,CAAA,iBAAA,EAAoB9I,CAAI,CAAA,WAAA,CAAa,CAAA,CACnD,MACJ,CAEA,IAAIuI,CAAAA,CAAOO,CAAAA,CAAM,IAAA,CACjB,GAAID,CAAAA,CACA,IAAA,GAAW,CAAChJ,CAAAA,CAAKwB,CAAK,CAAA,GAAK,MAAA,CAAO,OAAA,CAAQwH,CAAM,CAAA,CAC5CN,CAAAA,CAAOA,CAAAA,CAAK,OAAA,CAAQ,CAAA,CAAA,EAAI1I,CAAG,GAAIwB,CAAK,CAAA,CAI5C,OAAO,IAAA,CAAK,IAAA,CAAKkH,CAAI,CACzB,CAEA,OAAA,CAAQA,CAAAA,CAA4B,CAChC,IAAMQ,CAAAA,CAAe,IAAA,CAAK,WAAA,CAAYR,CAAI,CAAA,CAC1C,GAAI,CAACQ,CAAAA,CAAc,OAAO,IAAA,CAE1B,GAAM,CAAE,KAAA,CAAAD,CAAAA,CAAO,MAAA,CAAAD,CAAO,CAAA,CAAIE,CAAAA,CAC1B,OAAO,CACH,IAAA,CAAAR,CAAAA,CACA,MAAA,CAAAM,CAAAA,CACA,KAAA,CAAO,IAAA,CAAK,WAAA,CAAYN,CAAI,CAAA,CAC5B,IAAA,CAAMO,CAAAA,CAAM,IAAA,EAAQ,EAAC,CACrB,IAAA,CAAMP,CAAAA,CAAK,QAAA,CAAS,GAAG,CAAA,CAAIA,CAAAA,CAAK,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA,CAAI,EAAA,CAChD,IAAA,CAAMO,CAAAA,CAAM,IAChB,CACJ,CAKQ,kBAAA,EAA2B,CAE/B,MAAA,CAAO,gBAAA,CAAiB,UAAA,CAAY,IAAM,CACtC,IAAA,CAAK,aAAA,CAAgB,IAAA,CACrB,IAAA,CAAK,YAAA,GACT,CAAC,CAAA,CAEG,IAAA,CAAK,IAAA,GAAS,MAAA,EACd,MAAA,CAAO,gBAAA,CAAiB,YAAA,CAAc,IAAM,CACxC,IAAA,CAAK,aAAA,CAAgB,IAAA,CACrB,IAAA,CAAK,YAAA,GACT,CAAC,CAAA,CAIL,QAAA,CAAS,gBAAA,CAAiB,OAAA,CAAUxB,CAAAA,EAAM,CACtC,IAAM0B,CAAAA,CAAQ1B,CAAAA,CAAE,MAAA,CAAuB,OAAA,CAAQ,SAAS,CAAA,CAExD,GAAI0B,CAAAA,EAAQ,IAAA,CAAK,oBAAA,CAAqBA,CAAI,CAAA,CAAG,CACzC1B,CAAAA,CAAE,cAAA,EAAe,CACjB,IAAM2B,CAAAA,CAAOD,CAAAA,CAAK,YAAA,CAAa,MAAM,CAAA,CACrC,GAAIC,CAAAA,CAAM,CACN,IAAMV,CAAAA,CAAO,IAAA,CAAK,IAAA,GAAS,MAAA,EAAUU,CAAAA,CAAK,UAAA,CAAW,GAAG,CAAA,CAClDA,CAAAA,CAAK,SAAA,CAAU,CAAC,CAAA,CAChBA,CAAAA,CAAK,OAAA,CAAQ,IAAA,CAAK,IAAA,CAAM,EAAE,CAAA,CAChC,IAAA,CAAK,IAAA,CAAKV,CAAI,EAClB,CACJ,CACJ,CAAC,EACL,CAEQ,oBAAA,CAAqBS,CAAAA,CAAkC,CAE3D,OAAO,CAAC,EADKA,CAAAA,CAAK,YAAA,CAAa,MAAM,CAAA,EAGjCA,CAAAA,CAAK,QAAA,GAAa,MAAA,CAAO,QAAA,CAAS,QAAA,EAClCA,CAAAA,CAAK,MAAA,GAAW,QAAA,EAChB,CAACA,CAAAA,CAAK,YAAA,CAAa,UAAU,CAAA,EAC7BA,CAAAA,CAAK,GAAA,GAAQ,UAAA,CAErB,CAKA,MAAc,YAAA,EAA8B,CACxC,GAAI,CAAA,IAAA,CAAK,YAAA,CAET,MAAK,YAAA,CAAe,IAAA,CAEpB,GAAI,CACA,IAAMT,CAAAA,CAAO,IAAA,CAAK,eAAA,EAAgB,CAC5BQ,CAAAA,CAAe,IAAA,CAAK,WAAA,CAAYR,CAAI,CAAA,CAE1C,GAAI,CAACQ,CAAAA,CAAc,CACf,IAAA,CAAK,eAAA,CAAgBR,CAAI,CAAA,CACzB,MACJ,CAEA,GAAM,CAAE,KAAA,CAAAO,CAAAA,CAAO,MAAA,CAAAD,CAAO,EAAIE,CAAAA,CACpBG,CAAAA,CAAK,IAAA,CAAK,iBAAA,CAAkBX,CAAAA,CAAMM,CAAAA,CAAQC,CAAK,CAAA,CAC/CK,CAAAA,CAAO,IAAA,CAAK,YAAA,EAAgB,IAAA,CAAK,gBAAA,EAAiB,CAIxD,GAAI,CADe,MAAM,IAAA,CAAK,oBAAA,CAAqBL,CAAAA,CAAOI,CAAAA,CAAIC,CAAI,CAAA,CACjD,OAEjB,IAAA,CAAK,YAAA,CAAeD,CAAAA,CAEpB,MAAM,IAAA,CAAK,gBAAA,CAAiBJ,CAAK,CAAA,CACjC,IAAA,CAAK,qBAAA,CAAsBI,CAAAA,CAAIC,CAAI,CAAA,CAE/BL,CAAAA,CAAM,IAAA,EAAM,KAAA,EAAS,OAAOA,CAAAA,CAAM,IAAA,CAAK,KAAA,EAAU,QAAA,GACjD,QAAA,CAAS,KAAA,CAAQA,CAAAA,CAAM,IAAA,CAAK,KAAA,CAAA,CAIhC,IAAA,CAAK,cAAA,CAAe,OAAA,CAAQL,CAAAA,EAAQA,CAAAA,CAAKS,CAAAA,CAAIC,CAAI,CAAC,EAEtD,CAAA,MAASlK,CAAAA,CAAO,CACZ,OAAA,CAAQ,KAAA,CAAM,eAAA,CAAiBA,CAAK,EACxC,CAAA,OAAE,CACE,IAAA,CAAK,YAAA,CAAe,MACxB,CAAA,CACJ,CAKQ,eAAA,CAAgBsJ,CAAAA,CAAoB,CACxC,OAAA,CAAQ,IAAA,CAAK,CAAA,2BAAA,EAA8BA,CAAI,CAAA,CAAE,CAAA,CAEjD,IAAA,CAAK,YAAA,CAAe,CAChB,IAAA,CAAAA,CAAAA,CACA,MAAA,CAAQ,EAAC,CACT,KAAA,CAAO,KAAK,WAAA,EAAY,CACxB,IAAA,CAAM,EAAC,CACP,IAAA,CAAM,MAAA,CAAO,QAAA,CAAS,IAAA,CAAK,SAAA,CAAU,CAAC,CAC1C,CAAA,CAEI,IAAA,CAAK,eAAA,EACL,IAAA,CAAK,eAAA,GAEb,CAKQ,iBAAA,CACJA,CAAAA,CACAM,CAAAA,CACAC,CAAAA,CACK,CACL,OAAO,CACH,IAAA,CAAAP,CAAAA,CACA,MAAA,CAAAM,CAAAA,CACA,MAAO,IAAA,CAAK,WAAA,EAAY,CACxB,IAAA,CAAMC,CAAAA,CAAM,IAAA,EAAQ,EAAC,CACrB,IAAA,CAAM,MAAA,CAAO,QAAA,CAAS,IAAA,CAAK,SAAA,CAAU,CAAC,CAAA,CACtC,IAAA,CAAMA,CAAAA,CAAM,IAChB,CACJ,CAEQ,gBAAA,EAA0B,CAC9B,OAAO,CACH,IAAA,CAAM,EAAA,CACN,MAAA,CAAQ,EAAC,CACT,KAAA,CAAO,EAAC,CACR,IAAA,CAAM,EAAC,CACP,IAAA,CAAM,EACV,CACJ,CAKA,MAAc,oBAAA,CACVA,CAAAA,CACAI,CAAAA,CACAC,CAAAA,CACgB,CAEhB,GAAIL,CAAAA,CAAM,WAAA,EAEF,CADW,MAAM,IAAA,CAAK,SAAA,CAAUA,CAAAA,CAAM,WAAA,CAAaI,CAAAA,CAAIC,CAAI,CAAA,CAClD,OAAO,MAAA,CAIxB,IAAA,IAAWC,CAAAA,IAAS,KAAK,eAAA,CAErB,GAAI,CADW,MAAM,IAAA,CAAK,SAAA,CAAUA,CAAAA,CAAOF,CAAAA,CAAIC,CAAI,CAAA,CACtC,OAAO,MAAA,CAGxB,OAAO,KACX,CAEQ,SAAA,CACJC,CAAAA,CACAF,CAAAA,CACAC,CAAAA,CACgB,CAChB,OAAO,IAAI,OAAA,CAASE,CAAAA,EAAY,CAC5BD,CAAAA,CAAMF,CAAAA,CAAIC,CAAAA,CAAOG,CAAAA,EAA8B,CACvCA,IAAa,KAAA,CACbD,CAAAA,CAAQ,KAAK,CAAA,CACN,OAAOC,CAAAA,EAAa,QAAA,EAC3B,IAAA,CAAK,IAAA,CAAKA,CAAQ,CAAA,CAClBD,CAAAA,CAAQ,KAAK,CAAA,EAEbA,CAAAA,CAAQ,IAAI,EAEpB,CAAC,EACL,CAAC,CACL,CAKA,MAAc,gBAAA,CAAiBP,CAAAA,CAAmC,CAE9D,GAAI,CAAC,IAAA,CAAK,YAAA,GACN,KAAK,YAAA,CAAe,QAAA,CAAS,aAAA,CAAc,6BAA6B,CAAA,CACpE,CAAC,IAAA,CAAK,YAAA,CAAA,CAAc,CACpB,OAAA,CAAQ,IAAA,CAAK,yBAAyB,CAAA,CACtC,MACJ,CAIA,IAAA,CAAK,gBAAA,GACL,IAAA,CAAK,gBAAA,CAAiB,OAAA,EAAQ,CAC9B,IAAA,CAAK,gBAAA,CAAmB,IAAA,CAAA,CAI5B,IAAA,CAAK,YAAA,CAAa,SAAA,CAAY,EAAA,CAE9B,GAAI,CACA,IAAMS,CAAAA,CAAiB,MAAM,IAAA,CAAK,iBAAA,CAAkBT,CAAAA,CAAM,SAAS,CAAA,CAEnE,GAAI,CAACS,CAAAA,EAAkB,OAAOA,CAAAA,EAAmB,UAAA,CAC7C,MAAM,IAAI,KAAA,CAAM,wCAAwC,CAAA,CAG5D,IAAMC,CAAAA,CAAgBD,CAAAA,CAEtB,IAAA,CAAK,gBAAA,CAAmB,IAAIC,CAAAA,CAExB,IAAA,CAAK,gBAAA,EACL,MAAM,IAAA,CAAK,gBAAA,CAAiB,MAAM,IAAA,CAAK,YAAY,EAI3D,CAAA,MAASvK,CAAAA,CAAO,CACZ,MAAA,IAAA,CAAK,YAAA,CAAa6J,CAAAA,CAAM,IAAA,CAAM7J,CAAK,CAAA,CAC7BA,CACV,CACJ,CAKA,MAAc,iBAAA,CACV6E,CAAAA,CACoC,CAIpC,GAAI,OAAOA,CAAAA,EAAc,UAAA,CAAY,CAGjC,IAAM2F,CAAAA,CADe,WAAA,GAAe3F,CAAAA,EAAaA,CAAAA,CAAU,SAAA,CAC7BA,EAAqC,SAAA,CAAY,IAAA,CAG/E,GAFuB2F,CAAAA,EAAS,OAAOA,CAAAA,EAAU,QAAA,EAAY,aAAA,GAAiBA,CAAAA,EAEvDA,CAAAA,CAAmC,WAAA,GAAgB3F,CAAAA,CAEtE,OAAOA,CAAAA,CAKX,GAAI,CACA,IAAMlF,CAAAA,CAAS,MAAOkF,CAAAA,EAAwC,CAe9D,OAXclF,CAAAA,CAAO,QAAA,EACjBA,CAAAA,CAAO,QAAA,EACPA,CAAAA,CAAO,OAAA,EACP,MAAA,CAAO,MAAA,CAAOA,CAAM,CAAA,CAAE,IAAA,CAAM8K,CAAAA,EAA8C,CACtE,GAAI,OAAOA,CAAAA,EAAQ,UAAA,CAAY,OAAO,CAAA,CAAA,CAGtC,IAAMD,CAAAA,CADeC,CAAAA,CACM,SAAA,CAC3B,OAAOD,CAAAA,GAAU,IAAA,EAAQ,OAAOA,CAAAA,EAAU,QAAA,EAAYA,CAAAA,GAAU,KAAA,CAAA,EAAa,aAAA,GAAiBA,CAClG,CAAC,CAAA,EAEW,IACpB,CAAA,MAASxK,CAAAA,CAAO,CACZ,OAAA,OAAA,CAAQ,KAAA,CAAM,gCAAA,CAAkCA,CAAK,CAAA,CAC9C,IACX,CACJ,CAEA,OAAO,IACX,CAKQ,YAAA,CAAasJ,CAAAA,CAActJ,CAAAA,CAAsB,CACrD,GAAI,IAAA,CAAK,YAAA,CAAc,CACnB,IAAM0K,CAAAA,CAAe1K,CAAAA,YAAiB,KAAA,CAAQA,CAAAA,CAAM,OAAA,CAAU,MAAA,CAAOA,CAAK,CAAA,CAC1E,IAAA,CAAK,YAAA,CAAa,SAAA,CAAY;AAAA;AAAA;AAAA;AAAA,mDAAA,EAIOsJ,CAAI,CAAA;AAAA,mDAAA,EACJoB,CAAY,CAAA;AAAA;AAAA,gBAAA,EAGrD,CACJ,CAKQ,qBAAA,CAAsBT,CAAAA,CAAWC,CAAAA,CAAmB,CACxD,GAAID,CAAAA,CAAG,IAAA,CAAM,CACT,IAAMzK,CAAAA,CAAU,QAAA,CAAS,eAAeyK,CAAAA,CAAG,IAAI,CAAA,CAC/C,GAAIzK,CAAAA,CAAS,CACTA,CAAAA,CAAQ,cAAA,CAAe,CAAE,QAAA,CAAU,IAAA,CAAK,cAAe,CAAC,CAAA,CACxD,MACJ,CACJ,CAEIyK,CAAAA,CAAG,IAAA,GAASC,CAAAA,CAAK,IAAA,EACjB,MAAA,CAAO,QAAA,CAAS,CAAE,GAAA,CAAK,CAAA,CAAG,QAAA,CAAU,IAAA,CAAK,cAAe,CAAC,EAEjE,CAKQ,eAAA,EAA0B,CAC9B,GAAI,IAAA,CAAK,aAAA,GAAkB,IAAA,CACvB,OAAO,IAAA,CAAK,aAAA,CAGhB,GAAI,IAAA,CAAK,IAAA,GAAS,OACd,OAAO,MAAA,CAAO,QAAA,CAAS,IAAA,CAAK,SAAA,CAAU,CAAC,CAAA,CAAE,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA,EAAK,GAAA,CAG9D,IAAIZ,EAAO,MAAA,CAAO,QAAA,CAAS,QAAA,CAG3B,OAAA,CAAI,CAACA,CAAAA,EAAQA,CAAAA,GAAS,OAAA,EAAWA,CAAAA,GAAS,aAAA,IACtCA,CAAAA,CAAO,GAAA,CAAA,CAGP,IAAA,CAAK,IAAA,EAAQA,EAAK,UAAA,CAAW,IAAA,CAAK,IAAI,CAAA,GACtCA,CAAAA,CAAOA,CAAAA,CAAK,SAAA,CAAU,IAAA,CAAK,IAAA,CAAK,MAAM,CAAA,CAAA,CAGnCA,CAAAA,EAAQ,GACnB,CAEQ,eAAeA,CAAAA,CAAsB,CACzC,GAAIA,CAAAA,CAAK,UAAA,CAAW,MAAM,CAAA,CAAG,OAAOA,CAAAA,CACpC,IAAMqB,CAAAA,CAAiBrB,CAAAA,CAAK,UAAA,CAAW,GAAG,EAAIA,CAAAA,CAAO,GAAA,CAAMA,CAAAA,CAC3D,OAAO,IAAA,CAAK,IAAA,CAAOqB,CACvB,CAKQ,WAAA,CAAYrB,CAAAA,CAA6E,CAC7F,IAAMsB,CAAAA,CAAYtB,CAAAA,CAAK,MAAM,GAAG,CAAA,CAAE,CAAC,CAAA,CAAE,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA,CAEjD,IAAA,IAAWO,CAAAA,IAAS,IAAA,CAAK,MAAA,CAAQ,CAC7B,IAAMD,CAAAA,CAAS,IAAA,CAAK,UAAA,CAAWC,CAAAA,CAAM,IAAA,CAAMe,CAAS,CAAA,CACpD,GAAIhB,CAAAA,GAAW,IAAA,CACX,OAAO,CAAE,KAAA,CAAAC,CAAAA,CAAO,OAAAD,CAAO,CAE/B,CAEA,OAAO,IACX,CAEQ,UAAA,CAAWiB,CAAAA,CAAiBvB,CAAAA,CAA6C,CAC7E,GAAIuB,CAAAA,GAAY,GAAA,CAAK,OAAO,EAAC,CAC7B,GAAIA,CAAAA,GAAYvB,CAAAA,CAAM,OAAO,EAAC,CAE9B,IAAMwB,CAAAA,CAAuB,EAAC,CACxBC,CAAAA,CAAeF,CAAAA,CAChB,OAAA,CAAQ,MAAO,IAAI,CAAA,CACnB,OAAA,CAAQ,WAAA,CAAa,CAACG,CAAAA,CAAGC,CAAAA,IACtBH,CAAAA,CAAW,IAAA,CAAKG,CAAS,CAAA,CAClB,SAAA,CACV,CAAA,CAECC,CAAAA,CAAQ,IAAI,MAAA,CAAO,CAAA,CAAA,EAAIH,CAAY,CAAA,CAAA,CAAG,CAAA,CACtCI,CAAAA,CAAQ7B,CAAAA,CAAK,KAAA,CAAM4B,CAAK,CAAA,CAE9B,OAAKC,CAAAA,CAEEL,CAAAA,CAAW,MAAA,CAAO,CAAClB,CAAAA,CAAQ7I,CAAAA,CAAMnB,CAAAA,IACpCgK,CAAAA,CAAO7I,CAAI,CAAA,CAAI,kBAAA,CAAmBoK,CAAAA,CAAMvL,CAAAA,CAAI,CAAC,CAAC,CAAA,CACvCgK,CAAAA,CAAAA,CACR,EAA4B,CAAA,CALZ,IAMvB,CAKQ,WAAA,CAAYN,CAAAA,CAAuC,CACvD,IAAM8B,CAAAA,CAAS9B,CAAAA,CACTA,CAAAA,CAAK,QAAA,CAAS,GAAG,CAAA,CAAIA,CAAAA,CAAK,MAAM,GAAG,CAAA,CAAE,CAAC,CAAA,CAAE,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA,CAAI,EAAA,CACxD,MAAA,CAAO,QAAA,CAAS,MAAA,CAAO,SAAA,CAAU,CAAC,CAAA,CAExC,OAAK8B,CAAAA,CAEEA,CAAAA,CAAO,KAAA,CAAM,GAAG,CAAA,CAAE,MAAA,CAAO,CAACC,CAAAA,CAAOC,CAAAA,GAAS,CAC7C,GAAM,CAAC1K,EAAKwB,CAAK,CAAA,CAAIkJ,CAAAA,CAAK,KAAA,CAAM,GAAG,CAAA,CAAE,GAAA,CAAI,kBAAkB,CAAA,CAC3D,OAAI1K,CAAAA,GAAKyK,CAAAA,CAAMzK,CAAG,CAAA,CAAIwB,GAAS,EAAA,CAAA,CACxBiJ,CACX,CAAA,CAAG,EAA4B,CAAA,CANX,EAOxB,CACJ,CAAA,CAEaE,CAAAA,CAAS,IAAItC,GAUnB,SAASuC,GAASlC,CAAAA,CAAcmC,CAAAA,CAAmB,KAAA,CAAa,CACnE,OAAA,CAAQ,GAAA,CAAI,CAAA,cAAA,EAAiBnC,CAAI,CAAA,CAAE,CAAA,CAC/BmC,CAAAA,CACAF,CAAAA,CAAO,OAAA,CAAQjC,CAAI,EAEnBiC,CAAAA,CAAO,IAAA,CAAKjC,CAAI,CAAA,CAIpB,MAAA,CAAO,aAAA,CAAc,IAAI,WAAA,CAAY,YAAA,CAAc,CAC/C,MAAA,CAAQ,CAAE,IAAA,CAAAA,CAAK,CACnB,CAAC,CAAC,EACN,CAKO,SAASoC,EAAAA,EAAe,CAC3BH,CAAAA,CAAO,IAAA,GACX,CAKO,SAASI,EAAAA,EAAkB,CAC9B,OAAO,OAAA,CAAQ,OAAA,GACnB,CAKO,SAASC,EAAAA,EAAyB,CACrC,OAAO,MAAA,CAAO,QAAA,CAAS,QAC3B,CAKO,SAASC,EAAAA,CAAcvC,EAAuB,CACjD,OAAOsC,EAAAA,EAAe,GAAMtC,CAChC,CAKO,SAASwC,EAAAA,CAAoBC,CAAAA,CAAyB,CACzD,OAAOH,EAAAA,EAAe,CAAE,UAAA,CAAWG,CAAM,CAC7C,CAKO,SAASC,EAAAA,EAAoB,CAChC,IAAMC,CAAAA,CAAcL,EAAAA,EAAe,CACnCJ,EAAAA,CAASS,CAAAA,CAAa,IAAI,EAC9B,CAKO,SAASC,EAAAA,CAAkB5C,CAAAA,CAAcM,CAAAA,CAAsC,CAClF,IAAMyB,CAAAA,CAAQ,IAAI,eAAA,CAAgBzB,CAAM,CAAA,CAAE,QAAA,EAAS,CACnD4B,EAAAA,CAAS,CAAA,EAAGlC,CAAI,CAAA,CAAA,EAAI+B,CAAK,CAAA,CAAE,EAC/B,CAKO,SAASc,EAAAA,EAAkC,CAC9C,OAAO,IAAI,eAAA,CAAgB,MAAA,CAAO,QAAA,CAAS,MAAM,CACrD,CAKO,SAASC,EAAAA,CAAcxL,CAAAA,CAA4B,CACtD,OAAOuL,EAAAA,EAAe,CAAE,GAAA,CAAIvL,CAAG,CACnC,CC/nBO,IAAMyL,EAAAA,CAAN,KAAyE,CAS5E,WAAA,CAAYzE,CAAAA,CAA0B,CAPtC,IAAA,CAAQ,YAAA,CAAe,IAAI,GAAA,CAE3B,IAAA,CAAQ,QAAA,CAA2B,IAAA,CAEnC,IAAA,CAAQ,WAAA,CAAuD,EAAC,CAChE,IAAA,CAAQ,YAAA,CAAwB,KAAA,CAc5B,GAXA,IAAA,CAAK,QAAA,CAAWA,CAAAA,CAAQ,OAAA,EAAW,KAAA,CACnC,IAAA,CAAK,WAAA,CAAcA,CAAAA,CAAQ,UAAA,EAAc,CAAA,MAAA,EAAS,IAAA,CAAK,KAAK,CAAA,CAAA,CAGxD,IAAA,CAAK,QAAA,EAAY,OAAO,MAAA,CAAW,GAAA,GACnC,IAAA,CAAK,QAAA,CAAWA,CAAAA,CAAQ,OAAA,GAAY,gBAAA,CAC9B,cAAA,CACA,YAAA,CAAA,CAIN,KAAK,QAAA,EAAY,IAAA,CAAK,QAAA,CAAU,CAChC,IAAM0E,CAAAA,CAAS,IAAA,CAAK,gBAAA,EAAiB,CACrC,IAAA,CAAK,MAAA,CAASA,CAAAA,GAAW,IAAA,CAAOA,CAAAA,CAAS1E,EAAQ,MACrD,CAAA,KACI,IAAA,CAAK,MAAA,CAASA,CAAAA,CAAQ,KAAA,CAItBA,CAAAA,CAAQ,UAAA,GACR,IAAA,CAAK,WAAA,CAAcA,CAAAA,CAAQ,UAAA,EAEnC,CAKA,IAAI,OAAqB,CACrB,OAAO,CAAE,GAAG,IAAA,CAAK,MAAO,CAC5B,CAKA,IAAI,KAAA,CAAMrH,CAAAA,CAAa,CACnB,IAAA,CAAK,QAAA,CAASA,CAAQ,EAC1B,CAKA,QAAA,CAASgM,CAAAA,CAAqDhG,CAAAA,CAAuB,CACjF,IAAMjG,CAAAA,CAAY,CAAE,GAAG,IAAA,CAAK,MAAO,CAAA,CAE7BD,CAAAA,CAAe,OAAOkM,CAAAA,EAAW,UAAA,CACjCA,CAAAA,CAAOjM,CAAS,CAAA,CAChBiM,CAAAA,CAEN,IAAA,CAAK,MAAA,CAAS,CAAE,GAAGjM,CAAAA,CAAW,GAAGD,CAAa,CAAA,CAG9C,QAAWmM,CAAAA,IAAc,IAAA,CAAK,WAAA,CAC1B,GAAI,CACAA,CAAAA,CAAW,IAAA,CAAK,MAAA,CAAQjG,CAAM,EAClC,CAAA,MAASvG,CAAAA,CAAO,CACZ,OAAA,CAAQ,MAAM,yBAAA,CAA2BA,CAAK,EAClD,CAIA,IAAA,CAAK,QAAA,EAAY,CAAC,IAAA,CAAK,YAAA,EACvB,IAAA,CAAK,cAAA,EAAe,CAIxB,IAAA,CAAK,OAAA,GACT,CAKA,GAAA,CAAuBY,CAAAA,CAAc,CACjC,OAAO,IAAA,CAAK,MAAA,CAAOA,CAAG,CAC1B,CAKA,GAAA,CAAuBA,CAAAA,CAAQwB,CAAAA,CAAamE,CAAAA,CAAuB,CAC/D,IAAA,CAAK,QAAA,CAAS,CAAE,CAAC3F,CAAG,EAAGwB,CAAM,CAAA,CAA4BmE,CAAM,EACnE,CAMA,SAAA,CAAUkG,CAAAA,CAA0C,CAChD,YAAK,YAAA,CAAa,GAAA,CAAIA,CAAQ,CAAA,CAG9BA,CAAAA,CAAS,IAAA,CAAK,MAAM,CAAA,CAGb,IAAM,CACT,IAAA,CAAK,YAAA,CAAa,MAAA,CAAOA,CAAQ,EACrC,CACJ,CAKA,cAAA,CACI7L,CAAAA,CACA6L,CAAAA,CACU,CACV,IAAI7F,CAAAA,CAAY,IAAA,CAAK,MAAA,CAAOhG,CAAG,CAAA,CAEzB2D,CAAAA,CAActB,CAAAA,EAAa,CAC7B,IAAMJ,CAAAA,CAAWI,CAAAA,CAAMrC,CAAG,CAAA,CACtBgG,CAAAA,GAAc/D,CAAAA,GACd+D,CAAAA,CAAY/D,CAAAA,CACZ4J,CAAAA,CAAS5J,CAAQ,CAAA,EAEzB,CAAA,CAEA,OAAO,KAAK,SAAA,CAAU0B,CAAU,CACpC,CAKA,GAAA,CAAIiI,CAAAA,CAAuD,CACvD,IAAA,CAAK,WAAA,CAAY,IAAA,CAAKA,CAAU,EACpC,CAKA,KAAA,EAAc,CAGV,GAFA,IAAA,CAAK,MAAA,CAAS,EAAC,CAEX,IAAA,CAAK,QAAA,EAAY,IAAA,CAAK,QAAA,CACtB,GAAI,CACA,IAAA,CAAK,QAAA,CAAS,UAAA,CAAW,KAAK,WAAW,EAC7C,CAAA,MAASxM,CAAAA,CAAO,CACZ,OAAA,CAAQ,KAAA,CAAM,0BAAA,CAA4BA,CAAK,EACnD,CAGJ,IAAA,CAAK,OAAA,GACT,CAKA,KAAA,CAAMI,CAAAA,CAAuB,CACzB,IAAA,CAAK,MAAA,CAAS,CAAE,GAAGA,CAAa,CAAA,CAE5B,IAAA,CAAK,QAAA,EACL,IAAA,CAAK,cAAA,EAAe,CAGxB,KAAK,OAAA,GACT,CAKA,OAAA,EAAgB,CACZ,GAAI,CAAC,IAAA,CAAK,QAAA,EAAY,CAAC,IAAA,CAAK,QAAA,CAAU,CAClC,OAAA,CAAQ,KAAK,yCAAyC,CAAA,CACtD,MACJ,CAEA,IAAA,CAAK,YAAA,CAAe,IAAA,CACpB,IAAMkM,CAAAA,CAAS,IAAA,CAAK,gBAAA,EAAiB,CAEjCA,CAAAA,GAAW,IAAA,GACX,KAAK,MAAA,CAASA,CAAAA,CACd,IAAA,CAAK,OAAA,EAAQ,CAAA,CAGjB,IAAA,CAAK,YAAA,CAAe,MACxB,CAKA,WAAA,EAAqE,CACjE,OAAO,CACH,KAAA,CAAO,CAAE,GAAG,IAAA,CAAK,MAAO,CAAA,CACxB,WAAA,CAAa,IAAA,CAAK,YAAA,CAAa,IAAA,CAC/B,UAAA,CAAY,IAAA,CAAK,WACrB,CACJ,CAKA,KAAA,CAAMI,EAA2B,CAC7B,IAAMC,CAAAA,CAAa,IAAA,CAAK,OAAA,CAAQ,IAAA,CAAK,IAAI,CAAA,CACrCC,CAAAA,CAAe,KAAA,CAGnB,IAAA,CAAK,OAAA,CAAU,IAAM,CACjBA,EAAe,KACnB,CAAA,CAEA,GAAI,CACAF,CAAAA,GACJ,CAAA,OAAE,CACE,IAAA,CAAK,OAAA,CAAUC,CAAAA,CACXC,CAAAA,EACA,IAAA,CAAK,OAAA,GAEb,CACJ,CAKQ,OAAA,EAAgB,CACpB,IAAMC,CAAAA,CAAY,CAAE,GAAG,IAAA,CAAK,MAAO,CAAA,CAEnC,IAAA,IAAWtI,CAAAA,IAAc,IAAA,CAAK,aAC1B,GAAI,CACAA,CAAAA,CAAWsI,CAAS,EACxB,CAAA,MAAS7M,CAAAA,CAAO,CACZ,OAAA,CAAQ,KAAA,CAAM,yBAAA,CAA2BA,CAAK,EAClD,CAER,CAKQ,gBAAA,EAA6B,CACjC,GAAI,CAAC,IAAA,CAAK,QAAA,CAAU,OAAO,IAAA,CAE3B,GAAI,CACA,IAAMsM,CAAAA,CAAS,IAAA,CAAK,QAAA,CAAS,QAAQ,IAAA,CAAK,WAAW,CAAA,CACrD,OAAOA,CAAAA,CAAS,IAAA,CAAK,KAAA,CAAMA,CAAM,CAAA,CAAS,IAC9C,CAAA,MAAStM,CAAAA,CAAO,CACZ,OAAA,OAAA,CAAQ,MAAM,8BAAA,CAAgCA,CAAK,CAAA,CAC5C,IACX,CACJ,CAKQ,cAAA,EAAuB,CAC3B,GAAK,IAAA,CAAK,QAAA,CAEV,GAAI,CACA,IAAA,CAAK,SAAS,OAAA,CAAQ,IAAA,CAAK,WAAA,CAAa,IAAA,CAAK,SAAA,CAAU,IAAA,CAAK,MAAM,CAAC,EACvE,CAAA,MAASA,CAAAA,CAAO,CACZ,OAAA,CAAQ,KAAA,CAAM,6BAA8BA,CAAK,CAAA,CAG7CA,CAAAA,YAAiB,YAAA,EAAgBA,CAAAA,CAAM,IAAA,GAAS,oBAAA,EAChD,OAAA,CAAQ,IAAA,CAAK,wBAAwB,EAG7C,CACJ,CAKA,OAAA,EAAgB,CACZ,IAAA,CAAK,YAAA,CAAa,KAAA,EAAM,CACxB,IAAA,CAAK,WAAA,CAAc,EAAC,CACpB,IAAA,CAAK,MAAA,CAAS,GAClB,CACJ,EAKO,SAAS8M,EAAAA,CACZlF,CAAAA,CACQ,CACR,OAAO,IAAIyE,EAAAA,CAAMzE,CAAO,CAC5B,CAKO,SAASmF,EAAAA,CACZC,CAAAA,CACAC,CAAAA,CACmB,CACnB,IAAMC,EAAgBJ,EAAAA,CAA0B,CAC5C,KAAA,CAAO,CAAE,KAAA,CAAOG,CAAAA,CAAS,GAAGD,CAAAA,CAAO,GAAA,CAAIG,CAAAA,EAAKA,CAAAA,CAAE,KAAK,CAAC,CAAE,CAC1D,CAAC,CAAA,CAGD,IAAA,IAAWC,CAAAA,IAASJ,CAAAA,CAChBI,CAAAA,CAAM,SAAA,CAAU,IAAM,CAClBF,CAAAA,CAAc,QAAA,CAAS,CACnB,KAAA,CAAOD,CAAAA,CAAS,GAAGD,CAAAA,CAAO,GAAA,CAAIG,CAAAA,EAAKA,CAAAA,CAAE,KAAK,CAAC,CAC/C,CAAC,EACL,CAAC,CAAA,CAGL,OAAOD,CACX,CAKO,SAASG,EAAAA,CACZD,CAAAA,CACAvI,CAAAA,CACAyI,CAAAA,CACU,CAWV,OAVoBF,CAAAA,CAAM,SAAA,CAAWnK,CAAAA,EAAU,CAC3C,IAAM9C,CAAAA,CAAQmN,CAAAA,CAAgBrK,CAAK,EACnC,MAAA,CAAO,MAAA,CAAO4B,CAAAA,CAAW1E,CAAK,CAAA,CAG1B,OAAO0E,CAAAA,CAAU,MAAA,EAAW,UAAA,EAC5BA,CAAAA,CAAU,MAAA,GAElB,CAAC,CAGL,CC3UA,IAAM0I,CAAAA,CAAN,KAAkB,CASd,WAAA,CAAYC,CAAAA,CAAqB,CANjC,IAAA,CAAQ,YAAA,CAA+B,GACvC,IAAA,CAAQ,eAAA,CAAgC,IAAA,CACxC,IAAA,CAAQ,eAAA,CAAgC,IAAA,CACxC,IAAA,CAAQ,kBAAA,CAAqB,IAAI,GAAA,CAAkB,CAAC,IAAI,CAAC,CAAA,CACzD,KAAQ,SAAA,CAAoB,EAAA,CAGpBA,CAAAA,GACA,IAAA,CAAK,eAAA,CAAkBA,CAAAA,CAAO,eAAA,EAAmB,IAAA,CACjD,IAAA,CAAK,eAAA,CAAkB,IAAA,CAAK,iBAAA,EAAkB,EAAKA,CAAAA,CAAO,iBAAmB,IAAA,CAC7E,IAAA,CAAK,SAAA,CAAYA,CAAAA,CAAO,UAAA,EAAc,aAAA,CAClCA,CAAAA,CAAO,kBAAA,GACP,IAAA,CAAK,kBAAA,CAAqB,IAAI,GAAA,CAAIA,CAAAA,CAAO,kBAAkB,IAGvE,CAWO,YAAA,CAAaC,CAAAA,CAAoBC,CAAAA,CAA4C,CAC3E,IAAA,CAAK,YAAA,CAAaD,CAAI,CAAA,GACvB,IAAA,CAAK,YAAA,CAAaA,CAAI,CAAA,CAAI,IAE9B,IAAA,CAAK,YAAA,CAAaA,CAAI,CAAA,CAAI,CAAE,GAAG,IAAA,CAAK,YAAA,CAAaA,CAAI,CAAA,CAAG,GAAGC,CAAa,CAAA,CACxE,IAAA,CAAK,mBAAmB,GAAA,CAAID,CAAI,EACpC,CAMO,gBAAA,CAAiBC,CAAAA,CAAoC,CACxD,MAAA,CAAO,OAAA,CAAQA,CAAY,CAAA,CAAE,OAAA,CAAQ,CAAC,CAACD,EAAME,CAAK,CAAA,GAAM,CACpD,IAAA,CAAK,YAAA,CAAaF,CAAAA,CAAME,CAAK,EACjC,CAAC,EACL,CAMO,WAAA,CAAYF,CAAAA,CAA0B,CACrC,KAAK,kBAAA,CAAmB,GAAA,CAAIA,CAAI,CAAA,EAChC,IAAA,CAAK,eAAA,CAAkBA,CAAAA,CACvB,IAAA,CAAK,aAAA,CAAcA,CAAI,CAAA,CACvB,IAAA,CAAK,2BAAA,EAA4B,EAC1B,KAAK,kBAAA,CAAmB,GAAA,CAAI,IAAA,CAAK,eAAe,CAAA,GACvD,IAAA,CAAK,eAAA,CAAkB,IAAA,CAAK,eAAA,EAEpC,CAKO,WAAA,EAA4B,CAC/B,OAAO,IAAA,CAAK,eAChB,CAKO,qBAAA,EAAwC,CAC3C,OAAO,KAAA,CAAM,IAAA,CAAK,IAAA,CAAK,kBAAkB,CAC7C,CAwBO,CAAA,CAAE7M,CAAAA,CAAagJ,CAAAA,CAAyC,CAC3D,IAAM6D,CAAAA,CAAO,IAAA,CAAK,eAAA,CAGdG,CAAAA,CACA,IAAA,CAAK,YAAA,CAAaH,CAAI,CAAA,GAAI7M,CAAG,CAAA,EAC7B,IAAA,CAAK,YAAA,CAAa,IAAA,CAAK,eAAe,IAAIA,CAAG,CAAA,EAC7CA,CAAAA,CAGJ,OAAIgJ,CAAAA,EACA,MAAA,CAAO,OAAA,CAAQA,CAAM,CAAA,CAAE,OAAA,CAAQ,CAAC,CAACiE,CAAAA,CAAOzL,CAAK,IAAM,CAE/C,IAAM0L,CAAAA,CACF,IAAA,CAAK,YAAA,CAAaL,CAAI,CAAA,GAAIrL,CAAK,CAAA,EAC/B,IAAA,CAAK,YAAA,CAAa,IAAA,CAAK,eAAe,CAAA,GAAIA,CAAK,CAAA,EAC/CA,CAAAA,CAEJwL,CAAAA,CAAcA,CAAAA,CAAY,OAAA,CACtB,IAAI,MAAA,CAAO,CAAA,GAAA,EAAMC,CAAK,CAAA,GAAA,CAAA,CAAO,GAAG,CAAA,CAChCC,CACJ,EACJ,CAAC,CAAA,CAGEF,CACX,CAUO,KAAA,CAAMhN,CAAAA,CAAa6M,CAAAA,CAAoB7D,CAAAA,CAAyC,CACnF,IAAMmE,CAAAA,CAAc,IAAA,CAAK,eAAA,CACzB,IAAA,CAAK,eAAA,CAAkBN,EACvB,IAAM9N,CAAAA,CAAS,IAAA,CAAK,CAAA,CAAEiB,CAAAA,CAAKgJ,CAAM,CAAA,CACjC,OAAA,IAAA,CAAK,eAAA,CAAkBmE,CAAAA,CAChBpO,CACX,CAKO,eAAA,EAA0C,CAC7C,OAAO,IAAA,CAAK,YAAA,CAAa,IAAA,CAAK,eAAe,CAAA,EAAK,EACtD,CAOO,MAAA,CAAOiB,CAAAA,CAAsB,CAChC,OAAO,CAAC,EACJ,KAAK,YAAA,CAAa,IAAA,CAAK,eAAe,CAAA,GAAIA,CAAG,CAAA,EAC7C,IAAA,CAAK,YAAA,CAAa,IAAA,CAAK,eAAe,CAAA,GAAIA,CAAG,CAAA,CAErD,CAOO,iBAAiBoN,CAAAA,CAAwC,CAC5D,IAAM/G,CAAAA,CAAU,IAAM+G,CAAAA,EAAe,CACrC,OAAI,OAAO,MAAA,CAAW,GAAA,EAClB,MAAA,CAAO,gBAAA,CAAiB,gBAAA,CAAkB/G,CAAO,CAAA,CAC1C,IAAM,MAAA,CAAO,mBAAA,CAAoB,gBAAA,CAAkBA,CAAO,CAAA,EAE9D,IAAM,CAAC,CAClB,CAiBA,MAAa,WAAA,CAAYgH,CAAAA,CAA8C,CACnE,IAAMC,CAAAA,CAAO,KAAA,CAAM,OAAA,CAAQD,CAAU,CAAA,CAAIA,CAAAA,CAAa,CAACA,CAAU,CAAA,CAC3DP,CAAAA,CAA+B,EAAC,CAEtC,IAAA,IAAW/F,KAAOuG,CAAAA,CACd,GAAIvG,CAAAA,CAAI,QAAA,CAAS,GAAG,CAAA,CAAG,CAEnB,IAAMkD,CAAAA,CAAUlD,CAAAA,CAAI,OAAA,CAAQ,QAAA,CAAU,EAAE,CAAA,CAClCwG,EAAY,IAAA,CAAK,kBAAA,CAEvB,IAAA,IAAWV,CAAAA,IAAQU,CAAAA,CACf,GAAI,CACA,IAAMhG,CAAAA,CAAW,MAAM,KAAA,CAAM,CAAA,EAAG0C,CAAO,CAAA,EAAG4C,CAAI,CAAA,KAAA,CAAO,CAAA,CACrD,GAAItF,CAAAA,CAAS,EAAA,CAAI,CACb,IAAMN,CAAAA,CAAO,MAAMM,CAAAA,CAAS,IAAA,EAAK,CACjCuF,CAAAA,CAAaD,CAAI,EAAI5F,EACzB,CACJ,CAAA,MAAS7H,CAAAA,CAAO,CACZ,OAAA,CAAQ,IAAA,CAAK,CAAA,iCAAA,EAAoC6K,CAAO,CAAA,EAAG4C,CAAI,CAAA,MAAA,CAAA,CAAUzN,CAAK,EAClF,CAER,CAAA,KAEI,GAAI,CACA,IAAMmI,CAAAA,CAAW,MAAM,KAAA,CAAMR,CAAG,CAAA,CAChC,GAAIQ,CAAAA,CAAS,EAAA,CAAI,CACb,IAAMN,CAAAA,CAAO,MAAMM,CAAAA,CAAS,IAAA,EAAK,CAE3BiG,CAAAA,CAAYzG,CAAAA,CAAI,KAAA,CAAM,sBAAsB,CAAA,CAC5C8F,CAAAA,CAAOW,CAAAA,CAAYA,CAAAA,CAAU,CAAC,CAAA,CAAE,WAAA,GAAgB,IAAA,CACtDV,CAAAA,CAAaD,CAAI,CAAA,CAAI5F,CAAAA,CACrB,IAAA,CAAK,kBAAA,CAAmB,GAAA,CAAI4F,CAAI,EACpC,CACJ,CAAA,MAASzN,CAAAA,CAAO,CACZ,QAAQ,IAAA,CAAK,CAAA,iCAAA,EAAoC2H,CAAG,CAAA,CAAA,CAAA,CAAK3H,CAAK,EAClE,CAIJ,MAAA,CAAO,IAAA,CAAK0N,CAAY,CAAA,CAAE,MAAA,CAAS,CAAA,EACnC,IAAA,CAAK,iBAAiBA,CAAY,EAE1C,CASQ,iBAAA,EAAyC,CAC7C,OAAI,OAAO,YAAA,CAAiB,GAAA,EAChB,YAAA,CAAa,OAAA,CAAQ,cAAc,CAAA,EAAsB,IAGzE,CAKQ,aAAA,CAAcD,CAAAA,CAA0B,CACxC,OAAO,YAAA,CAAiB,GAAA,EACxB,YAAA,CAAa,OAAA,CAAQ,cAAA,CAAgBA,CAAI,EAEjD,CAKQ,2BAAA,EAAoC,CACpC,OAAO,MAAA,CAAW,GAAA,EAClB,MAAA,CAAO,aAAA,CAAc,IAAI,WAAA,CAAY,gBAAA,CAAkB,CAAE,MAAA,CAAQ,CAAE,QAAA,CAAU,IAAA,CAAK,eAAgB,CAAE,CAAC,CAAC,EAE9G,CAGJ,CAAA,CAGIY,CAAAA,CAAmC,KAOhC,SAASC,EAAAA,CAASd,CAAAA,CAAkC,CACvD,OAAKa,CAAAA,GACDA,CAAAA,CAAe,IAAId,EAAYC,CAAM,CAAA,CAAA,CAElCa,CACX,CAKO,SAASE,CAAAA,EAAuB,CACnC,OAAKF,CAAAA,GACDA,CAAAA,CAAe,IAAId,CAAAA,CAAAA,CAEhBc,CACX,CAkBO,SAASG,CAAAA,CAAE5N,CAAAA,CAAagJ,CAAAA,CAAyC,CACpE,OAAO2E,CAAAA,EAAQ,CAAE,CAAA,CAAE3N,CAAAA,CAAKgJ,CAAM,CAClC,CASO,SAAS6E,EAAAA,CAAM7N,EAAa6M,CAAAA,CAAc7D,CAAAA,CAAyC,CACtF,OAAO2E,CAAAA,EAAQ,CAAE,KAAA,CAAM3N,CAAAA,CAAK6M,CAAAA,CAAM7D,CAAM,CAC5C,CAMO,SAAS8E,EAAAA,CAAYjB,EAAoB,CAC5Cc,CAAAA,EAAQ,CAAE,WAAA,CAAYd,CAAI,EAC9B,CAKO,SAASkB,EAAAA,EAA6B,CACzC,OAAOJ,CAAAA,EAAQ,CAAE,WAAA,EACrB,CAOO,SAASK,EAAAA,CAAanB,CAAAA,CAAcC,CAAAA,CAA4C,CACnFa,CAAAA,EAAQ,CAAE,YAAA,CAAad,CAAAA,CAAMC,CAAY,EAC7C,CAMO,SAASmB,GAAiBnB,CAAAA,CAA4D,CACzFa,CAAAA,EAAQ,CAAE,gBAAA,CAAiBb,CAAY,EAC3C,CAKO,SAASoB,EAAAA,EAAkC,CAC9C,OAAOP,CAAAA,EAAQ,CAAE,uBACrB,CAOO,SAASQ,EAAAA,CAAOnO,CAAAA,CAAsB,CACzC,OAAO2N,CAAAA,EAAQ,CAAE,MAAA,CAAO3N,CAAG,CAC/B,CAKO,SAASoO,IAA0C,CACtD,OAAOT,CAAAA,EAAQ,CAAE,eAAA,EACrB,CAOO,SAASU,EAAAA,CAAiBjB,CAAAA,CAAwC,CACrE,OAAOO,CAAAA,EAAQ,CAAE,iBAAiBP,CAAc,CACpD,CAiBA,eAAsBkB,EAAAA,CAAYjB,CAAAA,CAA8C,CAC5E,OAAOM,CAAAA,EAAQ,CAAE,WAAA,CAAYN,CAAU,CAC3C,CAMO,SAASkB,EAAAA,CAAe3B,CAAAA,CAA+C,CAC1E,OAAOc,EAAAA,CAASd,CAAM,CAC1B,CC1WO,SAAS4B,EAAAA,CAAO5B,CAAAA,CAAsB,CAEzC,IAAM6B,CAAAA,CAAU7B,EAEhB,OAAO,CAKH,MAAM,KAAA,EAAuB,CACzB,GAAI,CAAC6B,CAAAA,CAAQ,KAAA,CAAO,CAChB,OAAA,CAAQ,IAAA,CAAK,iCAAiC,CAAA,CAC9C,MACJ,CAEA,OAAA,CAAQ,GAAA,CAAI,iDAA0C,CAAA,CAEtD,GAAI,CAEA,MAAM,IAAA,CAAK,QAAA,EAAS,CAGpB,MAAM,IAAA,CAAK,YAAA,GAEX,OAAA,CAAQ,GAAA,CAAI,sCAAiC,EAEjD,CAAA,MAASrP,CAAAA,CAAO,CACZ,MAAA,OAAA,CAAQ,KAAA,CAAM,qBAAA,CAAkBA,CAAK,CAAA,CAC/BA,CACV,CACJ,EAKA,MAAM,QAAA,EAA0B,CAC5B,GAAI,CAACqP,CAAAA,CAAQ,KAAA,CAAO,OAEpB,IAAM1P,CAAAA,CAAS,MAAM,GAAA,CAAI,KAAA,CAAM,CAC3B,YAAkB,CAAC0P,CAAAA,CAAQ,KAAA,CAAM,KAAK,CAAA,CACtC,MAAA,CAAkBA,CAAAA,CAAQ,KAAA,CAAM,MAAA,CAAO,SAAA,CAAU,CAAA,CAAGA,CAAAA,CAAQ,KAAA,CAAM,MAAA,CAAO,YAAY,GAAG,CAAC,CAAA,CACzF,MAAA,CAAkB,SAAA,CAClB,MAAA,CAAkBA,CAAAA,CAAQ,KAAA,CAAM,MAAA,EAAU,KAAA,CAC1C,SAAA,CAAkBA,CAAAA,CAAQ,KAAA,CAAM,SAAA,CAAY,WAAa,MAAA,CACzD,SAAA,CAAkBA,CAAAA,CAAQ,KAAA,CAAM,YAAA,EAAc,WAAA,EAAe,KAAA,CAC7D,MAAA,CAAkB,CACd,KAAA,CAAcA,CAAAA,CAAQ,KAAA,CAAM,MAAA,CAAO,SAAA,CAAUA,EAAQ,KAAA,CAAM,MAAA,CAAO,WAAA,CAAY,GAAG,CAAA,CAAI,CAAC,CAC1F,CAAA,CAEA,QAAA,CAAkB,CACd,MAAA,CACA,IAAA,CACA,MAAA,CACA,KAAA,CACA,OACA,QAAA,CACA,QAAA,CACA,QAAA,CACA,QAAA,CACA,IAAA,CACA,eACJ,CACJ,CAAC,CAAA,CAED,GAAI,CAAC1P,CAAAA,CAAO,OAAA,CACR,MAAA,OAAA,CAAQ,MAAM,yBAAA,CAAsBA,CAAAA,CAAO,IAAI,CAAA,CACzC,IAAI,KAAA,CAAM,iBAAiB,CAIzC,CAAA,CAKA,MAAM,YAAA,EAA8B,CAChC,IAAM2P,CAAAA,CAAYD,EAAQ,KAAA,EAAO,MAAA,EAAQ,KAAA,EAAS,iBAAA,CAC5CE,CAAAA,CAAaF,CAAAA,CAAQ,KAAA,EAAO,MAAA,EAAQ,MAAA,EAAU,qBAAA,CAG9CG,CAAAA,CAAO,MAAM,OAAO,MAAM,EAC1B,CAAE,aAAA,CAAAC,CAAAA,CAAe,UAAA,CAAAC,CAAAA,CAAY,SAAA,CAAAC,CAAU,CAAA,CAAI,MAAM,OAAO,IAAI,CAAA,CAC5D,CAAE,IAAA,CAAAC,EAAM,OAAA,CAAAC,CAAQ,CAAA,CAAI,MAAM,OAAO,MAAM,CAAA,CAEvCC,CAAAA,CAAYD,CAAAA,CAAQN,CAAU,CAAA,CAC9BQ,CAAAA,CAAaR,CAAAA,CAAW,KAAA,CAAM,GAAG,CAAA,CAAE,GAAA,EAAI,EAAK,YAAA,CAG5CS,CAAAA,CAAeJ,CAAAA,CAAKN,CAAAA,CAAW,YAAY,CAAA,CAGjD,GAAI,CAACI,CAAAA,CAAWM,CAAY,CAAA,CAAG,CAC3B,OAAA,CAAQ,GAAA,CAAI,uDAA6C,CAAA,CACzD,MACJ,CAEA,GAAI,CAEKN,CAAAA,CAAWI,CAAS,CAAA,EACrBH,CAAAA,CAAUG,CAAAA,CAAW,CAAE,SAAA,CAAW,EAAK,CAAC,CAAA,CAI5C,IAAMnQ,CAAAA,CAAS6P,CAAAA,CAAK,OAAA,CAAQQ,CAAAA,CAAc,CACtC,KAAA,CAAOX,CAAAA,CAAQ,KAAA,EAAO,MAAA,CAAS,YAAA,CAAe,UAAA,CAC9C,UAAW,CAAA,CAAAA,CAAAA,CAAQ,KAAA,EAAO,SAAA,CAC1B,SAAA,CAAW,CAACC,CAAS,CACzB,CAAC,CAAA,CAGKW,EAAAA,CAAiBL,CAAAA,CAAKE,CAAAA,CAAWC,CAAU,EACjDN,CAAAA,CAAcQ,EAAAA,CAAgBtQ,CAAAA,CAAO,GAAA,CAAK,OAAO,CAAA,CAK7C0P,CAAAA,CAAQ,KAAA,EAAO,SAAA,EAAa1P,CAAAA,CAAO,SAAA,EACnC8P,CAAAA,CACI,CAAA,EAAGQ,EAAc,OACjB,IAAA,CAAK,SAAA,CAAUtQ,CAAAA,CAAO,SAAS,CAAA,CAC/B,OACJ,EAGR,CAAA,MAASK,CAAAA,CAAO,CACZ,MAAA,OAAA,CAAQ,KAAA,CAAM,0BAAA,CAAuBA,CAAK,EACpCA,CACV,CACJ,CAAA,CAKA,MAAM,iBAAA,CAAkBkQ,CAAAA,CAAgC,CACpD,GAAM,CAAE,WAAA,CAAAC,CAAAA,CAAa,QAAA,CAAAC,CAAAA,CAAU,UAAA,CAAAV,CAAW,CAAA,CAAI,MAAM,OAAO,IAAI,CAAA,CACzD,CAAE,IAAA,CAAAE,CAAAA,CAAM,OAAA,CAAAS,CAAQ,CAAA,CAAI,MAAM,OAAO,MAAM,EAEvCC,CAAAA,CAAkB,EAAC,CAEzB,GAAI,CAACZ,CAAAA,CAAWQ,CAAG,CAAA,CACf,OAAOI,CAAAA,CAGX,IAAMC,CAAAA,CAAUJ,CAAAA,CAAYD,CAAG,EAE/B,IAAA,IAAWM,CAAAA,IAASD,CAAAA,CAAS,CACzB,IAAME,CAAAA,CAAWb,CAAAA,CAAKM,CAAAA,CAAKM,CAAK,CAAA,CAC1BE,CAAAA,CAAON,CAAAA,CAASK,CAAQ,CAAA,CAE1BC,EAAK,WAAA,EAAY,CAEjBJ,CAAAA,CAAM,IAAA,CAAK,GAAG,MAAM,IAAA,CAAK,iBAAA,CAAkBG,CAAQ,CAAC,CAAA,CAC7CC,CAAAA,CAAK,MAAA,EAAO,EACPL,EAAQG,CAAK,CAAA,GAEb,OAAA,EAAW,CAACA,CAAAA,CAAM,UAAA,CAAW,GAAG,CAAA,EACxCF,CAAAA,CAAM,IAAA,CAAKG,CAAQ,EAG/B,CAGA,OAAOH,EAAM,IAAA,EACjB,CAAA,CAKA,MAAM,KAAA,EAAuB,CACzB,OAAA,CAAQ,GAAA,CAAI,mCAA4B,CAAA,CAGxC,MAAM,IAAA,CAAK,KAAA,EAAM,CAGjB,GAAM,CAAE,KAAA,CAAApM,CAAM,CAAA,CAAI,MAAM,OAAO,IAAI,CAAA,CAC7B,CAAE,OAAA,CAAA2L,CAAQ,CAAA,CAAI,MAAM,OAAO,MAAM,CAAA,CACjC,CAAE,UAAA,CAAAH,CAAW,CAAA,CAAI,MAAM,OAAO,IAAI,CAAA,CAGxC,GAAIL,CAAAA,CAAQ,KAAA,EAAO,KAAA,CAAO,CACtB,IAAMsB,CAAAA,CAAWd,CAAAA,CAAQR,CAAAA,CAAQ,KAAA,CAAM,KAAK,CAAA,CAC5CnL,CAAAA,CAAMyM,CAAAA,CAAU,CAAE,SAAA,CAAW,IAAK,CAAA,CAAG,MAAOC,CAAAA,CAAWC,IAAa,CAChE,GAAIA,CAAAA,GAAaA,CAAAA,CAAS,QAAA,CAAS,KAAK,CAAA,EAAKA,CAAAA,CAAS,QAAA,CAAS,MAAM,CAAA,CAAA,CAAI,CACrE,OAAA,CAAQ,GAAA,CAAI,aAAMA,CAAQ,CAAA,0BAAA,CAA4B,CAAA,CACtD,GAAI,CACA,MAAM,IAAA,CAAK,QAAA,EAAS,CACpB,OAAA,CAAQ,GAAA,CAAI,4BAAuB,EACvC,CAAA,MAAS7Q,EAAO,CACZ,OAAA,CAAQ,KAAA,CAAM,2BAAA,CAAwBA,CAAK,EAC/C,CACJ,CACJ,CAAC,EACL,CAGA,IAAMsP,CAAAA,CAAY,aAAA,CACdI,EAAWJ,CAAS,CAAA,EACpBpL,CAAAA,CAAMoL,CAAAA,CAAW,CAAE,SAAA,CAAW,IAAK,CAAA,CAAG,MAAOsB,CAAAA,CAAWC,CAAAA,GAAa,CACjE,GAAIA,CAAAA,EAAYA,EAAS,QAAA,CAAS,OAAO,CAAA,CAAG,CACxC,OAAA,CAAQ,GAAA,CAAI,CAAA,UAAA,EAAMA,CAAQ,CAAA,2BAAA,CAA6B,CAAA,CACvD,GAAI,CACA,MAAM,IAAA,CAAK,cAAa,CACxB,OAAA,CAAQ,GAAA,CAAI,6BAAwB,EACxC,CAAA,MAAS7Q,CAAAA,CAAO,CACZ,OAAA,CAAQ,KAAA,CAAM,4BAAA,CAAyBA,CAAK,EAChD,CACJ,CACJ,CAAC,EAET,CAAA,CAMA,IAAA,EAAa,CAaT,GATIqP,CAAAA,CAAQ,IAAA,EACRF,EAAAA,CAAe,CACX,eAAA,CAAiBE,CAAAA,CAAQ,IAAA,CAAK,eAAA,CAC9B,mBAAoBA,CAAAA,CAAQ,IAAA,CAAK,kBAAA,CACjC,UAAA,CAAYA,CAAAA,CAAQ,IAAA,CAAK,UAC7B,CAAC,CAAA,CAIDA,CAAAA,CAAQ,GAAA,CAAK,CAEb,IAAMyB,CAAAA,CAAsC,CACxC,OAAA,CAASzB,CAAAA,CAAQ,GAAA,CAAI,OAAA,CACrB,OAAA,CAASA,CAAAA,CAAQ,GAAA,CAAI,OAAA,CACrB,OAAA,CAASA,CAAAA,CAAQ,GAAA,CAAI,OACzB,CAAA,CAGIA,CAAAA,CAAQ,IAAI,YAAA,GACZyB,CAAAA,CAAW,YAAA,CAAe,CACtB,OAAA,CAASzB,CAAAA,CAAQ,GAAA,CAAI,YAAA,CAAa,OAAA,EAAW,IAAA,CAC7C,QAAA,CAAUA,CAAAA,CAAQ,GAAA,CAAI,YAAA,CAAa,UAAY,IAAA,CAC/C,KAAA,CAAOA,CAAAA,CAAQ,GAAA,CAAI,YAAA,CAAa,KAAA,EAAS,IAC7C,CAAA,CAAA,CAGJ0B,YAAAA,CAAaD,CAAU,EAC3B,CAGIzB,CAAAA,CAAQ,MAAA,EAAUA,EAAQ,GAAA,EAAK,MAAA,GAC/B9D,CAAAA,CAAO,IAAA,CACH8D,CAAAA,CAAQ,GAAA,CAAI,MAAA,CACZA,CAAAA,CAAQ,MAAA,CAAO,IAAA,CACfA,CAAAA,CAAQ,MAAA,CAAO,IACnB,CAAA,CAEIA,EAAQ,MAAA,CAAO,UAAA,EACf9D,CAAAA,CAAO,UAAA,CAAW8D,CAAAA,CAAQ,MAAA,CAAO,UAAU,CAAA,CAG3CA,CAAAA,CAAQ,MAAA,CAAO,SAAA,EACf9D,CAAAA,CAAO,SAAA,CAAU8D,CAAAA,CAAQ,OAAO,SAAS,CAAA,CAAA,CAK7CA,CAAAA,CAAQ,GAAA,EAAK,IAAA,GACO,QAAA,CAAS,aAAA,CAAcA,CAAAA,CAAQ,GAAA,CAAI,IAAI,CAAA,EAIvD,OAAA,CAAQ,KAAA,CAAM,CAAA,qBAAA,EAAmBA,EAAQ,GAAA,CAAI,IAAI,CAAA,WAAA,CAAa,CAAA,CAAA,CAKlEA,CAAAA,CAAQ,QAAA,EAAU,OAAA,EAClB,IAAA,CAAK,eAAA,GAEb,CAAA,CAKA,eAAA,EAAwB,CAIpB,MAAA,CAAO,aAAe,CAClB,MAAA,CAAA9D,CAAAA,CACA,MAAA,CAAQ8D,CAAAA,CACR,OAAA,CAAS,OACb,EAaJ,CAAA,CAKA,SAAA,EAA0B,CACtB,OAAOA,CACX,CACJ,CACJ,CCjWA,IAAM2B,CAAAA,CAAM,CACR,KAAA,CAAO,UAAA,CACP,SAAA,CAAW,mBAAA,CACX,IAAA,CAAM,cAAA,CACN,GAAA,CAAK,aACT,CAAA,CAQaC,CAAAA,CAAN,cAAoB/Q,CAAU,CAA9B,WAAA,EAAA,CAAA,KAAA,CAAA,GAAA,SAAA,CAAA,CAKQ,IAAA,CAAA,QAAA,CAA2B,EAAC,CAEnC,IAAA,CAAQ,MAAA,CAAS,EAAA,CAUjB,KAAKgR,CAAAA,CAAiBC,CAAAA,CAAkB,MAAA,CAAQC,CAAAA,CAAmB,GAAA,CAAMC,CAAAA,CAAuB,CAC5F,IAAMxS,CAAAA,CAAK,IAAA,CAAK,MAAA,EAAA,CAEhB,IAAA,CAAK,QAAA,CAAW,CAAC,GAAG,IAAA,CAAK,QAAA,CAAU,CAAE,EAAA,CAAAA,CAAAA,CAAI,OAAA,CAAAqS,CAAAA,CAAS,IAAA,CAAAC,CAAAA,CAAM,YAAA,CAAAE,CAAa,CAAC,CAAA,CAEtE,UAAA,CAAW,IAAM,CACb,IAAA,CAAK,QAAA,CAAW,IAAA,CAAK,QAAA,CAAS,MAAA,CAAOC,CAAAA,EAAKA,CAAAA,CAAE,EAAA,GAAOzS,CAAE,EACzD,CAAA,CAAGuS,CAAQ,EACf,CAKA,OAAA,CAAQF,CAAAA,CAAiBE,CAAAA,CAAmBC,CAAAA,CAAuB,CAC/D,IAAA,CAAK,IAAA,CAAKH,CAAAA,CAAS,SAAA,CAAWE,CAAAA,CAAUC,CAAY,EACxD,CAEA,KAAA,CAAMH,EAAiBE,CAAAA,CAAmBC,CAAAA,CAAuB,CAC7D,IAAA,CAAK,IAAA,CAAKH,CAAAA,CAAS,OAAA,CAASE,CAAAA,CAAUC,CAAY,EACtD,CAEA,IAAA,CAAKH,CAAAA,CAAiBE,CAAAA,CAAmBC,EAAuB,CAC5D,IAAA,CAAK,IAAA,CAAKH,CAAAA,CAAS,MAAA,CAAQE,CAAAA,CAAUC,CAAY,EACrD,CAEA,OAAA,CAAQH,CAAAA,CAAiBE,CAAAA,CAAmBC,CAAAA,CAAuB,CAC/D,KAAK,IAAA,CAAKH,CAAAA,CAAS,SAAA,CAAWE,CAAAA,CAAUC,CAAY,EACxD,CAOA,MAAA,EAAS,CACL,OAAI,IAAA,CAAK,QAAA,CAAS,MAAA,GAAW,CAAA,CAAU1M,OAEhC+E,aAAAA,CAAc,KAAA,CAAO,CACxB,SAAA,CAAWsH,CAAAA,CAAI,SACnB,CAAA,CACI,GAAG,IAAA,CAAK,QAAA,CAAS,GAAA,CAAIO,CAAAA,EAAO,IAAA,CAAK,WAAA,CAAYA,CAAG,CAAC,CACrD,CACJ,CAEA,WAAA,CAAYA,CAAAA,CAAmB,CAC3B,IAAMC,CAAAA,CAAQ,CACV,OAAA,CAAS,qBAAA,CACT,KAAA,CAAO,2BAAA,CACP,KAAM,oBAAA,CACN,OAAA,CAAS,6BACb,CAAA,CAEMC,CAAAA,CAAiBF,CAAAA,CAAI,YAAA,CAAe/C,CAAAA,CAAE+C,CAAAA,CAAI,YAAY,CAAA,CAAIA,CAAAA,CAAI,OAAA,CAEpE,OAAO7H,cAAc,KAAA,CAAO,CACxB,GAAA,CAAK,MAAA,CAAO6H,CAAAA,CAAI,EAAE,CAAA,CAClB,SAAA,CAAW,CAAA,EAAGP,CAAAA,CAAI,KAAK,CAAA,CAAA,EAAIA,CAAAA,CAAI,KAAK,KAAKO,CAAAA,CAAI,IAAI,CAAA,CAAA,CACjD,gBAAA,CAAkBA,CAAAA,CAAI,YAAA,EAAgB,MAC1C,CAAA,CACI7H,aAAAA,CAAc,GAAA,CAAK,CACf,SAAA,CAAW,CAAA,EAAG8H,CAAAA,CAAMD,EAAI,IAAI,CAAC,CAAA,CAAA,EAAIP,CAAAA,CAAI,IAAI,CAAA,CAC7C,CAAC,CAAA,CACDtH,aAAAA,CAAc,MAAA,CAAQ,CAClB,SAAA,CAAWsH,CAAAA,CAAI,GACnB,EAAGS,CAAc,CACrB,CACJ,CAIR,EAlFeC,CAAAA,CAAA,CAANzO,CAAAA,CAAAA,CALIgO,CAAAA,CAKE,SAAA,CAAA,UAAA,CAAA,CA0Ff,IAAIU,CAAAA,CAA4B,IAAA,CAEzB,SAASC,GAAU/Q,CAAAA,CAAgC,CACtD,GAAI8Q,CAAAA,CAAa,OAAOA,CAAAA,CAExB,IAAME,CAAAA,CAAiBhR,CAAAA,EAAa,QAAA,CAAS,aAAA,CAAc,KAAK,CAAA,CAChE,OAAKA,GACD,QAAA,CAAS,IAAA,CAAK,WAAA,CAAYgR,CAAc,CAAA,CAG5CF,CAAAA,CAAc,IAAIV,CAAAA,CAClBU,CAAAA,CAAY,KAAA,CAAME,CAAc,CAAA,CAEzBF,CACX,CAEO,SAASG,CAAAA,EAAkB,CAC9B,OAAKH,CAAAA,GACDA,CAAAA,CAAcC,EAAAA,EAAU,CAAA,CAErBD,CACX,CAGO,IAAMI,EAAAA,CAAQ,CACjB,IAAA,CAAM,CAACb,EAAiBC,CAAAA,CAAkB,MAAA,CAAQC,CAAAA,CAAmBC,CAAAA,GAA0B,CAC3FS,CAAAA,EAAS,CAAE,IAAA,CAAKZ,CAAAA,CAASC,CAAAA,CAAMC,CAAAA,CAAUC,CAAY,EACzD,CAAA,CACA,QAAS,CAACH,CAAAA,CAAiBE,CAAAA,CAAmBC,CAAAA,GAA0B,CACpES,CAAAA,EAAS,CAAE,OAAA,CAAQZ,CAAAA,CAASE,CAAAA,CAAUC,CAAY,EACtD,CAAA,CACA,KAAA,CAAO,CAACH,CAAAA,CAAiBE,CAAAA,CAAmBC,CAAAA,GAA0B,CAClES,CAAAA,EAAS,CAAE,KAAA,CAAMZ,CAAAA,CAASE,CAAAA,CAAUC,CAAY,EACpD,CAAA,CACA,IAAA,CAAM,CAACH,EAAiBE,CAAAA,CAAmBC,CAAAA,GAA0B,CACjES,CAAAA,EAAS,CAAE,IAAA,CAAKZ,CAAAA,CAASE,CAAAA,CAAUC,CAAY,EACnD,CAAA,CACA,OAAA,CAAS,CAACH,CAAAA,CAAiBE,EAAmBC,CAAAA,GAA0B,CACpES,CAAAA,EAAS,CAAE,OAAA,CAAQZ,CAAAA,CAASE,CAAAA,CAAUC,CAAY,EACtD,CACJ,ECnJA,IAAML,CAAAA,CAAM,CACR,MAAA,CAAQ,CACJ,SAAA,CAAW,oBAAA,CACX,gBAAA,CAAkB,6BAAA,CAClB,EAAA,CAAI,aAAA,CACJ,MAAA,CAAQ,WACZ,CAAA,CAEA,QAAS,CACL,SAAA,CAAW,2BAAA,CACX,IAAA,CAAM,sBAAA,CACN,GAAA,CAAK,qBAAA,CACL,KAAA,CAAO,uBAAA,CACP,IAAA,CAAM,sBACV,CAAA,CAEA,QAAA,CAAU,CACN,UAAW,4BAAA,CACX,GAAA,CAAK,sBAAA,CACL,IAAA,CAAM,uBACV,CACJ,CAAA,CAQagB,CAAAA,CAAN,cAAqB9R,CAAU,CAA/B,WAAA,EAAA,CAAA,KAAA,CAAA,GAAA,SAAA,CAAA,CAKQ,IAAA,CAAA,OAAA,CAAmB,KAAA,CAEnB,aAAmB,EAAA,CAEnB,IAAA,CAAA,OAAA,CAAmC,SAAA,CAEnC,IAAA,CAAA,IAAA,CAAgC,QAAA,CAEhC,IAAA,CAAA,OAAA,CAAmB,IAAA,CAEnB,IAAA,CAAA,QAAA,CAAmB,CAAA,CAEnB,IAAA,CAAA,YAAA,CAAmB,KAAA,CAE1B,IAAA,CAAQ,cAAA,CAAkC,IAAA,CAC1C,KAAQ,WAAA,CAAkC,IAAA,CA4L1C,IAAA,CAAQ,cAAA,CAAkB,CAAA,EAAqB,CACvC,CAAA,CAAE,GAAA,GAAQ,QAAA,EAAY,IAAA,CAAK,OAAA,EAAW,CAAC,IAAA,CAAK,OAAA,EAC5C,KAAK,IAAA,GAEb,EAAA,CAzLA,MAAM,OAAA,EAAU,CACZ,IAAA,CAAK,qBAAA,EAAsB,CAC3B,IAAA,CAAK,uBAAA,EAAwB,CAE7B,MAAA,CAAO,gBAAA,CAAiB,iBAAkB,IAAM,CACvC,IAAA,CAAK,OAAA,EACN,IAAA,CAAK,MAAA,GAEb,CAAC,EACL,CAEA,SAAA,EAAY,CACJ,IAAA,CAAK,cAAA,EACL,qBAAqB,IAAA,CAAK,cAAc,CAAA,CAExC,IAAA,CAAK,WAAA,EACL,YAAA,CAAa,IAAA,CAAK,WAAW,CAAA,CAEjC,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAW,IAAA,CAAK,cAAc,EAC/D,CAOA,MAAA,EAAS,CACL,IAAM+R,CAAAA,CAAmB,CACrBjB,CAAAA,CAAI,MAAA,CAAO,SAAA,CACX,IAAA,CAAK,OAAA,CAAU,CAAA,EAAGA,CAAAA,CAAI,MAAA,CAAO,gBAAgB,CAAA,CAAA,CAAK,EAAA,CAClD,CAAA,EAAGA,CAAAA,CAAI,MAAA,CAAO,SAAS,CAAA,EAAA,EAAK,IAAA,CAAK,IAAI,CAAA,CACzC,CAAA,CAAE,MAAA,CAAO,OAAO,CAAA,CAAE,IAAA,CAAK,GAAG,CAAA,CAE1B,OAAOtH,aAAAA,CAAc,KAAA,CAAO,CACxB,SAAA,CAAWuI,CAAAA,CACX,aAAA,CAAe,IAAA,CAAK,OAAA,CAAU,SAAA,CAAY,QAAA,CAC1C,IAAA,CAAM,QAAA,CACN,YAAa,QAAA,CACb,WAAA,CAAa,MACjB,CAAA,CAEIvI,aAAAA,CAAc,KAAA,CAAO,CAAE,SAAA,CAAWsH,CAAAA,CAAI,MAAA,CAAO,EAAG,CAAC,CAAA,CAEjDtH,aAAAA,CAAc,MAAO,CAAE,SAAA,CAAWsH,CAAAA,CAAI,MAAA,CAAO,MAAO,CAAA,CAChD,IAAA,CAAK,aAAA,EAAc,CACnB,IAAA,CAAK,aAAA,EAAc,CACnB,IAAA,CAAK,YAAA,CAAe,KAAK,iBAAA,EAAkB,CAAI,IACnD,CACJ,CACJ,CAEA,aAAA,EAAgB,CACZ,IAAMkB,CAAAA,CAAe,CAAA,EAAGlB,CAAAA,CAAI,OAAA,CAAQ,SAAS,IAAIA,CAAAA,CAAI,OAAA,CAAQ,SAAS,CAAA,EAAA,EAAK,IAAA,CAAK,OAAO,CAAA,CAAA,CAEvF,OAAQ,IAAA,CAAK,OAAA,EACT,KAAK,MAAA,CACD,OAAOtH,cAAc,KAAA,CAAO,CAAE,SAAA,CAAWwI,CAAa,CAAA,CAClDxI,aAAAA,CAAc,KAAA,CAAO,CAAE,SAAA,CAAWsH,CAAAA,CAAI,OAAA,CAAQ,GAAI,CAAC,CAAA,CACnDtH,cAAc,KAAA,CAAO,CAAE,SAAA,CAAWsH,CAAAA,CAAI,OAAA,CAAQ,GAAI,CAAC,CAAA,CACnDtH,aAAAA,CAAc,KAAA,CAAO,CAAE,SAAA,CAAWsH,CAAAA,CAAI,OAAA,CAAQ,GAAI,CAAC,CACvD,CAAA,CAEJ,KAAK,OAAA,CACD,OAAOtH,aAAAA,CAAc,KAAA,CAAO,CAAE,SAAA,CAAWwI,CAAa,CAAA,CAClDxI,aAAAA,CAAc,KAAA,CAAO,CAAE,SAAA,CAAWsH,CAAAA,CAAI,OAAA,CAAQ,KAAM,CAAC,CACzD,CAAA,CAEJ,KAAK,SAAA,CACL,QACI,OAAOtH,aAAAA,CAAc,KAAA,CAAO,CAAE,UAAWwI,CAAa,CAAA,CAClDxI,aAAAA,CAAc,KAAA,CAAO,CAAE,SAAA,CAAWsH,CAAAA,CAAI,OAAA,CAAQ,IAAK,CAAC,CACxD,CACR,CACJ,CAEA,eAAgB,CACZ,IAAMmB,CAAAA,CAAO,IAAA,CAAK,OAAA,EAAW3D,CAAAA,CAAE,gBAAgB,CAAA,CAE/C,OAAO9E,aAAAA,CAAc,KAAA,CAAO,CACxB,SAAA,CAAWsH,CAAAA,CAAI,QAAQ,IAAA,CACvB,gBAAA,CAAkB,IAAA,CAAK,OAAA,CAAU,MAAA,CAAY,gBACjD,CAAA,CAAGmB,CAAI,CACX,CAEA,iBAAA,EAAoB,CAChB,OAAOzI,aAAAA,CAAc,MAAO,CAAE,SAAA,CAAWsH,CAAAA,CAAI,QAAA,CAAS,SAAU,CAAA,CAC5DtH,aAAAA,CAAc,KAAA,CAAO,CACjB,SAAA,CAAWsH,CAAAA,CAAI,QAAA,CAAS,GAAA,CACxB,KAAA,CAAO,UAAU,IAAA,CAAK,QAAQ,CAAA,CAAA,CAAA,CAC9B,eAAA,CAAiB,IAAA,CAAK,QAAA,CAAS,QAAA,EAAS,CACxC,eAAA,CAAiB,GAAA,CACjB,eAAA,CAAiB,KACrB,CAAC,CAAA,CACDtH,cAAc,KAAA,CAAO,CAAE,SAAA,CAAWsH,CAAAA,CAAI,QAAA,CAAS,IAAK,CAAA,CAChD,CAAA,EAAG,IAAA,CAAK,KAAA,CAAM,IAAA,CAAK,QAAQ,CAAC,CAAA,CAAA,CAChC,CACJ,CACJ,CAOA,IAAA,CAAKpJ,CAAAA,CAAkC,CAC/B,OAAOA,CAAAA,EAAY,QAAA,CACnB,IAAA,CAAK,OAAA,CAAUA,CAAAA,CACRA,CAAAA,GACP,IAAA,CAAK,OAAA,CAAUA,EAAQ,OAAA,EAAW,EAAA,CAClC,IAAA,CAAK,OAAA,CAAUA,CAAAA,CAAQ,OAAA,EAAW,SAAA,CAClC,IAAA,CAAK,IAAA,CAAOA,CAAAA,CAAQ,IAAA,EAAQ,QAAA,CAC5B,IAAA,CAAK,OAAA,CAAUA,EAAQ,OAAA,GAAY,MAAA,CAAYA,CAAAA,CAAQ,OAAA,CAAU,IAAA,CAAA,CAGrE,IAAA,CAAK,OAAA,CAAU,IAAA,CACf,IAAA,CAAK,QAAA,CAAW,CAAA,CAChB,IAAA,CAAK,YAAA,CAAe,KAAA,CAEpB,KAAK,aAAA,EAAc,CACnB,IAAA,CAAK,MAAA,GACT,CAEA,IAAA,CAAKtG,CAAAA,CAAgB,CAAA,CAAG,CAChB,IAAA,CAAK,WAAA,EACL,YAAA,CAAa,IAAA,CAAK,WAAW,CAAA,CAG7BA,CAAAA,CAAQ,CAAA,CACR,IAAA,CAAK,WAAA,CAAc,MAAA,CAAO,UAAA,CAAW,IAAM,CACvC,IAAA,CAAK,WAAA,GACT,CAAA,CAAGA,CAAK,EAER,IAAA,CAAK,WAAA,GAEb,CAEA,UAAA,CAAW4P,CAAAA,CAAiB,CACxB,IAAA,CAAK,OAAA,CAAUA,CAAAA,CACf,IAAA,CAAK,MAAA,GACT,CAEA,YAAYkB,CAAAA,CAAkB,CAC1B,IAAA,CAAK,YAAA,CAAe,IAAA,CACpB,IAAA,CAAK,QAAA,CAAW,IAAA,CAAK,GAAA,CAAI,CAAA,CAAG,IAAA,CAAK,GAAA,CAAI,GAAA,CAAKA,CAAQ,CAAC,CAAA,CACnD,IAAA,CAAK,MAAA,GACT,CAEA,cAAA,CAAeC,CAAAA,CAAmB,CAC9B,IAAA,CAAK,WAAA,CAAY,IAAA,CAAK,QAAA,CAAWA,CAAS,EAC9C,CAOQ,WAAA,EAAc,CAClB,IAAA,CAAK,OAAA,CAAU,KAAA,CACf,IAAA,CAAK,OAAA,CAAU,EAAA,CACf,IAAA,CAAK,QAAA,CAAW,CAAA,CAChB,IAAA,CAAK,YAAA,CAAe,KAAA,CAEpB,KAAK,cAAA,EAAe,CACpB,IAAA,CAAK,MAAA,GACT,CAEQ,aAAA,EAAgB,CAChB,IAAA,CAAK,OAAA,GACL,QAAA,CAAS,IAAA,CAAK,KAAA,CAAM,QAAA,CAAW,UAEvC,CAEQ,cAAA,EAAiB,CACrB,QAAA,CAAS,IAAA,CAAK,KAAA,CAAM,QAAA,CAAW,GACnC,CAEQ,qBAAA,EAAwB,CAC5B,IAAA,CAAK,cAAA,CAAiB,IAAA,CAAK,eAAe,IAAA,CAAK,IAAI,CAAA,CACnD,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAW,IAAA,CAAK,cAAc,EAC5D,CAQQ,uBAAA,EAA0B,CAC9B,IAAMxR,CAAAA,CAAY,KAAK,OAAA,EAAS,aAAA,CAAc,CAAA,CAAA,EAAImQ,CAAAA,CAAI,OAAA,CAAQ,SAAS,CAAA,CAAE,CAAA,CACrEnQ,CAAAA,EACAA,CAAAA,CAAU,YAAA,CAAa,YAAA,CAAc2N,CAAAA,CAAE,SAAS,CAAC,EAEzD,CAEA,SAAA,EAAqB,CACjB,OAAO,IAAA,CAAK,OAChB,CAEA,SAAA,EAAqE,CACjE,OAAO,CACH,OAAA,CAAS,IAAA,CAAK,QACd,OAAA,CAAS,IAAA,CAAK,OAAA,CACd,QAAA,CAAU,IAAA,CAAK,QACnB,CACJ,CAIR,EAtOekD,CAAAA,CAAA,CAANzO,CAAAA,CAAAA,CALI+O,CAAAA,CAKE,SAAA,CAAA,SAAA,CAAA,CAEAN,EAAA,CAANzO,CAAAA,CAAAA,CAPI+O,CAAAA,CAOE,SAAA,CAAA,SAAA,CAAA,CAEAN,CAAAA,CAAA,CAANzO,CAAAA,CAAAA,CATI+O,CAAAA,CASE,SAAA,CAAA,SAAA,CAAA,CAEAN,CAAAA,CAAA,CAANzO,CAAAA,CAAAA,CAXI+O,CAAAA,CAWE,SAAA,CAAA,MAAA,CAAA,CAEAN,CAAAA,CAAA,CAANzO,CAAAA,CAAAA,CAbI+O,CAAAA,CAaE,SAAA,CAAA,SAAA,CAAA,CAEAN,CAAAA,CAAA,CAANzO,CAAAA,CAAAA,CAfI+O,CAAAA,CAeE,SAAA,CAAA,UAAA,CAAA,CAEAN,CAAAA,CAAA,CAANzO,CAAAA,CAAAA,CAjBI+O,CAAAA,CAiBE,SAAA,CAAA,cAAA,CAAA,CCpBR,IAAMM,CAAAA,CAAN,cAAiCpS,CAAsB,CAY1D,WAAA,CAAYC,CAAAA,CAAmB,CAC3B,KAAA,CAAMA,CAAK,CAAA,CAXR,IAAA,CAAA,MAAA,CAAsB,EAAC,CAEvB,IAAA,CAAA,QAAA,CAAoC,EAAC,CAErC,IAAA,CAAA,YAAA,CAAe,KAAA,CAEf,iBAAc,EAAA,CAEd,IAAA,CAAA,aAAA,CAAgB,KAAA,CAMnB,IAAA,CAAK,MAAA,CAAS,IAAA,CAAK,KAAA,CAAM,MAAA,CAAO,GAAA,CAAKoS,CAAAA,GAA4B,CAC7D,GAAGA,CAAAA,CACH,KAAA,CAAO,OACP,OAAA,CAAS,KACb,CAAA,CAAE,CAAA,CAGF,IAAA,IAAWA,CAAAA,IAAS,IAAA,CAAK,MAAA,CACrB,IAAA,CAAK,QAAA,CAASA,CAAAA,CAAM,IAAI,CAAA,CAAIA,CAAAA,CAAM,OAAS,GAEnD,CAEA,OAAA,EAAgB,CAEhB,CAKA,YAAA,CAAaC,CAAAA,CAAmBpQ,CAAAA,CAAsB,CAClD,IAAA,CAAK,QAAA,CAASoQ,CAAS,CAAA,CAAIpQ,CAAAA,CAG3B,IAAMmQ,CAAAA,CAAQ,IAAA,CAAK,MAAA,CAAO,IAAA,CAAKE,CAAAA,EAAKA,CAAAA,CAAE,IAAA,GAASD,CAAS,CAAA,CACpDD,CAAAA,EAAS,IAAA,CAAK,KAAA,CAAM,YAAA,GACpBA,CAAAA,CAAM,MAAQ,IAAA,CAAK,aAAA,CAAcA,CAAAA,CAAOnQ,CAAK,CAAA,CAC7CmQ,CAAAA,CAAM,OAAA,CAAU,IAAA,CAAA,CAGpB,IAAA,CAAK,MAAA,GACT,CAKA,UAAA,CAAWC,CAAAA,CAAyB,CAChC,IAAMD,CAAAA,CAAQ,IAAA,CAAK,MAAA,CAAO,IAAA,CAAKE,CAAAA,EAAKA,CAAAA,CAAE,IAAA,GAASD,CAAS,CAAA,CACpDD,CAAAA,GACAA,CAAAA,CAAM,OAAA,CAAU,IAAA,CAChBA,EAAM,KAAA,CAAQ,IAAA,CAAK,aAAA,CAAcA,CAAAA,CAAO,IAAA,CAAK,QAAA,CAASC,CAAS,CAAC,CAAA,CAChE,IAAA,CAAK,MAAA,EAAO,EAEpB,CAKA,aAAA,CAAcD,EAAkBnQ,CAAAA,CAAoC,CAChE,IAAMsQ,CAAAA,CAAaH,CAAAA,CAAM,UAAA,CACzB,GAAI,CAACG,CAAAA,CAAY,OAGjB,GAAIA,CAAAA,CAAW,QAAA,EAAY,CAACtQ,EACxB,OAAOsQ,CAAAA,CAAW,OAAA,EAAW,CAAA,EAAGH,CAAAA,CAAM,KAAA,EAASA,CAAAA,CAAM,IAAI,CAAA,YAAA,CAAA,CAG7D,GAAI,CAACnQ,CAAAA,CAAO,OAGZ,IAAMuQ,EAAc,MAAA,CAAOvQ,CAAK,CAAA,CAGhC,GAAIsQ,CAAAA,CAAW,SAAA,EAAaC,CAAAA,CAAY,MAAA,CAASD,CAAAA,CAAW,SAAA,CACxD,OAAOA,CAAAA,CAAW,OAAA,EAAW,CAAA,QAAA,EAAWA,EAAW,SAAS,CAAA,oBAAA,CAAA,CAIhE,GAAIA,CAAAA,CAAW,SAAA,EAAaC,CAAAA,CAAY,MAAA,CAASD,CAAAA,CAAW,SAAA,CACxD,OAAOA,CAAAA,CAAW,OAAA,EAAW,CAAA,QAAA,EAAWA,CAAAA,CAAW,SAAS,CAAA,mBAAA,CAAA,CAIhE,GAAIA,CAAAA,CAAW,GAAA,GAAQ,MAAA,EAAa,MAAA,CAAOtQ,CAAK,CAAA,CAAIsQ,CAAAA,CAAW,GAAA,CAC3D,OAAOA,CAAAA,CAAW,OAAA,EAAW,CAAA,iBAAA,EAAoBA,EAAW,GAAG,CAAA,CAAA,CAInE,GAAIA,CAAAA,CAAW,GAAA,GAAQ,MAAA,EAAa,MAAA,CAAOtQ,CAAK,CAAA,CAAIsQ,CAAAA,CAAW,GAAA,CAC3D,OAAOA,CAAAA,CAAW,OAAA,EAAW,CAAA,iBAAA,EAAoBA,CAAAA,CAAW,GAAG,CAAA,CAAA,CAInE,GAAIA,CAAAA,CAAW,OAAA,EAAW,CAACA,CAAAA,CAAW,OAAA,CAAQ,IAAA,CAAKC,CAAW,CAAA,CAC1D,OAAOD,CAAAA,CAAW,OAAA,EAAW,iBAIjC,GAAIA,CAAAA,CAAW,KAAA,EAAS,CAAC,4BAAA,CAA6B,IAAA,CAAKC,CAAW,CAAA,CAClE,OAAOD,CAAAA,CAAW,OAAA,EAAW,uBAAA,CAIjC,GAAIA,CAAAA,CAAW,KAAO,CAAC,gBAAA,CAAiB,IAAA,CAAKC,CAAW,CAAA,CACpD,OAAOD,CAAAA,CAAW,OAAA,EAAW,aAAA,CAIjC,GAAIA,CAAAA,CAAW,MAAA,CAAQ,CACnB,IAAM/S,EAAS+S,CAAAA,CAAW,MAAA,CAAOtQ,CAAK,CAAA,CACtC,GAAIzC,CAAAA,GAAW,IAAA,CACX,OAAO,OAAOA,CAAAA,EAAW,QAAA,CAAWA,CAAAA,CAAS,mBAErD,CAGJ,CAKA,YAAA,EAAwB,CACpB,IAAIiT,CAAAA,CAAU,IAAA,CACRC,CAAAA,CAAiC,EAAC,CAExC,IAAA,IAAWN,CAAAA,IAAS,IAAA,CAAK,MAAA,CAAQ,CAC7B,IAAMvS,EAAQ,IAAA,CAAK,aAAA,CAAcuS,CAAAA,CAAO,IAAA,CAAK,QAAA,CAASA,CAAAA,CAAM,IAAI,CAAC,CAAA,CACjEA,CAAAA,CAAM,KAAA,CAAQvS,CAAAA,CACduS,CAAAA,CAAM,OAAA,CAAU,KAEZvS,CAAAA,GACA4S,CAAAA,CAAU,KAAA,CACVC,CAAAA,CAAON,CAAAA,CAAM,IAAI,CAAA,CAAIvS,CAAAA,EAE7B,CAEA,OAAA,IAAA,CAAK,MAAA,EAAO,CAGR,CAAC4S,CAAAA,EAAW,KAAK,KAAA,CAAM,iBAAA,EACvB,IAAA,CAAK,KAAA,CAAM,iBAAA,CAAkBC,CAAM,CAAA,CAGhCD,CACX,CAKA,MAAM,YAAA,CAAa/J,CAAAA,CAA6B,CAI5C,GAHAA,EAAM,cAAA,EAAe,CAGjB,CAAC,IAAA,CAAK,YAAA,EAAa,CAAG,CAEtB,IAAMiK,CAAAA,CAAkB,IAAA,CAAK,MAAA,CAAO,IAAA,CAAKL,CAAAA,EAAKA,CAAAA,CAAE,KAAK,CAAA,CACjDK,CAAAA,EACgB,QAAA,CAAS,aAAA,CAAc,CAAA,OAAA,EAAUA,CAAAA,CAAgB,IAAI,CAAA,EAAA,CAAI,CAAA,EAChE,KAAA,EAAM,CAEnB,MACJ,CAEA,IAAA,CAAK,aAAe,IAAA,CACpB,IAAA,CAAK,WAAA,CAAc,EAAA,CACnB,IAAA,CAAK,aAAA,CAAgB,KAAA,CACrB,IAAA,CAAK,MAAA,EAAO,CAEZ,GAAI,CAEA,GAAI,IAAA,CAAK,MAAM,QAAA,CACX,MAAM,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS,IAAA,CAAK,QAAA,CAAUjK,CAAK,CAAA,CAAA,KAAA,GAGzC,IAAA,CAAK,KAAA,CAAM,QAAA,CAAU,CAC1B,IAAMV,EAAW,MAAM4K,GAAAA,CAAI,CACvB,MAAA,CAAQ,IAAA,CAAK,KAAA,CAAM,MAAA,EAAU,MAAA,CAC7B,GAAA,CAAK,IAAA,CAAK,KAAA,CAAM,QAAA,CAChB,IAAA,CAAM,IAAA,CAAK,QACf,CAAC,CAAA,CAED,IAAA,CAAK,aAAA,CAAgB,CAAA,CAAA,CAEjB,IAAA,CAAK,KAAA,CAAM,SAAA,EACX,IAAA,CAAK,KAAA,CAAM,SAAA,CAAU5K,CAAAA,CAAS,IAAI,EAE1C,CAEJ,CAAA,MAASnI,CAAAA,CAAgB,CACrB,IAAM0K,CAAAA,CAAe1K,CAAAA,YAAiB,KAAA,CAAQA,CAAAA,CAAM,OAAA,CAAU,mBAAA,CAC9D,IAAA,CAAK,WAAA,CAAc0K,CAAAA,CAEf,IAAA,CAAK,MAAM,OAAA,EACX,IAAA,CAAK,KAAA,CAAM,OAAA,CAAQ1K,CAAK,EAEhC,CAAA,OAAE,CACE,IAAA,CAAK,YAAA,CAAe,KAAA,CACpB,IAAA,CAAK,MAAA,GACT,CACJ,CAKA,WAAA,CAAYuS,CAAAA,CAAkC,CAC1C,OAAI,CAACA,CAAAA,CAAM,KAAA,EAAS,CAACA,CAAAA,CAAM,IAAA,CAAa,EAAA,CAEpCA,CAAAA,CAAM,IAAA,CACC5N,IAAAA;AAAA,+BAAA,EACU4N,EAAM,IAAI,CAAA;AAAA,qCAAA,EACJA,EAAM,IAAI,CAAA;AAAA,wBAAA,EACvBA,EAAM,KAAA,CAAQ5N,IAAAA,CAAAA,MAAAA,EAAa4N,CAAAA,CAAM,KAAK,UAAY,EAAE;AAAA;AAAA,gBAAA,CAAA,CAK3D5N,IAAAA,CAAAA,WAAAA,EAAkB4N,CAAAA,CAAM,IAAI,CAAA,CAAA,EAAIA,CAAAA,CAAM,KAAK,CAAA,QAAA,CACtD,CAKA,WAAA,CAAYA,CAAAA,CAAyB,CACjC,IAAMnQ,EAAQ,IAAA,CAAK,QAAA,CAASmQ,CAAAA,CAAM,IAAI,CAAA,EAAK,EAAA,CACrCS,CAAAA,CAAY,IAAA,CAAK,WAAA,CAAYT,CAAK,CAAA,CAExC,OAAQA,CAAAA,CAAM,IAAA,EACV,KAAK,WACD,OAAO5N,IAAAA;AAAA,+CAAA,EACsB4N,CAAAA,CAAM,WAAa,EAAE,CAAA;AAAA,4BAAA,EACxCS,CAAS;AAAA;AAAA,mCAAA,EAEFT,EAAM,IAAI;AAAA,qCAAA,EACRA,EAAM,IAAI;AAAA,4CAAA,EACHA,CAAAA,CAAM,aAAe,EAAE;AAAA,sCAAA,EAC7B,MAAA,CAAOnQ,CAAK,CAAC;AAAA,yCAAA,EACV,MAAA,CAAOmQ,CAAAA,CAAM,QAAA,EAAY,IAAA,CAAK,YAAY,CAAC;AAAA,wCAAA,EAC3ClK,CAAAA,EAAa,CACpB,IAAMnF,CAAAA,CAASmF,CAAAA,CAAE,MAAA,CACjB,IAAA,CAAK,YAAA,CAAakK,CAAAA,CAAM,IAAA,CAAMrP,CAAAA,CAAO,KAAK,EAC9C,CAAC;AAAA,uCAAA,EACQ,IAAM,IAAA,CAAK,UAAA,CAAWqP,CAAAA,CAAM,IAAI,CAAC;AAAA;AAAA,4BAAA,EAE5CA,CAAAA,CAAM,KAAA,EAASA,CAAAA,CAAM,OAAA,CAAU5N,IAAAA;AAAA,0DAAA,EACD4N,EAAM,KAAK,CAAA;AAAA,4BAAA,CAAA,CACvC,EAAE;AAAA;AAAA,oBAAA,CAAA,CAKlB,KAAK,QAAA,CAAU,CAEX,IAAMU,CAAAA,CAAAA,CADUV,EAAM,OAAA,EAAW,EAAC,EACN,GAAA,CAAKW,CAAAA,EAAyBvO,IAAAA;AAAA,sCAAA,EACtC,OAAOuO,CAAAA,CAAI,KAAK,CAAC,CAAA,CAAA,EAAIA,EAAI,KAAK,CAAA;AAAA,oBAAA,CACjD,EAED,OAAOvO,IAAAA;AAAA,+CAAA,EACsB4N,CAAAA,CAAM,WAAa,EAAE,CAAA;AAAA,4BAAA,EACxCS,CAAS;AAAA;AAAA,mCAAA,EAEFT,EAAM,IAAI;AAAA,qCAAA,EACRA,EAAM,IAAI;AAAA,sCAAA,EACT,MAAA,CAAOnQ,CAAK,CAAC;AAAA,yCAAA,EACV,MAAA,CAAOmQ,CAAAA,CAAM,QAAA,EAAY,IAAA,CAAK,YAAY,CAAC;AAAA,yCAAA,EAC1ClK,CAAAA,EAAa,CACrB,IAAMnF,CAAAA,CAASmF,CAAAA,CAAE,MAAA,CACjB,IAAA,CAAK,YAAA,CAAakK,CAAAA,CAAM,IAAA,CAAMrP,CAAAA,CAAO,KAAK,EAC9C,CAAC;AAAA,uCAAA,EACQ,IAAM,IAAA,CAAK,UAAA,CAAWqP,CAAAA,CAAM,IAAI,CAAC;AAAA;AAAA;AAAA,gCAAA,EAGxCU,CAAW;AAAA;AAAA,4BAAA,EAEfV,CAAAA,CAAM,KAAA,EAASA,CAAAA,CAAM,OAAA,CAAU5N,IAAAA;AAAA,0DAAA,EACD4N,EAAM,KAAK,CAAA;AAAA,4BAAA,CAAA,CACvC,EAAE;AAAA;AAAA,oBAAA,CAGlB,CAEA,KAAK,UAAA,CACD,OAAO5N,IAAAA;AAAA,mEAAA,EAC0C4N,CAAAA,CAAM,WAAa,EAAE,CAAA;AAAA;AAAA;AAAA;AAAA,uCAAA,EAIjDA,EAAM,IAAI;AAAA,yCAAA,EACRA,EAAM,IAAI;AAAA,4CAAA,EACP,MAAA,CAAOnQ,CAAK,CAAC;AAAA,6CAAA,EACZ,MAAA,CAAOmQ,CAAAA,CAAM,QAAA,EAAY,IAAA,CAAK,YAAY,CAAC;AAAA,6CAAA,EAC1ClK,CAAAA,EAAa,CACrB,IAAMnF,CAAAA,CAASmF,CAAAA,CAAE,MAAA,CACjB,IAAA,CAAK,YAAA,CAAakK,CAAAA,CAAM,IAAA,CAAMrP,CAAAA,CAAO,OAAO,EAChD,CAAC;AAAA;AAAA,gCAAA,EAEHqP,EAAM,IAAA,CAAO5N,IAAAA,CAAAA,aAAAA,EAAoB4N,CAAAA,CAAM,IAAI,SAAW,EAAE;AAAA,gCAAA,EACxDA,CAAAA,CAAM,OAAS,EAAE;AAAA;AAAA,4BAAA,EAErBA,CAAAA,CAAM,KAAA,EAASA,CAAAA,CAAM,OAAA,CAAU5N,IAAAA;AAAA,0DAAA,EACD4N,EAAM,KAAK,CAAA;AAAA,4BAAA,CAAA,CACvC,EAAE;AAAA;AAAA,oBAAA,CAAA,CAKlB,QACI,OAAO5N,IAAAA;AAAA,+CAAA,EACsB4N,CAAAA,CAAM,WAAa,EAAE,CAAA;AAAA,4BAAA,EACxCS,CAAS;AAAA;AAAA,sCAAA,EAECT,CAAAA,CAAM,MAAQ,MAAM,CAAA;AAAA,oCAAA,EACtBA,EAAM,IAAI,CAAA;AAAA,sCAAA,EACRA,EAAM,IAAI,CAAA;AAAA,6CAAA,EACHA,CAAAA,CAAM,aAAe,EAAE,CAAA;AAAA,uCAAA,EAC7B,MAAA,CAAOnQ,CAAK,CAAC,CAAA;AAAA,0CAAA,EACVmQ,CAAAA,CAAM,QAAA,EAAY,IAAA,CAAK,YAAY,CAAA;AAAA,wCAAA,EACpClK,CAAAA,EAAa,CACpB,IAAMnF,CAAAA,CAASmF,CAAAA,CAAE,MAAA,CACjB,IAAA,CAAK,YAAA,CAAakK,CAAAA,CAAM,IAAA,CAAMrP,CAAAA,CAAO,KAAK,EAC9C,CAAC;AAAA,uCAAA,EACQ,IAAM,IAAA,CAAK,UAAA,CAAWqP,CAAAA,CAAM,IAAI,CAAC;AAAA;AAAA,4BAAA,EAE5CA,CAAAA,CAAM,KAAA,EAASA,CAAAA,CAAM,OAAA,CAAU5N,IAAAA;AAAA,0DAAA,EACD4N,EAAM,KAAK,CAAA;AAAA,4BAAA,CAAA,CACvC,EAAE;AAAA;AAAA,oBAAA,CAItB,CACJ,CAEA,MAAA,EAAgB,CACZ,IAAMY,CAAAA,CAAe,IAAA,CAAK,MAAM,YAAA,EAAgB,GAG1CC,CAAAA,CAAa,IAAA,CAAK,OAAO,GAAA,CAAKb,CAAAA,EAAqB,KAAK,WAAA,CAAYA,CAAK,CAAC,CAAA,CAEhF,OAAO5N,IAAAA;AAAA;AAAA,sCAAA,EAEqB,IAAA,CAAK,KAAA,CAAM,SAAA,EAAa,EAAE,CAAA;AAAA,6BAAA,EAClC0D,CAAAA,EAAa,IAAA,CAAK,YAAA,CAAaA,CAAC,CAAC;AAAA;AAAA,oBAAA,EAE3C,KAAK,WAAA,CAAc1D,IAAAA;AAAA,uDAAA,EACgB,KAAK,WAAW,CAAA;AAAA,oBAAA,CAAA,CACjD,EAAE;;AAAA,oBAAA,EAEJ,KAAK,aAAA,CAAgBA,IAAAA;AAAA;AAAA,oBAAA,CAAA,CAEnB,EAAE;;AAAA,oBAAA,EAEJyO,CAAU;;AAAA;AAAA;AAAA,6CAAA,EAIeD,CAAAA,CAAa,WAAa,EAAE,CAAA;AAAA,iCAAA,EACxC,MAAA,CAAO,IAAA,CAAK,YAAY,CAAC;AAAA;AAAA,wBAAA,EAElC,KAAK,YAAA,CACAA,CAAAA,CAAa,cAAgB,eAAA,CAC7BA,CAAAA,CAAa,OAAS,QAC7B;AAAA;AAAA;AAAA,YAAA,CAIhB,CAEA,MAAA,EAAiB,CACb,OAAOxU,EAAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAA,CAgFX,CACJ,EAncW+S,CAAAA,CAAA,CAANzO,CAAAA,CAAAA,CAFQqP,EAEF,SAAA,CAAA,QAAA,CAAA,CAEAZ,CAAAA,CAAA,CAANzO,CAAAA,CAAAA,CAJQqP,EAIF,SAAA,CAAA,UAAA,CAAA,CAEAZ,CAAAA,CAAA,CAANzO,CAAAA,CAAAA,CANQqP,CAAAA,CAMF,0BAEAZ,CAAAA,CAAA,CAANzO,CAAAA,CAAAA,CARQqP,CAAAA,CAQF,yBAEAZ,CAAAA,CAAA,CAANzO,GAVQqP,CAAAA,CAUF,SAAA,CAAA,eAAA,CAAA,CAgcJ,SAASe,EAAAA,CAAU7F,CAAAA,CAA2B,CAEjD,OADa,IAAI8E,CAAAA,CAAmB9E,CAAM,EAC9B,MAAA,EAChB,CCxbA,IAAMwD,CAAAA,CAAM,CACR,SAAA,CAAW,oBAEX,OAAA,CAAS,iBAAA,CAET,MAAO,CACH,IAAA,CAAM,WACN,KAAA,CAAO,eACX,CAAA,CAEA,MAAA,CAAQ,CACJ,SAAA,CAAW,gBAAA,CACX,KAAM,oBAAA,CACN,OAAA,CAAS,wBACT,KAAA,CAAO,4BAAA,CACP,WAAA,CAAa,2BACjB,EAEA,IAAA,CAAM,CACF,UAAW,cAAA,CACX,OAAA,CAAS,kBACT,KAAA,CAAO,mBAAA,CACP,aAAA,CAAe,2BACnB,EAEA,MAAA,CAAQ,gBAAA,CAER,OAAQ,QACZ,CAAA,CAQasC,EAAN,cAAoBpT,CAAU,CAA9B,WAAA,EAAA,CAAA,KAAA,CAAA,GAAA,SAAA,CAAA,CAKI,YAAwB,EAAC,CAChC,KAAQ,MAAA,CAAS,EAAA,CAKjB,MAAM,OAAA,EAAU,CACZ,IAAA,CAAK,qBAAA,GAEL,MAAA,CAAO,gBAAA,CAAiB,iBAAkB,IAAM,CAC5C,KAAK,MAAA,GACT,CAAC,EACL,CAEA,SAAA,EAAY,CACJ,KAAK,eAAA,EACL,QAAA,CAAS,oBAAoB,SAAA,CAAW,IAAA,CAAK,eAAe,EAEpE,CAIA,MAAA,EAAS,CACL,OAAI,IAAA,CAAK,MAAA,CAAO,SAAW,CAAA,CAChBwJ,aAAAA,CAAc,KAAA,CAAO,CAAE,UAAWsH,CAAAA,CAAI,SAAU,CAAC,CAAA,CAGrDtH,aAAAA,CAAc,MAAO,CAAE,SAAA,CAAWsH,CAAAA,CAAI,SAAU,EACnD,GAAG,IAAA,CAAK,OAAO,GAAA,CAAIuC,CAAAA,EAAS,KAAK,WAAA,CAAYA,CAAK,CAAC,CACvD,CACJ,CAEA,WAAA,CAAYA,EAAoB,CAC5B,IAAMC,EAAY,CAAA,UAAA,EAAaD,CAAAA,CAAM,IAAA,EAAQ,QAAQ,GAC/CE,CAAAA,CAAeF,CAAAA,CAAM,QAAU,CAAA,UAAA,EAAaA,CAAAA,CAAM,OAAO,CAAA,CAAA,CAAK,EAAA,CAEpE,OAAO7J,aAAAA,CAAc,MAAO,CACxB,GAAA,CAAK,OAAO6J,CAAAA,CAAM,EAAE,EACpB,SAAA,CAAWvC,CAAAA,CAAI,OAAA,CACf,eAAA,CAAiBuC,EAAM,EAAA,CACvB,OAAA,CAAUlL,GAAa,CACdA,CAAAA,CAAE,OAAuB,SAAA,CAAU,QAAA,CAAS2I,CAAAA,CAAI,OAAO,GACxDuC,CAAAA,CAAM,cAAA,GAAmB,OACzB,IAAA,CAAK,UAAA,CAAWA,EAAM,EAAA,CAAI,KAAK,EAEvC,CACJ,EACI7J,aAAAA,CAAc,KAAA,CAAO,CACjB,SAAA,CAAW,CAAA,EAAGsH,EAAI,KAAA,CAAM,IAAI,CAAA,CAAA,EAAIwC,CAAS,IAAIC,CAAY,CAAA,CAAA,CACzD,KAAM,QAAA,CACN,YAAA,CAAc,OACd,iBAAA,CAAmB,CAAA,YAAA,EAAeF,CAAAA,CAAM,EAAE,EAC9C,CAAA,CAEIA,CAAAA,CAAM,kBAAoB,KAAA,CAAQ7J,aAAAA,CAAc,SAAU,CACtD,SAAA,CAAWsH,CAAAA,CAAI,KAAA,CAAM,MACrB,OAAA,CAAS,IAAM,KAAK,UAAA,CAAWuC,CAAAA,CAAM,GAAI,KAAK,CAAA,CAC9C,YAAA,CAAc,OAClB,EACI7J,aAAAA,CAAc,GAAA,CAAK,CAAE,SAAA,CAAW,cAAe,CAAC,CACpD,CAAA,CAAI,IAAA,CAGJA,aAAAA,CAAc,MAAO,CAAE,SAAA,CAAWsH,EAAI,MAAA,CAAO,SAAU,EACnDuC,CAAAA,CAAM,IAAA,CAAO7J,aAAAA,CAAc,KAAA,CAAO,CAAE,SAAA,CAAWsH,CAAAA,CAAI,OAAO,IAAK,CAAA,CAC3DtH,cAAc,GAAA,CAAK,CAAE,SAAA,CAAW6J,CAAAA,CAAM,IAAK,CAAC,CAChD,EAAI,IAAA,CACJ7J,aAAAA,CAAc,MAAO,CAAE,SAAA,CAAWsH,CAAAA,CAAI,MAAA,CAAO,OAAQ,CAAA,CACjDtH,aAAAA,CAAc,KAAM,CAChB,EAAA,CAAI,eAAe6J,CAAAA,CAAM,EAAE,CAAA,CAAA,CAC3B,SAAA,CAAWvC,EAAI,MAAA,CAAO,KAAA,CACtB,iBAAkBuC,CAAAA,CAAM,iBAC5B,EACIA,CAAAA,CAAM,iBAAA,CAAoB/E,CAAAA,CAAE+E,CAAAA,CAAM,iBAAiB,CAAA,CAAIA,CAAAA,CAAM,KACjE,CAAA,CACAA,CAAAA,CAAM,YAAc7J,aAAAA,CAAc,GAAA,CAAK,CACnC,SAAA,CAAWsH,EAAI,MAAA,CAAO,WAAA,CACtB,iBAAkBuC,CAAAA,CAAM,uBAC5B,EACIA,CAAAA,CAAM,uBAAA,CAA0B/E,CAAAA,CAAE+E,CAAAA,CAAM,uBAAuB,CAAA,CAAIA,CAAAA,CAAM,WAC7E,CAAA,CAAI,IACR,CACJ,CAAA,CAGA7J,aAAAA,CAAc,KAAA,CAAO,CAAE,UAAWsH,CAAAA,CAAI,IAAA,CAAK,SAAU,CAAA,CACjDuC,EAAM,OAAA,CAAU7J,aAAAA,CAAc,GAAA,CAAK,CAC/B,UAAWsH,CAAAA,CAAI,IAAA,CAAK,QACpB,gBAAA,CAAkBuC,CAAAA,CAAM,mBAC5B,CAAA,CACIA,CAAAA,CAAM,mBAAA,CAAsB/E,CAAAA,CAAE+E,EAAM,mBAAmB,CAAA,CAAIA,EAAM,OACrE,CAAA,CAAI,KAGJA,CAAAA,CAAM,IAAA,GAAS,QAAA,CAAW7J,aAAAA,CAAc,QAAS,CAC7C,IAAA,CAAM,OACN,SAAA,CAAWsH,CAAAA,CAAI,KAAK,KAAA,CACpB,KAAA,CAAOuC,CAAAA,CAAM,UAAA,EAAc,GAC3B,WAAA,CAAa/E,CAAAA,CAAE,0BAA0B,CAAA,CACzC,gBAAA,CAAkB,2BAClB,OAAA,CAAUnG,CAAAA,EAAa,CACnBkL,CAAAA,CAAM,WAAclL,CAAAA,CAAE,MAAA,CAA4B,MACtD,CACJ,CAAC,EAAI,IAAA,CAGLkL,CAAAA,CAAM,IAAA,GAAS,MAAA,EAAUA,EAAM,UAAA,CAAa7J,aAAAA,CAAc,MAAO,CAC7D,SAAA,CAAWsH,EAAI,IAAA,CAAK,aACxB,CAAA,CACIqC,EAAAA,CAAUE,EAAM,UAAU,CAC9B,EAAI,IAAA,CAGJA,CAAAA,CAAM,eAAiB,IAC3B,CAAA,CAGAA,CAAAA,CAAM,OAAA,EAAWA,EAAM,OAAA,CAAQ,MAAA,CAAS,GAAKA,CAAAA,CAAM,IAAA,GAAS,OAAS7J,aAAAA,CAAc,KAAA,CAAO,CACtF,SAAA,CAAWsH,EAAI,MACnB,CAAA,CACI,GAAGuC,CAAAA,CAAM,OAAA,CAAQ,IAAIG,CAAAA,EAAUhK,aAAAA,CAAc,QAAA,CAAU,CACnD,UAAW,CAAA,EAAGsH,CAAAA,CAAI,MAAM,CAAA,CAAA,EAAI0C,CAAAA,CAAO,SAAW,WAAW,CAAA,CAAA,CACzD,gBAAA,CAAkBA,CAAAA,CAAO,aACzB,QAAA,CAAUA,CAAAA,CAAO,SAAWH,CAAAA,CAAM,YAAA,CAClC,QAAS,SAAY,CACbG,CAAAA,CAAO,OAAA,EAAWH,EAAM,YAAA,EAC5B,MAAMG,EAAO,OAAA,GACjB,CACJ,CAAA,CACIA,CAAAA,CAAO,IAAA,CAAOhK,aAAAA,CAAc,IAAK,CAAE,SAAA,CAAWgK,EAAO,IAAK,CAAC,EAAI,IAAA,CAC/DA,CAAAA,CAAO,OAAA,EAAWH,CAAAA,CAAM,aACpB7J,aAAAA,CAAc,GAAA,CAAK,CAAE,SAAA,CAAW,wBAAyB,CAAC,CAAA,CAAI,IAAA,CAClE,GAAA,CACAgK,CAAAA,CAAO,aAAelF,CAAAA,CAAEkF,CAAAA,CAAO,YAAY,CAAA,CAAIA,CAAAA,CAAO,KAC1D,CAAC,CACL,CAAA,CAAI,IACR,CACJ,CACJ,CAOA,KAAK9L,CAAAA,CAAmE,CACpE,OAAO,IAAI,OAAA,CAASwC,CAAAA,EAAY,CAC5B,IAAMvL,CAAAA,CAAK,IAAA,CAAK,SAEV0U,CAAAA,CAAqB,CACvB,GAAG3L,CAAAA,CACH,EAAA,CAAA/I,CAAAA,CACA,OAAA,CAAAuL,EACA,IAAA,CAAMxC,CAAAA,CAAQ,MAAQ,QAAA,CACtB,IAAA,CAAMA,EAAQ,IAAA,EAAQ,QAAA,CACtB,cAAA,CAAgBA,CAAAA,CAAQ,iBAAmB,KAAA,CAC3C,aAAA,CAAeA,EAAQ,aAAA,GAAkB,KAAA,CACzC,gBAAiBA,CAAAA,CAAQ,eAAA,GAAoB,KAAA,CAC7C,YAAA,CAAc,KAClB,CAAA,CAEA,IAAA,CAAK,OAAS,CAAC,GAAG,KAAK,MAAA,CAAQ2L,CAAK,CAAA,CACpC,IAAA,CAAK,eAAc,CACnB,IAAA,CAAK,SACT,CAAC,CACL,CAKA,QAAA,CAAS3L,CAAAA,CAA6C,CAClD,OAAO,IAAI,OAAA,CAAQ,CAACwC,CAAAA,CAASuJ,CAAAA,GAAY,CACrC,IAAM9U,CAAAA,CAAK,IAAA,CAAK,MAAA,EAAA,CAGV+U,EAAgC,CAClC,GAAGhM,EAAQ,UAAA,CACX,QAAA,CAAU,MAAOC,CAAAA,EAAS,CACtB,IAAM0L,CAAAA,CAAQ,KAAK,MAAA,CAAO,IAAA,CAAKM,GAAKA,CAAAA,CAAE,EAAA,GAAOhV,CAAE,CAAA,CAC3C0U,CAAAA,GACAA,CAAAA,CAAM,YAAA,CAAe,KACrB,IAAA,CAAK,MAAA,IAGT,GAAI,CAEI3L,EAAQ,UAAA,CAAW,QAAA,EACnB,MAAMA,CAAAA,CAAQ,WAAW,QAAA,CAASC,CAAAA,CAAM,MAAgB,CAAA,CAG5D,IAAA,CAAK,WAAWhJ,CAAAA,CAAIgJ,CAAI,CAAA,CACxBuC,CAAAA,CAAQvC,CAAI,EAChB,CAAA,MAAS7H,EAAO,CACRuT,CAAAA,GACAA,EAAM,YAAA,CAAe,KAAA,CACrB,IAAA,CAAK,MAAA,IAIL3L,CAAAA,CAAQ,UAAA,CAAW,SACnBA,CAAAA,CAAQ,UAAA,CAAW,QAAQ5H,CAAK,EAExC,CACJ,CAAA,CACA,aAAc,CACV,GAAG4H,EAAQ,UAAA,CAAW,YAAA,CACtB,UAAWA,CAAAA,CAAQ,UAAA,CAAW,YAAA,EAAc,SAAA,EAAa,GAAGoJ,CAAAA,CAAI,MAAM,eAC1E,CACJ,CAAA,CAEMuC,EAAqB,CACvB,KAAA,CAAO3L,CAAAA,CAAQ,KAAA,CACf,kBAAmBA,CAAAA,CAAQ,iBAAA,CAC3B,YAAaA,CAAAA,CAAQ,WAAA,CACrB,wBAAyBA,CAAAA,CAAQ,uBAAA,CACjC,IAAA,CAAM,MAAA,CACN,QAASA,CAAAA,CAAQ,OAAA,EAAW,SAAA,CAC5B,IAAA,CAAMA,EAAQ,IAAA,EAAQ,QAAA,CACtB,IAAA,CAAMA,CAAAA,CAAQ,KACd,UAAA,CAAYgM,CAAAA,CACZ,eAAgBhM,CAAAA,CAAQ,cAAA,GAAmB,MAC3C,aAAA,CAAeA,CAAAA,CAAQ,aAAA,GAAkB,KAAA,CACzC,gBAAiBA,CAAAA,CAAQ,eAAA,GAAoB,MAC7C,EAAA,CAAA/I,CAAAA,CACA,QAAAuL,CAAAA,CACA,YAAA,CAAc,KAClB,CAAA,CAEA,KAAK,MAAA,CAAS,CAAC,GAAG,IAAA,CAAK,MAAA,CAAQmJ,CAAK,CAAA,CACpC,IAAA,CAAK,aAAA,EAAc,CACnB,KAAK,MAAA,GACT,CAAC,CACL,CAKA,QAAQ3L,CAAAA,CAca,CACjB,OAAO,IAAI,QAASwC,CAAAA,EAAY,CAC5B,IAAMvL,CAAAA,CAAK,IAAA,CAAK,SAEV0U,CAAAA,CAAqB,CACvB,EAAA,CAAA1U,CAAAA,CACA,MAAO+I,CAAAA,CAAQ,KAAA,CACf,kBAAmBA,CAAAA,CAAQ,iBAAA,CAC3B,QAASA,CAAAA,CAAQ,OAAA,CACjB,mBAAA,CAAqBA,CAAAA,CAAQ,oBAC7B,IAAA,CAAM,SAAA,CACN,QAASA,CAAAA,CAAQ,OAAA,EAAW,UAC5B,IAAA,CAAMA,CAAAA,CAAQ,IAAA,EAAQ,OAAA,CACtB,KAAMA,CAAAA,CAAQ,IAAA,CACd,QAASwC,CAAAA,CACT,SAAA,CAAWxC,EAAQ,SAAA,CACnB,QAAA,CAAUA,CAAAA,CAAQ,QAAA,CAClB,QAAS,CACL,CACI,MAAOA,CAAAA,CAAQ,WAAA,EAAe,SAC9B,YAAA,CAAcA,CAAAA,CAAQ,kBAAA,EAAsB,eAAA,CAC5C,QAAS,WAAA,CACT,IAAA,CAAM,eACN,OAAA,CAAS,SAAY,CACbA,CAAAA,CAAQ,QAAA,EACR,MAAMA,CAAAA,CAAQ,UAAS,CAE3B,IAAA,CAAK,WAAW/I,CAAAA,CAAI,KAAK,EAC7B,CACJ,CAAA,CACA,CACI,KAAA,CAAO+I,EAAQ,YAAA,EAAgB,SAAA,CAC/B,aAAcA,CAAAA,CAAQ,mBAAA,EAAuB,iBAC7C,OAAA,CAASA,CAAAA,CAAQ,OAAA,GAAY,QAAA,CAAW,SAAW,SAAA,CACnD,IAAA,CAAM,eACN,OAAA,CAAS,SAAY,CACbA,CAAAA,CAAQ,SAAA,EACR,MAAMA,CAAAA,CAAQ,WAAU,CAE5B,IAAA,CAAK,WAAW/I,CAAAA,CAAI,IAAI,EAC5B,CACJ,CACJ,CACJ,CAAA,CAEA,KAAK,MAAA,CAAS,CAAC,GAAG,IAAA,CAAK,MAAA,CAAQ0U,CAAK,CAAA,CACpC,IAAA,CAAK,aAAA,EAAc,CACnB,KAAK,MAAA,GACT,CAAC,CACL,CAKA,MAAM3L,CAAAA,CAWe,CACjB,OAAO,IAAI,QAASwC,CAAAA,EAAY,CAC5B,IAAMvL,CAAAA,CAAK,IAAA,CAAK,SAEV0U,CAAAA,CAAqB,CACvB,EAAA,CAAA1U,CAAAA,CACA,MAAO+I,CAAAA,CAAQ,KAAA,CACf,kBAAmBA,CAAAA,CAAQ,iBAAA,CAC3B,QAASA,CAAAA,CAAQ,OAAA,CACjB,mBAAA,CAAqBA,CAAAA,CAAQ,oBAC7B,IAAA,CAAM,OAAA,CACN,QAASA,CAAAA,CAAQ,OAAA,EAAW,OAC5B,IAAA,CAAMA,CAAAA,CAAQ,IAAA,EAAQ,OAAA,CACtB,KAAMA,CAAAA,CAAQ,IAAA,CACd,QAASwC,CAAAA,CACT,SAAA,CAAWxC,EAAQ,SAAA,CACnB,OAAA,CAAS,CACL,CACI,MAAOA,CAAAA,CAAQ,OAAA,EAAW,KAC1B,YAAA,CAAcA,CAAAA,CAAQ,gBAAkB,UAAA,CACxC,OAAA,CAAS,SAAA,CACT,IAAA,CAAM,eACN,OAAA,CAAS,SAAY,CACbA,CAAAA,CAAQ,SAAA,EACR,MAAMA,CAAAA,CAAQ,SAAA,EAAU,CAE5B,IAAA,CAAK,WAAW/I,CAAAA,CAAI,IAAI,EAC5B,CACJ,CACJ,CACJ,CAAA,CAEA,IAAA,CAAK,MAAA,CAAS,CAAC,GAAG,IAAA,CAAK,MAAA,CAAQ0U,CAAK,CAAA,CACpC,IAAA,CAAK,eAAc,CACnB,IAAA,CAAK,MAAA,GACT,CAAC,CACL,CAKA,OAAO3L,CAAAA,CAaoB,CACvB,OAAO,IAAI,OAAA,CAASwC,CAAAA,EAAY,CAC5B,IAAMvL,CAAAA,CAAK,IAAA,CAAK,SAEV0U,CAAAA,CAAqB,CACvB,GAAA1U,CAAAA,CACA,KAAA,CAAO+I,CAAAA,CAAQ,KAAA,CACf,kBAAmBA,CAAAA,CAAQ,iBAAA,CAC3B,QAASA,CAAAA,CAAQ,OAAA,CACjB,oBAAqBA,CAAAA,CAAQ,mBAAA,CAC7B,IAAA,CAAM,QAAA,CACN,QAAS,SAAA,CACT,IAAA,CAAMA,EAAQ,IAAA,CACd,UAAA,CAAYA,EAAQ,YAAA,EAAgB,EAAA,CACpC,OAAA,CAASwC,CAAAA,CACT,UAAWxC,CAAAA,CAAQ,SAAA,CACnB,SAAUA,CAAAA,CAAQ,QAAA,CAClB,QAAS,CACL,CACI,KAAA,CAAOA,CAAAA,CAAQ,aAAe,QAAA,CAC9B,YAAA,CAAcA,EAAQ,kBAAA,EAAsB,cAAA,CAC5C,QAAS,WAAA,CACT,OAAA,CAAS,SAAY,CACbA,EAAQ,QAAA,EACR,MAAMA,EAAQ,QAAA,EAAS,CAE3B,KAAK,UAAA,CAAW/I,CAAAA,CAAI,IAAI,EAC5B,CACJ,CAAA,CACA,CACI,KAAA,CAAO+I,CAAAA,CAAQ,cAAgB,IAAA,CAC/B,YAAA,CAAcA,CAAAA,CAAQ,mBAAA,EAAuB,WAC7C,OAAA,CAAS,SAAA,CACT,QAAS,SAAY,CACjB,IAAMxF,CAAAA,CAAQmR,CAAAA,CAAM,UAAA,EAAc,EAAA,CAC9B3L,EAAQ,SAAA,EACR,MAAMA,EAAQ,SAAA,CAAUxF,CAAK,EAEjC,IAAA,CAAK,UAAA,CAAWvD,CAAAA,CAAIuD,CAAK,EAC7B,CACJ,CACJ,CACJ,CAAA,CAEA,IAAA,CAAK,OAAS,CAAC,GAAG,IAAA,CAAK,MAAA,CAAQmR,CAAK,CAAA,CACpC,IAAA,CAAK,gBACT,CAAC,CACL,CAKA,UAAA,CAAW1U,CAAAA,CAAYc,CAAAA,CAAuC,CAC1D,IAAM4T,CAAAA,CAAQ,KAAK,MAAA,CAAO,IAAA,CAAKM,GAAKA,CAAAA,CAAE,EAAA,GAAOhV,CAAE,CAAA,CAC3C0U,GAAO,OAAA,EACPA,CAAAA,CAAM,QAAQ5T,CAAM,CAAA,CAGxB,KAAK,MAAA,CAAS,IAAA,CAAK,MAAA,CAAO,MAAA,CAAOkU,GAAKA,CAAAA,CAAE,EAAA,GAAOhV,CAAE,CAAA,CAE7C,IAAA,CAAK,OAAO,MAAA,GAAW,CAAA,EACvB,IAAA,CAAK,cAAA,GAGT,IAAA,CAAK,MAAA,GACT,CAKA,QAAA,EAAW,CACP,IAAA,CAAK,MAAA,CAAO,OAAA,CAAQ0U,CAAAA,EAAS,CACrBA,CAAAA,CAAM,OAAA,EACNA,EAAM,OAAA,CAAQ,KAAK,EAE3B,CAAC,CAAA,CACD,IAAA,CAAK,MAAA,CAAS,EAAC,CACf,IAAA,CAAK,gBAAe,CACpB,IAAA,CAAK,SACT,CAIQ,aAAA,EAAgB,CACpB,SAAS,IAAA,CAAK,KAAA,CAAM,SAAW,SACnC,CAEQ,gBAAiB,CACrB,QAAA,CAAS,IAAA,CAAK,KAAA,CAAM,SAAW,GACnC,CAEQ,uBAAwB,CAC5B,IAAA,CAAK,gBAAmB,CAAA,EAAqB,CACzC,GAAI,CAAA,CAAE,MAAQ,QAAA,EAAY,IAAA,CAAK,OAAO,MAAA,CAAS,CAAA,CAAG,CAC9C,IAAMO,CAAAA,CAAY,IAAA,CAAK,MAAA,CAAO,KAAK,MAAA,CAAO,MAAA,CAAS,CAAC,CAAA,CAChDA,CAAAA,CAAU,gBAAkB,KAAA,EAC5B,IAAA,CAAK,UAAA,CAAWA,CAAAA,CAAU,GAAI,KAAK,EAE3C,CACJ,CAAA,CACA,QAAA,CAAS,iBAAiB,SAAA,CAAW,IAAA,CAAK,eAAe,EAC7D,CACJ,EAxdWpC,CAAAA,CAAA,CAANzO,CAAAA,CAAAA,CALQqQ,CAAAA,CAKF,oBAgeX,IAAIS,CAAAA,CAA4B,IAAA,CAEzB,SAASC,GAAUnT,CAAAA,CAAgC,CACtD,GAAIkT,CAAAA,CAAa,OAAOA,EAExB,IAAME,CAAAA,CAAiBpT,CAAAA,EAAa,QAAA,CAAS,cAAc,KAAK,CAAA,CAChE,OAAKA,CAAAA,EACD,QAAA,CAAS,KAAK,WAAA,CAAYoT,CAAc,CAAA,CAG5CF,CAAAA,CAAc,IAAIT,CAAAA,CAClBS,CAAAA,CAAY,MAAME,CAAc,CAAA,CAEzBF,CACX,CAEO,SAASG,CAAAA,EAAkB,CAC9B,OAAKH,CAAAA,GACDA,CAAAA,CAAcC,IAAU,CAAA,CAErBD,CACX,CAGO,IAAMR,EAAAA,CAAQ,CACjB,IAAA,CAAO3L,GAA0BsM,CAAAA,EAAS,CAAE,KAAKtM,CAAO,CAAA,CAExD,QAAUA,CAAAA,EACNsM,CAAAA,EAAS,CAAE,OAAA,CAAQtM,CAAO,CAAA,CAE9B,KAAA,CAAQA,GACJsM,CAAAA,EAAS,CAAE,MAAMtM,CAAO,CAAA,CAE5B,MAAA,CAASA,CAAAA,EAOHsM,GAAS,CAAE,MAAA,CAAOtM,CAAO,CAAA,CAE/B,QAAA,CAAWA,GACPsM,CAAAA,EAAS,CAAE,QAAA,CAAStM,CAAO,EAE/B,UAAA,CAAY,CAAC/I,EAAYc,CAAAA,GACrBuU,CAAAA,GAAW,UAAA,CAAWrV,CAAAA,CAAIc,CAAM,CAAA,CAEpC,eAAgB,IAAMuU,CAAAA,GAAW,UAAA,CAAWA,CAAAA,GAAW,MAAA,CAAO,MAAA,CAAS,CAAA,CAAG,KAAK,EAE/E,eAAA,CAAiB,IAAMA,GAAS,CAAE,UAAA,CAAW,EAAG,KAAK,CAAA,CAErD,QAAA,CAAU,IAAMA,GAAS,CAAE,QAAA,EAC/B,ECrnBA,IAAMlD,CAAAA,CAAM,CACR,SAAA,CAAW,eAAA,CAEX,OAAQ,qBAAA,CAER,GAAA,CAAK,CACD,IAAA,CAAM,kBAAA,CACN,MAAA,CAAQ,0BAAA,CACR,SAAU,4BAAA,CACV,KAAA,CAAO,oBACX,CAAA,CAEA,OAAA,CAAS,CACL,SAAA,CAAW,sBAAA,CACX,UAAA,CAAY,yBAAA,CACZ,MAAO,oBACX,CACJ,EA2CamD,CAAAA,CAAN,cAAyBjU,CAAU,CAAnC,WAAA,EAAA,CAAA,KAAA,CAAA,GAAA,SAAA,CAAA,CAKI,IAAA,CAAA,WAAA,CAAsB,EAAA,CAEtB,UAAc,EAAC,CAEf,cAAwB,KAAA,CAExB,IAAA,CAAA,KAAA,CAAkB,UAElB,IAAA,CAAA,SAAA,CAAoB,EAAA,CAEpB,IAAA,CAAA,eAAA,CAA0B,EAAA,CAE1B,sBAA2B,EAAA,CAE3B,IAAA,CAAA,YAAA,CAAwB,KAAA,CAExB,IAAA,CAAA,YAAA,CAAwB,MAExB,IAAA,CAAA,UAAA,CAAqB,mBAAA,CAE5B,IAAA,CAAQ,mBAAA,CAAwC,MAKhD,MAAM,OAAA,EAAU,CAEZ,MAAA,CAAO,gBAAA,CAAiB,iBAAkB,IAAM,CAC5C,IAAA,CAAK,MAAA,GACT,CAAC,EACL,CAEA,SAAA,EAAY,CAEJ,KAAK,mBAAA,EAAuB,OAAO,IAAA,CAAK,mBAAA,CAAoB,WAAc,UAAA,EAC1E,IAAA,CAAK,oBAAoB,SAAA,GAEjC,CAOA,IAAA,CAAK0H,CAAAA,CAA4B,CAa7B,GAZA,KAAK,IAAA,CAAOA,CAAAA,CAAQ,KACpB,IAAA,CAAK,QAAA,CAAWA,EAAQ,QAAA,EAAY,KAAA,CACpC,IAAA,CAAK,KAAA,CAAQA,EAAQ,KAAA,EAAS,SAAA,CAC9B,KAAK,SAAA,CAAYA,CAAAA,CAAQ,WAAa,EAAA,CACtC,IAAA,CAAK,eAAA,CAAkBA,CAAAA,CAAQ,iBAAmB,EAAA,CAClD,IAAA,CAAK,iBAAmBA,CAAAA,CAAQ,gBAAA,EAAoB,GACpD,IAAA,CAAK,YAAA,CAAeA,CAAAA,CAAQ,YAAA,EAAgB,MAC5C,IAAA,CAAK,YAAA,CAAeA,EAAQ,YAAA,EAAgB,KAAA,CAC5C,KAAK,UAAA,CAAaA,CAAAA,CAAQ,UAAA,EAAc,mBAAA,CACxC,KAAK,QAAA,CAAWA,CAAAA,CAAQ,SAGpB,IAAA,CAAK,YAAA,CAAc,CACnB,IAAMwM,CAAAA,CAAW,YAAA,CAAa,OAAA,CAAQ,KAAK,UAAU,CAAA,CACjDA,GAAY,IAAA,CAAK,IAAA,CAAK,KAAK5F,CAAAA,EAAKA,CAAAA,CAAE,EAAA,GAAO4F,CAAQ,IACjD,IAAA,CAAK,WAAA,CAAcA,GAE3B,CAEA,OAAK,KAAK,WAAA,GACN,IAAA,CAAK,WAAA,CAAcxM,CAAAA,CAAQ,YAAc,IAAA,CAAK,IAAA,CAAK,CAAC,CAAA,EAAG,EAAA,EAAM,IAGjE,IAAA,CAAK,MAAA,EAAO,CACL,IACX,CAKA,MAAM,YAAA,CAAayM,EAAe,CAC9B,IAAMC,EAAM,IAAA,CAAK,IAAA,CAAK,IAAA,CAAK9F,CAAAA,EAAKA,EAAE,EAAA,GAAO6F,CAAK,EAC1C,CAACC,CAAAA,EAAOA,EAAI,QAAA,GAGZ,IAAA,CAAK,mBAAA,EAAuB,OAAO,KAAK,mBAAA,CAAoB,SAAA,EAAc,YAC1E,IAAA,CAAK,mBAAA,CAAoB,WAAU,CAEvC,IAAA,CAAK,mBAAA,CAAsB,IAAA,CAE3B,KAAK,WAAA,CAAcD,CAAAA,CAGf,KAAK,YAAA,EACL,YAAA,CAAa,QAAQ,IAAA,CAAK,UAAA,CAAYA,CAAK,CAAA,CAI3CC,EAAI,UAAA,EACJ,MAAMA,EAAI,UAAA,EAAW,CAMrB,KAAK,QAAA,EACL,MAAM,IAAA,CAAK,QAAA,CAASD,CAAK,CAAA,CAG7B,IAAA,CAAK,QAAO,EAChB,CAKA,OAAOC,CAAAA,CAAU,CACb,IAAA,CAAK,IAAA,CAAO,CAAC,GAAG,IAAA,CAAK,KAAMA,CAAG,CAAA,CAC9B,KAAK,MAAA,GACT,CAKA,SAAA,CAAUD,EAAe,CACrB,IAAA,CAAK,KAAO,IAAA,CAAK,IAAA,CAAK,OAAO7F,CAAAA,EAAKA,CAAAA,CAAE,EAAA,GAAO6F,CAAK,EAC5C,IAAA,CAAK,WAAA,GAAgBA,GAAS,IAAA,CAAK,IAAA,CAAK,OAAS,CAAA,GACjD,IAAA,CAAK,WAAA,CAAc,IAAA,CAAK,KAAK,CAAC,CAAA,CAAE,IAEpC,IAAA,CAAK,MAAA,GACT,CAKA,SAAA,CAAUA,CAAAA,CAAe3H,CAAAA,CAAuB,CAC5C,IAAM4H,CAAAA,CAAM,KAAK,IAAA,CAAK,IAAA,CAAK9F,GAAKA,CAAAA,CAAE,EAAA,GAAO6F,CAAK,CAAA,CAC1CC,IACA,MAAA,CAAO,MAAA,CAAOA,EAAK5H,CAAO,CAAA,CAC1B,KAAK,MAAA,EAAO,EAEpB,CAKA,YAAA,EAAgC,CAC5B,OAAO,IAAA,CAAK,KAAK,IAAA,CAAK8B,CAAAA,EAAKA,EAAE,EAAA,GAAO,IAAA,CAAK,WAAW,CACxD,CAIA,MAAA,EAAS,CACL,IAAM+F,CAAAA,CAAiB,CACnBvD,EAAI,SAAA,CACJ,CAAA,gBAAA,EAAmB,IAAA,CAAK,QAAQ,GAChC,CAAA,gBAAA,EAAmB,IAAA,CAAK,KAAK,CAAA,CAAA,CAC7B,IAAA,CAAK,SACT,CAAA,CAAE,MAAA,CAAO,OAAO,CAAA,CAAE,KAAK,GAAG,CAAA,CAE1B,OAAOtH,aAAAA,CAAc,KAAA,CAAO,CAAE,SAAA,CAAW6K,CAAe,CAAA,CACpD,IAAA,CAAK,eAAc,CACnB,IAAA,CAAK,kBACT,CACJ,CAEA,aAAA,EAAgB,CACZ,IAAMC,CAAAA,CAAc,CAChBxD,CAAAA,CAAI,MAAA,CACJ,KAAK,eACT,CAAA,CAAE,OAAO,OAAO,CAAA,CAAE,IAAA,CAAK,GAAG,EAE1B,OAAOtH,aAAAA,CAAc,MAAO,CAAE,SAAA,CAAW8K,CAAY,CAAA,CACjD,GAAG,IAAA,CAAK,IAAA,CAAK,IAAIF,CAAAA,EAAO,IAAA,CAAK,UAAUA,CAAG,CAAC,CAC/C,CACJ,CAEA,SAAA,CAAUA,CAAAA,CAAU,CAChB,IAAMG,CAAAA,CAAW,IAAA,CAAK,WAAA,GAAgBH,EAAI,EAAA,CAEpCI,CAAAA,CAAW,CACb1D,CAAAA,CAAI,IAAI,IAAA,CACRyD,CAAAA,CAAWzD,EAAI,GAAA,CAAI,MAAA,CAAS,GAC5BsD,CAAAA,CAAI,QAAA,CAAWtD,CAAAA,CAAI,GAAA,CAAI,SAAW,EACtC,CAAA,CAAE,OAAO,OAAO,CAAA,CAAE,KAAK,GAAG,CAAA,CAEpB2D,CAAAA,CAAQL,CAAAA,CAAI,aAAe9F,CAAAA,CAAE8F,CAAAA,CAAI,YAAY,CAAA,CAAIA,CAAAA,CAAI,MAE3D,OAAO5K,aAAAA,CAAc,QAAA,CAAU,CAC3B,IAAK4K,CAAAA,CAAI,EAAA,CACT,UAAWI,CAAAA,CACX,OAAA,CAAS,IAAM,IAAA,CAAK,YAAA,CAAaJ,CAAAA,CAAI,EAAE,EACvC,QAAA,CAAUA,CAAAA,CAAI,SACd,gBAAA,CAAkBA,CAAAA,CAAI,aACtB,eAAA,CAAiBG,CAAAA,CACjB,IAAA,CAAM,KACV,EACIH,CAAAA,CAAI,IAAA,CAAO5K,cAAc,GAAA,CAAK,CAAE,UAAW4K,CAAAA,CAAI,IAAK,CAAC,CAAA,CAAI,KACzD5K,aAAAA,CAAc,MAAA,CAAQ,EAAC,CAAGiL,CAAK,EAC/BL,CAAAA,CAAI,KAAA,GAAU,MAAA,EAAaA,CAAAA,CAAI,QAAU,IAAA,EAAQA,CAAAA,CAAI,QAAU,CAAA,CAC3D5K,aAAAA,CAAc,OAAQ,CAAE,SAAA,CAAWsH,CAAAA,CAAI,GAAA,CAAI,KAAM,CAAA,CAC7C,OAAOsD,EAAI,KAAA,EAAU,QAAA,EAAYA,EAAI,KAAA,CAAQ,EAAA,CAAK,KAAA,CAAQ,MAAA,CAAOA,EAAI,KAAK,CAC9E,EAAI,IACZ,CACJ,CAEA,gBAAA,EAAmB,CACf,IAAMM,CAAAA,CAAe,CACjB5D,CAAAA,CAAI,OAAA,CAAQ,UACZ,IAAA,CAAK,gBACT,EAAE,MAAA,CAAO,OAAO,CAAA,CAAE,IAAA,CAAK,GAAG,CAAA,CAEpB6D,CAAAA,CAAY,KAAK,YAAA,EAAa,CACpC,OAAKA,CAAAA,CAQEnL,aAAAA,CAAc,KAAA,CAAO,CACxB,UAAWkL,CAAAA,CACX,IAAA,CAAM,UACV,CAAA,CACI,IAAA,CAAK,uBAAuBC,CAAS,CACzC,CAAA,CAZWnL,aAAAA,CAAc,MAAO,CAAE,SAAA,CAAWkL,CAAa,CAAA,CAClDlL,aAAAA,CAAc,MAAO,CAAE,SAAA,CAAWsH,CAAAA,CAAI,OAAA,CAAQ,UAAW,CAAA,CACrDtH,aAAAA,CAAc,IAAK,EAAC,CAAG,iBAAiB,CAC5C,CACJ,CASR,CAEA,uBAAuB4K,CAAAA,CAAU,CAE7B,GAAIA,CAAAA,CAAI,SAAA,CACJ,GAAI,CAEA,GAAIA,CAAAA,CAAI,SAAA,YAAqBpU,EAAW,CAEpC,IAAA,CAAK,oBAAsBoU,CAAAA,CAAI,SAAA,CAG/B,IAAMpS,CAAAA,CAAQ,IAAA,CAAK,mBAAA,CAAoB,MAAA,GAGjC4S,CAAAA,CAAe,CACjB,GAAG5S,CAAAA,CAAM,KAAA,CACT,IAAMlB,CAAAA,EAA2B,CACzBA,CAAAA,EAAM,IAAA,CAAK,sBAEV,IAAA,CAAK,mBAAA,CAA4B,SAAWA,CAAAA,CAAAA,CAI7C,OAAOkB,EAAM,KAAA,CAAM,GAAA,EAAQ,UAAA,EAC3BA,CAAAA,CAAM,MAAM,GAAA,CAAIlB,CAAE,EAE1B,CACJ,CAAA,CAGM+T,EAAe,CACjB,GAAG7S,CAAAA,CACH,KAAA,CAAO4S,CACX,CAAA,CAGA,OAAI,OAAO,IAAA,CAAK,mBAAA,CAAoB,SAAY,UAAA,EAC5C,UAAA,CAAW,IAAM,CACT,KAAK,mBAAA,EAAuB,OAAO,KAAK,mBAAA,CAAoB,OAAA,EAAY,YACxE,IAAA,CAAK,mBAAA,CAAoB,OAAA,GAEjC,EAAG,CAAC,CAAA,CAGDC,CACX,CAGA,GAAI,OAAOT,CAAAA,CAAI,SAAA,EAAc,UAAA,CAAY,CACrC,IAAMhK,CAAAA,CAAiBgK,CAAAA,CAAI,UAG3B,OAAIhK,CAAAA,CAAe,WAAa,OAAOA,CAAAA,CAAe,SAAA,CAAU,MAAA,EAAW,YAElE,IAAA,CAAK,mBAAA,GACN,KAAK,mBAAA,CAAsB,IAAIA,EAG3B,IAAA,CAAK,mBAAA,EAAuB,OAAO,IAAA,CAAK,oBAAoB,OAAA,EAAY,UAAA,EACxE,WAAW,IAAM,CACT,KAAK,mBAAA,EAAuB,OAAO,IAAA,CAAK,mBAAA,CAAoB,SAAY,UAAA,EACxE,IAAA,CAAK,oBAAoB,OAAA,GAEjC,EAAG,CAAC,CAAA,CAAA,CAIL,IAAA,CAAK,mBAAA,CAAqB,QAAO,EAGjCA,CAAAA,EAEf,CACJ,CAAA,MAAStK,EAAO,CACZ,OAAA,OAAA,CAAQ,KAAA,CAAM,gCAAA,CAAkCA,CAAK,CAAA,CAC9C0J,aAAAA,CAAc,MAAO,CAAE,SAAA,CAAWsH,EAAI,OAAA,CAAQ,KAAM,CAAA,CACvD,6BACJ,CACJ,CAIJ,OAAIsD,EAAI,OAAA,CACGA,CAAAA,CAAI,QAIR5K,aAAAA,CAAc,KAAA,CAAO,CAAE,SAAA,CAAWsH,EAAI,OAAA,CAAQ,UAAW,EAC5DtH,aAAAA,CAAc,GAAA,CAAK,EAAC,CAAG,sBAAsB,CACjD,CACJ,CACJ,EAzTWgI,CAAAA,CAAA,CAANzO,CAAAA,CAAAA,CALQkR,EAKF,SAAA,CAAA,aAAA,CAAA,CAEAzC,CAAAA,CAAA,CAANzO,CAAAA,CAAAA,CAPQkR,EAOF,SAAA,CAAA,MAAA,CAAA,CAEAzC,CAAAA,CAAA,CAANzO,CAAAA,CAAAA,CATQkR,CAAAA,CASF,sBAEAzC,CAAAA,CAAA,CAANzO,CAAAA,CAAAA,CAXQkR,CAAAA,CAWF,mBAEAzC,CAAAA,CAAA,CAANzO,GAbQkR,CAAAA,CAaF,SAAA,CAAA,WAAA,CAAA,CAEAzC,EAAA,CAANzO,CAAAA,CAAAA,CAfQkR,CAAAA,CAeF,SAAA,CAAA,iBAAA,CAAA,CAEAzC,EAAA,CAANzO,CAAAA,CAAAA,CAjBQkR,EAiBF,SAAA,CAAA,kBAAA,CAAA,CAEAzC,CAAAA,CAAA,CAANzO,CAAAA,CAAAA,CAnBQkR,CAAAA,CAmBF,SAAA,CAAA,cAAA,CAAA,CAEAzC,CAAAA,CAAA,CAANzO,CAAAA,CAAAA,CArBQkR,CAAAA,CAqBF,0BAEAzC,CAAAA,CAAA,CAANzO,GAvBQkR,CAAAA,CAuBF,SAAA,CAAA,YAAA,CAAA,CAkTJ,SAASa,EAAAA,CAAiBpN,EAAwC,CACrE,IAAMqN,EAAO,IAAId,CAAAA,CACjB,OAAAc,CAAAA,CAAK,IAAA,CAAKrN,CAAO,CAAA,CACVqN,CACX,CAKA,eAAsBC,GAClBrU,CAAAA,CACA+G,CAAAA,CACmB,CACnB,IAAMqN,CAAAA,CAAOD,EAAAA,CAAiBpN,CAAO,EACrC,OAAA,MAAMqN,CAAAA,CAAK,MAAMpU,CAAS,CAAA,CACnBoU,CACX,KCvZMjE,CAAAA,CAAM,CACR,UAAW,yBAAA,CACX,IAAA,CAAM,oBAAA,CACN,SAAA,CAAW,0BACX,OAAA,CAAS,uBAAA,CACT,MAAO,qBAAA,CACP,OAAA,CAAS,wBACT,GAAA,CAAK,mBAAA,CACL,UAAA,CAAY,yBAAA,CACZ,OAAQ,QACZ,CAAA,CA+CamE,GAAN,cAAmCjV,CAAU,CAA7C,WAAA,EAAA,CAAA,KAAA,CAAA,GAAA,SAAA,CAAA,CACH,IAAA,CAAA,KAAA,CAAa,EAAC,CACd,eAAuB,CACnB,OAAA,CAAS,MACT,KAAA,CAAO,IAAA,CACP,QAAS,IAAA,CACT,IAAA,CAAM,CAAA,CACN,KAAA,CAAO,CACX,CAAA,CACA,IAAA,CAAA,OAAA,CAA+B,EAAC,CAGhC,IAAA,CAAQ,gBAAsC,IAAA,CAC9C,IAAA,CAAQ,gBAAA,CAAgD,IAAA,CACxD,KAAQ,sBAAA,CAAyC,IAAA,CACjD,KAAQ,UAAA,CAAsB,KAAA,CAC9B,KAAQ,yBAAA,CAAoC,CAAA,CAC5C,IAAA,CAAQ,mBAAA,CAA8B,EACtC,IAAA,CAAQ,kBAAA,CAAyC,KACjD,IAAA,CAAQ,WAAA,CAAuC,KAC/C,IAAA,CAAQ,mBAAA,CAA6C,IAAA,CAudrD,IAAA,CAAQ,aAAe,IAAM,CACzB,GAAI,CAAC,IAAA,CAAK,iBAAmB,IAAA,CAAK,SAAA,CAAU,OAAA,EAAW,CAAC,KAAK,SAAA,CAAU,OAAA,CACnE,OAGJ,GAAM,CAAE,UAAAkV,CAAAA,CAAW,YAAA,CAAAC,CAAAA,CAAc,YAAA,CAAAC,CAAa,CAAA,CAAI,IAAA,CAAK,gBAC5BD,CAAAA,CAAeD,CAAAA,CAAYE,EAE7B,IAAA,CAAK,MAAA,CAAO,eAAA,EACjC,IAAA,CAAK,WAEb,CAAA,CAEA,KAAQ,eAAA,CAAkB,CAAC3O,EAAS7E,CAAAA,GAAkB,CAClD,IAAA,CAAK,MAAA,CAAO,cAAc6E,CAAAA,CAAM7E,CAAK,EACzC,EAAA,CApeA,UAAA,CAAW0L,EAA8B,CAErC,IAAA,CAAK,MAAA,CAAS,CACV,SAAU,EAAA,CACV,YAAA,CAAc,YACd,WAAA,CAAa,YAAA,CACb,UAAW,sBAAA,CACX,kBAAA,CAAoBwD,CAAAA,CAAI,SAAA,CACxB,cAAe,oBAAA,CACf,oBAAA,CAAsB,KACtB,eAAA,CAAiB,GAAA,CACjB,aAAc,KAAA,CACd,iBAAA,CAAmB,WAAA,CACnB,eAAA,CAAiB,SACjB,gBAAA,CAAkB,GAAA,CAClB,aAAe7I,CAAAA,EAAaA,CAAAA,CAAS,eAAiBA,CAAAA,CAAS,KAAA,EAASA,CAAAA,CAAS,IAAA,EAAQ,EAAC,CAC1F,YAAA,CAAeA,GAAaA,CAAAA,CAAS,KAAA,EAASA,EAAS,KAAA,EAAS,CAAA,CAChE,GAAGqF,CACP,EAEI,IAAA,CAAK,MAAA,CAAO,UACZ,IAAA,CAAK,OAAA,CAAU,CAAE,GAAG,IAAA,CAAK,MAAA,CAAO,OAAQ,GAGxC,IAAA,CAAK,MAAA,CAAO,eACZ,IAAA,CAAK,KAAA,CAAQ,CAAC,GAAG,IAAA,CAAK,MAAA,CAAO,YAAY,GAEjD,CAEA,MAAM,SAAU,CACR,IAAA,CAAK,MAAM,MAAA,GAAW,CAAA,EACtB,MAAM,IAAA,CAAK,UAAS,CAGpB,IAAA,CAAK,OAAO,oBAAA,EACZ,IAAA,CAAK,qBAAoB,CAGzB,IAAA,CAAK,MAAA,CAAO,eAAA,EACZ,KAAK,mBAAA,GAEb,CAEA,SAAA,EAAY,CACR,KAAK,kBAAA,EAAmB,CACpB,IAAA,CAAK,eAAA,GACL,KAAK,eAAA,CAAgB,mBAAA,CAAoB,SAAU,IAAA,CAAK,YAAY,EACpE,IAAA,CAAK,eAAA,CAAkB,IAAA,EAE/B,CAEA,MAAM,QAAA,EAAW,CACb,GAAI,EAAA,IAAA,CAAK,SAAA,CAAU,SAAW,CAAC,IAAA,CAAK,SAAA,CAAU,OAAA,CAAA,CAI9C,GAAI,CACA,IAAA,CAAK,UAAY,CAAE,GAAG,KAAK,SAAA,CAAW,OAAA,CAAS,CAAA,CAAA,CAAM,KAAA,CAAO,IAAK,CAAA,CAEjE,IAAA,CAAK,kBAAA,EAAmB,CAExB,IAAM+H,CAAAA,CAAW,IAAA,CAAK,SAAA,CAAU,IAAA,CAAO,EAEnC5N,CAAAA,CACJ,GAAI,OAAO,IAAA,CAAK,MAAA,CAAO,UAAa,UAAA,CAChCA,CAAAA,CAAM,IAAA,CAAK,MAAA,CAAO,SAAS4N,CAAAA,CAAU,IAAA,CAAK,OAAO,CAAA,CAAA,KAC9C,CACH,IAAMC,CAAAA,CAAY,IAAA,CAAK,MAAA,CAAO,QAAA,CAAS,SAAS,GAAG,CAAA,CAAI,IAAM,GAAA,CACvD5L,CAAAA,CAAS,IAAI,eAAA,CAAgB,CAC/B,IAAA,CAAM2L,CAAAA,CAAS,UAAS,CACxB,KAAA,CAAO,KAAK,MAAA,CAAO,QAAA,CAAU,UAAS,CACtC,GAAG,IAAA,CAAK,OACZ,CAAC,CAAA,CACD5N,CAAAA,CAAM,GAAG,IAAA,CAAK,MAAA,CAAO,QAAQ,CAAA,EAAG6N,CAAS,CAAA,EAAG5L,CAAM,GACtD,CAEA,IAAM6L,EAAuB,CACzB,cAAA,CAAgB,kBACpB,CAAA,CAEMC,CAAAA,CAAQ,IAAA,CAAK,MAAA,CAAO,gBAAe,CACrCA,CAAAA,GACAD,EAAQ,aAAA,CAAmB,CAAA,OAAA,EAAUC,CAAK,CAAA,CAAA,CAAA,CAG9C,IAAMvN,CAAAA,CAAW,MAAM,MAAMR,CAAAA,CAAK,CAC9B,YAAa,SAAA,CACb,OAAA,CAAA8N,CACJ,CAAC,CAAA,CAED,GAAI,CAACtN,EAAS,EAAA,CACV,MAAM,IAAI,KAAA,CAAM,CAAA,KAAA,EAAQA,EAAS,MAAM,CAAA,EAAA,EAAKA,CAAAA,CAAS,UAAU,EAAE,CAAA,CAGrE,IAAMN,EAAO,MAAMM,CAAAA,CAAS,MAAK,CAE3BwN,CAAAA,CAAW,IAAA,CAAK,MAAA,CAAO,aAAc9N,CAAI,CAAA,CACzC+N,EAAQ,IAAA,CAAK,MAAA,CAAO,aAAc/N,CAAI,CAAA,CAE5C,IAAA,CAAK,KAAA,CAAQ,CAAC,GAAG,IAAA,CAAK,MAAO,GAAG8N,CAAQ,EAExC,IAAA,CAAK,SAAA,CAAY,CACb,OAAA,CAAS,GACT,KAAA,CAAO,IAAA,CACP,QAAS,IAAA,CAAK,KAAA,CAAM,OAASC,CAAAA,CAC7B,IAAA,CAAML,CAAAA,CACN,KAAA,CAAAK,CACJ,CAAA,CAGA,IAAA,CAAK,eAAeD,CAAQ,CAAA,CAG5B,KAAK,yBAAA,CAA4B,CAAA,CACjC,IAAA,CAAK,iBAAA,GAEL,IAAA,CAAK,MAAA,CAAO,aAAaJ,CAAAA,CAAU,IAAA,CAAK,KAAK,EAEjD,CAAA,MAASvV,CAAAA,CAAO,CACZ,KAAK,SAAA,CAAY,CACb,GAAG,IAAA,CAAK,SAAA,CACR,QAAS,KAAA,CACT,KAAA,CAAOA,CAAAA,YAAiB,KAAA,CAAQA,EAAM,OAAA,CAAU,IAAA,CAAK,OAAO,SAChE,CAAA,CAEA,KAAK,kBAAA,EAAmB,CACxB,IAAA,CAAK,YAAA,GAEL,IAAA,CAAK,MAAA,CAAO,UAAUA,CAAAA,YAAiB,KAAA,CAAQA,EAAQ,IAAI,KAAA,CAAM,eAAe,CAAC,EACrF,CACJ,CAEA,MAAM,MAAA,EAAS,CACX,KAAK,KAAA,CAAQ,EAAC,CACd,IAAA,CAAK,UAAY,CACb,OAAA,CAAS,MACT,KAAA,CAAO,IAAA,CACP,QAAS,IAAA,CACT,IAAA,CAAM,CAAA,CACN,KAAA,CAAO,CACX,CAAA,CACA,MAAM,KAAK,QAAA,GACf,CAEA,MAAM,YAAA,CAAa6V,CAAAA,CAAiC,CAChD,GAAI,CAAA,IAAA,CAAK,UAAA,CAIT,MAAK,UAAA,CAAa,IAAA,CAClB,KAAK,OAAA,CAAU,CAAE,GAAGA,CAAW,EAG/B,IAAA,CAAK,KAAA,CAAQ,EAAC,CACd,IAAA,CAAK,UAAY,CACb,OAAA,CAAS,IAAA,CACT,KAAA,CAAO,KACP,OAAA,CAAS,IAAA,CACT,KAAM,CAAA,CACN,KAAA,CAAO,CACX,CAAA,CAGA,IAAA,CAAK,kBAAA,EAAmB,CAExB,GAAI,CACA,IAAMlO,EAAM,OAAO,IAAA,CAAK,OAAO,QAAA,EAAa,UAAA,CACtC,IAAA,CAAK,MAAA,CAAO,SAAS,CAAA,CAAG,IAAA,CAAK,OAAO,CAAA,CAAA,CACnC,IAAM,CACL,IAAM6N,CAAAA,CAAY,IAAA,CAAK,MAAA,CAAO,SAAS,QAAA,CAAS,GAAG,EAAI,GAAA,CAAM,GAAA,CACvD5L,EAAS,IAAI,eAAA,CAAgB,CAC/B,IAAA,CAAM,IACN,KAAA,CAAO,IAAA,CAAK,OAAO,QAAA,CAAU,QAAA,GAC7B,GAAG,IAAA,CAAK,OACZ,CAAC,EACD,OAAO,CAAA,EAAG,KAAK,MAAA,CAAO,QAAQ,GAAG4L,CAAS,CAAA,EAAG5L,CAAM,CAAA,CACvD,IAAG,CAED6L,CAAAA,CAAuB,CACzB,cAAA,CAAgB,kBACpB,EAEMC,CAAAA,CAAQ,IAAA,CAAK,MAAA,CAAO,YAAA,KACtBA,CAAAA,GACAD,CAAAA,CAAQ,cAAmB,CAAA,OAAA,EAAUC,CAAK,IAG9C,IAAMvN,CAAAA,CAAW,MAAM,KAAA,CAAMR,EAAK,CAC9B,WAAA,CAAa,SAAA,CACb,OAAA,CAAA8N,CACJ,CAAC,CAAA,CAED,GAAI,CAACtN,EAAS,EAAA,CACV,MAAM,IAAI,KAAA,CAAM,CAAA,KAAA,EAAQA,EAAS,MAAM,CAAA,EAAA,EAAKA,CAAAA,CAAS,UAAU,EAAE,CAAA,CAGrE,IAAMN,EAAO,MAAMM,CAAAA,CAAS,MAAK,CAE3BwN,CAAAA,CAAW,IAAA,CAAK,MAAA,CAAO,aAAc9N,CAAI,CAAA,CACzC+N,EAAQ,IAAA,CAAK,MAAA,CAAO,aAAc/N,CAAI,CAAA,CAwB5C,GArBA,IAAA,CAAK,MAAQ,CAAC,GAAG8N,CAAQ,CAAA,CACzB,IAAA,CAAK,UAAY,CACb,OAAA,CAAS,CAAA,CAAA,CACT,KAAA,CAAO,KACP,OAAA,CAAS,IAAA,CAAK,MAAM,MAAA,CAASC,CAAAA,CAC7B,KAAM,CAAA,CACN,KAAA,CAAAA,CACJ,CAAA,CAII,KAAK,kBAAA,GACL,IAAA,CAAK,mBAAmB,SAAA,CAAY,EAAA,CAAA,CAIpC,KAAK,OAAA,EACL,IAAA,CAAK,OAAA,CAAQ,gBAAA,CAAiB,GAAG5E,CAAAA,CAAI,OAAO,KAAKA,CAAAA,CAAI,GAAG,KAAKA,CAAAA,CAAI,KAAK,CAAA,EAAA,EAAKA,CAAAA,CAAI,OAAO,CAAA,EAAA,EAAKA,CAAAA,CAAI,UAAU,CAAA,CAAE,CAAA,CAAE,QAAQhQ,CAAAA,EAAMA,CAAAA,CAAG,MAAA,EAAQ,EAItI,IAAA,CAAK,KAAA,CAAM,OAAS,CAAA,CAEf,IAAA,CAAK,qBACN,IAAA,CAAK,kBAAA,CAAqB,IAAA,CAAK,OAAA,EAAS,cAAc,CAAA,CAAA,EAAIgQ,CAAAA,CAAI,IAAI,CAAA,CAAE,CAAA,CAAA,CAGpE,KAAK,kBAAA,EACL,IAAA,CAAK,cAAA,CAAe,IAAA,CAAK,KAAK,CAAA,CAAA,KAAA,GAI9B,IAAA,CAAK,OAAO,gBAAA,EAAoB,IAAA,CAAK,QAAS,CAC9C,IAAM8E,CAAAA,CAAa,IAAA,CAAK,kBAAiB,CACnCC,CAAAA,CAAeC,iBAAiBF,CAAU,CAAA,CAChD,KAAK,OAAA,CAAQ,WAAA,CAAYC,CAAY,EACzC,CAIJ,IAAA,CAAK,kBAAA,CAAqB,KAAK,OAAA,EAAS,aAAA,CAAc,IAAI/E,CAAAA,CAAI,IAAI,CAAA,CAAE,CAAA,CACpE,KAAK,yBAAA,CAA4B,CAAA,CACjC,KAAK,iBAAA,EAAkB,CAEvB,KAAK,MAAA,CAAO,eAAA,GAAkB,IAAA,CAAK,OAAO,EAE9C,CAAA,MAAShR,CAAAA,CAAO,CACZ,IAAA,CAAK,SAAA,CAAY,CACb,GAAG,IAAA,CAAK,SAAA,CACR,OAAA,CAAS,MACT,KAAA,CAAOA,CAAAA,YAAiB,MAAQA,CAAAA,CAAM,OAAA,CAAU,KAAK,MAAA,CAAO,SAChE,CAAA,CAGA,IAAA,CAAK,oBAAmB,CAExB,IAAA,CAAK,OAAO,OAAA,GAAUA,CAAAA,YAAiB,MAAQA,CAAAA,CAAQ,IAAI,KAAA,CAAM,eAAe,CAAC,EACrF,CAAA,OAAE,CACE,IAAA,CAAK,UAAA,CAAa,MACtB,CAAA,CACJ,CAEA,MAAM,YAAA,CAAaiW,EAAqB,CAEhC,IAAA,CAAK,qBACL,YAAA,CAAa,IAAA,CAAK,mBAAmB,CAAA,CAIzC,IAAA,CAAK,mBAAA,CAAsB,UAAA,CAAW,SAAY,CAC9C,IAAMJ,EAAa,CAAE,GAAG,KAAK,OAAQ,CAAA,CAEjCI,CAAAA,CAAY,IAAA,GACZJ,CAAAA,CAAW,IAAA,CAAK,OAAO,eAAgB,CAAA,CAAII,EAAY,IAAA,EAAK,CAE5D,OAAOJ,CAAAA,CAAW,KAAK,MAAA,CAAO,eAAgB,EAGlD,MAAM,IAAA,CAAK,aAAaA,CAAU,EACtC,CAAA,CAAG,IAAA,CAAK,OAAO,gBAAgB,EACnC,CAEA,WAAA,CAAYK,CAAAA,CAAmB,CAC3B,IAAA,CAAK,KAAA,CAAQ,CAAC,GAAGA,CAAY,CAAA,CAGzB,IAAA,CAAK,qBACL,IAAA,CAAK,kBAAA,CAAmB,UAAY,EAAA,CACpC,IAAA,CAAK,cAAA,CAAeA,CAAY,GAExC,CAMQ,cAAA,CAAeP,EAAe,CAMlC,GAJK,KAAK,kBAAA,GACN,IAAA,CAAK,kBAAA,CAAqB,IAAA,CAAK,SAAS,aAAA,CAAc,CAAA,CAAA,EAAI3E,EAAI,IAAI,CAAA,CAAE,GAGpE,CAAC,IAAA,CAAK,kBAAA,CACN,OAIJ,IAAMmF,CAAAA,CAAa,IAAA,CAAK,MAAM,MAAA,CAASR,CAAAA,CAAS,OAChDA,CAAAA,CAAS,OAAA,CAAQ,CAAChP,CAAAA,CAAM7E,IAAU,CAC9B,IAAMsU,EAAc,IAAA,CAAK,MAAA,CAAO,WAAWzP,CAAAA,CAAMwP,CAAAA,CAAarU,CAAK,CAAA,CAE/D,KAAK,MAAA,CAAO,WAAA,EACZsU,EAAY,SAAA,CAAY,CAAA,EAAGA,EAAY,SAAS,CAAA,CAAA,EAAI,IAAA,CAAK,MAAA,CAAO,aAAa,CAAA,UAAA,CAAA,CAC7EA,CAAAA,CAAY,QAAU,IAAM,IAAA,CAAK,gBAAgBzP,CAAAA,CAAMwP,CAAAA,CAAarU,CAAK,CAAA,EAEzEsU,EAAY,SAAA,CAAY,CAAA,EAAGA,EAAY,SAAS,CAAA,CAAA,EAAI,KAAK,MAAA,CAAO,aAAa,CAAA,CAAA,CAGjF,IAAA,CAAK,mBAAoB,WAAA,CAAYA,CAAW,EACpD,CAAC,EAGD,IAAA,CAAK,YAAA,GACT,CAEQ,oBAAqB,CACzB,IAAMvV,EAAY,IAAA,CAAK,OAAA,EAAS,cAAc,CAAA,CAAA,EAAImQ,CAAAA,CAAI,SAAS,CAAA,CAAE,EACjE,GAAI,CAACnQ,EAAW,OAGhB,IAAIwV,EAAYxV,CAAAA,CAAU,aAAA,CAAc,CAAA,CAAA,EAAImQ,CAAAA,CAAI,OAAO,CAAA,CAAE,CAAA,CAErD,KAAK,SAAA,CAAU,OAAA,CACVqF,IACDA,CAAAA,CAAY,IAAA,CAAK,aAAA,EAAc,CAC/BxV,EAAU,WAAA,CAAYwV,CAAS,GAG/BA,CAAAA,EACAA,CAAAA,CAAU,SAGtB,CAGO,YAAA,EAAe,CAIlB,IAAMxV,CAAAA,CAAY,IAAA,CAAK,QACvB,GAAKA,CAAAA,CAUL,IALAA,CAAAA,CAAU,gBAAA,CAAiB,CAAA,CAAA,EAAImQ,CAAAA,CAAI,OAAO,CAAA,GAAA,EAAMA,CAAAA,CAAI,GAAG,CAAA,GAAA,EAAMA,CAAAA,CAAI,UAAU,CAAA,CAAE,CAAA,CAAE,OAAA,CAAQhQ,CAAAA,EAAM,CACzFA,CAAAA,CAAG,MAAA,GACP,CAAC,CAAA,CAGG,KAAK,KAAA,CAAM,MAAA,GAAW,CAAA,EAAK,CAAC,KAAK,SAAA,CAAU,OAAA,EAAW,KAAK,MAAA,CAAO,gBAAA,CAAkB,CACpF,IAAM8U,CAAAA,CAAa,IAAA,CAAK,gBAAA,GAClBC,CAAAA,CAAeC,gBAAAA,CAAiBF,CAAU,CAAA,CAChDjV,CAAAA,CAAU,YAAYkV,CAAY,CAAA,CAClC,MACJ,CAGA,GAAI,IAAA,CAAK,SAAA,CAAU,SAAW,CAAC,IAAA,CAAK,UAAU,OAAA,EAAW,IAAA,CAAK,KAAA,CAAM,MAAA,CAAS,EAAG,CAC5E,IAAMO,EAAe,IAAA,CAAK,qBAAA,GACpBC,CAAAA,CAAiBP,gBAAAA,CAAiBM,CAAY,CAAA,CACpDzV,EAAU,WAAA,CAAY0V,CAAc,EACxC,CAEA,GAAI,CAAC,IAAA,CAAK,SAAA,CAAU,OAAA,EAAW,IAAA,CAAK,MAAM,MAAA,CAAS,CAAA,CAAG,CAClD,IAAMC,CAAAA,CAAc,KAAK,gBAAA,EAAiB,CACpCC,CAAAA,CAAgBT,gBAAAA,CAAiBQ,CAAW,CAAA,CAClD3V,CAAAA,CAAU,YAAY4V,CAAa,EACvC,EACJ,CAMQ,mBAAA,EAAsB,CACtB,IAAA,CAAK,kBACL,IAAA,CAAK,gBAAA,CAAiB,YAAW,CAGrC,IAAA,CAAK,iBAAmB,IAAI,oBAAA,CACvBlG,CAAAA,EAAY,CACT,GAAM,CAACC,CAAK,EAAID,CAAAA,CAEZC,CAAAA,CAAM,gBAAkB,CAAC,IAAA,CAAK,SAAA,CAAU,OAAA,EAAW,KAAK,SAAA,CAAU,OAAA,EAClE,KAAK,QAAA,GAEb,EACA,CACI,SAAA,CAAW,EAAA,CACX,UAAA,CAAY,MAChB,CACJ,CAAA,CAEA,KAAK,iBAAA,GACT,CAEQ,iBAAA,EAAoB,CAExB,GAAI,CAAC,KAAK,MAAA,CAAO,oBAAA,EAAwB,CAAC,IAAA,CAAK,gBAAA,CAC3C,OAGA,IAAA,CAAK,sBAAA,GACL,IAAA,CAAK,gBAAA,CAAiB,UAAU,IAAA,CAAK,sBAAsB,EAC3D,IAAA,CAAK,sBAAA,CAAyB,MAGlC,IAAMkG,CAAAA,CAAa,IAAM,CACrB,KAAK,yBAAA,EAAA,CAGL,IAAMC,EAAU,IAAA,CAAK,OAAA,EAAS,cAAc,iCAAiC,CAAA,CAE7E,GAAIA,CAAAA,CACA,YAAK,gBAAA,CAAkB,OAAA,CAAQA,CAAO,CAAA,CACtC,IAAA,CAAK,uBAAyBA,CAAAA,CAC9B,IAAA,CAAK,yBAAA,CAA4B,CAAA,CAC1B,KAGX,GAAI,IAAA,CAAK,0BAA4B,IAAA,CAAK,mBAAA,CAAqB,CAC3D,IAAMrV,CAAAA,CAAQ,CAAC,EAAA,CAAI,IAAK,GAAA,CAAK,GAAA,CAAK,GAAG,CAAA,CAAE,IAAA,CAAK,IAAI,IAAA,CAAK,yBAAA,CAA4B,CAAA,CAAG,CAAC,CAAC,CAAA,CACtF,UAAA,CAAWoV,EAAYpV,CAAK,EAChC,MACI,IAAA,CAAK,yBAAA,CAA4B,CAAA,CAGrC,OAAO,MACX,CAAA,CAEA,qBAAA,CAAsBoV,CAAU,EACpC,CAEQ,oBAAqB,CACrB,IAAA,CAAK,gBAAA,EAAoB,IAAA,CAAK,yBAC9B,IAAA,CAAK,gBAAA,CAAiB,UAAU,IAAA,CAAK,sBAAsB,EAC3D,IAAA,CAAK,sBAAA,CAAyB,IAAA,EAEtC,CAEQ,qBAAsB,CAC1B,qBAAA,CAAsB,IAAM,CAExB,IAAA,CAAK,gBAAkB,IAAA,CAAK,OAAA,EAAS,aAAA,CAAc,6BAA6B,EAG3E,IAAA,CAAK,eAAA,GACN,KAAK,eAAA,CAAkB,IAAA,CAAK,SAG5B,IAAA,CAAK,eAAA,EACL,IAAA,CAAK,eAAA,CAAgB,iBAAiB,QAAA,CAAU,IAAA,CAAK,YAAY,EAEzE,CAAC,EACL,CAuBA,MAAA,EAAS,CACL,OAAI,KAAK,KAAA,CAAM,MAAA,GAAW,GAAK,CAAC,IAAA,CAAK,UAAU,OAAA,EAAW,IAAA,CAAK,SAAA,CAAU,IAAA,CAAO,GAAK,IAAA,CAAK,MAAA,CAAO,gBAAA,CACtF,IAAA,CAAK,kBAAiB,CAK1BhN,aAAAA,CAAc,KAAA,CAAO,CACxB,UAAW,IAAA,CAAK,MAAA,CAAO,kBAC3B,CAAA,CACI,IAAA,CAAK,OAAO,YAAA,CAAe,IAAA,CAAK,eAAA,EAAgB,CAAI,KACpDA,aAAAA,CAAc,KAAA,CAAO,CACjB,SAAA,CAAWsH,CAAAA,CAAI,KACf,GAAA,CAAMhQ,CAAAA,EAA2B,CACzBA,CAAAA,GACA,KAAK,kBAAA,CAAqBA,CAAAA,EAElC,CACJ,CAAC,CAAA,CAED,KAAK,SAAA,CAAU,KAAA,CAAQ,IAAA,CAAK,WAAA,GAAgB,IAAA,CAC5C,IAAA,CAAK,UAAU,OAAA,CAAU,IAAA,CAAK,eAAc,CAAI,IAAA,CAChD,IAAA,CAAK,SAAA,CAAU,SAAW,CAAC,IAAA,CAAK,UAAU,OAAA,EAAW,IAAA,CAAK,MAAM,MAAA,CAAS,CAAA,CAAI,IAAA,CAAK,qBAAA,GAA0B,IAAA,CAC5G,CAAC,KAAK,SAAA,CAAU,OAAA,EAAW,KAAK,KAAA,CAAM,MAAA,CAAS,CAAA,CAAI,IAAA,CAAK,kBAAiB,CAAI,IACjF,CACJ,CAEQ,eAAA,EAAkB,CACtB,OAAO0I,aAAAA,CAAc,KAAA,CAAO,CAAE,UAAWsH,CAAAA,CAAI,SAAA,CAAW,MAAO,sBAAuB,CAAA,CAClFtH,cAAc,KAAA,CAAO,CAAE,SAAA,CAAW,YAAA,CAAc,MAAO,qBAAsB,CAAA,CACzEA,cAAc,GAAA,CAAK,CAAE,UAAW,eAAA,CAAiB,KAAA,CAAO,6GAA8G,CAAC,EACvKA,aAAAA,CAAc,OAAA,CAAS,CACnB,IAAA,CAAM,MAAA,CACN,UAAW,SAAA,CACX,WAAA,CAAa,IAAA,CAAK,MAAA,CAAO,kBACzB,KAAA,CAAO,8BAAA,CACP,IAAM1I,CAAAA,EAA2B,CACzBA,IACA,IAAA,CAAK,WAAA,CAAcA,CAAAA,CACnB,IAAA,CAAK,YAAY,gBAAA,CAAiB,OAAA,CAAUqH,GAAM,CAC9C,IAAMgD,EAAShD,CAAAA,CAAE,MAAA,CAA4B,KAAA,CAC7C,IAAA,CAAK,aAAagD,CAAK,EAC3B,CAAC,CAAA,EAET,CACJ,CAAC,CACL,CACJ,CACJ,CAEQ,kBAAmB,CACvB,IAAMmC,EAAS,IAAA,CAAK,MAAA,CAAO,iBAC3B,OAAO9D,aAAAA,CAAc,KAAA,CAAO,CAAE,UAAWsH,CAAAA,CAAI,UAAW,EACpDtH,aAAAA,CAAc,GAAA,CAAK,CAAE,SAAA,CAAW,CAAA,OAAA,EAAU8D,CAAAA,CAAO,IAAI,EAAG,CAAC,CAAA,CACzD9D,cAAc,IAAA,CAAM,CAAE,UAAW,SAAU,CAAA,CAAG8D,CAAAA,CAAO,KAAK,EAC1D9D,aAAAA,CAAc,GAAA,CAAK,CAAE,SAAA,CAAW,QAAS,EAAG8D,CAAAA,CAAO,WAAW,CAClE,CACJ,CAEQ,aAAA,EAAgB,CACpB,OAAO9D,aAAAA,CAAc,KAAA,CAAO,CAAE,SAAA,CAAWsH,CAAAA,CAAI,OAAQ,CAAA,CACjDtH,cAAc,GAAA,CAAK,CAAE,UAAW,wBAAyB,CAAC,EAC1DA,aAAAA,CAAc,GAAA,CAAK,EAAC,CAAG,KAAK,MAAA,CAAO,WAAW,CAClD,CACJ,CAEQ,aAAc,CAClB,OAAOA,aAAAA,CAAc,KAAA,CAAO,CAAE,SAAA,CAAWsH,CAAAA,CAAI,KAAM,CAAA,CAC/CtH,aAAAA,CAAc,IAAK,CAAE,SAAA,CAAW,6BAA8B,CAAC,EAC/DA,aAAAA,CAAc,GAAA,CAAK,EAAC,CAAG,IAAA,CAAK,UAAU,KAAK,CAAA,CAC3CA,aAAAA,CAAc,QAAA,CAAU,CACpB,SAAA,CAAW,CAAA,EAAGsH,EAAI,MAAM,CAAA,UAAA,CAAA,CACxB,QAAS,IAAM,IAAA,CAAK,QAAA,EACxB,EACItH,aAAAA,CAAc,GAAA,CAAK,CAAE,SAAA,CAAW,aAAc,CAAC,CAAA,CAC/C,QACJ,CACJ,CACJ,CAEQ,qBAAA,EAAwB,CAC5B,OAAOA,aAAAA,CAAc,KAAA,CAAO,CACxB,SAAA,CAAWsH,CAAAA,CAAI,OAAA,CACf,wBAAA,CAA0B,OAC1B,KAAA,CAAO,kCACX,CAAC,CACL,CAEQ,kBAAmB,CACvB,OAAOtH,aAAAA,CAAc,KAAA,CAAO,CAAE,SAAA,CAAWsH,CAAAA,CAAI,GAAI,CAAA,CAC7CtH,aAAAA,CAAc,IAAK,CAAE,SAAA,CAAW,qBAAsB,CAAC,EACvD8E,CAAAA,CAAE,mBAAA,CAAqB,CAAE,KAAA,CAAO,MAAA,CAAO,KAAK,SAAA,CAAU,KAAK,CAAA,CAAG,KAAA,CAAO,yBAA0B,CAAC,CAEpG,CACJ,CACJ,EAEO,SAASoI,EAAAA,CAAqBpJ,CAAAA,CAA8C,CAC/E,IAAMqJ,EAAS,IAAI1B,EAAAA,CACnB,OAAA0B,CAAAA,CAAO,UAAA,CAAWrJ,CAAM,CAAA,CACjBqJ,CACX,CC9pBO,SAASC,GACZzV,CAAAA,CACAC,CAAAA,CACgC,CAChC,IAAIC,CAAAA,CAAkD,KAEtD,OAAO,CAAA,GAAIC,CAAAA,GAA8B,CACjCD,IAAc,IAAA,EACd,YAAA,CAAaA,CAAS,CAAA,CAG1BA,EAAY,UAAA,CAAW,IAAM,CACzBA,CAAAA,CAAY,KACZF,CAAAA,CAAG,GAAGG,CAAI,EACd,CAAA,CAAGF,CAAK,EACZ,CACJ,CAMO,SAASyV,GACZ1V,CAAAA,CACAC,CAAAA,CACgC,CAChC,IAAIG,CAAAA,CAAW,EACXF,CAAAA,CAAkD,IAAA,CAEtD,OAAO,CAAA,GAAIC,IAA8B,CACrC,IAAME,EAAM,IAAA,CAAK,GAAA,GACXC,CAAAA,CAAoBD,CAAAA,CAAMD,CAAAA,CAE5BE,CAAAA,EAAqBL,GACrBG,CAAAA,CAAWC,CAAAA,CACXL,EAAG,GAAGG,CAAI,GACFD,CAAAA,GAERA,CAAAA,CAAY,UAAA,CAAW,IAAM,CACzBE,CAAAA,CAAW,IAAA,CAAK,KAAI,CACpBF,CAAAA,CAAY,KACZF,CAAAA,CAAG,GAAGG,CAAI,EACd,EAAGF,CAAAA,CAAQK,CAAiB,GAEpC,CACJ,CAMO,SAASqV,EAAAA,CAAAA,GAAcC,CAAAA,CAA+B,CACzD,IAAMtX,EAAmB,EAAC,CAE1B,QAAWuX,CAAAA,IAAOD,CAAAA,CACd,GAAKC,CAAAA,CAAAA,CAEL,GAAI,OAAOA,CAAAA,EAAQ,SACfvX,CAAAA,CAAO,IAAA,CAAKuX,CAAG,CAAA,CAAA,KAAA,GACR,OAAOA,GAAQ,QAAA,CACtB,IAAA,GAAW,CAACtW,CAAAA,CAAKwB,CAAK,CAAA,GAAK,MAAA,CAAO,QAAQ8U,CAAG,CAAA,CACrC9U,GACAzC,CAAAA,CAAO,IAAA,CAAKiB,CAAG,EAAA,CAM/B,OAAOjB,CAAAA,CAAO,IAAA,CAAK,GAAG,CAC1B,CAMO,SAASwX,EAAAA,CAAWC,CAAAA,CAA8BC,CAAAA,CAAiB,YAAA,CAAsB,CAC5F,IAAMC,CAAAA,CAAIF,aAAgB,IAAA,CAAOA,CAAAA,CAAO,IAAI,IAAA,CAAKA,CAAI,CAAA,CAGrD,GAAI,MAAME,CAAAA,CAAE,OAAA,EAAS,CAAA,CACjB,MAAM,IAAI,KAAA,CAAM,qCAAqC,CAAA,CAGzD,IAAMC,EAAOD,CAAAA,CAAE,WAAA,GACTE,CAAAA,CAAQ,MAAA,CAAOF,EAAE,QAAA,EAAS,CAAI,CAAC,CAAA,CAAE,SAAS,CAAA,CAAG,GAAG,EAChDG,CAAAA,CAAM,MAAA,CAAOH,EAAE,OAAA,EAAS,CAAA,CAAE,QAAA,CAAS,EAAG,GAAG,CAAA,CACzCI,EAAQ,MAAA,CAAOJ,CAAAA,CAAE,UAAU,CAAA,CAAE,QAAA,CAAS,CAAA,CAAG,GAAG,CAAA,CAC5CK,CAAAA,CAAU,OAAOL,CAAAA,CAAE,UAAA,EAAY,CAAA,CAAE,QAAA,CAAS,CAAA,CAAG,GAAG,EAChDM,CAAAA,CAAU,MAAA,CAAON,EAAE,UAAA,EAAY,EAAE,QAAA,CAAS,CAAA,CAAG,GAAG,CAAA,CAEtD,OAAOD,CAAAA,CACF,OAAA,CAAQ,OAAQ,MAAA,CAAOE,CAAI,CAAC,CAAA,CAC5B,OAAA,CAAQ,IAAA,CAAMC,CAAK,EACnB,OAAA,CAAQ,IAAA,CAAMC,CAAG,CAAA,CACjB,OAAA,CAAQ,KAAMC,CAAK,CAAA,CACnB,OAAA,CAAQ,IAAA,CAAMC,CAAO,CAAA,CACrB,OAAA,CAAQ,KAAMC,CAAO,CAC9B,CAMO,SAASC,CAAAA,CAAaC,CAAAA,CAAW,CACpC,GAAIA,CAAAA,GAAQ,IAAA,EAAQ,OAAOA,CAAAA,EAAQ,QAAA,CAC/B,OAAOA,CAAAA,CAGX,GAAIA,CAAAA,YAAe,IAAA,CACf,OAAO,IAAI,IAAA,CAAKA,EAAI,OAAA,EAAS,EAGjC,GAAI,KAAA,CAAM,OAAA,CAAQA,CAAG,EACjB,OAAOA,CAAAA,CAAI,IAAInR,CAAAA,EAAQkR,CAAAA,CAAUlR,CAAI,CAAC,CAAA,CAG1C,GAAImR,CAAAA,YAAe,OACf,OAAO,IAAI,OAAOA,CAAAA,CAAI,MAAA,CAAQA,EAAI,KAAK,CAAA,CAG3C,GAAIA,CAAAA,YAAe,IAAK,CACpB,IAAMC,EAAY,IAAI,GAAA,CACtB,OAAAD,CAAAA,CAAI,OAAA,CAAQ,CAAC1V,CAAAA,CAAOxB,IAAQ,CACxBmX,CAAAA,CAAU,IAAIF,CAAAA,CAAUjX,CAAG,EAAGiX,CAAAA,CAAUzV,CAAK,CAAC,EAClD,CAAC,CAAA,CACM2V,CACX,CAEA,GAAID,CAAAA,YAAe,IAAK,CACpB,IAAME,CAAAA,CAAY,IAAI,IACtB,OAAAF,CAAAA,CAAI,QAAQ1V,CAAAA,EAAS,CACjB4V,EAAU,GAAA,CAAIH,CAAAA,CAAUzV,CAAK,CAAC,EAClC,CAAC,CAAA,CACM4V,CACX,CAEA,GAAI,OAAO,SAAA,CAAU,QAAA,CAAS,IAAA,CAAKF,CAAG,IAAM,iBAAA,CAAmB,CAC3D,IAAMG,CAAAA,CAAkC,GACxC,IAAA,IAAWrX,CAAAA,IAAOkX,CAAAA,CACV,MAAA,CAAO,UAAU,cAAA,CAAe,IAAA,CAAKA,EAAKlX,CAAG,CAAA,GAC7CqX,EAAOrX,CAAG,CAAA,CAAIiX,CAAAA,CAAWC,CAAAA,CAAgClX,CAAG,CAAC,CAAA,CAAA,CAGrE,OAAOqX,CACX,CAEA,OAAOH,CACX,CAMO,SAASI,GACZhV,CAAAA,CAAAA,GACGiV,CAAAA,CACF,CACD,GAAI,CAACA,EAAQ,MAAA,CAAQ,OAAOjV,CAAAA,CAE5B,IAAMkV,EAASD,CAAAA,CAAQ,KAAA,GACvB,GAAI,CAACC,EAAQ,OAAOlV,CAAAA,CAEpB,GAAImV,CAAAA,CAASnV,CAAM,CAAA,EAAKmV,CAAAA,CAASD,CAAM,CAAA,CAAA,CACnC,IAAA,IAAWxX,KAAOwX,CAAAA,CACd,GAAI,MAAA,CAAO,SAAA,CAAU,eAAe,IAAA,CAAKA,CAAAA,CAAQxX,CAAG,CAAA,CAAG,CACnD,IAAM0X,CAAAA,CAAcF,CAAAA,CAAOxX,CAAG,CAAA,CACxB2X,EAAcrV,CAAAA,CAAOtC,CAAG,EAE1B0X,CAAAA,GAAgB,MAAA,GACZD,EAASC,CAAW,CAAA,EAAK,CAAC,KAAA,CAAM,QAAQA,CAAW,CAAA,EAAA,CAC/C,CAACC,CAAAA,EAAe,CAACF,EAASE,CAAW,CAAA,IACrCrV,CAAAA,CAAOtC,CAAG,EAAI,EAAC,CAAA,CAEnBsX,GAAUhV,CAAAA,CAAOtC,CAAG,EAA8B0X,CAAsC,CAAA,EAExFpV,CAAAA,CAAOtC,CAAG,EAAI0X,CAAAA,EAG1B,CAAA,CAIR,OAAOJ,EAAAA,CAAUhV,CAAAA,CAAQ,GAAGiV,CAAO,CACvC,CAKA,SAASE,EAAS1R,CAAAA,CAAgD,CAC9D,OAAOA,CAAAA,GAAS,IAAA,EAAQ,OAAOA,CAAAA,EAAS,QAAA,EAAY,CAAC,KAAA,CAAM,QAAQA,CAAI,CAC3E,CAKA,IAAI6R,EAAAA,CAAkB,EAEf,SAASC,EAAAA,CAAS1M,CAAAA,CAAiB,IAAA,CAAc,CACpD,IAAM2M,CAAAA,CAAY,KAAK,GAAA,EAAI,CAAE,SAAS,EAAE,CAAA,CAClCC,CAAAA,CAAa,IAAA,CAAK,QAAO,CAAE,QAAA,CAAS,EAAE,CAAA,CAAE,SAAA,CAAU,EAAG,EAAE,CAAA,CAC7DH,EAAAA,CAAAA,CAAmBA,EAAAA,EAAmB,GAAK,CAAA,CAC3C,IAAMI,EAAUJ,EAAAA,CAAgB,QAAA,CAAS,EAAE,CAAA,CAC3C,OAAO,CAAA,EAAGzM,CAAM,IAAI2M,CAAS,CAAA,CAAA,EAAIC,CAAU,CAAA,CAAA,EAAIC,CAAO,EAC1D,CAKO,SAASC,EAAAA,CAAMC,CAAAA,CAA2B,CAC7C,GAAIA,CAAAA,CAAK,EACL,MAAM,IAAI,MAAM,qCAAqC,CAAA,CAEzD,OAAO,IAAI,QAAQ1O,CAAAA,EAAW,UAAA,CAAWA,EAAS0O,CAAE,CAAC,CACzD,CAKO,SAASC,EAAAA,CAAQ3W,CAAAA,CAAyB,CAC7C,OAAIA,CAAAA,EAAS,KAAa,IAAA,CACtB,OAAOA,GAAU,QAAA,CAAiBA,CAAAA,CAAM,IAAA,EAAK,CAAE,SAAW,CAAA,CAC1D,KAAA,CAAM,QAAQA,CAAK,CAAA,CAAUA,EAAM,MAAA,GAAW,CAAA,CAC9CA,CAAAA,YAAiB,GAAA,EAAOA,aAAiB,GAAA,CAAYA,CAAAA,CAAM,OAAS,CAAA,CACpE,OAAOA,GAAU,QAAA,CAAiB,MAAA,CAAO,IAAA,CAAKA,CAAK,EAAE,MAAA,GAAW,CAAA,CAC7D,KACX,CAKO,SAAS4W,GAAWC,CAAAA,CAAqB,CAC5C,OAAKA,CAAAA,CACEA,EAAI,MAAA,CAAO,CAAC,EAAE,WAAA,EAAY,CAAIA,EAAI,KAAA,CAAM,CAAC,CAAA,CAD/B,EAErB,CAKO,SAASC,EAAAA,CAAUD,EAAqB,CAC3C,OAAKA,EACEA,CAAAA,CACF,OAAA,CAAQ,iBAAA,CAAmB,OAAO,EAClC,OAAA,CAAQ,SAAA,CAAW,GAAG,CAAA,CACtB,WAAA,GAJY,EAKrB,CAKO,SAASE,EAAAA,CAAUF,EAAqB,CAC3C,OAAKA,EACEA,CAAAA,CACF,OAAA,CAAQ,eAAgB,CAACjO,CAAAA,CAAGoO,CAAAA,GAAkBA,CAAAA,CAAOA,EAAK,WAAA,EAAY,CAAI,EAAG,CAAA,CAC7E,OAAA,CAAQ,SAAUA,CAAAA,EAAQA,CAAAA,CAAK,WAAA,EAAa,EAHhC,EAIrB,CAKO,SAASC,EAAAA,CAAWJ,CAAAA,CAAqB,CAC5C,GAAI,CAACA,CAAAA,CAAK,OAAO,GACjB,IAAMK,CAAAA,CAAQH,GAAUF,CAAG,CAAA,CAC3B,OAAOK,CAAAA,CAAM,MAAA,CAAO,CAAC,CAAA,CAAE,aAAY,CAAIA,CAAAA,CAAM,MAAM,CAAC,CACxD,CAKO,SAASC,EAAAA,CAASN,CAAAA,CAAaO,CAAAA,CAAgBC,EAAiB,KAAA,CAAe,CAClF,OAAI,CAACR,CAAAA,EAAOA,EAAI,MAAA,EAAUO,CAAAA,CAAeP,CAAAA,CAClCA,CAAAA,CAAI,UAAU,CAAA,CAAGO,CAAAA,CAASC,EAAO,MAAM,CAAA,CAAIA,CACtD,CAKO,SAASC,EAAAA,CAAWC,CAAAA,CAAwD,CAC/E,IAAMtO,CAAAA,CAA2C,EAAC,CAC5CuO,CAAAA,CAAUD,EAAY,OAAA,CAAQ,KAAA,CAAO,EAAE,CAAA,CAE7C,GAAI,CAACC,CAAAA,CAAS,OAAOvO,CAAAA,CAErB,IAAMwO,CAAAA,CAAQD,CAAAA,CAAQ,KAAA,CAAM,GAAG,EAE/B,IAAA,IAAWtO,CAAAA,IAAQuO,EAAO,CACtB,GAAM,CAACjZ,CAAAA,CAAKwB,CAAK,CAAA,CAAIkJ,CAAAA,CAAK,MAAM,GAAG,CAAA,CAAE,IAAI,kBAAkB,CAAA,CAC3D,GAAI,CAAC1K,CAAAA,CAAK,SAEV,IAAMkZ,EAAe1X,CAAAA,EAAS,EAAA,CAG9B,GAAIxB,CAAAA,CAAI,QAAA,CAAS,IAAI,CAAA,CAAG,CACpB,IAAMmZ,CAAAA,CAAYnZ,EAAI,KAAA,CAAM,CAAA,CAAG,EAAE,CAAA,CAC5ByK,CAAAA,CAAM0O,CAAS,CAAA,GAChB1O,CAAAA,CAAM0O,CAAS,CAAA,CAAI,EAAC,CAAA,CAEvB1O,CAAAA,CAAM0O,CAAS,CAAA,CAAe,IAAA,CAAKD,CAAY,EACpD,CAAA,KACIzO,CAAAA,CAAMzK,CAAG,EAAIkZ,EAErB,CAEA,OAAOzO,CACX,CAKO,SAAS2O,EAAAA,CAAelC,CAAAA,CAAsC,CACjE,IAAM+B,EAAkB,EAAC,CAEzB,OAAW,CAACjZ,CAAAA,CAAKwB,CAAK,CAAA,GAAK,MAAA,CAAO,OAAA,CAAQ0V,CAAG,EACzC,GAAI1V,CAAAA,EAAS,KAEb,GAAI,KAAA,CAAM,QAAQA,CAAK,CAAA,CAEnB,IAAA,IAAWuE,CAAAA,IAAQvE,EACXuE,CAAAA,EAAQ,IAAA,EACRkT,EAAM,IAAA,CAAK,CAAA,EAAG,mBAAmBjZ,CAAG,CAAC,CAAA,GAAA,EAAM,kBAAA,CAAmB,OAAO+F,CAAI,CAAC,CAAC,CAAA,CAAE,CAAA,CAAA,KAIrFkT,EAAM,IAAA,CAAK,CAAA,EAAG,kBAAA,CAAmBjZ,CAAG,CAAC,CAAA,CAAA,EAAI,kBAAA,CAAmB,OAAOwB,CAAK,CAAC,CAAC,CAAA,CAAE,CAAA,CAIpF,OAAOyX,CAAAA,CAAM,OAAS,CAAA,CAAI,CAAA,CAAA,EAAIA,EAAM,IAAA,CAAK,GAAG,CAAC,CAAA,CAAA,CAAK,EACtD,CAKO,SAASI,GAAM7X,CAAAA,CAAe8X,CAAAA,CAAaC,EAAqB,CACnE,OAAO,KAAK,GAAA,CAAI,IAAA,CAAK,GAAA,CAAI/X,CAAAA,CAAO8X,CAAG,CAAA,CAAGC,CAAG,CAC7C,CAKO,SAASC,IAAqB,CACjC,OAAO,OAAO,MAAA,CAAW,KAAe,OAAO,QAAA,CAAa,GAChE,CAKO,SAASC,GAA2BjS,CAAAA,CAAckS,CAAAA,CAAgB,CACrE,GAAI,CACA,OAAO,IAAA,CAAK,MAAMlS,CAAI,CAC1B,MAAQ,CACJ,OAAOkS,CACX,CACJ,CAKO,IAAMC,EAAAA,CAAQ,CACjB,QAAA,CAAAzD,EAAAA,CACA,SAAAC,EAAAA,CACA,UAAA,CAAAC,EAAAA,CACA,UAAA,CAAAG,GACA,SAAA,CAAAU,CAAAA,CACA,UAAAK,EAAAA,CACA,QAAA,CAAAO,GACA,KAAA,CAAAI,EAAAA,CACA,OAAA,CAAAE,EAAAA,CACA,WAAAC,EAAAA,CACA,SAAA,CAAAE,GACA,SAAA,CAAAC,EAAAA,CACA,WAAAE,EAAAA,CACA,QAAA,CAAAE,EAAAA,CACA,UAAA,CAAAG,GACA,cAAA,CAAAM,EAAAA,CACA,MAAAC,EAAAA,CACA,SAAA,CAAAG,GACA,aAAA,CAAAC,EACJ,ECrXO,IAAMG,GAAN,KAAyB,CAI5B,YAAYhN,CAAAA,CAA4B,CAHxC,KAAQ,QAAA,CAAwC,IAAA,CAChD,IAAA,CAAQ,gBAAA,CAAmB,IAAI,GAAA,CAG3B,IAAA,CAAK,SAAW,IAAI,oBAAA,CAAsB+C,GAAY,CAClDA,CAAAA,CAAQ,OAAA,CAAQC,CAAAA,EAAS,CACrB,IAAMiK,CAAAA,CAAa,KAAK,gBAAA,CAAiB,GAAA,CAAIjK,EAAM,MAAM,CAAA,EAAK,KAAA,CACxDkK,CAAAA,CAAelK,EAAM,cAAA,CAGvBkK,CAAAA,EAAgB,CAACD,CAAAA,EAEjB,IAAA,CAAK,iBAAiB,GAAA,CAAIjK,CAAAA,CAAM,MAAA,CAAQ,IAAI,EAC5ChD,CAAAA,CAAO,OAAA,GAAUgD,CAAK,CAAA,CAElBhD,CAAAA,CAAO,MACP,IAAA,CAAK,SAAA,CAAUgD,CAAAA,CAAM,MAAM,GAExB,CAACkK,CAAAA,EAAgBD,IAExB,IAAA,CAAK,gBAAA,CAAiB,IAAIjK,CAAAA,CAAM,MAAA,CAAQ,KAAK,CAAA,CAC7ChD,EAAO,MAAA,GAASgD,CAAK,GAE7B,CAAC,EACL,EAAG,CACC,IAAA,CAAMhD,CAAAA,CAAO,IAAA,EAAQ,KACrB,UAAA,CAAYA,CAAAA,CAAO,YAAc,KAAA,CACjC,SAAA,CAAWA,EAAO,SAAA,EAAa,EACnC,CAAC,EACL,CAKA,OAAA,CAAQhO,CAAAA,CAAwB,CACxB,IAAA,CAAK,QAAA,GACL,KAAK,QAAA,CAAS,OAAA,CAAQA,CAAO,CAAA,CAC7B,KAAK,gBAAA,CAAiB,GAAA,CAAIA,EAAS,KAAK,CAAA,EAEhD,CAKA,SAAA,CAAUA,CAAAA,CAAwB,CAC1B,IAAA,CAAK,WACL,IAAA,CAAK,QAAA,CAAS,UAAUA,CAAO,CAAA,CAC/B,KAAK,gBAAA,CAAiB,MAAA,CAAOA,CAAO,CAAA,EAE5C,CAKA,UAAA,EAAmB,CACX,IAAA,CAAK,QAAA,GACL,KAAK,QAAA,CAAS,UAAA,EAAW,CACzB,IAAA,CAAK,iBAAiB,KAAA,EAAM,EAEpC,CACJ,EAcO,SAASmb,GACZnb,CAAAA,CACAM,CAAAA,CACU,CACV,IAAM8a,EAAW,IAAI,oBAAA,CAAsBrK,GAAY,CACnDA,CAAAA,CAAQ,QAAQC,CAAAA,EAAS,CACjBA,CAAAA,CAAM,cAAA,GACN1Q,EAAS0Q,CAAK,CAAA,CACdoK,EAAS,SAAA,CAAUpb,CAAO,GAElC,CAAC,EACL,CAAA,CAAG,CACC,UAAW,EACf,CAAC,EAED,OAAAob,CAAAA,CAAS,QAAQpb,CAAO,CAAA,CAEjB,IAAMob,CAAAA,CAAS,YAC1B,KC7FaC,EAAAA,CAAN,MAAMC,CAAgB,CAMjB,WAAA,EAAc,CAJtB,IAAA,CAAQ,UAAY,IAAI,GAAA,CACxB,KAAQ,aAAA,CAAgB,IAAI,IAIxB,IAAA,CAAK,uBAAA,GACT,CAKA,OAAc,WAAA,EAA+B,CACzC,OAAKA,CAAAA,CAAgB,QAAA,GACjBA,EAAgB,QAAA,CAAW,IAAIA,CAAAA,CAAAA,CAE5BA,CAAAA,CAAgB,QAC3B,CAKO,QAAA,CAASjc,EAAgBW,CAAAA,CAAsBO,CAAAA,CAA2Dgb,EAA6B,CAC1I,IAAA,CAAK,SAAA,CAAU,GAAA,CAAIlc,EAAI,CACnB,EAAA,CAAAA,EACA,OAAA,CAAAW,CAAAA,CACA,SAAAub,CAAAA,CACA,MAAA,CAAQhb,CAAAA,EAAW,MAAA,CACnB,QAASA,CAAAA,EAAW,OACxB,CAAC,EACL,CAKO,WAAWlB,CAAAA,CAAsB,CAChC,IAAA,CAAK,aAAA,CAAc,IAAIA,CAAE,CAAA,EACzB,KAAK,aAAA,CAAcA,CAAE,EAEzB,IAAA,CAAK,SAAA,CAAU,MAAA,CAAOA,CAAE,EAC5B,CAKO,YAAA,CAAaA,EAAsB,CACtC,IAAM2O,EAAS,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI3O,CAAE,EACpC,GAAI,CAAC2O,EAAQ,CACT,OAAA,CAAQ,KAAK,2CAAA,CAA6C3O,CAAE,CAAA,CAC5D,MACJ,CAGA,GAAI,IAAA,CAAK,cAAc,GAAA,CAAIA,CAAE,EACzB,OAIJ,IAAMmc,CAAAA,CAAc,IAAA,CAAK,eAAenc,CAAE,CAAA,CAGpCoc,EAAwB,EAAC,CAC/B,QAAWC,CAAAA,IAAU,IAAA,CAAK,aAAA,CACH,IAAA,CAAK,UAAU,GAAA,CAAIA,CAAM,IAIxCF,CAAAA,CAAY,QAAA,CAASE,CAAM,CAAA,EAG3B,IAAA,CAAK,cAAA,CAAeA,CAAM,EAAE,QAAA,CAASrc,CAAE,GAG3Coc,CAAAA,CAAQ,IAAA,CAAKC,CAAM,CAAA,CAAA,CAIvB,IAAA,IAAWC,CAAAA,IAAWF,CAAAA,CAClB,KAAK,aAAA,CAAcE,CAAO,EAI9B,IAAA,CAAK,aAAA,CAAc,IAAItc,CAAE,CAAA,CACrB2O,CAAAA,CAAO,MAAA,EACPA,EAAO,MAAA,GAEf,CAKQ,cAAA,CAAe3O,CAAAA,CAA8B,CACjD,IAAMuc,CAAAA,CAAsB,CAACvc,CAAE,EAC3Bwc,CAAAA,CAAoCxc,CAAAA,CAExC,KAAOwc,CAAAA,EAAW,CACd,IAAM7N,CAAAA,CAAS,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI6N,CAAS,CAAA,CAC3C,GAAI7N,GAAQ,QAAA,CACR4N,CAAAA,CAAM,KAAK5N,CAAAA,CAAO,QAAQ,CAAA,CAC1B6N,CAAAA,CAAY7N,EAAO,QAAA,CAAA,KAEnB,KAER,CAEA,OAAO4N,CACX,CAKO,aAAA,CAAcvc,CAAAA,CAAsB,CACvC,GAAI,CAAC,IAAA,CAAK,aAAA,CAAc,IAAIA,CAAE,CAAA,CAC1B,OAIJ,IAAMyc,CAAAA,CAAgC,EAAC,CACvC,QAAWJ,CAAAA,IAAU,IAAA,CAAK,cACH,IAAA,CAAK,SAAA,CAAU,IAAIA,CAAM,CAAA,EAC5B,QAAA,GAAarc,CAAAA,EACzByc,EAAgB,IAAA,CAAKJ,CAAM,EAKnC,IAAA,IAAWK,CAAAA,IAAWD,EAClB,IAAA,CAAK,aAAA,CAAcC,CAAO,CAAA,CAI9B,KAAK,aAAA,CAAc,MAAA,CAAO1c,CAAE,CAAA,CAC5B,IAAM2O,EAAS,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI3O,CAAE,EAChC2O,CAAAA,EAAQ,OAAA,EACRA,EAAO,OAAA,GAEf,CAKO,iBAAA,EAA0B,CAC7B,GAAI,IAAA,CAAK,cAAc,IAAA,GAAS,CAAA,CAC5B,OAIJ,IAAMyN,CAAAA,CAAU,MAAM,IAAA,CAAK,IAAA,CAAK,aAAa,CAAA,CAG7C,QAAWpc,CAAAA,IAAMoc,CAAAA,CAAS,CACtB,IAAMzN,CAAAA,CAAS,KAAK,SAAA,CAAU,GAAA,CAAI3O,CAAE,CAAA,CACf2O,GAAQ,QAAA,EAAY,IAAA,CAAK,cAAc,GAAA,CAAIA,CAAAA,CAAO,QAAQ,CAAA,EAI3E,IAAA,CAAK,aAAA,CAAc3O,CAAE,EAE7B,CACJ,CAKO,OAAOA,CAAAA,CAAyB,CACnC,OAAO,IAAA,CAAK,aAAA,CAAc,GAAA,CAAIA,CAAE,CACpC,CAKO,SAAA,EAAqB,CACxB,OAAO,KAAK,aAAA,CAAc,IAAA,CAAO,CACrC,CAKQ,yBAAgC,CACpC,IAAA,CAAK,aAAgBgK,CAAAA,EAAiB,CAClC,IAAM3F,CAAAA,CAAS2F,CAAAA,CAAM,MAAA,CAGrB,IAAA,GAAW,EAAG2E,CAAM,IAAK,IAAA,CAAK,SAAA,CAC1B,GAAIA,CAAAA,CAAO,OAAA,CAAQ,QAAA,CAAStK,CAAM,EAE9B,OAKR,IAAA,CAAK,oBACT,CAAA,CAGA,SAAS,gBAAA,CAAiB,OAAA,CAAS,IAAA,CAAK,YAAA,CAAc,KAAK,EAC/D,CAKO,SAAgB,CACf,IAAA,CAAK,eACL,QAAA,CAAS,mBAAA,CAAoB,OAAA,CAAS,IAAA,CAAK,aAAc,KAAK,CAAA,CAC9D,KAAK,YAAA,CAAe,MAAA,CAAA,CAExB,KAAK,SAAA,CAAU,KAAA,EAAM,CACrB,IAAA,CAAK,cAAc,KAAA,GACvB,CACJ,EAKO,SAASsY,IAAsC,CAClD,OAAOX,EAAAA,CAAgB,WAAA,EAC3B,CC1NO,SAASY,GAAmB/C,CAAAA,CAA0B,CACzD,IAAMtB,CAAAA,CAAO,OAAOsB,CAAAA,EAAc,QAAA,CAAW,IAAI,IAAA,CAAKA,CAAS,EAAIA,CAAAA,CAE7DgD,CAAAA,CADM,IAAI,IAAA,EAAK,CACF,OAAA,EAAQ,CAAItE,EAAK,OAAA,EAAQ,CACtCuE,EAAW,IAAA,CAAK,KAAA,CAAMD,EAAS,GAAI,CAAA,CACnCE,CAAAA,CAAW,IAAA,CAAK,MAAMD,CAAAA,CAAW,EAAE,EACnCE,CAAAA,CAAY,IAAA,CAAK,MAAMD,CAAAA,CAAW,EAAE,CAAA,CACpCE,CAAAA,CAAW,KAAK,KAAA,CAAMD,CAAAA,CAAY,EAAE,CAAA,CACpCE,CAAAA,CAAY,KAAK,KAAA,CAAMD,CAAAA,CAAW,CAAC,CAAA,CACnCE,EAAa,IAAA,CAAK,KAAA,CAAMF,EAAW,EAAE,CAAA,CACrCG,EAAY,IAAA,CAAK,KAAA,CAAMH,CAAAA,CAAW,GAAG,EAEvCI,CAAAA,CAAY,EAAA,CAEhB,OAAIP,CAAAA,CAAW,CAAA,CAEXO,EAAY1N,CAAAA,CAAE,eAAe,CAAA,CACtBmN,CAAAA,CAAW,GAElBO,CAAAA,CAAY1N,CAAAA,CAAE,eAAe,CAAA,CACtBoN,CAAAA,CAAW,EAElBM,CAAAA,CAAY1N,CAAAA,CAAE,iBAAiB,CAAA,CACxBoN,EAAW,EAAA,CAElBM,CAAAA,CAAY1N,EAAE,kBAAA,CAAoB,CAAE,MAAOoN,CAAAA,CAAS,QAAA,EAAW,CAAC,EACzDC,CAAAA,CAAY,CAAA,CAEnBK,EAAY1N,CAAAA,CAAE,eAAe,EACtBqN,CAAAA,CAAY,EAAA,CAEnBK,CAAAA,CAAY1N,CAAAA,CAAE,iBAAkB,CAAE,KAAA,CAAOqN,EAAU,QAAA,EAAW,CAAC,CAAA,CACxDC,CAAAA,CAAW,CAAA,CAElBI,CAAAA,CAAY1N,EAAE,cAAc,CAAA,CACrBsN,EAAW,CAAA,CAElBI,CAAAA,CAAY1N,EAAE,eAAA,CAAiB,CAAE,KAAA,CAAOsN,CAAAA,CAAS,UAAW,CAAC,EACtDC,CAAAA,CAAY,CAAA,CAEnBG,EAAY1N,CAAAA,CAAE,eAAe,CAAA,CACtBuN,CAAAA,CAAY,EAEnBG,CAAAA,CAAY1N,CAAAA,CAAE,iBAAkB,CAAE,KAAA,CAAOuN,EAAU,QAAA,EAAW,CAAC,CAAA,CACxDC,EAAa,CAAA,CAEpBE,CAAAA,CAAY1N,EAAE,gBAAgB,CAAA,CACvBwN,EAAa,EAAA,CAEpBE,CAAAA,CAAY1N,CAAAA,CAAE,iBAAA,CAAmB,CAAE,KAAA,CAAOwN,CAAAA,CAAW,UAAW,CAAC,EAC1DC,CAAAA,CAAY,CAAA,CAEnBC,CAAAA,CAAY1N,CAAAA,CAAE,eAAe,CAAA,CAG7B0N,CAAAA,CAAY1N,EAAE,gBAAA,CAAkB,CAAE,MAAOyN,CAAAA,CAAU,QAAA,EAAW,CAAC,EAG5D,CACH,SAAA,CAAAC,EACA,YAAA,CAAc9E,CAAAA,CAAK,aAAY,CAC/B,KAAA,CAAOA,CAAAA,CAAK,cAAA,EAChB,CACJ,CASO,SAAS+E,EAAAA,CAAezD,CAAAA,CAA0B,CACrD,GAAM,CAAE,SAAA,CAAAwD,CAAAA,CAAW,MAAAE,CAAM,CAAA,CAAIX,GAAmB/C,CAAS,CAAA,CACzD,OAAO,CACH,IAAA,CAAMwD,CAAAA,CACN,KAAA,CAAAE,CACJ,CACJ,CAOO,SAASC,EAAAA,CAAc3D,CAAAA,CAAkC,CAC5D,OAAO+C,EAAAA,CAAmB/C,CAAS,CAAA,CAAE,SACzC,CAOO,SAAS4D,GAAa5D,CAAAA,CAAkC,CAC3D,OAAO+C,EAAAA,CAAmB/C,CAAS,CAAA,CAAE,KACzC,CC7GA6D,SAAAA,CAAU,CACN,QAAS,KAAA,CACT,YAAA,CAAc,IAIlB,CAAC,CAAA","file":"main.js","sourcesContent":["// src/mod/core/styles.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * Style Manager - handles CSS injection and scoping\r\n     */\r\n    export class StyleManager {\r\n        private static styles = new Map<string, HTMLStyleElement>();\r\n        private static scopeCounter = 0;\r\n\r\n        /**\r\n         * Inject styles into document\r\n         */\r\n        static inject(css: string, componentName?: string): string {\r\n            const id = componentName || `style-${this.scopeCounter++}`;\r\n\r\n            if (this.styles.has(id)) {\r\n                return id;\r\n            }\r\n\r\n            const styleElement = document.createElement('style');\r\n            styleElement.setAttribute('data-component', id);\r\n\r\n            // Scope the CSS\r\n            const scopedCSS = this.scopeStyles(css, id);\r\n            styleElement.textContent = scopedCSS;\r\n\r\n            document.head.appendChild(styleElement);\r\n            this.styles.set(id, styleElement);\r\n\r\n            return id;\r\n        }\r\n\r\n        /**\r\n         * Remove styles from document\r\n         */\r\n        static remove(id: string): void {\r\n            const styleElement = this.styles.get(id);\r\n            if (styleElement && styleElement.parentElement) {\r\n                styleElement.parentElement.removeChild(styleElement);\r\n                this.styles.delete(id);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Scope CSS selectors\r\n         */\r\n        private static scopeStyles(css: string, scope: string): string {\r\n            // Simple scoping - prefix all selectors with [data-scope=\"id\"]\r\n            // This is a basic implementation. A production version would use a proper CSS parser\r\n\r\n            const lines = css.split('\\n');\r\n            const scopedLines: string[] = [];\r\n            let inMediaQuery = false;\r\n            let braceCount = 0;\r\n\r\n            for (let line of lines) {\r\n                line = line.trim();\r\n\r\n                // Handle media queries\r\n                if (line.startsWith('@media')) {\r\n                    inMediaQuery = true;\r\n                    scopedLines.push(line);\r\n                    continue;\r\n                }\r\n\r\n                // Count braces\r\n                braceCount += (line.match(/{/g) || []).length;\r\n                braceCount -= (line.match(/}/g) || []).length;\r\n\r\n                if (inMediaQuery && braceCount === 0) {\r\n                    inMediaQuery = false;\r\n                }\r\n\r\n                // Scope selectors\r\n                if (line.includes('{') && !line.startsWith('@') && !line.startsWith('}')) {\r\n                    const selector = line.substring(0, line.indexOf('{')).trim();\r\n                    const rest = line.substring(line.indexOf('{'));\r\n\r\n                    // Don't scope :root, *, or @-rules\r\n                    if (selector === ':root' || selector === '*' || line.startsWith('@')) {\r\n                        scopedLines.push(line);\r\n                    } else {\r\n                        const scopedSelector = `[data-scope=\"${scope}\"] ${selector}`;\r\n                        scopedLines.push(`${scopedSelector} ${rest}`);\r\n                    }\r\n                } else {\r\n                    scopedLines.push(line);\r\n                }\r\n            }\r\n\r\n            return scopedLines.join('\\n');\r\n        }\r\n\r\n        /**\r\n         * Clear all styles\r\n         */\r\n        static clear(): void {\r\n            for (const [, element] of this.styles) {\r\n                if (element.parentElement) {\r\n                    element.parentElement.removeChild(element);\r\n                }\r\n            }\r\n            this.styles.clear();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * CSS template literal tag\r\n     * Usage: css`.class { color: red; }`\r\n     */\r\n    export function css(\r\n        strings: TemplateStringsArray,\r\n        ...values: unknown[]\r\n    ): string {\r\n        let result = '';\r\n\r\n        for (let i = 0; i < strings.length; i++) {\r\n            result += strings[i];\r\n            if (i < values.length) {\r\n                result += values[i];\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n// ","// src/mod/core/scheduler.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    type UpdateCallback = () => void;\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * Update Scheduler\r\n     * Batches multiple state changes into a single render\r\n     */\r\n    class UpdateScheduler {\r\n        private queue = new Set<UpdateCallback>();\r\n        private isFlushScheduled = false;\r\n        private isFlushing = false;\r\n\r\n        /**\r\n         * Schedule a component update\r\n         */\r\n        schedule(callback: UpdateCallback): void {\r\n            if (this.isFlushing) {\r\n                // If we're currently flushing, schedule for next batch\r\n                requestAnimationFrame(() => this.schedule(callback));\r\n                return;\r\n            }\r\n\r\n            this.queue.add(callback);\r\n\r\n            if (!this.isFlushScheduled) {\r\n                this.isFlushScheduled = true;\r\n\r\n                // Use microtask for immediate batching, then RAF for rendering\r\n                Promise.resolve().then(() => {\r\n                    requestAnimationFrame(() => this.flush());\r\n                });\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Force immediate flush (for urgent updates)\r\n         */\r\n        flushSync(callback: UpdateCallback): void {\r\n            callback();\r\n        }\r\n\r\n        /**\r\n         * Flush all pending updates\r\n         */\r\n        private flush(): void {\r\n            if (this.queue.size === 0) {\r\n                this.isFlushScheduled = false;\r\n                return;\r\n            }\r\n\r\n            this.isFlushing = true;\r\n            this.isFlushScheduled = false;\r\n\r\n            const callbacks = Array.from(this.queue);\r\n            this.queue.clear();\r\n\r\n            // Execute all updates\r\n            for (const callback of callbacks) {\r\n                try {\r\n                    callback();\r\n                } catch (error) {\r\n                    console.error('Error during update:', error);\r\n                }\r\n            }\r\n\r\n            this.isFlushing = false;\r\n\r\n            // If new updates were scheduled during flush, process them\r\n            if (this.queue.size > 0) {\r\n                this.schedule(() => {});\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Clear all pending updates\r\n         */\r\n        clear(): void {\r\n            this.queue.clear();\r\n            this.isFlushScheduled = false;\r\n        }\r\n\r\n        /**\r\n         * Get queue size (for debugging)\r\n         */\r\n        get size(): number {\r\n            return this.queue.size;\r\n        }\r\n    }\r\n\r\n    // Export singleton instance\r\n    export const scheduler = new UpdateScheduler();\r\n\r\n// ","// src/mod/core/component.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import type { VNode } from '../../types';\r\n    import { patch, VNode as VDomVNode } from '@je-es/vdom';\r\n    import { StyleManager } from './styles';\r\n    import { scheduler } from './scheduler';\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    export abstract class Component<P = Record<string, unknown>, S = Record<string, unknown>> {\r\n        public props: P;\r\n        public state: S;\r\n        public _isMounted: boolean = false;\r\n\r\n        private _isUnmounting: boolean = false;\r\n        private _element: HTMLElement | null = null;\r\n        private _vnode: VNode | null = null;\r\n        private _styleId: string | null = null;\r\n        private _isScheduledForUpdate: boolean = false;\r\n        private _updateBatch = new Set<string>();\r\n        private _refs = new Map<string, HTMLElement>();\r\n        private _subscriptions: (() => void)[] = [];\r\n        private _memoCache = new Map<string, { args: unknown[]; result: unknown }>();\r\n\r\n        constructor(props?: P, initialState?: S) {\r\n            this.props = props || {} as P;\r\n            this.state = initialState || {} as S;\r\n        }\r\n\r\n        //  Lifecycle Hooks \r\n\r\n        onBeforeMount?(): void | Promise<void>;\r\n        onMount?(): void | Promise<void>;\r\n        onBeforeUpdate?(prevProps: P, prevState: S): void | Promise<void>;\r\n        onUpdate?(prevProps: P, prevState: S): void;\r\n        onBeforeUnmount?(): void;\r\n        onUnmount?(): void;\r\n        onError?(error: Error, errorInfo: { componentStack?: string }): void;\r\n        onPropsChange?(prevProps: P, newProps: P): void;\r\n        onStateChange?(prevState: S, newState: S): void;\r\n        shouldUpdate?(prevProps: P, prevState: S): boolean;\r\n\r\n        //  Abstract Methods \r\n\r\n        abstract render(): VNode;\r\n        styles?(): string;\r\n\r\n        //  State Management \r\n\r\n        setState(\r\n            partialState: Partial<S> | ((prevState: S) => Partial<S>),\r\n            callback?: () => void\r\n        ): void {\r\n            const prevState = { ...this.state };\r\n            const newState = typeof partialState === 'function'\r\n                ? partialState(this.state)\r\n                : partialState;\r\n\r\n            this.state = { ...this.state, ...newState };\r\n\r\n            this.onStateChange?.(prevState, this.state);\r\n            this.update();\r\n\r\n            if (callback) {\r\n                scheduler.schedule(callback);\r\n            }\r\n        }\r\n\r\n        setProps(newProps: Partial<P>): void {\r\n            const prevProps = { ...this.props };\r\n            this.props = { ...this.props, ...newProps };\r\n\r\n            this.onPropsChange?.(prevProps, this.props);\r\n            this.update();\r\n        }\r\n\r\n        //  Update Scheduling \r\n\r\n        batchUpdate(updater: () => void): void {\r\n            const prevIsScheduled = this._isScheduledForUpdate;\r\n            this._isScheduledForUpdate = true;\r\n\r\n            try {\r\n                updater();\r\n            } finally {\r\n                if (!prevIsScheduled) {\r\n                    this._isScheduledForUpdate = false;\r\n                    this.update();\r\n                }\r\n            }\r\n        }\r\n\r\n        update(key?: string): void {\r\n            if (!this._isMounted || this._isUnmounting) return;\r\n\r\n            if (key) {\r\n                this._updateBatch.add(key);\r\n            }\r\n\r\n            if (this._isScheduledForUpdate) return;\r\n\r\n            this._isScheduledForUpdate = true;\r\n            scheduler.schedule(() => {\r\n                this._isScheduledForUpdate = false;\r\n                this._updateBatch.clear();\r\n                this._performUpdate();\r\n            });\r\n        }\r\n\r\n        forceUpdate(): void {\r\n            if (!this._isMounted || this._isUnmounting) return;\r\n\r\n            scheduler.flushSync(() => {\r\n                this._performUpdate();\r\n            });\r\n        }\r\n\r\n        //  Lifecycle Methods \r\n\r\n        async mount(container: HTMLElement): Promise<void> {\r\n            if (this._isMounted) {\r\n                console.warn('Component is already mounted');\r\n                return;\r\n            }\r\n\r\n            try {\r\n                await this.onBeforeMount?.();\r\n\r\n                this._vnode = this.render();\r\n                this._element = this._createElementFromVNode(this._vnode);\r\n\r\n                if (this.styles) {\r\n                    this._styleId = StyleManager.inject(\r\n                        this.styles(),\r\n                        this.constructor.name\r\n                    );\r\n                    this._element?.setAttribute('data-scope', this.constructor.name);\r\n                }\r\n\r\n                container.appendChild(this._element);\r\n                this._isMounted = true;\r\n\r\n                await this.onMount?.();\r\n            } catch (error) {\r\n                this._handleError(error as Error, { componentStack: this.constructor.name });\r\n            }\r\n        }\r\n\r\n        unmount(): void {\r\n            if (!this._isMounted || this._isUnmounting) return;\r\n\r\n            this._isUnmounting = true;\r\n\r\n            try {\r\n                this.onBeforeUnmount?.();\r\n\r\n                // Cleanup\r\n                this._isScheduledForUpdate = false;\r\n                this._updateBatch.clear();\r\n\r\n                if (this._styleId) {\r\n                    StyleManager.remove(this._styleId);\r\n                }\r\n\r\n                this._subscriptions.forEach(unsubscribe => unsubscribe());\r\n                this._subscriptions = [];\r\n\r\n                if (this._element?.parentElement) {\r\n                    this._element.parentElement.removeChild(this._element);\r\n                }\r\n\r\n                this._isMounted = false;\r\n                this._element = null;\r\n                this._vnode = null;\r\n\r\n                this.onUnmount?.();\r\n\r\n                this._refs.clear();\r\n                this._memoCache.clear();\r\n            } catch (error) {\r\n                this._handleError(error as Error, { componentStack: this.constructor.name });\r\n            } finally {\r\n                this._isUnmounting = false;\r\n            }\r\n        }\r\n\r\n        //  Helper Methods \r\n\r\n        getRef(name: string): HTMLElement | undefined {\r\n            return this._refs.get(name);\r\n        }\r\n\r\n        createRef(name: string): (el: HTMLElement | null) => void {\r\n            return (el: HTMLElement | null) => {\r\n                if (el) {\r\n                    this._refs.set(name, el);\r\n                } else {\r\n                    this._refs.delete(name);\r\n                }\r\n            };\r\n        }\r\n\r\n        memo<T>(key: string, compute: () => T, deps: unknown[]): T {\r\n            const cached = this._memoCache.get(key);\r\n\r\n            if (cached && this._areDepsEqual(cached.args, deps)) {\r\n                return cached.result as T;\r\n            }\r\n\r\n            const result = compute();\r\n            this._memoCache.set(key, { args: deps, result });\r\n            return result;\r\n        }\r\n\r\n        subscribe(subscription: () => void): void {\r\n            this._subscriptions.push(subscription);\r\n        }\r\n\r\n        debounce<T extends (...args: unknown[]) => unknown>(\r\n            fn: T,\r\n            delay: number\r\n        ): (...args: Parameters<T>) => void {\r\n            let timeoutId: ReturnType<typeof setTimeout> | null = null;\r\n\r\n            return (...args: Parameters<T>): void => {\r\n                if (timeoutId !== null) {\r\n                    clearTimeout(timeoutId);\r\n                }\r\n\r\n                timeoutId = setTimeout(() => {\r\n                    timeoutId = null;\r\n                    fn.apply(this, args);\r\n                }, delay);\r\n            };\r\n        }\r\n\r\n        throttle<T extends (...args: unknown[]) => unknown>(\r\n            fn: T,\r\n            delay: number\r\n        ): (...args: Parameters<T>) => void {\r\n            let lastCall = 0;\r\n            let timeoutId: ReturnType<typeof setTimeout> | null = null;\r\n\r\n            return (...args: Parameters<T>): void => {\r\n                const now = Date.now();\r\n                const timeSinceLastCall = now - lastCall;\r\n\r\n                if (timeSinceLastCall >= delay) {\r\n                    lastCall = now;\r\n                    fn.apply(this, args);\r\n                } else if (!timeoutId) {\r\n                    timeoutId = setTimeout(() => {\r\n                        lastCall = Date.now();\r\n                        timeoutId = null;\r\n                        fn.apply(this, args);\r\n                    }, delay - timeSinceLastCall);\r\n                }\r\n            };\r\n        }\r\n\r\n        //  Getters \r\n\r\n        get element(): HTMLElement | null {\r\n            return this._element;\r\n        }\r\n\r\n        get isMounted(): boolean {\r\n            return this._isMounted;\r\n        }\r\n\r\n        get isUnmounting(): boolean {\r\n            return this._isUnmounting;\r\n        }\r\n\r\n        //  Private Methods \r\n\r\n        private async _performUpdate(): Promise<void> {\r\n            if (!this._isMounted || !this._element || this._isUnmounting) return;\r\n\r\n            const prevProps = { ...this.props };\r\n            const prevState = { ...this.state };\r\n\r\n            try {\r\n                if (this.shouldUpdate && !this.shouldUpdate(prevProps, prevState)) {\r\n                    return;\r\n                }\r\n\r\n                await this.onBeforeUpdate?.(prevProps, prevState);\r\n\r\n                const newVNode = this.render();\r\n                const parent = this._element.parentElement;\r\n\r\n                if (this._vnode && parent) {\r\n                    const index = Array.from(parent.childNodes).indexOf(this._element);\r\n                    // Convert to VDom-compatible VNode\r\n                    const oldVDomNode = this._convertToVDomNode(this._vnode);\r\n                    const newVDomNode = this._convertToVDomNode(newVNode);\r\n                    patch(parent, oldVDomNode, newVDomNode, index);\r\n                    this._element = parent.childNodes[index] as HTMLElement;\r\n                }\r\n\r\n                this._vnode = newVNode;\r\n                this.onUpdate?.(prevProps, prevState);\r\n            } catch (error) {\r\n                this._handleError(error as Error, { componentStack: this.constructor.name });\r\n            }\r\n        }\r\n\r\n        private _convertToVDomNode(vnode: VNode): VDomVNode {\r\n            if (typeof vnode.type !== 'string') {\r\n                throw new Error('Component VNodes cannot be converted to VDom nodes');\r\n            }\r\n\r\n            // Convert props to VDom-compatible format\r\n            const convertedProps: Record<string, unknown> = {};\r\n            for (const [key, value] of Object.entries(vnode.props)) {\r\n                if (key === 'children') continue;\r\n\r\n                // Convert style object if needed\r\n                if (key === 'style' && typeof value === 'object' && value !== null && !Array.isArray(value)) {\r\n                    convertedProps[key] = value as Record<string, string | number>;\r\n                } else {\r\n                    convertedProps[key] = value;\r\n                }\r\n            }\r\n\r\n            const convertedChildren = vnode.children.map(child => {\r\n                if (child == null || typeof child === 'boolean') return null;\r\n                if (typeof child === 'string' || typeof child === 'number') return child;\r\n                return this._convertToVDomNode(child as VNode);\r\n            }).filter((child): child is string | number | VDomVNode => child !== null);\r\n\r\n            return {\r\n                type: vnode.type,\r\n                props: convertedProps as never,\r\n                children: convertedChildren\r\n            };\r\n        }\r\n\r\n        private _createElementFromVNode(vnode: VNode): HTMLElement {\r\n            if (typeof vnode.type !== 'string') {\r\n                throw new Error('Component VNodes not supported in _createElementFromVNode');\r\n            }\r\n\r\n            const element = document.createElement(vnode.type);\r\n\r\n            // Set properties\r\n            for (const [key, value] of Object.entries(vnode.props)) {\r\n                if (key === 'children') continue;\r\n                this._setElementProperty(element, key, value);\r\n            }\r\n\r\n            // Add children\r\n            for (const child of vnode.children) {\r\n                if (child == null || child === false) continue;\r\n\r\n                if (typeof child === 'string' || typeof child === 'number') {\r\n                    element.appendChild(document.createTextNode(String(child)));\r\n                } else if (typeof child === 'object' && 'type' in child) {\r\n                    element.appendChild(this._createElementFromVNode(child as VNode));\r\n                }\r\n            }\r\n\r\n            return element;\r\n        }\r\n\r\n        private _setElementProperty(element: HTMLElement, key: string, value: unknown): void {\r\n            // Event handlers\r\n            if (key.startsWith('on') && typeof value === 'function') {\r\n                const eventName = key.substring(2).toLowerCase();\r\n                element.addEventListener(eventName, value as EventListener);\r\n                return;\r\n            }\r\n\r\n            // Class names\r\n            if (key === 'className' && typeof value === 'string') {\r\n                element.className = value;\r\n                return;\r\n            }\r\n\r\n            // Styles\r\n            if (key === 'style') {\r\n                if (typeof value === 'string') {\r\n                    element.setAttribute('style', value);\r\n                } else if (typeof value === 'object' && value !== null) {\r\n                    Object.assign(element.style, value);\r\n                }\r\n                return;\r\n            }\r\n\r\n            // Refs\r\n            if (key === 'ref' && typeof value === 'function') {\r\n                (value as (el: HTMLElement) => void)(element);\r\n                return;\r\n            }\r\n\r\n            // Boolean attributes\r\n            if (key === 'checked' || key === 'disabled' || key === 'selected') {\r\n                const boolValue = value === 'true' || value === true || value === '';\r\n                if (boolValue) {\r\n                    element.setAttribute(key, '');\r\n                }\r\n                return;\r\n            }\r\n\r\n            // Regular attributes\r\n            if (value != null && value !== false) {\r\n                element.setAttribute(key, String(value));\r\n            }\r\n        }\r\n\r\n        private _handleError(error: Error, errorInfo: { componentStack?: string }): void {\r\n            console.error(`Error in component ${this.constructor.name}:`, error);\r\n\r\n            if (this.onError) {\r\n                this.onError(error, errorInfo);\r\n            } else {\r\n                throw error;\r\n            }\r\n        }\r\n\r\n        private _areDepsEqual(prevDeps: unknown[], nextDeps: unknown[]): boolean {\r\n            if (prevDeps.length !== nextDeps.length) return false;\r\n            return prevDeps.every((dep, i) => dep === nextDeps[i]);\r\n        }\r\n\r\n        /**\r\n         * Invalidate all computed property caches (called by decorators)\r\n         */\r\n        _invalidateAllComputed(): void {\r\n            for (const key in this) {\r\n                if (key.startsWith('_computed_dirty_')) {\r\n                    (this as Record<string, unknown>)[key] = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Trigger watchers for a property (called by decorators)\r\n         */\r\n        _triggerWatchers(propertyName: string, newValue: unknown, oldValue: unknown): void {\r\n            const watchers = (this.constructor as ComponentConstructor).__watchers__;\r\n            if (!watchers?.[propertyName]) return;\r\n\r\n            for (const methodName of watchers[propertyName]) {\r\n                if (typeof (this as Record<string, unknown>)[methodName] === 'function') {\r\n                    try {\r\n                        ((this as Record<string, unknown>)[methodName] as (nv: unknown, ov: unknown) => void).call(this, newValue, oldValue);\r\n                    } catch (error) {\r\n                        console.error(`Watcher error in ${methodName}:`, error);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Helper type for constructor metadata\r\n    export interface ComponentConstructor {\r\n        __watchers__?: Record<string, string[]>;\r\n        __reactiveProps__?: string[];\r\n    }\r\n\r\n// ","// src/mod/core/decorators.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    // Type for decorator context (Stage 3 decorators)\r\n    interface ClassFieldDecoratorContext<This = unknown, Value = unknown> {\r\n        kind: 'field';\r\n        name: string | symbol;\r\n        access: {\r\n            get(object: This): Value;\r\n            set(object: This, value: Value): void;\r\n        };\r\n        addInitializer(initializer: (this: This) => void): void;\r\n    }\r\n\r\n    interface ClassGetterDecoratorContext<This = unknown, Value = unknown> {\r\n        kind: 'getter';\r\n        name: string | symbol;\r\n        access: {\r\n            get(object: This): Value;\r\n        };\r\n        addInitializer(initializer: (this: This) => void): void;\r\n    }\r\n\r\n    interface ClassMethodDecoratorContext<This = unknown, Value = unknown> {\r\n        kind: 'method';\r\n        name: string | symbol;\r\n        access: {\r\n            get(object: This): Value;\r\n        };\r\n        addInitializer(initializer: (this: This) => void): void;\r\n    }\r\n\r\n    // Component metadata interface\r\n    interface ComponentMetadata {\r\n        __reactiveProps__?: string[];\r\n        __watchers__?: Record<string, string[]>;\r\n    }\r\n\r\n    // Helper type for component instance\r\n    type ComponentInstance = Record<string, unknown> & {\r\n        constructor: ComponentMetadata;\r\n        _invalidateAllComputed?: () => void;\r\n        _triggerWatchers?: (key: string, newVal: unknown, oldVal: unknown) => void;\r\n        _isMounted?: boolean;\r\n        update?: () => void;\r\n    };\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * State decorator - makes property reactive\r\n     * Usage: @state fields = [];\r\n     *\r\n     * Supports both TypeScript 5 decorators and legacy decorators\r\n     */\r\n    export function state<This, Value>(\r\n        target: undefined,\r\n        context: ClassFieldDecoratorContext<This, Value>\r\n    ): (this: This, initialValue: Value) => Value;\r\n    export function state(\r\n        target: Record<string, unknown>,\r\n        context: string\r\n    ): void;\r\n    export function state<This, Value>(\r\n        target: Record<string, unknown> | undefined,\r\n        context: string | ClassFieldDecoratorContext<This, Value>\r\n    ): unknown {\r\n        // TypeScript 5+ decorator (Stage 3)\r\n        if (context && typeof context === 'object' && 'kind' in context) {\r\n            const propertyKey = context.name as string;\r\n\r\n            context.addInitializer(function(this: unknown) {\r\n                const instance = this as ComponentInstance;\r\n                if (!instance.constructor.__reactiveProps__) {\r\n                    instance.constructor.__reactiveProps__ = [];\r\n                }\r\n                if (!instance.constructor.__reactiveProps__.includes(propertyKey)) {\r\n                    instance.constructor.__reactiveProps__.push(propertyKey);\r\n                }\r\n            });\r\n\r\n            return function(this: This, initialValue: Value): Value {\r\n                const instance = this as ComponentInstance;\r\n                const hiddenKey = `_state_${propertyKey}`;\r\n\r\n                // Store initial value\r\n                instance[hiddenKey] = initialValue;\r\n\r\n                // Define getter/setter\r\n                Object.defineProperty(this, propertyKey, {\r\n                    get(this: This) {\r\n                        const inst = this as Record<string, unknown>;\r\n                        return inst[hiddenKey];\r\n                    },\r\n                    set(this: This, newValue: Value) {\r\n                        const inst = this as ComponentInstance;\r\n                        const oldValue = inst[hiddenKey];\r\n\r\n                        if (oldValue !== newValue) {\r\n                            inst[hiddenKey] = newValue;\r\n\r\n                            // Invalidate all computed properties\r\n                            if (typeof inst._invalidateAllComputed === 'function') {\r\n                                inst._invalidateAllComputed();\r\n                            }\r\n\r\n                            // Trigger watchers with correct old/new values\r\n                            if (typeof inst._triggerWatchers === 'function') {\r\n                                inst._triggerWatchers(propertyKey, newValue, oldValue);\r\n                            }\r\n\r\n                            // Trigger update if component is mounted\r\n                            if (inst._isMounted && typeof inst.update === 'function') {\r\n                                inst.update();\r\n                            }\r\n                        }\r\n                    },\r\n                    enumerable: true,\r\n                    configurable: true,\r\n                });\r\n\r\n                return initialValue;\r\n            };\r\n        }\r\n\r\n        // Legacy decorator (for backwards compatibility)\r\n        const propertyKey = context as string;\r\n\r\n        // Store reactive property metadata\r\n        const targetConstructor = (target as { constructor: ComponentMetadata }).constructor;\r\n        if (!targetConstructor.__reactiveProps__) {\r\n            targetConstructor.__reactiveProps__ = [];\r\n        }\r\n        if (!targetConstructor.__reactiveProps__.includes(propertyKey)) {\r\n            targetConstructor.__reactiveProps__.push(propertyKey);\r\n        }\r\n\r\n        // Create hidden property key\r\n        const hiddenKey = `_state_${propertyKey}`;\r\n        const initKey = `_state_init_${propertyKey}`;\r\n\r\n        // Define getter/setter\r\n        Object.defineProperty(target, propertyKey, {\r\n            get(this: unknown) {\r\n                const instance = this as Record<string, unknown>;\r\n                // If not initialized yet, return undefined (don't trigger getter before init)\r\n                if (!instance[initKey]) {\r\n                    return undefined;\r\n                }\r\n                return instance[hiddenKey];\r\n            },\r\n            set(this: unknown, newValue: unknown) {\r\n                const instance = this as ComponentInstance;\r\n                // On first set (during construction), just store the value\r\n                if (!instance[initKey]) {\r\n                    instance[hiddenKey] = newValue;\r\n                    instance[initKey] = true;\r\n                    return;\r\n                }\r\n\r\n                const oldValue = instance[hiddenKey];\r\n\r\n                if (oldValue !== newValue) {\r\n                    instance[hiddenKey] = newValue;\r\n\r\n                    // Invalidate all computed properties\r\n                    if (typeof instance._invalidateAllComputed === 'function') {\r\n                        instance._invalidateAllComputed();\r\n                    }\r\n\r\n                    // Trigger watchers with correct old/new values\r\n                    if (typeof instance._triggerWatchers === 'function') {\r\n                        instance._triggerWatchers(propertyKey, newValue, oldValue);\r\n                    }\r\n\r\n                    // Trigger update if component is mounted\r\n                    if (instance._isMounted && typeof instance.update === 'function') {\r\n                        instance.update();\r\n                    }\r\n                }\r\n            },\r\n            enumerable: true,\r\n            configurable: true,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Computed decorator - creates computed property\r\n     * Usage: @computed get fullName() { return this.firstName + ' ' + this.lastName; }\r\n     */\r\n    export function computed<This, Value>(\r\n        originalGetter: (this: This) => Value,\r\n        context: ClassGetterDecoratorContext<This, Value>\r\n    ): (this: This) => Value;\r\n    export function computed(\r\n        target: Record<string, unknown>,\r\n        context: string,\r\n        descriptor: PropertyDescriptor\r\n    ): PropertyDescriptor;\r\n    // Catch-all for invalid uses (like methods) to provide better error messages\r\n    export function computed(\r\n        targetOrGetter: unknown,\r\n        context: unknown\r\n    ): never;\r\n    export function computed<This, Value>(\r\n        targetOrGetter: Record<string, unknown> | ((this: This) => Value) | unknown,\r\n        context: string | ClassGetterDecoratorContext<This, Value> | unknown,\r\n        descriptor?: PropertyDescriptor\r\n    ): unknown {\r\n        // TypeScript 5+ decorator (Stage 3)\r\n        if (context && typeof context === 'object' && 'kind' in context) {\r\n            const ctx = context as ClassGetterDecoratorContext<This, Value>;\r\n            if (ctx.kind !== 'getter') {\r\n                throw new Error('@computed can only be used on getters');\r\n            }\r\n\r\n            const originalGetter = targetOrGetter as (this: This) => Value;\r\n            const propertyKey = ctx.name as string;\r\n            const cacheKey = `_computed_cache_${propertyKey}`;\r\n            const dirtyKey = `_computed_dirty_${propertyKey}`;\r\n\r\n            return function(this: This): Value {\r\n                const instance = this as Record<string, unknown>;\r\n                // Initialize as dirty on first access\r\n                if (instance[dirtyKey] === undefined) {\r\n                    instance[dirtyKey] = true;\r\n                }\r\n\r\n                // Recompute if dirty\r\n                if (instance[dirtyKey] === true) {\r\n                    instance[cacheKey] = originalGetter.call(this);\r\n                    instance[dirtyKey] = false;\r\n                }\r\n\r\n                return instance[cacheKey] as Value;\r\n            };\r\n        }\r\n\r\n        // Legacy decorator\r\n        const propertyKey = context as string;\r\n        if (!descriptor) {\r\n            throw new Error('@computed requires a property descriptor');\r\n        }\r\n\r\n        const originalGetter = descriptor.get;\r\n\r\n        if (!originalGetter) {\r\n            throw new Error('@computed can only be used on getters');\r\n        }\r\n\r\n        const cacheKey = `_computed_cache_${propertyKey}`;\r\n        const dirtyKey = `_computed_dirty_${propertyKey}`;\r\n\r\n        return {\r\n            get(this: unknown) {\r\n                const instance = this as Record<string, unknown>;\r\n                // Initialize as dirty on first access\r\n                if (instance[dirtyKey] === undefined) {\r\n                    instance[dirtyKey] = true;\r\n                }\r\n\r\n                // Recompute if dirty\r\n                if (instance[dirtyKey] === true) {\r\n                    instance[cacheKey] = originalGetter.call(this);\r\n                    instance[dirtyKey] = false;\r\n                }\r\n\r\n                return instance[cacheKey];\r\n            },\r\n            enumerable: descriptor.enumerable,\r\n            configurable: descriptor.configurable,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Watch decorator - watches for property changes\r\n     * Usage: @watch('propertyName') onPropertyChange(newValue, oldValue) {}\r\n     */\r\n    export function watch(propertyName: string) {\r\n        function decorator<This, Args extends unknown[], Return>(\r\n            originalMethod: (this: This, ...args: Args) => Return,\r\n            context: ClassMethodDecoratorContext<This, (this: This, ...args: Args) => Return>\r\n        ): void;\r\n        function decorator(\r\n            target: Record<string, unknown>,\r\n            context: string,\r\n            descriptor: PropertyDescriptor\r\n        ): PropertyDescriptor;\r\n        function decorator<This, Args extends unknown[], Return>(\r\n            targetOrMethod: Record<string, unknown> | ((this: This, ...args: Args) => Return),\r\n            context: string | ClassMethodDecoratorContext<This, (this: This, ...args: Args) => Return>,\r\n            descriptor?: PropertyDescriptor\r\n        ): PropertyDescriptor | void {\r\n            // TypeScript 5+ decorator (Stage 3)\r\n            if (context && typeof context === 'object' && 'kind' in context) {\r\n                if (context.kind !== 'method') {\r\n                    throw new Error('@watch can only be used on methods');\r\n                }\r\n\r\n                const methodName = context.name as string;\r\n\r\n                context.addInitializer(function(this: unknown) {\r\n                    const instance = this as ComponentInstance;\r\n                    if (!instance.constructor.__watchers__) {\r\n                        instance.constructor.__watchers__ = {};\r\n                    }\r\n                    if (!instance.constructor.__watchers__[propertyName]) {\r\n                        instance.constructor.__watchers__[propertyName] = [];\r\n                    }\r\n                    if (!instance.constructor.__watchers__[propertyName].includes(methodName)) {\r\n                        instance.constructor.__watchers__[propertyName].push(methodName);\r\n                    }\r\n                });\r\n\r\n                return;\r\n            }\r\n\r\n            // Legacy decorator\r\n            const methodName = context as string;\r\n            if (!descriptor) {\r\n                throw new Error('@watch requires a property descriptor');\r\n            }\r\n\r\n            const target = targetOrMethod as Record<string, unknown>;\r\n            const targetConstructor = (target as { constructor: ComponentMetadata }).constructor;\r\n            if (!targetConstructor.__watchers__) {\r\n                targetConstructor.__watchers__ = {};\r\n            }\r\n            if (!targetConstructor.__watchers__[propertyName]) {\r\n                targetConstructor.__watchers__[propertyName] = [];\r\n            }\r\n            if (!targetConstructor.__watchers__[propertyName].includes(methodName)) {\r\n                targetConstructor.__watchers__[propertyName].push(methodName);\r\n            }\r\n\r\n            return descriptor;\r\n        }\r\n\r\n        return decorator;\r\n    }\r\n\r\n// ","// src/mod/core/context.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { Component } from './component';\r\n    import { html, type VNode } from '@je-es/vdom';\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    export type ContextSubscriber<T> = (value: T) => void;\r\n\r\n    export interface ProviderProps<T> {\r\n        context: Context<T>;\r\n        value: T;\r\n        children: VNode | VNode[];\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * Context class for sharing data across component tree\r\n     */\r\n    export class Context<T = unknown> {\r\n        private _value: T;\r\n        private _subscribers = new Set<ContextSubscriber<T>>();\r\n        private _defaultValue: T;\r\n\r\n        constructor(defaultValue: T) {\r\n            this._value = defaultValue;\r\n            this._defaultValue = defaultValue;\r\n        }\r\n\r\n        get value(): T {\r\n            return this._value;\r\n        }\r\n\r\n        set value(newValue: T) {\r\n            if (this._value !== newValue) {\r\n                this._value = newValue;\r\n                this._notify();\r\n            }\r\n        }\r\n\r\n        subscribe(subscriber: ContextSubscriber<T>): () => void {\r\n            this._subscribers.add(subscriber);\r\n\r\n            // Immediately call with current value (wrapped in try-catch)\r\n            try {\r\n                subscriber(this._value);\r\n            } catch (error) {\r\n                console.error('Context subscriber error:', error);\r\n                // Don't throw - the test expects this to not throw\r\n            }\r\n\r\n            // Return unsubscribe function\r\n            return () => {\r\n                this._subscribers.delete(subscriber);\r\n            };\r\n        }\r\n\r\n        reset(): void {\r\n            this.value = this._defaultValue;\r\n        }\r\n\r\n        update(updater: (prev: T) => T): void {\r\n            this.value = updater(this._value);\r\n        }\r\n\r\n        private _notify(): void {\r\n            for (const subscriber of this._subscribers) {\r\n                try {\r\n                    subscriber(this._value);\r\n                } catch (error) {\r\n                    console.error('Context subscriber error:', error);\r\n                    // Continue notifying other subscribers\r\n                }\r\n            }\r\n        }\r\n\r\n        get subscriberCount(): number {\r\n            return this._subscribers.size;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create a new context\r\n     */\r\n    export function createContext<T>(defaultValue: T): Context<T> {\r\n        return new Context(defaultValue);\r\n    }\r\n\r\n    export class Provider<T> extends Component<ProviderProps<T>> {\r\n        onMount(): void {\r\n            // Update context value\r\n            this.props.context.value = this.props.value;\r\n        }\r\n\r\n        onUpdate(): void {\r\n            // Update context when props change\r\n            this.props.context.value = this.props.value;\r\n        }\r\n\r\n        onUnmount(): void {\r\n            // Optionally reset context on unmount\r\n            // this.props.context.reset();\r\n        }\r\n\r\n        render(): VNode {\r\n            const children = Array.isArray(this.props.children)\r\n                ? this.props.children\r\n                : [this.props.children];\r\n\r\n            return html`\r\n                <div class=\"context-provider\" style=\"display: contents;\">\r\n                    ${children}\r\n                </div>\r\n            `;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Hook-like function to use context in components\r\n     * Call this in your component to get context value\r\n     */\r\n    export function useContext<T>(context: Context<T>, component: Component): T {\r\n        // Subscribe to context changes\r\n        const unsubscribe = context.subscribe(() => {\r\n            if (component.isMounted) {\r\n                component.update();\r\n            }\r\n        });\r\n\r\n        // Cleanup on unmount\r\n        component.subscribe(() => unsubscribe);\r\n\r\n        return context.value;\r\n    }\r\n\r\n    /**\r\n     * Combined context for complex state management\r\n     */\r\n    export class CombinedContext<T extends Record<string, unknown>> {\r\n        private contexts = new Map<keyof T, Context<T[keyof T]>>();\r\n\r\n        constructor(initialValues: T) {\r\n            for (const [key, value] of Object.entries(initialValues)) {\r\n                this.contexts.set(key as keyof T, new Context(value) as unknown as Context<T[keyof T]>);\r\n            }\r\n        }\r\n\r\n        get<K extends keyof T>(key: K): Context<T[K]> {\r\n            const context = this.contexts.get(key);\r\n            if (!context) {\r\n                throw new Error(`Context key \"${String(key)}\" not found`);\r\n            }\r\n            return context as unknown as Context<T[K]>;\r\n        }\r\n\r\n        set<K extends keyof T>(key: K, value: T[K]): void {\r\n            const context = this.contexts.get(key);\r\n            if (context) {\r\n                (context as unknown as Context<T[K]>).value = value;\r\n            }\r\n        }\r\n\r\n        subscribe<K extends keyof T>(\r\n            key: K,\r\n            subscriber: ContextSubscriber<T[K]>\r\n        ): () => void {\r\n            const context = this.contexts.get(key);\r\n            if (!context) {\r\n                throw new Error(`Context key \"${String(key)}\" not found`);\r\n            }\r\n            return (context as unknown as Context<T[K]>).subscribe(subscriber);\r\n        }\r\n\r\n        reset(): void {\r\n            for (const context of this.contexts.values()) {\r\n                context.reset();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create combined context\r\n     */\r\n    export function createCombinedContext<T extends Record<string, unknown>>(\r\n        initialValues: T\r\n    ): CombinedContext<T> {\r\n        return new CombinedContext(initialValues);\r\n    }\r\n\r\n// \r\n","// src/mod/core/hooks.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { Component }    from './component';\r\n    import type { VNode }   from '../../types';\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    interface HookState {\r\n        value: unknown;\r\n        deps?: unknown[];\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  INIT \r\n\r\n    let currentComponent: Component | null = null;\r\n    let currentHookIndex: number = 0;\r\n    const hookStates = new WeakMap<Component, HookState[]>();\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * Set current component context for hooks\r\n     */\r\n    export function setHookContext(component: Component): void {\r\n        currentComponent = component;\r\n        currentHookIndex = 0;\r\n    }\r\n\r\n    /**\r\n     * Clear hook context\r\n     */\r\n    export function clearHookContext(): void {\r\n        currentComponent = null;\r\n        currentHookIndex = 0;\r\n    }\r\n\r\n    /**\r\n     * Get or create hook states for component\r\n     */\r\n    function getHookStates(component: Component): HookState[] {\r\n        if (!hookStates.has(component)) {\r\n            hookStates.set(component, []);\r\n        }\r\n        return hookStates.get(component)!;\r\n    }\r\n\r\n    //  Core Hooks \r\n\r\n    /**\r\n     * useState hook - manages component state\r\n     */\r\n    export function useState<T>(initialValue: T | (() => T)): [T, (newValue: T | ((prev: T) => T)) => void] {\r\n        if (!currentComponent) {\r\n            throw new Error('useState must be called inside a component');\r\n        }\r\n\r\n        const component = currentComponent;\r\n        const hookIndex = currentHookIndex++;\r\n        const states = getHookStates(component);\r\n\r\n        // Initialize state if first render\r\n        if (states[hookIndex] === undefined) {\r\n            states[hookIndex] = {\r\n                value: typeof initialValue === 'function' ? (initialValue as () => T)() : initialValue\r\n            };\r\n        }\r\n\r\n        const setState = (newValue: T | ((prev: T) => T)) => {\r\n            const state = states[hookIndex];\r\n            const nextValue = typeof newValue === 'function'\r\n                ? (newValue as (prev: T) => T)(state.value as T)\r\n                : newValue;\r\n\r\n            if (state.value !== nextValue) {\r\n                state.value = nextValue;\r\n                component.update();\r\n            }\r\n        };\r\n\r\n        return [states[hookIndex].value as T, setState];\r\n    }\r\n\r\n    /**\r\n     * useEffect hook - side effects\r\n     */\r\n    export function useEffect(\r\n        effect: () => void | (() => void),\r\n        deps?: unknown[]\r\n    ): void {\r\n        if (!currentComponent) {\r\n            throw new Error('useEffect must be called inside a component');\r\n        }\r\n\r\n        const component = currentComponent;\r\n        const hookIndex = currentHookIndex++;\r\n        const states = getHookStates(component);\r\n\r\n        const prevState = states[hookIndex];\r\n        const hasChanged = !prevState || !deps || !areDepsEqual(prevState.deps, deps);\r\n\r\n        if (hasChanged) {\r\n            // Cleanup previous effect\r\n            if (prevState?.value && typeof prevState.value === 'function') {\r\n                try {\r\n                    (prevState.value as () => void)();\r\n                } catch (error) {\r\n                    console.error('Error in effect cleanup:', error);\r\n                }\r\n            }\r\n\r\n            // Run new effect after a microtask (so it runs after render completes)\r\n            Promise.resolve().then(() => {\r\n                try {\r\n                    const cleanup = effect();\r\n\r\n                    // Store cleanup and deps\r\n                    states[hookIndex] = {\r\n                        value: cleanup,\r\n                        deps: deps ? [...deps] : undefined\r\n                    };\r\n                } catch (error) {\r\n                    console.error('Error in effect:', error);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * useMemo hook - memoize expensive computations\r\n     */\r\n    export function useMemo<T>(\r\n        factory: () => T,\r\n        deps: unknown[]\r\n    ): T {\r\n        if (!currentComponent) {\r\n            throw new Error('useMemo must be called inside a component');\r\n        }\r\n\r\n        const hookIndex = currentHookIndex++;\r\n        const states = getHookStates(currentComponent);\r\n\r\n        const prevState = states[hookIndex];\r\n        const hasChanged = !prevState || !areDepsEqual(prevState.deps, deps);\r\n\r\n        if (hasChanged) {\r\n            states[hookIndex] = {\r\n                value: factory(),\r\n                deps: [...deps]\r\n            };\r\n        }\r\n\r\n        return states[hookIndex].value as T;\r\n    }\r\n\r\n    /**\r\n     * useCallback hook - memoize callbacks\r\n     */\r\n    export function useCallback<T extends (...args: unknown[]) => unknown>(\r\n        callback: T,\r\n        deps: unknown[]\r\n    ): T {\r\n        return useMemo(() => callback, deps);\r\n    }\r\n\r\n    /**\r\n     * useRef hook - persistent value across renders\r\n     */\r\n    export function useRef<T>(initialValue: T): { current: T } {\r\n        if (!currentComponent) {\r\n            throw new Error('useRef must be called inside a component');\r\n        }\r\n\r\n        const hookIndex = currentHookIndex++;\r\n        const states = getHookStates(currentComponent);\r\n\r\n        if (states[hookIndex] === undefined) {\r\n            states[hookIndex] = {\r\n                value: { current: initialValue }\r\n            };\r\n        }\r\n\r\n        return states[hookIndex].value as { current: T };\r\n    }\r\n\r\n    /**\r\n     * useReducer hook - complex state management\r\n     */\r\n    export function useReducer<S, A>(\r\n        reducer: (state: S, action: A) => S,\r\n        initialState: S\r\n    ): [S, (action: A) => void] {\r\n        const [state, setState] = useState(initialState);\r\n\r\n        const dispatch = useCallback((action: unknown) => {\r\n            setState(prevState => reducer(prevState, action as A));\r\n        }, [reducer]) as (action: A) => void;\r\n\r\n        return [state, dispatch];\r\n    }\r\n\r\n    //  Custom Hooks \r\n\r\n    /**\r\n     * useLocalStorage hook - sync state with localStorage\r\n     */\r\n    export function useLocalStorage<T>(\r\n        key: string,\r\n        initialValue: T\r\n    ): [T, (value: T | ((prev: T) => T)) => void] {\r\n        // Initialize from localStorage\r\n        const [storedValue, setStoredValue] = useState<T>(() => {\r\n            try {\r\n                const item = window.localStorage.getItem(key);\r\n                return item ? JSON.parse(item) as T : initialValue;\r\n            } catch (error) {\r\n                console.error('Error loading from localStorage:', error);\r\n                return initialValue;\r\n            }\r\n        });\r\n\r\n        // Create setValue wrapper (recreated each render, but that's okay)\r\n        const setValue = (newValue: T | ((prev: T) => T)) => {\r\n            setStoredValue((prevValue: T) => {\r\n                const valueToStore = newValue instanceof Function\r\n                    ? newValue(prevValue)\r\n                    : newValue;\r\n\r\n                // Update localStorage synchronously\r\n                try {\r\n                    window.localStorage.setItem(key, JSON.stringify(valueToStore));\r\n                } catch (error) {\r\n                    console.error('Error saving to localStorage:', error);\r\n                }\r\n\r\n                return valueToStore;\r\n            });\r\n        };\r\n\r\n        return [storedValue, setValue];\r\n    }\r\n\r\n    /**\r\n     * useDebounce hook - debounce value changes\r\n     */\r\n    export function useDebounce<T>(value: T, delay: number): T {\r\n        const [debouncedValue, setDebouncedValue] = useState(value);\r\n\r\n        useEffect(() => {\r\n            // Set up the timeout\r\n            const handler = setTimeout(() => {\r\n                setDebouncedValue(value);\r\n            }, delay);\r\n\r\n            // Cleanup function that clears the timeout\r\n            return () => {\r\n                clearTimeout(handler);\r\n            };\r\n        }, [value, delay]);\r\n\r\n        return debouncedValue;\r\n    }\r\n\r\n    /**\r\n     * usePrevious hook - get previous value\r\n     */\r\n    export function usePrevious<T>(value: T): T | undefined {\r\n        const ref = useRef<T | undefined>(undefined);\r\n\r\n        // Use effect to update the ref after render\r\n        useEffect(() => {\r\n            ref.current = value;\r\n        });\r\n\r\n        // Return the previous value (what ref was BEFORE this render)\r\n        const prevValue = ref.current;\r\n\r\n        return prevValue;\r\n    }\r\n\r\n    /**\r\n     * useToggle hook - boolean toggle\r\n     */\r\n    export function useToggle(initialValue: boolean = false): [boolean, () => void] {\r\n        const [value, setValue] = useState(initialValue);\r\n\r\n        const toggle = useCallback(() => {\r\n            setValue(v => !v);\r\n        }, []);\r\n\r\n        return [value, toggle];\r\n    }\r\n\r\n    /**\r\n     * useInterval hook - setInterval with cleanup\r\n     */\r\n    export function useInterval(callback: () => void, delay: number | null): void {\r\n        const savedCallback = useRef(callback);\r\n\r\n        useEffect(() => {\r\n            savedCallback.current = callback;\r\n        }, [callback]);\r\n\r\n        useEffect(() => {\r\n            if (delay === null) return;\r\n\r\n            const id = setInterval(() => savedCallback.current(), delay);\r\n\r\n            return () => clearInterval(id);\r\n        }, [delay]);\r\n    }\r\n\r\n    /**\r\n     * useFetch hook - data fetching\r\n     */\r\n    export function useFetch<T>(\r\n        url: string,\r\n        options?: RequestInit\r\n    ): {\r\n        data: T | null;\r\n        loading: boolean;\r\n        error: Error | null;\r\n        refetch: () => void;\r\n    } {\r\n        const [data, setData] = useState<T | null>(null);\r\n        const [loading, setLoading] = useState(true);\r\n        const [error, setError] = useState<Error | null>(null);\r\n\r\n        const fetchData = useCallback(async () => {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            try {\r\n                const response = await fetch(url, options);\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP error! status: ${response.status}`);\r\n                }\r\n                const json = await response.json() as T;\r\n                setData(json);\r\n            } catch (e) {\r\n                setError(e as Error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }, [url]);\r\n\r\n        useEffect(() => {\r\n            fetchData();\r\n        }, [fetchData]);\r\n\r\n        return { data, loading, error, refetch: fetchData };\r\n    }\r\n\r\n    /**\r\n     * useWindowSize hook - track window dimensions\r\n     */\r\n    export function useWindowSize(): { width: number; height: number } {\r\n        const [size, setSize] = useState({\r\n            width: window.innerWidth,\r\n            height: window.innerHeight\r\n        });\r\n\r\n        useEffect(() => {\r\n            const handleResize = () => {\r\n                setSize({\r\n                    width: window.innerWidth,\r\n                    height: window.innerHeight\r\n                });\r\n            };\r\n\r\n            window.addEventListener('resize', handleResize);\r\n            return () => window.removeEventListener('resize', handleResize);\r\n        }, []);\r\n\r\n        return size;\r\n    }\r\n\r\n    /**\r\n     * useEventListener hook - add event listener\r\n     */\r\n    export function useEventListener<K extends keyof WindowEventMap>(\r\n        eventName: K,\r\n        handler: (event: WindowEventMap[K]) => void,\r\n        element: HTMLElement | Window = window\r\n    ): void {\r\n        const savedHandler = useRef(handler);\r\n\r\n        useEffect(() => {\r\n            savedHandler.current = handler;\r\n        }, [handler]);\r\n\r\n        useEffect(() => {\r\n            const isSupported = element && 'addEventListener' in element;\r\n            if (!isSupported) return;\r\n\r\n            const eventListener = (event: Event) => {\r\n                savedHandler.current(event as WindowEventMap[K]);\r\n            };\r\n\r\n            element.addEventListener(eventName, eventListener);\r\n\r\n            return () => {\r\n                element.removeEventListener(eventName, eventListener);\r\n            };\r\n        }, [eventName, element]);\r\n    }\r\n\r\n    /**\r\n     * Create a functional component with hooks\r\n     * Returns a component class that can be instantiated\r\n     */\r\n    export function createFunctionalComponent<P extends Record<string, unknown> = Record<string, unknown>>(\r\n        fn: (props: P) => VNode,\r\n        displayName?: string\r\n    ): new (props?: P) => Component<P> {\r\n        class FunctionalComponent extends Component<P> {\r\n            render(): VNode {\r\n                setHookContext(this);\r\n                try {\r\n                    return fn(this.props) as VNode;\r\n                } finally {\r\n                    clearHookContext();\r\n                }\r\n            }\r\n        }\r\n\r\n        if (displayName) {\r\n            Object.defineProperty(FunctionalComponent, 'name', { value: displayName });\r\n        }\r\n\r\n        return FunctionalComponent as new (props?: P) => Component<P>;\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  HELP \r\n\r\n    function areDepsEqual(prevDeps: unknown[] | undefined, nextDeps: unknown[]): boolean {\r\n        if (!prevDeps || prevDeps.length !== nextDeps.length) {\r\n            return false;\r\n        }\r\n\r\n        for (let i = 0; i < prevDeps.length; i++) {\r\n            if (prevDeps[i] !== nextDeps[i]) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n// \r\n","// src/mod/core/router.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import type { Route, RouteConfig, NavigationGuard } from '../../types';\r\n    import type { VNode }                               from '@je-es/vdom';\r\n    import { Component, ComponentConstructor }          from './component';\r\n    import { createElement }                            from '@je-es/vdom';\r\n\r\n    export type { Route, RouteConfig, NavigationGuard };\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    // Type for lazy-loaded module\r\n    interface LazyModule {\r\n        default?        : ComponentConstructor;\r\n        HomePage?       : ComponentConstructor;\r\n        TodoPage?       : ComponentConstructor;\r\n        [key: string]   : unknown;\r\n    }\r\n\r\n// \r\n\r\n\r\n//  CORE \r\n\r\n    export class Router {\r\n        private routes: RouteConfig[] = [];\r\n        private currentRoute: Route | null = null;\r\n        private mode: 'history' | 'hash' = 'history';\r\n        private base: string = '/';\r\n        private beforeEachHooks: NavigationGuard[] = [];\r\n        private afterEachHooks: ((to: Route, from: Route) => void)[] = [];\r\n        private currentComponent: Component | null = null;\r\n        private routerOutlet: HTMLElement | null = null;\r\n        private isNavigating: boolean = false;\r\n        private scrollBehavior: 'auto' | 'smooth' | 'instant' = 'auto';\r\n        private notFoundHandler: (() => void) | null = null;\r\n        private _internalPath: string | null = null;\r\n\r\n        /**\r\n         * Initialize router\r\n         */\r\n        init(\r\n            routes: RouteConfig[],\r\n            mode: 'history' | 'hash' = 'history',\r\n            base: string = '/',\r\n            scrollBehavior: 'auto' | 'smooth' | 'instant' = 'auto'\r\n        ): void {\r\n            this.routes = routes;\r\n            this.mode = mode;\r\n            this.base = base.endsWith('/') ? base.slice(0, -1) : base;\r\n            this.scrollBehavior = scrollBehavior;\r\n\r\n            this._initializeRouting();\r\n            this._handleRoute();\r\n        }\r\n\r\n        /**\r\n         * Navigate to a path\r\n         */\r\n        async push(path: string, state?: Record<string, unknown>): Promise<void> {\r\n            if (this.isNavigating) {\r\n                // console.warn('Navigation already in progress');\r\n                this.isNavigating = false;\r\n                // return;\r\n            }\r\n\r\n            this._internalPath = path;\r\n\r\n            if (this.mode === 'history') {\r\n                window.history.pushState(state || {}, '', this._buildFullPath(path));\r\n            } else {\r\n                window.location.hash = path;\r\n            }\r\n\r\n            await this._handleRoute();\r\n        }\r\n\r\n        /**\r\n         * Replace current route\r\n         */\r\n        async replace(path: string, state?: Record<string, unknown>): Promise<void> {\r\n            this._internalPath = path;\r\n\r\n            if (this.mode === 'history') {\r\n                window.history.replaceState(state || {}, '', this._buildFullPath(path));\r\n            } else {\r\n                window.location.hash = path;\r\n            }\r\n\r\n            return this._handleRoute();\r\n        }\r\n\r\n        back(): void { window.history.back(); }\r\n        forward(): void { window.history.forward(); }\r\n        go(delta: number): void { window.history.go(delta); }\r\n\r\n        /**\r\n         * Navigation guards\r\n         */\r\n        beforeEach(hook: NavigationGuard): void {\r\n            this.beforeEachHooks.push(hook);\r\n        }\r\n\r\n        afterEach(hook: (to: Route, from: Route) => void): void {\r\n            this.afterEachHooks.push(hook);\r\n        }\r\n\r\n        onNotFound(handler: () => void): void {\r\n            this.notFoundHandler = handler;\r\n        }\r\n\r\n        /**\r\n         * Route utilities\r\n         */\r\n        getCurrentRoute(): Route | null {\r\n            return this.currentRoute ? { ...this.currentRoute } : null;\r\n        }\r\n\r\n        isActive(path: string, exact: boolean = false): boolean {\r\n            if (!this.currentRoute) return false;\r\n            return exact\r\n                ? this.currentRoute.path === path\r\n                : this.currentRoute.path.startsWith(path);\r\n        }\r\n\r\n        outlet(): VNode {\r\n            return createElement('div', {\r\n                'data-router-outlet': 'true',\r\n                style: 'display: contents;'\r\n            }) as VNode;\r\n        }\r\n\r\n        getRoute(name: string): RouteConfig | undefined {\r\n            return this.routes.find(r => r.name === name);\r\n        }\r\n\r\n        async pushNamed(name: string, params?: Record<string, string>): Promise<void> {\r\n            const route = this.getRoute(name);\r\n            if (!route) {\r\n                console.error(`Route with name \"${name}\" not found`);\r\n                return;\r\n            }\r\n\r\n            let path = route.path;\r\n            if (params) {\r\n                for (const [key, value] of Object.entries(params)) {\r\n                    path = path.replace(`:${key}`, value);\r\n                }\r\n            }\r\n\r\n            return this.push(path);\r\n        }\r\n\r\n        resolve(path: string): Route | null {\r\n            const matchedRoute = this._matchRoute(path);\r\n            if (!matchedRoute) return null;\r\n\r\n            const { route, params } = matchedRoute;\r\n            return {\r\n                path,\r\n                params,\r\n                query: this._parseQuery(path),\r\n                meta: route.meta || {},\r\n                hash: path.includes('#') ? path.split('#')[1] : '',\r\n                name: route.name,\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Initialize routing handlers\r\n         */\r\n        private _initializeRouting(): void {\r\n            // Handle browser navigation\r\n            window.addEventListener('popstate', () => {\r\n                this._internalPath = null;\r\n                this._handleRoute();\r\n            });\r\n\r\n            if (this.mode === 'hash') {\r\n                window.addEventListener('hashchange', () => {\r\n                    this._internalPath = null;\r\n                    this._handleRoute();\r\n                });\r\n            }\r\n\r\n            // Intercept link clicks\r\n            document.addEventListener('click', (e) => {\r\n                const link = (e.target as HTMLElement).closest('a[href]') as HTMLAnchorElement | null;\r\n\r\n                if (link && this._shouldInterceptLink(link)) {\r\n                    e.preventDefault();\r\n                    const href = link.getAttribute('href');\r\n                    if (href) {\r\n                        const path = this.mode === 'hash' && href.startsWith('#')\r\n                            ? href.substring(1)\r\n                            : href.replace(this.base, '');\r\n                        this.push(path);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        private _shouldInterceptLink(link: HTMLAnchorElement): boolean {\r\n            const href = link.getAttribute('href');\r\n            return !!(\r\n                href &&\r\n                link.hostname === window.location.hostname &&\r\n                link.target !== '_blank' &&\r\n                !link.hasAttribute('download') &&\r\n                link.rel !== 'external'\r\n            );\r\n        }\r\n\r\n        /**\r\n         * Handle route change\r\n         */\r\n        private async _handleRoute(): Promise<void> {\r\n            if (this.isNavigating) return;\r\n\r\n            this.isNavigating = true;\r\n\r\n            try {\r\n                const path = this._getCurrentPath();\r\n                const matchedRoute = this._matchRoute(path);\r\n\r\n                if (!matchedRoute) {\r\n                    this._handleNotFound(path);\r\n                    return;\r\n                }\r\n\r\n                const { route, params } = matchedRoute;\r\n                const to = this._buildRouteObject(path, params, route);\r\n                const from = this.currentRoute || this._buildEmptyRoute();\r\n\r\n                // Run guards\r\n                const canProceed = await this._runNavigationGuards(route, to, from);\r\n                if (!canProceed) return;\r\n\r\n                this.currentRoute = to;\r\n\r\n                await this._renderComponent(route);\r\n                this._handleScrollBehavior(to, from);\r\n\r\n                if (route.meta?.title && typeof route.meta.title === 'string') {\r\n                    document.title = route.meta.title;\r\n                }\r\n\r\n                // Run after hooks\r\n                this.afterEachHooks.forEach(hook => hook(to, from));\r\n\r\n            } catch (error) {\r\n                console.error('Router error:', error);\r\n            } finally {\r\n                this.isNavigating = false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Handle 404 not found\r\n         */\r\n        private _handleNotFound(path: string): void {\r\n            console.warn(`No route matched for path: ${path}`);\r\n\r\n            this.currentRoute = {\r\n                path,\r\n                params: {},\r\n                query: this._parseQuery(),\r\n                meta: {},\r\n                hash: window.location.hash.substring(1),\r\n            };\r\n\r\n            if (this.notFoundHandler) {\r\n                this.notFoundHandler();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Build route object\r\n         */\r\n        private _buildRouteObject(\r\n            path: string,\r\n            params: Record<string, string>,\r\n            route: RouteConfig\r\n        ): Route {\r\n            return {\r\n                path,\r\n                params,\r\n                query: this._parseQuery(),\r\n                meta: route.meta || {},\r\n                hash: window.location.hash.substring(1),\r\n                name: route.name,\r\n            };\r\n        }\r\n\r\n        private _buildEmptyRoute(): Route {\r\n            return {\r\n                path: '',\r\n                params: {},\r\n                query: {},\r\n                meta: {},\r\n                hash: '',\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Run navigation guards\r\n         */\r\n        private async _runNavigationGuards(\r\n            route: RouteConfig,\r\n            to: Route,\r\n            from: Route\r\n        ): Promise<boolean> {\r\n            // Route-specific guard\r\n            if (route.beforeEnter) {\r\n                const result = await this._runGuard(route.beforeEnter, to, from);\r\n                if (!result) return false;\r\n            }\r\n\r\n            // Global guards\r\n            for (const guard of this.beforeEachHooks) {\r\n                const result = await this._runGuard(guard, to, from);\r\n                if (!result) return false;\r\n            }\r\n\r\n            return true;\r\n        }\r\n\r\n        private _runGuard(\r\n            guard: NavigationGuard,\r\n            to: Route,\r\n            from: Route\r\n        ): Promise<boolean> {\r\n            return new Promise((resolve) => {\r\n                guard(to, from, (nextPath?: string | false) => {\r\n                    if (nextPath === false) {\r\n                        resolve(false);\r\n                    } else if (typeof nextPath === 'string') {\r\n                        this.push(nextPath);\r\n                        resolve(false);\r\n                    } else {\r\n                        resolve(true);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Render component - simplified component resolution\r\n         */\r\n        private async _renderComponent(route: RouteConfig): Promise<void> {\r\n            // Get or find outlet\r\n            if (!this.routerOutlet) {\r\n                this.routerOutlet = document.querySelector('[data-router-outlet=\"true\"]') as HTMLElement;\r\n                if (!this.routerOutlet) {\r\n                    console.warn('Router outlet not found');\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // Unmount previous component\r\n            if (this.currentComponent) {\r\n                this.currentComponent.unmount();\r\n                this.currentComponent = null;\r\n            }\r\n\r\n            // Clear outlet\r\n            this.routerOutlet.innerHTML = '';\r\n\r\n            try {\r\n                const ComponentClass = await this._resolveComponent(route.component);\r\n\r\n                if (!ComponentClass || typeof ComponentClass !== 'function') {\r\n                    throw new Error('Component is null or not a constructor');\r\n                }\r\n\r\n                const ComponentCtor = ComponentClass as new () => Component;\r\n                // console.log(' Mounting:', ComponentCtor.name || 'Component');\r\n                this.currentComponent = new ComponentCtor();\r\n\r\n                if (this.currentComponent) {\r\n                    await this.currentComponent.mount(this.routerOutlet);\r\n                    // console.log(' Mounted successfully!');\r\n                }\r\n\r\n            } catch (error) {\r\n                this._renderError(route.path, error);\r\n                throw error;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Resolve component (handle lazy loading)\r\n         */\r\n        private async _resolveComponent(\r\n            component: ComponentConstructor | (() => Promise<LazyModule>)\r\n        ): Promise<ComponentConstructor | null> {\r\n            // console.log(' Resolving component...');\r\n\r\n            // Check if it's a class constructor\r\n            if (typeof component === 'function') {\r\n                // Try to determine if it's a class vs a loader function\r\n                const hasPrototype = 'prototype' in component && component.prototype;\r\n                const proto = hasPrototype ? (component as { prototype: unknown }).prototype : null;\r\n                const hasConstructor = proto && typeof proto === 'object' && 'constructor' in proto;\r\n\r\n                if (hasConstructor && (proto as { constructor: unknown }).constructor === component) {\r\n                    // console.log(' Direct component class');\r\n                    return component as ComponentConstructor;\r\n                }\r\n\r\n                // Otherwise treat as lazy loader\r\n                // console.log(' Lazy loading...');\r\n                try {\r\n                    const result = await (component as () => Promise<LazyModule>)();\r\n                    // console.log(' Module keys:', Object.keys(result));\r\n\r\n                    // Find component in module\r\n                    const found = result.HomePage ||\r\n                        result.TodoPage ||\r\n                        result.default ||\r\n                        Object.values(result).find((exp: unknown): exp is ComponentConstructor => {\r\n                            if (typeof exp !== 'function') return false;\r\n                            // Type guard: check if it's a constructor function\r\n                            const possibleCtor = exp as { prototype?: unknown };\r\n                            const proto = possibleCtor.prototype;\r\n                            return proto !== null && typeof proto === 'object' && proto !== undefined && 'constructor' in proto;\r\n                        });\r\n\r\n                    return found || null;\r\n                } catch (error) {\r\n                    console.error('Failed to load lazy component:', error);\r\n                    return null;\r\n                }\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        /**\r\n         * Render error fallback\r\n         */\r\n        private _renderError(path: string, error: unknown): void {\r\n            if (this.routerOutlet) {\r\n                const errorMessage = error instanceof Error ? error.message : String(error);\r\n                this.routerOutlet.innerHTML = `\r\n                    <div style=\"padding: 2rem; background: #fee; border: 2px solid #c00;\r\n                                border-radius: 8px; margin: 2rem;\">\r\n                        <h2 style=\"color: #c00; margin-top: 0;\"> Failed to Load Component</h2>\r\n                        <p><strong>Route:</strong> ${path}</p>\r\n                        <p><strong>Error:</strong> ${errorMessage}</p>\r\n                    </div>\r\n                `;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Handle scroll behavior\r\n         */\r\n        private _handleScrollBehavior(to: Route, from: Route): void {\r\n            if (to.hash) {\r\n                const element = document.getElementById(to.hash);\r\n                if (element) {\r\n                    element.scrollIntoView({ behavior: this.scrollBehavior });\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (to.path !== from.path) {\r\n                window.scrollTo({ top: 0, behavior: this.scrollBehavior });\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get current path (handles test environments)\r\n         */\r\n        private _getCurrentPath(): string {\r\n            if (this._internalPath !== null) {\r\n                return this._internalPath;\r\n            }\r\n\r\n            if (this.mode === 'hash') {\r\n                return window.location.hash.substring(1).split('?')[0] || '/';\r\n            }\r\n\r\n            let path = window.location.pathname;\r\n\r\n            // Handle test environments\r\n            if (!path || path === 'blank' || path === 'about:blank') {\r\n                path = '/';\r\n            }\r\n\r\n            if (this.base && path.startsWith(this.base)) {\r\n                path = path.substring(this.base.length);\r\n            }\r\n\r\n            return path || '/';\r\n        }\r\n\r\n        private _buildFullPath(path: string): string {\r\n            if (path.startsWith('http')) return path;\r\n            const normalizedPath = path.startsWith('/') ? path : '/' + path;\r\n            return this.base + normalizedPath;\r\n        }\r\n\r\n        /**\r\n         * Match route pattern to path\r\n         */\r\n        private _matchRoute(path: string): { route: RouteConfig; params: Record<string, string> } | null {\r\n            const cleanPath = path.split('?')[0].split('#')[0];\r\n\r\n            for (const route of this.routes) {\r\n                const params = this._matchPath(route.path, cleanPath);\r\n                if (params !== null) {\r\n                    return { route, params };\r\n                }\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        private _matchPath(pattern: string, path: string): Record<string, string> | null {\r\n            if (pattern === '*') return {};\r\n            if (pattern === path) return {};\r\n\r\n            const paramNames: string[] = [];\r\n            const regexPattern = pattern\r\n                .replace(/\\*/g, '.*')\r\n                .replace(/:([^/]+)/g, (_, paramName: string) => {\r\n                    paramNames.push(paramName);\r\n                    return '([^/]+)';\r\n                });\r\n\r\n            const regex = new RegExp(`^${regexPattern}$`);\r\n            const match = path.match(regex);\r\n\r\n            if (!match) return null;\r\n\r\n            return paramNames.reduce((params, name, i) => {\r\n                params[name] = decodeURIComponent(match[i + 1]);\r\n                return params;\r\n            }, {} as Record<string, string>);\r\n        }\r\n\r\n        /**\r\n         * Parse query string\r\n         */\r\n        private _parseQuery(path?: string): Record<string, string> {\r\n            const search = path\r\n                ? path.includes('?') ? path.split('?')[1].split('#')[0] : ''\r\n                : window.location.search.substring(1);\r\n\r\n            if (!search) return {};\r\n\r\n            return search.split('&').reduce((query, pair) => {\r\n                const [key, value] = pair.split('=').map(decodeURIComponent);\r\n                if (key) query[key] = value || '';\r\n                return query;\r\n            }, {} as Record<string, string>);\r\n        }\r\n    }\r\n\r\n    export const router = new Router();\r\n\r\n// \r\n\r\n\r\n//  HELP \r\n\r\n    /**\r\n     * Navigate to a new route\r\n     */\r\n    export function navigate(path: string, replace: boolean = false): void {\r\n        console.log(`Navigating to ${path}`);\r\n        if (replace) {\r\n            router.replace(path);\r\n        } else {\r\n            router.push(path);\r\n        }\r\n\r\n        // Dispatch custom event for components listening to navigation\r\n        window.dispatchEvent(new CustomEvent('navigation', {\r\n            detail: { path }\r\n        }));\r\n    }\r\n\r\n    /**\r\n     * Navigate back in history\r\n     */\r\n    export function goBack(): void {\r\n        router.back();\r\n    }\r\n\r\n    /**\r\n     * Navigate forward in history\r\n     */\r\n    export function goForward(): void {\r\n        window.history.forward();\r\n    }\r\n\r\n    /**\r\n     * Get current path\r\n     */\r\n    export function getCurrentPath(): string {\r\n        return window.location.pathname;\r\n    }\r\n\r\n    /**\r\n     * Check if current path matches\r\n     */\r\n    export function isCurrentPath(path: string): boolean {\r\n        return getCurrentPath() === path;\r\n    }\r\n\r\n    /**\r\n     * Check if current path starts with\r\n     */\r\n    export function isCurrentPathPrefix(prefix: string): boolean {\r\n        return getCurrentPath().startsWith(prefix);\r\n    }\r\n\r\n    /**\r\n     * Reload current route\r\n     */\r\n    export function reloadRoute(): void {\r\n        const currentPath = getCurrentPath();\r\n        navigate(currentPath, true);\r\n    }\r\n\r\n    /**\r\n     * Navigate with query params\r\n     */\r\n    export function navigateWithQuery(path: string, params: Record<string, string>): void {\r\n        const query = new URLSearchParams(params).toString();\r\n        navigate(`${path}?${query}`);\r\n    }\r\n\r\n    /**\r\n     * Get query parameters\r\n     */\r\n    export function getQueryParams(): URLSearchParams {\r\n        return new URLSearchParams(window.location.search);\r\n    }\r\n\r\n    /**\r\n     * Get single query parameter\r\n     */\r\n    export function getQueryParam(key: string): string | null {\r\n        return getQueryParams().get(key);\r\n    }\r\n\r\n// \r\n","// src/mod/core/store.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { StoreOptions, StoreSubscriber } from '../../types';\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * Store - Global state management with improved features\r\n     */\r\n    export class Store<T extends Record<string, unknown> = Record<string, unknown>> {\r\n        private _state: T;\r\n        private _subscribers = new Set<StoreSubscriber<T>>();\r\n        private _persist: boolean;\r\n        private _storage: Storage | null = null;\r\n        private _storageKey: string;\r\n        private _middleware: ((state: T, action?: string) => void)[] = [];\r\n        private _isHydrating: boolean = false;\r\n\r\n        constructor(options: StoreOptions<T>) {\r\n            this._persist = options.persist ?? false;\r\n            this._storageKey = options.storageKey || `store_${Date.now()}`;\r\n\r\n            // Initialize storage\r\n            if (this._persist && typeof window !== 'undefined') {\r\n                this._storage = options.storage === 'sessionStorage'\r\n                    ? sessionStorage\r\n                    : localStorage;\r\n            }\r\n\r\n            // Load from storage if persisted\r\n            if (this._persist && this._storage) {\r\n                const stored = this._loadFromStorage();\r\n                this._state = stored !== null ? stored : options.state;\r\n            } else {\r\n                this._state = options.state;\r\n            }\r\n\r\n            // Apply initial middleware\r\n            if (options.middleware) {\r\n                this._middleware = options.middleware;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get current state (readonly)\r\n         */\r\n        get state(): Readonly<T> {\r\n            return { ...this._state };\r\n        }\r\n\r\n        /**\r\n         * Set entire state (replaces state)\r\n         */\r\n        set state(newState: T) {\r\n            this.setState(newState);\r\n        }\r\n\r\n        /**\r\n         * Update state (merges with existing state)\r\n         */\r\n        setState(update: Partial<T> | ((prevState: T) => Partial<T>), action?: string): void {\r\n            const prevState = { ...this._state };\r\n\r\n            const partialState = typeof update === 'function'\r\n                ? update(prevState)\r\n                : update;\r\n\r\n            this._state = { ...prevState, ...partialState };\r\n\r\n            // Apply middleware\r\n            for (const middleware of this._middleware) {\r\n                try {\r\n                    middleware(this._state, action);\r\n                } catch (error) {\r\n                    console.error('Store middleware error:', error);\r\n                }\r\n            }\r\n\r\n            // Persist to storage\r\n            if (this._persist && !this._isHydrating) {\r\n                this._saveToStorage();\r\n            }\r\n\r\n            // Notify subscribers\r\n            this._notify();\r\n        }\r\n\r\n        /**\r\n         * Get a specific value from state\r\n         */\r\n        get<K extends keyof T>(key: K): T[K] {\r\n            return this._state[key];\r\n        }\r\n\r\n        /**\r\n         * Set a specific value in state\r\n         */\r\n        set<K extends keyof T>(key: K, value: T[K], action?: string): void {\r\n            this.setState({ [key]: value } as unknown as Partial<T>, action);\r\n        }\r\n\r\n        /**\r\n         * Subscribe to state changes\r\n         * Returns unsubscribe function\r\n         */\r\n        subscribe(listener: StoreSubscriber<T>): () => void {\r\n            this._subscribers.add(listener);\r\n\r\n            // Immediately call listener with current state\r\n            listener(this._state);\r\n\r\n            // Return unsubscribe function\r\n            return () => {\r\n                this._subscribers.delete(listener);\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Subscribe to specific key changes\r\n         */\r\n        subscribeToKey<K extends keyof T>(\r\n            key: K,\r\n            listener: (value: T[K]) => void\r\n        ): () => void {\r\n            let prevValue = this._state[key];\r\n\r\n            const subscriber = (state: T) => {\r\n                const newValue = state[key];\r\n                if (prevValue !== newValue) {\r\n                    prevValue = newValue;\r\n                    listener(newValue);\r\n                }\r\n            };\r\n\r\n            return this.subscribe(subscriber);\r\n        }\r\n\r\n        /**\r\n         * Add middleware\r\n         */\r\n        use(middleware: (state: T, action?: string) => void): void {\r\n            this._middleware.push(middleware);\r\n        }\r\n\r\n        /**\r\n         * Clear all state\r\n         */\r\n        clear(): void {\r\n            this._state = {} as T;\r\n\r\n            if (this._persist && this._storage) {\r\n                try {\r\n                    this._storage.removeItem(this._storageKey);\r\n                } catch (error) {\r\n                    console.error('Failed to clear storage:', error);\r\n                }\r\n            }\r\n\r\n            this._notify();\r\n        }\r\n\r\n        /**\r\n         * Reset state to initial value\r\n         */\r\n        reset(initialState: T): void {\r\n            this._state = { ...initialState };\r\n\r\n            if (this._persist) {\r\n                this._saveToStorage();\r\n            }\r\n\r\n            this._notify();\r\n        }\r\n\r\n        /**\r\n         * Hydrate state from storage\r\n         */\r\n        hydrate(): void {\r\n            if (!this._persist || !this._storage) {\r\n                console.warn('Cannot hydrate: persistence not enabled');\r\n                return;\r\n            }\r\n\r\n            this._isHydrating = true;\r\n            const stored = this._loadFromStorage();\r\n\r\n            if (stored !== null) {\r\n                this._state = stored;\r\n                this._notify();\r\n            }\r\n\r\n            this._isHydrating = false;\r\n        }\r\n\r\n        /**\r\n         * Get store snapshot for debugging\r\n         */\r\n        getSnapshot(): { state: T; subscribers: number; storageKey: string } {\r\n            return {\r\n                state: { ...this._state },\r\n                subscribers: this._subscribers.size,\r\n                storageKey: this._storageKey,\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Batch multiple updates\r\n         */\r\n        batch(updates: () => void): void {\r\n            const prevNotify = this._notify.bind(this);\r\n            let shouldNotify = false;\r\n\r\n            // Temporarily override notify\r\n            this._notify = () => {\r\n                shouldNotify = true;\r\n            };\r\n\r\n            try {\r\n                updates();\r\n            } finally {\r\n                this._notify = prevNotify;\r\n                if (shouldNotify) {\r\n                    this._notify();\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Notify all subscribers\r\n         */\r\n        private _notify(): void {\r\n            const stateCopy = { ...this._state };\r\n\r\n            for (const subscriber of this._subscribers) {\r\n                try {\r\n                    subscriber(stateCopy);\r\n                } catch (error) {\r\n                    console.error('Store subscriber error:', error);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Load state from storage\r\n         */\r\n        private _loadFromStorage(): T | null {\r\n            if (!this._storage) return null;\r\n\r\n            try {\r\n                const stored = this._storage.getItem(this._storageKey);\r\n                return stored ? JSON.parse(stored) as T : null;\r\n            } catch (error) {\r\n                console.error('Failed to load from storage:', error);\r\n                return null;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Save state to storage\r\n         */\r\n        private _saveToStorage(): void {\r\n            if (!this._storage) return;\r\n\r\n            try {\r\n                this._storage.setItem(this._storageKey, JSON.stringify(this._state));\r\n            } catch (error) {\r\n                console.error('Failed to save to storage:', error);\r\n\r\n                // Handle quota exceeded\r\n                if (error instanceof DOMException && error.name === 'QuotaExceededError') {\r\n                    console.warn('Storage quota exceeded');\r\n                    // Could implement cleanup strategy here\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Destroy store and cleanup\r\n         */\r\n        destroy(): void {\r\n            this._subscribers.clear();\r\n            this._middleware = [];\r\n            this._state = {} as T;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create a store with type inference\r\n     */\r\n    export function createStore<T extends Record<string, unknown>>(\r\n        options: StoreOptions<T>\r\n    ): Store<T> {\r\n        return new Store(options);\r\n    }\r\n\r\n    /**\r\n     * Create a computed store that derives from other stores\r\n     */\r\n    export function createComputedStore<T, S extends Store<Record<string, unknown>>[]>(\r\n        stores: S,\r\n        computer: (...states: unknown[]) => T\r\n    ): Store<{ value: T }> {\r\n        const computedStore = createStore<{ value: T }>({\r\n            state: { value: computer(...stores.map(s => s.state)) },\r\n        });\r\n\r\n        // Subscribe to all source stores\r\n        for (const store of stores) {\r\n            store.subscribe(() => {\r\n                computedStore.setState({\r\n                    value: computer(...stores.map(s => s.state)),\r\n                });\r\n            });\r\n        }\r\n\r\n        return computedStore;\r\n    }\r\n\r\n    /**\r\n     * Connect a component to a store\r\n     */\r\n    export function connect<T extends Record<string, unknown>, C extends { update?: () => void }>(\r\n        store: Store<T>,\r\n        component: C,\r\n        mapStateToProps: (state: T) => Partial<C>\r\n    ): () => void {\r\n        const unsubscribe = store.subscribe((state) => {\r\n            const props = mapStateToProps(state);\r\n            Object.assign(component, props);\r\n\r\n            // Trigger update if component has update method\r\n            if (typeof component.update === 'function') {\r\n                component.update();\r\n            }\r\n        });\r\n\r\n        return unsubscribe;\r\n    }\r\n\r\n// ","// src/mod/services/i18n.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  CORE \r\n\r\n    import type { TranslationSet, LanguageCode, I18nConfig } from '../../types';\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    class I18nManager {\r\n        //  INIT \r\n\r\n        private translations: TranslationSet = {};\r\n        private currentLanguage: LanguageCode = 'en';\r\n        private defaultLanguage: LanguageCode = 'en';\r\n        private supportedLanguages = new Set<LanguageCode>(['en']);\r\n        private cachePath: string = '';\r\n\r\n        constructor(config?: I18nConfig) {\r\n            if (config) {\r\n                this.defaultLanguage = config.defaultLanguage || 'en';\r\n                this.currentLanguage = this.getStoredLanguage() || config.defaultLanguage || 'en';\r\n                this.cachePath = config.staticPath || 'static/i18n';\r\n                if (config.supportedLanguages) {\r\n                    this.supportedLanguages = new Set(config.supportedLanguages);\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n\r\n        //  MAIN \r\n\r\n        /**\r\n         * Load translations for a specific language\r\n         * @param lang Language code (e.g., 'en', 'ar', 'fr')\r\n         * @param translations Translation object\r\n         */\r\n        public loadLanguage(lang: LanguageCode, translations: Record<string, string>): void {\r\n            if (!this.translations[lang]) {\r\n                this.translations[lang] = {};\r\n            }\r\n            this.translations[lang] = { ...this.translations[lang], ...translations };\r\n            this.supportedLanguages.add(lang);\r\n        }\r\n\r\n        /**\r\n         * Load all translations from static files\r\n         * @param translations Object with language codes as keys and translation objects as values\r\n         */\r\n        public loadTranslations(translations: TranslationSet): void {\r\n            Object.entries(translations).forEach(([lang, trans]) => {\r\n                this.loadLanguage(lang, trans);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Set the current language\r\n         * @param lang Language code\r\n         */\r\n        public setLanguage(lang: LanguageCode): void {\r\n            if (this.supportedLanguages.has(lang)) {\r\n                this.currentLanguage = lang;\r\n                this.storeLanguage(lang);\r\n                this.dispatchLanguageChangeEvent();\r\n            } else if (this.supportedLanguages.has(this.defaultLanguage)) {\r\n                this.currentLanguage = this.defaultLanguage;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get the current language\r\n         */\r\n        public getLanguage(): LanguageCode {\r\n            return this.currentLanguage;\r\n        }\r\n\r\n        /**\r\n         * Get all supported languages\r\n         */\r\n        public getSupportedLanguages(): LanguageCode[] {\r\n            return Array.from(this.supportedLanguages);\r\n        }\r\n\r\n        /**\r\n         * Translate a key with smart parameter replacement\r\n         * Supports nested translation keys as parameter values\r\n         *\r\n         * @example\r\n         * // Simple translation\r\n         * t('hello') // => \"Hello\" or \"\" depending on current language\r\n         *\r\n         * @example\r\n         * // With parameters\r\n         * t('welcome', { app_name: 'MyApp' })\r\n         * // => \"Welcome to MyApp\"\r\n         *\r\n         * @example\r\n         * // With nested translation keys as parameters\r\n         * t('greeting', { salutation: 'hello' })\r\n         * // => \"Say Hello to everyone\"\r\n         *\r\n         * @param key Translation key\r\n         * @param params Optional parameters for replacement\r\n         * @returns Translated string with replaced parameters\r\n         */\r\n        public t(key: string, params?: Record<string, string>): string {\r\n            const lang = this.currentLanguage;\r\n\r\n            // Try current language, then default language, then return key itself\r\n            let translation =\r\n                this.translations[lang]?.[key] ||\r\n                this.translations[this.defaultLanguage]?.[key] ||\r\n                key;\r\n\r\n            // Replace parameters if provided\r\n            if (params) {\r\n                Object.entries(params).forEach(([param, value]) => {\r\n                    // Check if the parameter value is a translation key\r\n                    const paramValue =\r\n                        this.translations[lang]?.[value] ||\r\n                        this.translations[this.defaultLanguage]?.[value] ||\r\n                        value;\r\n\r\n                    translation = translation.replace(\r\n                        new RegExp(`\\\\{${param}\\\\}`, 'g'),\r\n                        paramValue\r\n                    );\r\n                });\r\n            }\r\n\r\n            return translation;\r\n        }\r\n\r\n        /**\r\n         * Translate with a specific language (overrides current language temporarily)\r\n         *\r\n         * @param key Translation key\r\n         * @param lang Language code\r\n         * @param params Optional parameters\r\n         * @returns Translated string\r\n         */\r\n        public tLang(key: string, lang: LanguageCode, params?: Record<string, string>): string {\r\n            const currentLang = this.currentLanguage;\r\n            this.currentLanguage = lang;\r\n            const result = this.t(key, params);\r\n            this.currentLanguage = currentLang;\r\n            return result;\r\n        }\r\n\r\n        /**\r\n         * Get all translations for current language\r\n         */\r\n        public getTranslations(): Record<string, string> {\r\n            return this.translations[this.currentLanguage] || {};\r\n        }\r\n\r\n        /**\r\n         * Check if a translation key exists\r\n         * @param key Translation key\r\n         * @returns true if key exists in current or default language\r\n         */\r\n        public hasKey(key: string): boolean {\r\n            return !!(\r\n                this.translations[this.currentLanguage]?.[key] ||\r\n                this.translations[this.defaultLanguage]?.[key]\r\n            );\r\n        }\r\n\r\n        /**\r\n         * Create a reactive translation function that listens to language changes\r\n         * @param updateCallback Callback function to execute when language changes\r\n         * @returns Function to unsubscribe from language changes\r\n         */\r\n        public createTranslator(updateCallback: () => void): () => void {\r\n            const handler = () => updateCallback();\r\n            if (typeof window !== 'undefined') {\r\n                window.addEventListener('languagechange', handler);\r\n                return () => window.removeEventListener('languagechange', handler);\r\n            }\r\n            return () => {};\r\n        }\r\n\r\n        /**\r\n         * Load translations from URL(s)\r\n         * Supports patterns like '/static/i18n/*.json' or specific URLs\r\n         *\r\n         * @example\r\n         * // Load from a pattern\r\n         * await loadFromUrl('/static/i18n/*.json');\r\n         *\r\n         * @example\r\n         * // Load specific language files\r\n         * await loadFromUrl(['/static/i18n/en.json', '/static/i18n/ar.json']);\r\n         *\r\n         * @param urlPattern String pattern or array of URLs\r\n         * @returns Promise that resolves when all translations are loaded\r\n         */\r\n        public async loadFromUrl(urlPattern: string | string[]): Promise<void> {\r\n            const urls = Array.isArray(urlPattern) ? urlPattern : [urlPattern];\r\n            const translations: TranslationSet = {};\r\n\r\n            for (const url of urls) {\r\n                if (url.includes('*')) {\r\n                    // Handle pattern-based URLs\r\n                    const pattern = url.replace('*.json', '');\r\n                    const langCodes = this.supportedLanguages;\r\n\r\n                    for (const lang of langCodes) {\r\n                        try {\r\n                            const response = await fetch(`${pattern}${lang}.json`);\r\n                            if (response.ok) {\r\n                                const data = await response.json();\r\n                                translations[lang] = data;\r\n                            }\r\n                        } catch (error) {\r\n                            console.warn(`Failed to load translations from ${pattern}${lang}.json:`, error);\r\n                        }\r\n                    }\r\n                } else {\r\n                    // Handle specific URLs - extract language code from filename\r\n                    try {\r\n                        const response = await fetch(url);\r\n                        if (response.ok) {\r\n                            const data = await response.json();\r\n                            // Extract language code from URL (e.g., '/static/i18n/en.json' -> 'en')\r\n                            const langMatch = url.match(/([a-z]{2,3})\\.json$/i);\r\n                            const lang = langMatch ? langMatch[1].toLowerCase() : 'en';\r\n                            translations[lang] = data;\r\n                            this.supportedLanguages.add(lang);\r\n                        }\r\n                    } catch (error) {\r\n                        console.warn(`Failed to load translations from ${url}:`, error);\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (Object.keys(translations).length > 0) {\r\n                this.loadTranslations(translations);\r\n            }\r\n        }\r\n\r\n        // \r\n\r\n        //  HELPERS \r\n\r\n        /**\r\n         * Get language from localStorage\r\n         */\r\n        private getStoredLanguage(): LanguageCode | null {\r\n            if (typeof localStorage !== 'undefined') {\r\n                return (localStorage.getItem('app-language') as LanguageCode) || null;\r\n            }\r\n            return null;\r\n        }\r\n\r\n        /**\r\n         * Store language in localStorage\r\n         */\r\n        private storeLanguage(lang: LanguageCode): void {\r\n            if (typeof localStorage !== 'undefined') {\r\n                localStorage.setItem('app-language', lang);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Dispatch language change event\r\n         */\r\n        private dispatchLanguageChangeEvent(): void {\r\n            if (typeof window !== 'undefined') {\r\n                window.dispatchEvent(new CustomEvent('languagechange', { detail: { language: this.currentLanguage } }));\r\n            }\r\n        }\r\n\r\n        // \r\n    }\r\n\r\n    // Singleton instance\r\n    let i18nInstance: I18nManager | null = null;\r\n\r\n    /**\r\n     * Initialize the i18n manager\r\n     * @param config I18n configuration\r\n     * @returns I18nManager instance\r\n     */\r\n    export function initI18n(config?: I18nConfig): I18nManager {\r\n        if (!i18nInstance) {\r\n            i18nInstance = new I18nManager(config);\r\n        }\r\n        return i18nInstance;\r\n    }\r\n\r\n    /**\r\n     * Get the global i18n instance\r\n     */\r\n    export function getI18n(): I18nManager {\r\n        if (!i18nInstance) {\r\n            i18nInstance = new I18nManager();\r\n        }\r\n        return i18nInstance;\r\n    }\r\n\r\n    export { I18nManager };\r\n\r\n    export type { TranslationSet, LanguageCode, I18nConfig };\r\n\r\n// \r\n\r\n\r\n\r\n//  HELP \r\n\r\n    /**\r\n     * Global translation function\r\n     * @param key Translation key\r\n     * @param params Optional parameters\r\n     * @returns Translated string\r\n     */\r\n    export function t(key: string, params?: Record<string, string>): string {\r\n        return getI18n().t(key, params);\r\n    }\r\n\r\n    /**\r\n     * Translate with a specific language (overrides current language temporarily)\r\n     * @param key Translation key\r\n     * @param lang Language code\r\n     * @param params Optional parameters\r\n     * @returns Translated string\r\n     */\r\n    export function tLang(key: string, lang: string, params?: Record<string, string>): string {\r\n        return getI18n().tLang(key, lang, params);\r\n    }\r\n\r\n    /**\r\n     * Set the current language globally\r\n     * @param lang Language code\r\n     */\r\n    export function setLanguage(lang: string): void {\r\n        getI18n().setLanguage(lang);\r\n    }\r\n\r\n    /**\r\n     * Get the current language\r\n     */\r\n    export function getCurrentLanguage(): string {\r\n        return getI18n().getLanguage();\r\n    }\r\n\r\n    /**\r\n     * Load translations for a specific language\r\n     * @param lang Language code\r\n     * @param translations Translation object\r\n     */\r\n    export function loadLanguage(lang: string, translations: Record<string, string>): void {\r\n        getI18n().loadLanguage(lang, translations);\r\n    }\r\n\r\n    /**\r\n     * Load all translations\r\n     * @param translations The translations object\r\n     */\r\n    export function loadTranslations(translations: Record<string, Record<string, string>>): void {\r\n        getI18n().loadTranslations(translations);\r\n    }\r\n\r\n    /**\r\n     * Get all supported languages\r\n     */\r\n    export function getSupportedLanguages(): string[] {\r\n        return getI18n().getSupportedLanguages();\r\n    }\r\n\r\n    /**\r\n     * Check if a translation key exists\r\n     * @param key The translation key to check\r\n     * @returns Whether the key exists\r\n     */\r\n    export function hasKey(key: string): boolean {\r\n        return getI18n().hasKey(key);\r\n    }\r\n\r\n    /**\r\n     * Get all translations for current language\r\n     */\r\n    export function getTranslations(): Record<string, string> {\r\n        return getI18n().getTranslations();\r\n    }\r\n\r\n    /**\r\n     * Create a reactive translation function that listens to language changes\r\n     * @param updateCallback Callback function to execute when language changes\r\n     * @returns Function to unsubscribe from language changes\r\n     */\r\n    export function createTranslator(updateCallback: () => void): () => void {\r\n        return getI18n().createTranslator(updateCallback);\r\n    }\r\n\r\n    /**\r\n     * Load translations from URL(s)\r\n     * Supports patterns like '/static/i18n/*.json' or specific URLs\r\n     *\r\n     * @example\r\n     * // Load from a pattern\r\n     * await loadFromUrl('/static/i18n/*.json');\r\n     *\r\n     * @example\r\n     * // Load specific language files\r\n     * await loadFromUrl(['/static/i18n/en.json', '/static/i18n/ar.json']);\r\n     *\r\n     * @param urlPattern String pattern or array of URLs\r\n     * @returns Promise that resolves when all translations are loaded\r\n     */\r\n    export async function loadFromUrl(urlPattern: string | string[]): Promise<void> {\r\n        return getI18n().loadFromUrl(urlPattern);\r\n    }\r\n\r\n    /**\r\n     * Initialize the i18n manager with config\r\n     * @param config I18n configuration\r\n     */\r\n    export function initializeI18n(config?: Record<string, unknown>): I18nManager {\r\n        return initI18n(config);\r\n    }\r\n\r\n// \r\n","// src/mod/core/client.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import type { ClientConfig }                    from '../../types';\r\n    import type { ApiConfig as CapiConfigType }     from '@je-es/capi';\r\n    import { router }                               from './router';\r\n    import { configureApi }                         from '@je-es/capi';\r\n    import { initializeI18n }                       from '../services/i18n';\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    export type { ClientConfig };\r\n\r\n    // Bun build types\r\n    interface BunBuildOptions {\r\n        entrypoints: string[];\r\n        outdir: string;\r\n        target: string;\r\n        minify?: boolean;\r\n        sourcemap?: 'none' | 'external' | 'inline';\r\n        splitting?: boolean;\r\n        naming?: { entry?: string };\r\n        external?: string[];\r\n    }\r\n\r\n    interface BunBuildResult {\r\n        success: boolean;\r\n        logs: {\r\n            message: string;\r\n            level: 'error' | 'warning' | 'info';\r\n        }[];\r\n    }\r\n\r\n    declare const Bun: {\r\n        build(options: BunBuildOptions): Promise<BunBuildResult>;\r\n    };\r\n\r\n    // Window type extension for dev tools\r\n    declare global {\r\n        interface Window {\r\n            __JEES_DEV__?: {\r\n                router: typeof router;\r\n                config: ClientConfig;\r\n                version: string;\r\n            };\r\n        }\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * Client builder\r\n     * Handles build process and runtime configuration\r\n     */\r\n    export function client(config: ClientConfig) {\r\n        // Store configuration\r\n        const _config = config;\r\n\r\n        return {\r\n            /**\r\n             * Build the client application\r\n             * This compiles TypeScript components to vanilla JavaScript\r\n             */\r\n            async build(): Promise<void> {\r\n                if (!_config.build) {\r\n                    console.warn('No build configuration provided');\r\n                    return;\r\n                }\r\n\r\n                console.log(' Building @je-es/client application...');\r\n\r\n                try {\r\n                    // Build JavaScript\r\n                    await this._buildJS();\r\n\r\n                    // Build SCSS/CSS\r\n                    await this._buildStyles();\r\n\r\n                    console.log(' Build completed successfully!');\r\n\r\n                } catch (error) {\r\n                    console.error(' Build error:', error);\r\n                    throw error;\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Build JavaScript bundle\r\n             */\r\n            async _buildJS(): Promise<void> {\r\n                if (!_config.build) return;\r\n\r\n                const result = await Bun.build({\r\n                    entrypoints     : [_config.build.entry],\r\n                    outdir          : _config.build.output.substring(0, _config.build.output.lastIndexOf('/')),\r\n                    target          : 'browser',\r\n                    minify          : _config.build.minify ?? false,\r\n                    sourcemap       : _config.build.sourcemap ? 'external' : 'none',\r\n                    splitting       : _config.build.optimization?.splitChunks ?? false,\r\n                    naming          : {\r\n                        entry       : _config.build.output.substring(_config.build.output.lastIndexOf('/') + 1),\r\n                    },\r\n                    // Exclude server-side packages from browser bundle\r\n                    external        : [\r\n                        'sass',\r\n                        'fs',\r\n                        'path',\r\n                        'url',\r\n                        'util',\r\n                        'stream',\r\n                        'buffer',\r\n                        'events',\r\n                        'crypto',\r\n                        'os',\r\n                        'child_process',\r\n                    ],\r\n                });\r\n\r\n                if (!result.success) {\r\n                    console.error(' JS Build failed:', result.logs);\r\n                    throw new Error('JS Build failed');\r\n                }\r\n\r\n                // console.log(' JavaScript bundled');\r\n            },\r\n\r\n            /**\r\n             * Build SCSS/CSS styles\r\n             */\r\n            async _buildStyles(): Promise<void> {\r\n                const stylesDir = _config.build?.styles?.input || './app/gui/style';\r\n                const outputPath = _config.build?.styles?.output || './static/client.css';\r\n\r\n                // Dynamically import server-side modules only when building\r\n                const sass = await import('sass');\r\n                const { writeFileSync, existsSync, mkdirSync } = await import('fs');\r\n                const { join, dirname } = await import('path');\r\n\r\n                const outputDir = dirname(outputPath);\r\n                const outputFile = outputPath.split('/').pop() || 'client.css';\r\n\r\n                // Main SCSS entry file\r\n                const mainScssFile = join(stylesDir, 'index.scss');\r\n\r\n                // Check if main entry file exists\r\n                if (!existsSync(mainScssFile)) {\r\n                    console.log('  No index.scss found, skipping CSS build');\r\n                    return;\r\n                }\r\n\r\n                try {\r\n                    // Ensure output directory exists\r\n                    if (!existsSync(outputDir)) {\r\n                        mkdirSync(outputDir, { recursive: true });\r\n                    }\r\n\r\n                    // Compile the main SCSS file (it will automatically include all @use imports)\r\n                    const result = sass.compile(mainScssFile, {\r\n                        style: _config.build?.minify ? 'compressed' : 'expanded',\r\n                        sourceMap: _config.build?.sourcemap ? true : false,\r\n                        loadPaths: [stylesDir], // Allow SCSS to resolve @use paths\r\n                    });\r\n\r\n                    // Write compiled CSS\r\n                    const fullOutputPath = join(outputDir, outputFile);\r\n                    writeFileSync(fullOutputPath, result.css, 'utf-8');\r\n\r\n                    // console.log(` Styles compiled to ${fullOutputPath}`);\r\n\r\n                    // Write source map if enabled\r\n                    if (_config.build?.sourcemap && result.sourceMap) {\r\n                        writeFileSync(\r\n                            `${fullOutputPath}.map`,\r\n                            JSON.stringify(result.sourceMap),\r\n                            'utf-8'\r\n                        );\r\n                    }\r\n\r\n                } catch (error) {\r\n                    console.error(' CSS Build failed:', error);\r\n                    throw error;\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Recursively collect all SCSS files (excluding .sass)\r\n             */\r\n            async _collectScssFiles(dir: string): Promise<string[]> {\r\n                const { readdirSync, statSync, existsSync } = await import('fs');\r\n                const { join, extname } = await import('path');\r\n\r\n                const files: string[] = [];\r\n\r\n                if (!existsSync(dir)) {\r\n                    return files;\r\n                }\r\n\r\n                const entries = readdirSync(dir);\r\n\r\n                for (const entry of entries) {\r\n                    const fullPath = join(dir, entry);\r\n                    const stat = statSync(fullPath);\r\n\r\n                    if (stat.isDirectory()) {\r\n                        // Recursively scan subdirectories\r\n                        files.push(...await this._collectScssFiles(fullPath));\r\n                    } else if (stat.isFile()) {\r\n                        const ext = extname(entry);\r\n                        // Only include .scss files, skip partials (starting with _)\r\n                        if (ext === '.scss' && !entry.startsWith('_')) {\r\n                            files.push(fullPath);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Sort files to ensure consistent order\r\n                return files.sort();\r\n            },\r\n\r\n            /**\r\n             * Watch mode for development\r\n             */\r\n            async watch(): Promise<void> {\r\n                console.log(' Watching for changes...');\r\n\r\n                // Initial build\r\n                await this.build();\r\n\r\n                // Watch for file changes\r\n                const { watch } = await import('fs');\r\n                const { dirname } = await import('path');\r\n                const { existsSync } = await import('fs');\r\n\r\n                // Watch TypeScript files\r\n                if (_config.build?.entry) {\r\n                    const entryDir = dirname(_config.build.entry);\r\n                    watch(entryDir, { recursive: true }, async (eventType, filename) => {\r\n                        if (filename && (filename.endsWith('.ts') || filename.endsWith('.tsx'))) {\r\n                            console.log(` ${filename} changed, rebuilding JS...`);\r\n                            try {\r\n                                await this._buildJS();\r\n                                console.log(' JS rebuild complete');\r\n                            } catch (error) {\r\n                                console.error(' JS rebuild failed:', error);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n\r\n                // Watch SCSS files\r\n                const stylesDir = './app/style';\r\n                if (existsSync(stylesDir)) {\r\n                    watch(stylesDir, { recursive: true }, async (eventType, filename) => {\r\n                        if (filename && filename.endsWith('.scss')) {\r\n                            console.log(` ${filename} changed, rebuilding CSS...`);\r\n                            try {\r\n                                await this._buildStyles();\r\n                                console.log(' CSS rebuild complete');\r\n                            } catch (error) {\r\n                                console.error(' CSS rebuild failed:', error);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Initialize the client runtime\r\n             * This runs in the browser\r\n             */\r\n            init(): void {\r\n                // console.log(' Initializing @je-es/client...');\r\n\r\n                // Configure i18n\r\n                if (_config.i18n) {\r\n                    initializeI18n({\r\n                        defaultLanguage: _config.i18n.defaultLanguage,\r\n                        supportedLanguages: _config.i18n.supportedLanguages,\r\n                        staticPath: _config.i18n.staticPath\r\n                    });\r\n                }\r\n\r\n                // Configure API client\r\n                if (_config.api) {\r\n                    // Build the capi-compatible config\r\n                    const capiConfig: Partial<CapiConfigType> = {\r\n                        baseURL: _config.api.baseURL,\r\n                        timeout: _config.api.timeout,\r\n                        headers: _config.api.headers,\r\n                    };\r\n\r\n                    // Add interceptors if they exist\r\n                    if (_config.api.interceptors) {\r\n                        capiConfig.interceptors = {\r\n                            request: _config.api.interceptors.request || null,\r\n                            response: _config.api.interceptors.response || null,\r\n                            error: _config.api.interceptors.error || null,\r\n                        };\r\n                    }\r\n\r\n                    configureApi(capiConfig);\r\n                }\r\n\r\n                // Configure router\r\n                if (_config.router && _config.app?.routes) {\r\n                    router.init(\r\n                        _config.app.routes,\r\n                        _config.router.mode,\r\n                        _config.router.base\r\n                    );\r\n\r\n                    if (_config.router.beforeEach) {\r\n                        router.beforeEach(_config.router.beforeEach);\r\n                    }\r\n\r\n                    if (_config.router.afterEach) {\r\n                        router.afterEach(_config.router.afterEach);\r\n                    }\r\n                }\r\n\r\n                // Mount root component\r\n                if (_config.app?.root) {\r\n                    const rootElement = document.querySelector(_config.app.root);\r\n                    if (rootElement) {\r\n                        // console.log(' Client initialized successfully!');\r\n                    } else {\r\n                        console.error(` Root element \"${_config.app.root}\" not found`);\r\n                    }\r\n                }\r\n\r\n                // Enable dev tools\r\n                if (_config.devTools?.enabled) {\r\n                    this._enableDevTools();\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Enable development tools\r\n             */\r\n            _enableDevTools(): void {\r\n                // console.log(' Dev tools enabled');\r\n\r\n                // Add dev tools to window\r\n                window.__JEES_DEV__ = {\r\n                    router,\r\n                    config: _config,\r\n                    version: '0.0.1',\r\n                };\r\n\r\n                // // Log router changes\r\n                // if (_config.devTools?.showRouterInfo) {\r\n                //     router.afterEach((to: Route, from: Route) => {\r\n                //         console.log(' Route changed:', {\r\n                //             from: from.path,\r\n                //             to: to.path,\r\n                //             params: to.params,\r\n                //             query: to.query,\r\n                //         });\r\n                //     });\r\n                // }\r\n            },\r\n\r\n            /**\r\n             * Get configuration\r\n             */\r\n            getConfig(): ClientConfig {\r\n                return _config;\r\n            },\r\n        };\r\n    }\r\n\r\n// ","// src/mod/components/toast.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { createElement, html } from \"@je-es/vdom\";\r\n    import { Component } from \"../core/component\";\r\n    import { state } from \"../core/decorators\";\r\n    import { t } from \"../services/i18n\";\r\n\r\n// \r\n\r\n\r\n\r\n//  INIT \r\n\r\n    export type ToastType = 'success' | 'error' | 'info' | 'warning';\r\n\r\n    export interface ToastMessage {\r\n        id: number;\r\n        message: string;\r\n        type: ToastType;\r\n        translateKey?: string;\r\n    }\r\n\r\n    // Blah Blah Style Map\r\n    const bb_ = {\r\n        toast: 'bb_toast',\r\n        container: 'bb_toastContainer',\r\n        icon: 'bb_toastIcon',\r\n        msg: 'bb_toastMsg'\r\n    };\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class Toast extends Component {\r\n\r\n        //  INIT \r\n\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state messages: ToastMessage[] = [];\r\n\r\n            private nextId = 0;\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            /**\r\n             * Show a toast notification\r\n             */\r\n            show(message: string, type: ToastType = 'info', duration: number = 2000, translateKey?: string) {\r\n                const id = this.nextId++;\r\n\r\n                this.messages = [...this.messages, { id, message, type, translateKey }];\r\n\r\n                setTimeout(() => {\r\n                    this.messages = this.messages.filter(m => m.id !== id);\r\n                }, duration);\r\n            }\r\n\r\n            /**\r\n             * Convenience methods\r\n             */\r\n            success(message: string, duration?: number, translateKey?: string) {\r\n                this.show(message, 'success', duration, translateKey);\r\n            }\r\n\r\n            error(message: string, duration?: number, translateKey?: string) {\r\n                this.show(message, 'error', duration, translateKey);\r\n            }\r\n\r\n            info(message: string, duration?: number, translateKey?: string) {\r\n                this.show(message, 'info', duration, translateKey);\r\n            }\r\n\r\n            warning(message: string, duration?: number, translateKey?: string) {\r\n                this.show(message, 'warning', duration, translateKey);\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   UI  \r\n\r\n            render() {\r\n                if (this.messages.length === 0) return html``;\r\n\r\n                return createElement('div', {\r\n                    className: bb_.container\r\n                },\r\n                    ...this.messages.map(msg => this.renderToast(msg))\r\n                );\r\n            }\r\n\r\n            renderToast(msg: ToastMessage) {\r\n                const icons = {\r\n                    success: 'fas fa-check-circle',\r\n                    error: 'fas fa-exclamation-circle',\r\n                    info: 'fas fa-info-circle',\r\n                    warning: 'fas fa-exclamation-triangle'\r\n                };\r\n\r\n                const displayMessage = msg.translateKey ? t(msg.translateKey) : msg.message;\r\n\r\n                return createElement('div', {\r\n                    key: String(msg.id),\r\n                    className: `${bb_.toast} ${bb_.toast}--${msg.type}`,\r\n                    'data-translate': msg.translateKey || undefined\r\n                },\r\n                    createElement('i', {\r\n                        className: `${icons[msg.type]} ${bb_.icon}`\r\n                    }),\r\n                    createElement('span', {\r\n                        className: bb_.msg\r\n                    }, displayMessage)\r\n                );\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  GLOBAL \r\n\r\n    let globalToast: Toast | null = null;\r\n\r\n    export function initToast(container?: HTMLElement): Toast {\r\n        if (globalToast) return globalToast;\r\n\r\n        const toastContainer = container || document.createElement('div');\r\n        if (!container) {\r\n            document.body.appendChild(toastContainer);\r\n        }\r\n\r\n        globalToast = new Toast();\r\n        globalToast.mount(toastContainer);\r\n\r\n        return globalToast;\r\n    }\r\n\r\n    export function getToast(): Toast {\r\n        if (!globalToast) {\r\n            globalToast = initToast();\r\n        }\r\n        return globalToast;\r\n    }\r\n\r\n    // Convenience exports\r\n    export const toast = {\r\n        show: (message: string, type: ToastType = 'info', duration?: number, translateKey?: string) => {\r\n            getToast().show(message, type, duration, translateKey);\r\n        },\r\n        success: (message: string, duration?: number, translateKey?: string) => {\r\n            getToast().success(message, duration, translateKey);\r\n        },\r\n        error: (message: string, duration?: number, translateKey?: string) => {\r\n            getToast().error(message, duration, translateKey);\r\n        },\r\n        info: (message: string, duration?: number, translateKey?: string) => {\r\n            getToast().info(message, duration, translateKey);\r\n        },\r\n        warning: (message: string, duration?: number, translateKey?: string) => {\r\n            getToast().warning(message, duration, translateKey);\r\n        }\r\n    };\r\n\r\n// ","// src/mod/components/loader.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { createElement } from \"@je-es/vdom\";\r\n    import { Component } from \"../core/component\";\r\n    import { state } from \"../core/decorators\";\r\n    import { t } from \"../services/i18n\";\r\n\r\n// \r\n\r\n\r\n\r\n//  INIT \r\n\r\n    export type LoaderSize = 'small' | 'medium' | 'large';\r\n    export type LoaderVariant = 'spinner' | 'dots' | 'pulse';\r\n\r\n    export interface LoaderOptions {\r\n        message?: string;\r\n        variant?: LoaderVariant;\r\n        size?: LoaderSize;\r\n        overlay?: boolean;\r\n    }\r\n\r\n    // Blah Blah Style Map\r\n    const bb_ = {\r\n        loader: {\r\n            container: 'bb_loaderContainer',\r\n            containerOverlay: 'bb_loaderContainer--overlay',\r\n            bg: 'bb_loaderBg',\r\n            loader: 'bb_loader',\r\n        },\r\n\r\n        spinner: {\r\n            container: 'bb_loaderSpinnerContainer',\r\n            icon: 'bb_loaderSpinnerIcon',\r\n            dot: 'bb_loaderSpinnerDot',\r\n            pulse: 'bb_loaderSpinnerPulse',\r\n            text: 'bb_loaderSpinnerText',\r\n        },\r\n\r\n        progress: {\r\n            container: 'bb_loaderProgressContainer',\r\n            bar: 'bb_loaderProgressBar',\r\n            text: 'bb_loaderProgressText',\r\n        }\r\n    };\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class Loader extends Component {\r\n\r\n        //  INIT \r\n\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state visible          = false;\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state message          = '';\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state variant          : LoaderVariant = 'spinner';\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state size             : LoaderSize = 'medium';\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state overlay          = true;\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state progress         = 0;\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state showProgress     = false;\r\n\r\n            private animationFrame  : number | null = null;\r\n            private hideTimeout     : number | null = null;\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            async onMount() {\r\n                this.setupKeyboardListener();\r\n                this.initializeAccessibility();\r\n\r\n                window.addEventListener('languagechange', () => {\r\n                    if (!this.message) {\r\n                        this.update();\r\n                    }\r\n                });\r\n            }\r\n\r\n            onUnmount() {\r\n                if (this.animationFrame) {\r\n                    cancelAnimationFrame(this.animationFrame);\r\n                }\r\n                if (this.hideTimeout) {\r\n                    clearTimeout(this.hideTimeout);\r\n                }\r\n                document.removeEventListener('keydown', this.handleKeyPress);\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   UI  \r\n\r\n            render() {\r\n                const containerClasses = [\r\n                    bb_.loader.container,\r\n                    this.overlay ? `${bb_.loader.containerOverlay}` : '',\r\n                    `${bb_.loader.container}--${this.size}`\r\n                ].filter(Boolean).join(' ');\r\n\r\n                return createElement('div', {\r\n                    className: containerClasses,\r\n                    'data-status': this.visible ? 'visible' : 'hidden',\r\n                    role: 'status',\r\n                    'aria-live': 'polite',\r\n                    'aria-busy': 'true',\r\n                },\r\n                    // bg for blur\r\n                    createElement('div', { className: bb_.loader.bg }),\r\n\r\n                    createElement('div', { className: bb_.loader.loader },\r\n                        this.renderSpinner(),\r\n                        this.renderMessage(),\r\n                        this.showProgress ? this.renderProgressBar() : null\r\n                    )\r\n                );\r\n            }\r\n\r\n            renderSpinner() {\r\n                const spinnerClass = `${bb_.spinner.container} ${bb_.spinner.container}--${this.variant}`;\r\n\r\n                switch (this.variant) {\r\n                    case 'dots':\r\n                        return createElement('div', { className: spinnerClass },\r\n                            createElement('div', { className: bb_.spinner.dot }),\r\n                            createElement('div', { className: bb_.spinner.dot }),\r\n                            createElement('div', { className: bb_.spinner.dot })\r\n                        );\r\n\r\n                    case 'pulse':\r\n                        return createElement('div', { className: spinnerClass },\r\n                            createElement('div', { className: bb_.spinner.pulse })\r\n                        );\r\n\r\n                    case 'spinner':\r\n                    default:\r\n                        return createElement('div', { className: spinnerClass },\r\n                            createElement('div', { className: bb_.spinner.icon })\r\n                        );\r\n                }\r\n            }\r\n\r\n            renderMessage() {\r\n                const text = this.message || t('global.loading');\r\n\r\n                return createElement('div', {\r\n                    className: bb_.spinner.text,\r\n                    'data-translate': this.message ? undefined : 'global.loading'\r\n                }, text);\r\n            }\r\n\r\n            renderProgressBar() {\r\n                return createElement('div', { className: bb_.progress.container },\r\n                    createElement('div', {\r\n                        className: bb_.progress.bar,\r\n                        style: `width: ${this.progress}%`,\r\n                        'aria-valuenow': this.progress.toString(),\r\n                        'aria-valuemin': '0',\r\n                        'aria-valuemax': '100'\r\n                    }),\r\n                    createElement('div', { className: bb_.progress.text },\r\n                        `${Math.round(this.progress)}%`\r\n                    )\r\n                );\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  CTRL \r\n\r\n            show(options?: LoaderOptions | string) {\r\n                if (typeof options === 'string') {\r\n                    this.message = options;\r\n                } else if (options) {\r\n                    this.message = options.message || '';\r\n                    this.variant = options.variant || 'spinner';\r\n                    this.size = options.size || 'medium';\r\n                    this.overlay = options.overlay !== undefined ? options.overlay : true;\r\n                }\r\n\r\n                this.visible = true;\r\n                this.progress = 0;\r\n                this.showProgress = false;\r\n\r\n                this.applyBodyLock();\r\n                this.update();\r\n            }\r\n\r\n            hide(delay: number = 0) {\r\n                if (this.hideTimeout) {\r\n                    clearTimeout(this.hideTimeout);\r\n                }\r\n\r\n                if (delay > 0) {\r\n                    this.hideTimeout = window.setTimeout(() => {\r\n                        this.performHide();\r\n                    }, delay);\r\n                } else {\r\n                    this.performHide();\r\n                }\r\n            }\r\n\r\n            setMessage(message: string) {\r\n                this.message = message;\r\n                this.update();\r\n            }\r\n\r\n            setProgress(progress: number) {\r\n                this.showProgress = true;\r\n                this.progress = Math.max(0, Math.min(100, progress));\r\n                this.update();\r\n            }\r\n\r\n            updateProgress(increment: number) {\r\n                this.setProgress(this.progress + increment);\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  HELP \r\n\r\n            private performHide() {\r\n                this.visible = false;\r\n                this.message = '';\r\n                this.progress = 0;\r\n                this.showProgress = false;\r\n\r\n                this.removeBodyLock();\r\n                this.update();\r\n            }\r\n\r\n            private applyBodyLock() {\r\n                if (this.overlay) {\r\n                    document.body.style.overflow = 'hidden';\r\n                }\r\n            }\r\n\r\n            private removeBodyLock() {\r\n                document.body.style.overflow = '';\r\n            }\r\n\r\n            private setupKeyboardListener() {\r\n                this.handleKeyPress = this.handleKeyPress.bind(this);\r\n                document.addEventListener('keydown', this.handleKeyPress);\r\n            }\r\n\r\n            private handleKeyPress = (e: KeyboardEvent) => {\r\n                if (e.key === 'Escape' && this.visible && !this.overlay) {\r\n                    this.hide();\r\n                }\r\n            };\r\n\r\n            private initializeAccessibility() {\r\n                const container = this.element?.querySelector(`.${bb_.spinner.container}`);\r\n                if (container) {\r\n                    container.setAttribute('aria-label', t('loading'));\r\n                }\r\n            }\r\n\r\n            isVisible(): boolean {\r\n                return this.visible;\r\n            }\r\n\r\n            getStatus(): { visible: boolean; message: string; progress: number } {\r\n                return {\r\n                    visible: this.visible,\r\n                    message: this.message,\r\n                    progress: this.progress\r\n                };\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// ","// src/mod/components/smart_form.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { Component } from '../core/component';\r\n    import { html } from '@je-es/vdom';\r\n    import type { FormFieldOption, VNode } from '../../types';\r\n    import { css } from '../core/styles';\r\n    import { state } from '../core/decorators';\r\n    import { api } from '@je-es/capi';\r\n    import type { FormFieldConfig, ValidationRule } from '../../types';\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    export type { FormFieldConfig, ValidationRule };\r\n\r\n    export interface FormConfig {\r\n        fields: FormFieldConfig[];\r\n        endpoint?: string;\r\n        method?: 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE';\r\n        onSubmit?: (data: Record<string, unknown>, event: Event) => void | Promise<void>;\r\n        onSuccess?: (data: unknown) => void;\r\n        onError?: (error: unknown) => void;\r\n        onValidationError?: (errors: Record<string, string>) => void;\r\n        submitButton?: {\r\n            label?: string;\r\n            loadingLabel?: string;\r\n            className?: string;\r\n        };\r\n        className?: string;\r\n        autoValidate?: boolean;\r\n    }\r\n\r\n    export interface FormField extends FormFieldConfig {\r\n        error?: string;\r\n        touched?: boolean;\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * SmartForm Component\r\n     * Auto-validation, CSRF protection, API submission\r\n     */\r\n    export class SmartFormComponent extends Component<FormConfig> {\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state fields: FormField[] = [];\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state formData: Record<string, unknown> = {};\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state isSubmitting = false;\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state submitError = '';\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state submitSuccess = false;\r\n\r\n        constructor(props: FormConfig) {\r\n            super(props);\r\n\r\n            // Initialize fields immediately in constructor\r\n            this.fields = this.props.fields.map((field: FormFieldConfig) => ({\r\n                ...field,\r\n                error: undefined,\r\n                touched: false,\r\n            })) as FormField[];\r\n\r\n            // Initialize form data\r\n            for (const field of this.fields) {\r\n                this.formData[field.name] = field.value || '';\r\n            }\r\n        }\r\n\r\n        onMount(): void {\r\n            // console.log(' SmartForm mounted with', this.fields.length, 'fields');\r\n        }\r\n\r\n        /**\r\n         * Handle field change\r\n         */\r\n        handleChange(fieldName: string, value: unknown): void {\r\n            this.formData[fieldName] = value;\r\n\r\n            // Auto-validate if enabled\r\n            const field = this.fields.find(f => f.name === fieldName);\r\n            if (field && this.props.autoValidate) {\r\n                field.error = this.validateField(field, value);\r\n                field.touched = true;\r\n            }\r\n\r\n            this.update();\r\n        }\r\n\r\n        /**\r\n         * Handle field blur\r\n         */\r\n        handleBlur(fieldName: string): void {\r\n            const field = this.fields.find(f => f.name === fieldName);\r\n            if (field) {\r\n                field.touched = true;\r\n                field.error = this.validateField(field, this.formData[fieldName]);\r\n                this.update();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Validate single field\r\n         */\r\n        validateField(field: FormField, value: unknown): string | undefined {\r\n            const validation = field.validation;\r\n            if (!validation) return undefined;\r\n\r\n            // Required\r\n            if (validation.required && !value) {\r\n                return validation.message || `${field.label || field.name} is required`;\r\n            }\r\n\r\n            if (!value) return undefined;\r\n\r\n            // Convert to string for string validations\r\n            const stringValue = String(value);\r\n\r\n            // Min length\r\n            if (validation.minLength && stringValue.length < validation.minLength) {\r\n                return validation.message || `Minimum ${validation.minLength} characters required`;\r\n            }\r\n\r\n            // Max length\r\n            if (validation.maxLength && stringValue.length > validation.maxLength) {\r\n                return validation.message || `Maximum ${validation.maxLength} characters allowed`;\r\n            }\r\n\r\n            // Min value\r\n            if (validation.min !== undefined && Number(value) < validation.min) {\r\n                return validation.message || `Minimum value is ${validation.min}`;\r\n            }\r\n\r\n            // Max value\r\n            if (validation.max !== undefined && Number(value) > validation.max) {\r\n                return validation.message || `Maximum value is ${validation.max}`;\r\n            }\r\n\r\n            // Pattern\r\n            if (validation.pattern && !validation.pattern.test(stringValue)) {\r\n                return validation.message || 'Invalid format';\r\n            }\r\n\r\n            // Email\r\n            if (validation.email && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(stringValue)) {\r\n                return validation.message || 'Invalid email address';\r\n            }\r\n\r\n            // URL\r\n            if (validation.url && !/^https?:\\/\\/.+/.test(stringValue)) {\r\n                return validation.message || 'Invalid URL';\r\n            }\r\n\r\n            // Custom validation\r\n            if (validation.custom) {\r\n                const result = validation.custom(value);\r\n                if (result !== true) {\r\n                    return typeof result === 'string' ? result : 'Validation failed';\r\n                }\r\n            }\r\n\r\n            return undefined;\r\n        }\r\n\r\n        /**\r\n         * Validate all fields\r\n         */\r\n        validateForm(): boolean {\r\n            let isValid = true;\r\n            const errors: Record<string, string> = {};\r\n\r\n            for (const field of this.fields) {\r\n                const error = this.validateField(field, this.formData[field.name]);\r\n                field.error = error;\r\n                field.touched = true;\r\n\r\n                if (error) {\r\n                    isValid = false;\r\n                    errors[field.name] = error;\r\n                }\r\n            }\r\n\r\n            this.update();\r\n\r\n            // Call validation error callback\r\n            if (!isValid && this.props.onValidationError) {\r\n                this.props.onValidationError(errors);\r\n            }\r\n\r\n            return isValid;\r\n        }\r\n\r\n        /**\r\n         * Handle form submission\r\n         */\r\n        async handleSubmit(event: Event): Promise<void> {\r\n            event.preventDefault();\r\n\r\n            // Validate form\r\n            if (!this.validateForm()) {\r\n                // Focus first error field\r\n                const firstErrorField = this.fields.find(f => f.error);\r\n                if (firstErrorField) {\r\n                    const element = document.querySelector(`[name=\"${firstErrorField.name}\"]`) as HTMLElement;\r\n                    element?.focus();\r\n                }\r\n                return;\r\n            }\r\n\r\n            this.isSubmitting = true;\r\n            this.submitError = '';\r\n            this.submitSuccess = false;\r\n            this.update();\r\n\r\n            try {\r\n                // Custom submit handler\r\n                if (this.props.onSubmit) {\r\n                    await this.props.onSubmit(this.formData, event);\r\n                }\r\n                // API submission\r\n                else if (this.props.endpoint) {\r\n                    const response = await api({\r\n                        method: this.props.method || 'POST',\r\n                        url: this.props.endpoint,\r\n                        data: this.formData,\r\n                    });\r\n\r\n                    this.submitSuccess = true;\r\n\r\n                    if (this.props.onSuccess) {\r\n                        this.props.onSuccess(response.data);\r\n                    }\r\n                }\r\n\r\n            } catch (error: unknown) {\r\n                const errorMessage = error instanceof Error ? error.message : 'Submission failed';\r\n                this.submitError = errorMessage;\r\n\r\n                if (this.props.onError) {\r\n                    this.props.onError(error);\r\n                }\r\n            } finally {\r\n                this.isSubmitting = false;\r\n                this.update();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Render label with optional icon\r\n         */\r\n        renderLabel(field: FormField): VNode | string {\r\n            if (!field.label && !field.icon) return '';\r\n\r\n            if (field.icon) {\r\n                return html`\r\n                    <label for=${field.name}>\r\n                        <i class=\"fa ${field.icon}\"></i>\r\n                        ${field.label ? html`<span>${field.label}</span>` : ''}\r\n                    </label>\r\n                ` as VNode;\r\n            }\r\n\r\n            return html`<label for=${field.name}>${field.label}</label>` as VNode;\r\n        }\r\n\r\n        /**\r\n         * Render form field\r\n         */\r\n        renderField(field: FormField): VNode {\r\n            const value = this.formData[field.name] || '';\r\n            const labelNode = this.renderLabel(field);\r\n\r\n            switch (field.type) {\r\n                case 'textarea': {\r\n                    return html`\r\n                        <div class=\"form-field ${field.className || ''}\">\r\n                            ${labelNode}\r\n                            <textarea\r\n                                id=${field.name}\r\n                                name=${field.name}\r\n                                placeholder=${field.placeholder || ''}\r\n                                value=${String(value)}\r\n                                disabled=${String(field.disabled || this.isSubmitting)}\r\n                                oninput=${(e: Event) => {\r\n                                    const target = e.target as HTMLTextAreaElement;\r\n                                    this.handleChange(field.name, target.value);\r\n                                }}\r\n                                onblur=${() => this.handleBlur(field.name)}\r\n                            ></textarea>\r\n                            ${field.error && field.touched ? html`\r\n                                <span class=\"field-error\">${field.error}</span>\r\n                            ` : ''}\r\n                        </div>\r\n                    ` as VNode;\r\n                }\r\n\r\n                case 'select': {\r\n                    const options = field.options || [];\r\n                    const optionNodes = options.map((opt: FormFieldOption) => html`\r\n                        <option value=${String(opt.value)}>${opt.label}</option>\r\n                    `);\r\n\r\n                    return html`\r\n                        <div class=\"form-field ${field.className || ''}\">\r\n                            ${labelNode}\r\n                            <select\r\n                                id=${field.name}\r\n                                name=${field.name}\r\n                                value=${String(value)}\r\n                                disabled=${String(field.disabled || this.isSubmitting)}\r\n                                onchange=${(e: Event) => {\r\n                                    const target = e.target as HTMLSelectElement;\r\n                                    this.handleChange(field.name, target.value);\r\n                                }}\r\n                                onblur=${() => this.handleBlur(field.name)}\r\n                            >\r\n                                <option value=\"\">Select...</option>\r\n                                ${optionNodes}\r\n                            </select>\r\n                            ${field.error && field.touched ? html`\r\n                                <span class=\"field-error\">${field.error}</span>\r\n                            ` : ''}\r\n                        </div>\r\n                    ` as VNode;\r\n                }\r\n\r\n                case 'checkbox': {\r\n                    return html`\r\n                        <div class=\"form-field form-field-checkbox ${field.className || ''}\">\r\n                            <label>\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    id=${field.name}\r\n                                    name=${field.name}\r\n                                    checked=${String(value)}\r\n                                    disabled=${String(field.disabled || this.isSubmitting)}\r\n                                    onchange=${(e: Event) => {\r\n                                        const target = e.target as HTMLInputElement;\r\n                                        this.handleChange(field.name, target.checked);\r\n                                    }}\r\n                                />\r\n                                ${field.icon ? html`<i class=\"fa ${field.icon}\"></i>` : ''}\r\n                                ${field.label || ''}\r\n                            </label>\r\n                            ${field.error && field.touched ? html`\r\n                                <span class=\"field-error\">${field.error}</span>\r\n                            ` : ''}\r\n                        </div>\r\n                    ` as VNode;\r\n                }\r\n\r\n                default: {\r\n                    return html`\r\n                        <div class=\"form-field ${field.className || ''}\">\r\n                            ${labelNode}\r\n                            <input\r\n                                type=\"${field.type || 'text'}\"\r\n                                id=\"${field.name}\"\r\n                                name=\"${field.name}\"\r\n                                placeholder=\"${field.placeholder || ''}\"\r\n                                value=\"${String(value)}\"\r\n                                disabled=\"${field.disabled || this.isSubmitting}\"\r\n                                oninput=${(e: Event) => {\r\n                                    const target = e.target as HTMLInputElement;\r\n                                    this.handleChange(field.name, target.value);\r\n                                }}\r\n                                onblur=${() => this.handleBlur(field.name)}\r\n                            />\r\n                            ${field.error && field.touched ? html`\r\n                                <span class=\"field-error\">${field.error}</span>\r\n                            ` : ''}\r\n                        </div>\r\n                    ` as VNode;\r\n                }\r\n            }\r\n        }\r\n\r\n        render(): VNode {\r\n            const submitButton = this.props.submitButton || {};\r\n\r\n            // Render all fields into an array first\r\n            const fieldNodes = this.fields.map((field: FormField) => this.renderField(field));\r\n\r\n            return html`\r\n                <form\r\n                    class=\"smart_form ${this.props.className || ''}\"\r\n                    onsubmit=${(e: Event) => this.handleSubmit(e)}\r\n                >\r\n                    ${this.submitError ? html`\r\n                        <div class=\"alert alert-error\">${this.submitError}</div>\r\n                    ` : ''}\r\n\r\n                    ${this.submitSuccess ? html`\r\n                        <div class=\"alert alert-success\">Submitted successfully!</div>\r\n                    ` : ''}\r\n\r\n                    ${fieldNodes}\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        class=\"submit-button ${submitButton.className || ''}\"\r\n                        disabled=${String(this.isSubmitting)}\r\n                    >\r\n                        ${this.isSubmitting\r\n                            ? (submitButton.loadingLabel || 'Submitting...')\r\n                            : (submitButton.label || 'Submit')\r\n                        }\r\n                    </button>\r\n                </form>\r\n            ` as VNode;\r\n        }\r\n\r\n        styles(): string {\r\n            return css`\r\n                .smart_form {\r\n                    max-width: 100%;\r\n                }\r\n                .form-field {\r\n                    margin-bottom: 1rem;\r\n                }\r\n                .form-field label {\r\n                    display: flex;\r\n                    align-items: center;\r\n                    gap: 0.5rem;\r\n                    margin-bottom: 0.5rem;\r\n                    font-weight: 500;\r\n                }\r\n                .form-field label i {\r\n                    color: #6b7280;\r\n                }\r\n                .form-field input,\r\n                .form-field textarea,\r\n                .form-field select {\r\n                    width: 100%;\r\n                    padding: 0.5rem;\r\n                    border: 1px solid #d1d5db;\r\n                    border-radius: 0.375rem;\r\n                    font-size: 1rem;\r\n                }\r\n                .form-field input:focus,\r\n                .form-field textarea:focus,\r\n                .form-field select:focus {\r\n                    outline: none;\r\n                    border-color: #3b82f6;\r\n                    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\r\n                }\r\n                .form-field-checkbox label {\r\n                    display: flex;\r\n                    align-items: center;\r\n                    gap: 0.5rem;\r\n                }\r\n                .form-field-checkbox input[type=\"checkbox\"] {\r\n                    width: auto;\r\n                }\r\n                .field-error {\r\n                    display: block;\r\n                    color: #dc2626;\r\n                    font-size: 0.875rem;\r\n                    margin-top: 0.25rem;\r\n                }\r\n                .submit-button {\r\n                    width: 100%;\r\n                    padding: 0.75rem 1rem;\r\n                    background: #3b82f6;\r\n                    color: white;\r\n                    border: none;\r\n                    border-radius: 0.375rem;\r\n                    font-size: 1rem;\r\n                    font-weight: 500;\r\n                    cursor: pointer;\r\n                    transition: background 0.2s;\r\n                }\r\n                .submit-button:hover:not(:disabled) {\r\n                    background: #2563eb;\r\n                }\r\n                .submit-button:disabled {\r\n                    opacity: 0.6;\r\n                    cursor: not-allowed;\r\n                }\r\n                .alert {\r\n                    padding: 0.75rem;\r\n                    border-radius: 0.375rem;\r\n                    margin-bottom: 1rem;\r\n                }\r\n                .alert-error {\r\n                    background: #fee2e2;\r\n                    color: #dc2626;\r\n                }\r\n                .alert-success {\r\n                    background: #d1fae5;\r\n                    color: #065f46;\r\n                }\r\n            `;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * SmartForm helper function\r\n     */\r\n    export function SmartForm(config: FormConfig): VNode {\r\n        const form = new SmartFormComponent(config);\r\n        return form.render();\r\n    }\r\n\r\n// ","/* eslint-disable @typescript-eslint/no-explicit-any */\r\n// src/mod/components/popup.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { createElement, VNode } from \"@je-es/vdom\";\r\n    import { Component } from \"../core/component\";\r\n    import { state } from \"../core/decorators\";\r\n    import { t } from \"../services/i18n\";\r\n    import { FormConfig, SmartForm } from \"./smart_form\";\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    export type PopupType = 'confirm' | 'alert' | 'form' | 'custom' | 'prompt';\r\n    export type PopupVariant = 'default' | 'danger' | 'warning' | 'success' | 'info';\r\n    export type PopupSize = 'small' | 'medium' | 'large' | 'xlarge' | 'fullscreen';\r\n\r\n    export interface PopupButton {\r\n        label: string;\r\n        translateKey?: string;\r\n        variant?: 'primary' | 'secondary' | 'danger' | 'success';\r\n        icon?: string;\r\n        onClick: () => void | Promise<void>;\r\n        loading?: boolean;\r\n    }\r\n\r\n    export interface PopupFormOptions {\r\n        title: string;\r\n        titleTranslateKey?: string;\r\n        description?: string;\r\n        descriptionTranslateKey?: string;\r\n        formConfig: FormConfig;\r\n        variant?: PopupVariant;\r\n        icon?: string;\r\n        size?: PopupSize;\r\n        closeOnOverlay?: boolean;\r\n        closeOnEscape?: boolean;\r\n        showCloseButton?: boolean;\r\n    }\r\n\r\n    export interface PopupOptions {\r\n        title: string;\r\n        titleTranslateKey?: string;\r\n        message?: string;\r\n        messageTranslateKey?: string;\r\n        description?: string;\r\n        descriptionTranslateKey?: string;\r\n        type?: PopupType;\r\n        variant?: PopupVariant;\r\n        size?: PopupSize;\r\n        buttons?: PopupButton[];\r\n        customContent?: VNode;\r\n        formConfig?: FormConfig;\r\n        closeOnOverlay?: boolean;\r\n        closeOnEscape?: boolean;\r\n        showCloseButton?: boolean;\r\n        icon?: string;\r\n        onConfirm?: () => void | Promise<void>;\r\n        onCancel?: () => void | Promise<void>;\r\n    }\r\n\r\n    interface ActivePopup extends PopupOptions {\r\n        id: number;\r\n        resolve?: (value: boolean | string | null | unknown) => void;\r\n        inputValue?: string;\r\n        isSubmitting?: boolean;\r\n    }\r\n\r\n    // Blah Blah Style Map\r\n    const bb_ = {\r\n        container: 'bb_popupContainer',\r\n\r\n        overlay: 'bb_popupOverlay',\r\n\r\n        popup: {\r\n            base: 'bb_popup',\r\n            close: 'bb_popupClose',\r\n        },\r\n\r\n        header: {\r\n            container: 'bb_popupHeader',\r\n            icon: 'bb_popupHeaderIcon',\r\n            content: 'bb_popupHeaderContent',\r\n            title: 'bb_popupHeaderContentTitle',\r\n            description: 'bb_popupHeaderContentDesc',\r\n        },\r\n\r\n        body: {\r\n            container: 'bb_popupBody',\r\n            message: 'bb_popupBodyMsg',\r\n            input: 'bb_popupBodyInput',\r\n            formContainer: 'bb_popupBodyFormContainer',\r\n        },\r\n\r\n        footer: 'bb_popupFooter',\r\n\r\n        button: 'bb_btn',\r\n    };\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class Popup extends Component {\r\n\r\n        //  STATE \r\n\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state popups: ActivePopup[] = [];\r\n        private nextId = 0;\r\n        private handleEscapeKey?: (e: KeyboardEvent) => void;\r\n\r\n        //  LIFECYCLE \r\n\r\n        async onMount() {\r\n            this.setupKeyboardListener();\r\n\r\n            window.addEventListener('languagechange', () => {\r\n                this.update();\r\n            });\r\n        }\r\n\r\n        onUnmount() {\r\n            if (this.handleEscapeKey) {\r\n                document.removeEventListener('keydown', this.handleEscapeKey);\r\n            }\r\n        }\r\n\r\n        //  RENDER \r\n\r\n        render() {\r\n            if (this.popups.length === 0) {\r\n                return createElement('div', { className: bb_.container });\r\n            }\r\n\r\n            return createElement('div', { className: bb_.container },\r\n                ...this.popups.map(popup => this.renderPopup(popup))\r\n            );\r\n        }\r\n\r\n        renderPopup(popup: ActivePopup) {\r\n            const sizeClass = `bb_popup--${popup.size || 'medium'}`;\r\n            const variantClass = popup.variant ? `bb_popup--${popup.variant}` : '';\r\n\r\n            return createElement('div', {\r\n                key: String(popup.id),\r\n                className: bb_.overlay,\r\n                'data-popup-id': popup.id,\r\n                onClick: (e: Event) => {\r\n                    if ((e.target as HTMLElement).classList.contains(bb_.overlay) &&\r\n                        popup.closeOnOverlay !== false) {\r\n                        this.closePopup(popup.id, false);\r\n                    }\r\n                }\r\n            },\r\n                createElement('div', {\r\n                    className: `${bb_.popup.base} ${sizeClass} ${variantClass}`,\r\n                    role: 'dialog',\r\n                    'aria-modal': 'true',\r\n                    'aria-labelledby': `popup-title-${popup.id}`\r\n                },\r\n                    // Close button\r\n                    popup.showCloseButton !== false ? createElement('button', {\r\n                        className: bb_.popup.close,\r\n                        onClick: () => this.closePopup(popup.id, false),\r\n                        'aria-label': 'Close'\r\n                    },\r\n                        createElement('i', { className: 'fas fa-times' })\r\n                    ) : null,\r\n\r\n                    // Header\r\n                    createElement('div', { className: bb_.header.container },\r\n                        popup.icon ? createElement('div', { className: bb_.header.icon },\r\n                            createElement('i', { className: popup.icon })\r\n                        ) : null,\r\n                        createElement('div', { className: bb_.header.content },\r\n                            createElement('h2', {\r\n                                id: `popup-title-${popup.id}`,\r\n                                className: bb_.header.title,\r\n                                'data-translate': popup.titleTranslateKey\r\n                            },\r\n                                popup.titleTranslateKey ? t(popup.titleTranslateKey) : popup.title\r\n                            ),\r\n                            popup.description ? createElement('p', {\r\n                                className: bb_.header.description,\r\n                                'data-translate': popup.descriptionTranslateKey\r\n                            },\r\n                                popup.descriptionTranslateKey ? t(popup.descriptionTranslateKey) : popup.description\r\n                            ) : null\r\n                        )\r\n                    ),\r\n\r\n                    // Body\r\n                    createElement('div', { className: bb_.body.container },\r\n                        popup.message ? createElement('p', {\r\n                            className: bb_.body.message,\r\n                            'data-translate': popup.messageTranslateKey\r\n                        },\r\n                            popup.messageTranslateKey ? t(popup.messageTranslateKey) : popup.message\r\n                        ) : null,\r\n\r\n                        // Prompt input\r\n                        popup.type === 'prompt' ? createElement('input', {\r\n                            type: 'text',\r\n                            className: bb_.body.input,\r\n                            value: popup.inputValue || '',\r\n                            placeholder: t('popup.prompt.placeholder'),\r\n                            'data-translate': 'popup.prompt.placeholder',\r\n                            onInput: (e: Event) => {\r\n                                popup.inputValue = (e.target as HTMLInputElement).value;\r\n                            }\r\n                        }) : null,\r\n\r\n                        // Form rendering\r\n                        popup.type === 'form' && popup.formConfig ? createElement('div', {\r\n                            className: bb_.body.formContainer\r\n                        },\r\n                            SmartForm(popup.formConfig)\r\n                        ) : null,\r\n\r\n                        // Custom content\r\n                        popup.customContent || null\r\n                    ),\r\n\r\n                    // Footer with buttons\r\n                    popup.buttons && popup.buttons.length > 0 && popup.type !== 'form' ? createElement('div', {\r\n                        className: bb_.footer\r\n                    },\r\n                        ...popup.buttons.map(button => createElement('button', {\r\n                            className: `${bb_.button} ${button.variant || 'secondary'}`,\r\n                            'data-translate': button.translateKey,\r\n                            disabled: button.loading || popup.isSubmitting,\r\n                            onClick: async () => {\r\n                                if (button.loading || popup.isSubmitting) return;\r\n                                await button.onClick();\r\n                            }\r\n                        },\r\n                            button.icon ? createElement('i', { className: button.icon }) : null,\r\n                            button.loading || popup.isSubmitting ?\r\n                                createElement('i', { className: 'fas fa-spinner fa-spin' }) : null,\r\n                            ' ',\r\n                            button.translateKey ? t(button.translateKey) : button.label\r\n                        ))\r\n                    ) : null\r\n                )\r\n            );\r\n        }\r\n\r\n        //  PUBLIC API \r\n\r\n        /**\r\n         * Show a custom popup\r\n         */\r\n        show(options: PopupOptions): Promise<boolean | string | null | unknown> {\r\n            return new Promise((resolve) => {\r\n                const id = this.nextId++;\r\n\r\n                const popup: ActivePopup = {\r\n                    ...options,\r\n                    id,\r\n                    resolve,\r\n                    type: options.type || 'custom',\r\n                    size: options.size || 'medium',\r\n                    closeOnOverlay: options.closeOnOverlay !== false,\r\n                    closeOnEscape: options.closeOnEscape !== false,\r\n                    showCloseButton: options.showCloseButton !== false,\r\n                    isSubmitting: false\r\n                };\r\n\r\n                this.popups = [...this.popups, popup];\r\n                this.applyBodyLock();\r\n                this.update();\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Show a form popup\r\n         */\r\n        showForm(options: PopupFormOptions): Promise<unknown> {\r\n            return new Promise((resolve, _reject) => {\r\n                const id = this.nextId++;\r\n\r\n                // Wrap the form config to handle submission\r\n                const wrappedFormConfig: FormConfig = {\r\n                    ...options.formConfig,\r\n                    onSubmit: async (data) => {\r\n                        const popup = this.popups.find(p => p.id === id);\r\n                        if (popup) {\r\n                            popup.isSubmitting = true;\r\n                            this.update();\r\n                        }\r\n\r\n                        try {\r\n                            // Call original onSubmit\r\n                            if (options.formConfig.onSubmit) {\r\n                                await options.formConfig.onSubmit(data, undefined as any);\r\n                            }\r\n\r\n                            this.closePopup(id, data);\r\n                            resolve(data);\r\n                        } catch (error) {\r\n                            if (popup) {\r\n                                popup.isSubmitting = false;\r\n                                this.update();\r\n                            }\r\n\r\n                            // Don't close popup on error\r\n                            if (options.formConfig.onError) {\r\n                                options.formConfig.onError(error);\r\n                            }\r\n                        }\r\n                    },\r\n                    submitButton: {\r\n                        ...options.formConfig.submitButton,\r\n                        className: options.formConfig.submitButton?.className || `${bb_.button} primary wide`\r\n                    }\r\n                };\r\n\r\n                const popup: ActivePopup = {\r\n                    title: options.title,\r\n                    titleTranslateKey: options.titleTranslateKey,\r\n                    description: options.description,\r\n                    descriptionTranslateKey: options.descriptionTranslateKey,\r\n                    type: 'form',\r\n                    variant: options.variant || 'default',\r\n                    size: options.size || 'medium',\r\n                    icon: options.icon,\r\n                    formConfig: wrappedFormConfig,\r\n                    closeOnOverlay: options.closeOnOverlay !== false,\r\n                    closeOnEscape: options.closeOnEscape !== false,\r\n                    showCloseButton: options.showCloseButton !== false,\r\n                    id,\r\n                    resolve,\r\n                    isSubmitting: false\r\n                };\r\n\r\n                this.popups = [...this.popups, popup];\r\n                this.applyBodyLock();\r\n                this.update();\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Show a confirmation dialog\r\n         */\r\n        confirm(options: {\r\n            title: string;\r\n            titleTranslateKey?: string;\r\n            message: string;\r\n            messageTranslateKey?: string;\r\n            confirmLabel?: string;\r\n            confirmTranslateKey?: string;\r\n            cancelLabel?: string;\r\n            cancelTranslateKey?: string;\r\n            variant?: PopupVariant;\r\n            icon?: string;\r\n            size?: PopupSize;\r\n            onConfirm?: () => void | Promise<void>;\r\n            onCancel?: () => void | Promise<void>;\r\n        }): Promise<boolean> {\r\n            return new Promise((resolve) => {\r\n                const id = this.nextId++;\r\n\r\n                const popup: ActivePopup = {\r\n                    id,\r\n                    title: options.title,\r\n                    titleTranslateKey: options.titleTranslateKey,\r\n                    message: options.message,\r\n                    messageTranslateKey: options.messageTranslateKey,\r\n                    type: 'confirm',\r\n                    variant: options.variant || 'default',\r\n                    size: options.size || 'small',\r\n                    icon: options.icon,\r\n                    resolve: resolve as (value: boolean | string | unknown) => void,\r\n                    onConfirm: options.onConfirm,\r\n                    onCancel: options.onCancel,\r\n                    buttons: [\r\n                        {\r\n                            label: options.cancelLabel || 'Cancel',\r\n                            translateKey: options.cancelTranslateKey || 'button.cancel',\r\n                            variant: 'secondary',\r\n                            icon: 'fas fa-times',\r\n                            onClick: async () => {\r\n                                if (options.onCancel) {\r\n                                    await options.onCancel();\r\n                                }\r\n                                this.closePopup(id, false);\r\n                            }\r\n                        },\r\n                        {\r\n                            label: options.confirmLabel || 'Confirm',\r\n                            translateKey: options.confirmTranslateKey || 'button.confirm',\r\n                            variant: options.variant === 'danger' ? 'danger' : 'primary',\r\n                            icon: 'fas fa-check',\r\n                            onClick: async () => {\r\n                                if (options.onConfirm) {\r\n                                    await options.onConfirm();\r\n                                }\r\n                                this.closePopup(id, true);\r\n                            }\r\n                        }\r\n                    ]\r\n                };\r\n\r\n                this.popups = [...this.popups, popup];\r\n                this.applyBodyLock();\r\n                this.update();\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Show an alert dialog\r\n         */\r\n        alert(options: {\r\n            title: string;\r\n            titleTranslateKey?: string;\r\n            message: string;\r\n            messageTranslateKey?: string;\r\n            okLabel?: string;\r\n            okTranslateKey?: string;\r\n            variant?: PopupVariant;\r\n            icon?: string;\r\n            size?: PopupSize;\r\n            onConfirm?: () => void | Promise<void>;\r\n        }): Promise<boolean> {\r\n            return new Promise((resolve) => {\r\n                const id = this.nextId++;\r\n\r\n                const popup: ActivePopup = {\r\n                    id,\r\n                    title: options.title,\r\n                    titleTranslateKey: options.titleTranslateKey,\r\n                    message: options.message,\r\n                    messageTranslateKey: options.messageTranslateKey,\r\n                    type: 'alert',\r\n                    variant: options.variant || 'info',\r\n                    size: options.size || 'small',\r\n                    icon: options.icon,\r\n                    resolve: resolve as (value: boolean | string | unknown) => void,\r\n                    onConfirm: options.onConfirm,\r\n                    buttons: [\r\n                        {\r\n                            label: options.okLabel || 'OK',\r\n                            translateKey: options.okTranslateKey || 'popup.ok',\r\n                            variant: 'primary',\r\n                            icon: 'fas fa-check',\r\n                            onClick: async () => {\r\n                                if (options.onConfirm) {\r\n                                    await options.onConfirm();\r\n                                }\r\n                                this.closePopup(id, true);\r\n                            }\r\n                        }\r\n                    ]\r\n                };\r\n\r\n                this.popups = [...this.popups, popup];\r\n                this.applyBodyLock();\r\n                this.update();\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Show a prompt dialog\r\n         */\r\n        prompt(options: {\r\n            title: string;\r\n            titleTranslateKey?: string;\r\n            message: string;\r\n            messageTranslateKey?: string;\r\n            defaultValue?: string;\r\n            confirmLabel?: string;\r\n            confirmTranslateKey?: string;\r\n            cancelLabel?: string;\r\n            cancelTranslateKey?: string;\r\n            icon?: string;\r\n            onConfirm?: (value: string) => void | Promise<void>;\r\n            onCancel?: () => void | Promise<void>;\r\n        }): Promise<string | null> {\r\n            return new Promise((resolve) => {\r\n                const id = this.nextId++;\r\n\r\n                const popup: ActivePopup = {\r\n                    id,\r\n                    title: options.title,\r\n                    titleTranslateKey: options.titleTranslateKey,\r\n                    message: options.message,\r\n                    messageTranslateKey: options.messageTranslateKey,\r\n                    type: 'prompt',\r\n                    variant: 'default',\r\n                    icon: options.icon,\r\n                    inputValue: options.defaultValue || '',\r\n                    resolve: resolve as (value: boolean | string | unknown) => void,\r\n                    onConfirm: options.onConfirm as (() => void | Promise<void>) | undefined,\r\n                    onCancel: options.onCancel,\r\n                    buttons: [\r\n                        {\r\n                            label: options.cancelLabel || 'Cancel',\r\n                            translateKey: options.cancelTranslateKey || 'popup.cancel',\r\n                            variant: 'secondary',\r\n                            onClick: async () => {\r\n                                if (options.onCancel) {\r\n                                    await options.onCancel();\r\n                                }\r\n                                this.closePopup(id, null);\r\n                            }\r\n                        },\r\n                        {\r\n                            label: options.confirmLabel || 'OK',\r\n                            translateKey: options.confirmTranslateKey || 'popup.ok',\r\n                            variant: 'primary',\r\n                            onClick: async () => {\r\n                                const value = popup.inputValue || '';\r\n                                if (options.onConfirm) {\r\n                                    await options.onConfirm(value);\r\n                                }\r\n                                this.closePopup(id, value);\r\n                            }\r\n                        }\r\n                    ]\r\n                };\r\n\r\n                this.popups = [...this.popups, popup];\r\n                this.applyBodyLock();\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Close a specific popup\r\n         */\r\n        closePopup(id: number, result: boolean | string | null | any) {\r\n            const popup = this.popups.find(p => p.id === id);\r\n            if (popup?.resolve) {\r\n                popup.resolve(result);\r\n            }\r\n\r\n            this.popups = this.popups.filter(p => p.id !== id);\r\n\r\n            if (this.popups.length === 0) {\r\n                this.removeBodyLock();\r\n            }\r\n\r\n            this.update();\r\n        }\r\n\r\n        /**\r\n         * Close all popups\r\n         */\r\n        closeAll() {\r\n            this.popups.forEach(popup => {\r\n                if (popup.resolve) {\r\n                    popup.resolve(false);\r\n                }\r\n            });\r\n            this.popups = [];\r\n            this.removeBodyLock();\r\n            this.update();\r\n        }\r\n\r\n        //  HELPERS \r\n\r\n        private applyBodyLock() {\r\n            document.body.style.overflow = 'hidden';\r\n        }\r\n\r\n        private removeBodyLock() {\r\n            document.body.style.overflow = '';\r\n        }\r\n\r\n        private setupKeyboardListener() {\r\n            this.handleEscapeKey = (e: KeyboardEvent) => {\r\n                if (e.key === 'Escape' && this.popups.length > 0) {\r\n                    const lastPopup = this.popups[this.popups.length - 1];\r\n                    if (lastPopup.closeOnEscape !== false) {\r\n                        this.closePopup(lastPopup.id, false);\r\n                    }\r\n                }\r\n            };\r\n            document.addEventListener('keydown', this.handleEscapeKey);\r\n        }\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  GLOBAL \r\n\r\n    let globalPopup: Popup | null = null;\r\n\r\n    export function initPopup(container?: HTMLElement): Popup {\r\n        if (globalPopup) return globalPopup;\r\n\r\n        const popupContainer = container || document.createElement('div');\r\n        if (!container) {\r\n            document.body.appendChild(popupContainer);\r\n        }\r\n\r\n        globalPopup = new Popup();\r\n        globalPopup.mount(popupContainer);\r\n\r\n        return globalPopup;\r\n    }\r\n\r\n    export function getPopup(): Popup {\r\n        if (!globalPopup) {\r\n            globalPopup = initPopup();\r\n        }\r\n        return globalPopup;\r\n    }\r\n\r\n    // Convenience exports\r\n    export const popup = {\r\n        show: (options: PopupOptions) => getPopup().show(options),\r\n\r\n        confirm: (options: Parameters<Popup['confirm']>[0]) =>\r\n            getPopup().confirm(options),\r\n\r\n        alert: (options: Parameters<Popup['alert']>[0]) =>\r\n            getPopup().alert(options),\r\n\r\n        prompt: (options: {\r\n            title: string;\r\n            titleTranslateKey?: string;\r\n            message: string;\r\n            icon?: string;\r\n            messageTranslateKey?: string;\r\n            onConfirm?: () => void | Promise<void>;\r\n        }) => getPopup().prompt(options),\r\n\r\n        showForm: (options: PopupFormOptions) =>\r\n            getPopup().showForm(options),\r\n\r\n        closePopup: (id: number, result: boolean | string | null | any) =>\r\n            getPopup().closePopup(id, result),\r\n\r\n        closeLastPopup: () => getPopup().closePopup(getPopup().popups.length - 1, false),\r\n\r\n        closeFirstPopup: () => getPopup().closePopup(0, false),\r\n\r\n        closeAll: () => getPopup().closeAll()\r\n    };\r\n\r\n// ","/* eslint-disable @typescript-eslint/no-explicit-any */\r\n\r\n// src/frontend/app/gui/layout/tabbed-view.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { createElement, VNode } from \"@je-es/vdom\";\r\n    import { Component } from \"../core/component\";\r\n    import { state } from \"../core/decorators\";\r\n    import { t } from \"../services/i18n\";\r\n\r\n// \r\n\r\n\r\n\r\n//  INIT \r\n\r\n    // Blah Blah Style Map\r\n    const bb_ = {\r\n        container: 'bb_tabbedview',\r\n\r\n        header: 'bb_tabbedviewHeader',\r\n\r\n        tab: {\r\n            base: 'bb_tabbedviewTab',\r\n            active: 'bb_tabbedviewTab--active',\r\n            disabled: 'bb_tabbedviewTab--disabled',\r\n            badge: 'bb_tabbedviewBadge',\r\n        },\r\n\r\n        content: {\r\n            container: 'bb_tabbedviewContent',\r\n            emptyState: 'bb_tabbedviewEmptyState',\r\n            error: 'bb_tabbedviewError',\r\n        }\r\n    };\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    export type TabPosition = 'top' | 'left' | 'right';\r\n    export type TabStyle = 'default' | 'pills' | 'minimal';\r\n\r\n    export interface Tab {\r\n        id: string;\r\n        label: string;\r\n        translateKey?: string;\r\n        icon?: string;\r\n        badge?: number | string;\r\n        disabled?: boolean;\r\n        component?: Component | (() => VNode);\r\n        content?: VNode;\r\n        onActivate?: () => void | Promise<void>;\r\n    }\r\n\r\n    export interface TabbedViewOptions {\r\n        tabs: Tab[];\r\n        defaultTab?: string;\r\n        position?: TabPosition;\r\n        style?: TabStyle;\r\n        className?: string;\r\n        headerClassName?: string;\r\n        contentClassName?: string;\r\n        showTabCount?: boolean;\r\n        persistState?: boolean; // Save active tab to localStorage\r\n        storageKey?: string; // Key for localStorage\r\n        onChange?: (tabId: string) => void | Promise<void>;\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class TabbedView extends Component {\r\n\r\n        //  STATE \r\n\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state activeTabId: string = '';\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state tabs: Tab[] = [];\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state position: TabPosition = 'top';\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state style: TabStyle = 'default';\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state className: string = '';\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state headerClassName: string = '';\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state contentClassName: string = '';\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state showTabCount: boolean = false;\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state persistState: boolean = false;\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state storageKey: string = 'tabbedview-active';\r\n\r\n        private currentTabComponent: Component | null = null;\r\n        private onChange?: (tabId: string) => void | Promise<void>;\r\n\r\n        //  LIFECYCLE \r\n\r\n        async onMount() {\r\n            // Listen for language changes\r\n            window.addEventListener('languagechange', () => {\r\n                this.update();\r\n            });\r\n        }\r\n\r\n        onUnmount() {\r\n            // Clean up current tab component\r\n            if (this.currentTabComponent && typeof this.currentTabComponent.onUnmount === 'function') {\r\n                this.currentTabComponent.onUnmount();\r\n            }\r\n        }\r\n\r\n        //  PUBLIC API \r\n\r\n        /**\r\n         * Initialize the tabbed view with options\r\n         */\r\n        init(options: TabbedViewOptions) {\r\n            this.tabs = options.tabs;\r\n            this.position = options.position || 'top';\r\n            this.style = options.style || 'default';\r\n            this.className = options.className || '';\r\n            this.headerClassName = options.headerClassName || '';\r\n            this.contentClassName = options.contentClassName || '';\r\n            this.showTabCount = options.showTabCount || false;\r\n            this.persistState = options.persistState || false;\r\n            this.storageKey = options.storageKey || 'tabbedview-active';\r\n            this.onChange = options.onChange;\r\n\r\n            // Determine initial active tab\r\n            if (this.persistState) {\r\n                const savedTab = localStorage.getItem(this.storageKey);\r\n                if (savedTab && this.tabs.find(t => t.id === savedTab)) {\r\n                    this.activeTabId = savedTab;\r\n                }\r\n            }\r\n\r\n            if (!this.activeTabId) {\r\n                this.activeTabId = options.defaultTab || this.tabs[0]?.id || '';\r\n            }\r\n\r\n            this.update();\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * Set active tab\r\n         */\r\n        async setActiveTab(tabId: string) {\r\n            const tab = this.tabs.find(t => t.id === tabId);\r\n            if (!tab || tab.disabled) return;\r\n\r\n            // Clean up old tab component\r\n            if (this.currentTabComponent && typeof this.currentTabComponent.onUnmount === 'function') {\r\n                this.currentTabComponent.onUnmount();\r\n            }\r\n            this.currentTabComponent = null;\r\n\r\n            this.activeTabId = tabId;\r\n\r\n            // Save to localStorage if persistence is enabled\r\n            if (this.persistState) {\r\n                localStorage.setItem(this.storageKey, tabId);\r\n            }\r\n\r\n            // Call tab's onActivate callback\r\n            if (tab.onActivate) {\r\n                await tab.onActivate();\r\n                // (window as any).__globalLoader?.show();\r\n                // TODO: better use in-container loading indicator\r\n            }\r\n\r\n            // Call global onChange callback\r\n            if (this.onChange) {\r\n                await this.onChange(tabId);\r\n            }\r\n\r\n            this.update();\r\n        }\r\n\r\n        /**\r\n         * Add a new tab dynamically\r\n         */\r\n        addTab(tab: Tab) {\r\n            this.tabs = [...this.tabs, tab];\r\n            this.update();\r\n        }\r\n\r\n        /**\r\n         * Remove a tab\r\n         */\r\n        removeTab(tabId: string) {\r\n            this.tabs = this.tabs.filter(t => t.id !== tabId);\r\n            if (this.activeTabId === tabId && this.tabs.length > 0) {\r\n                this.activeTabId = this.tabs[0].id;\r\n            }\r\n            this.update();\r\n        }\r\n\r\n        /**\r\n         * Update tab properties\r\n         */\r\n        updateTab(tabId: string, updates: Partial<Tab>) {\r\n            const tab = this.tabs.find(t => t.id === tabId);\r\n            if (tab) {\r\n                Object.assign(tab, updates);\r\n                this.update();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get active tab\r\n         */\r\n        getActiveTab(): Tab | undefined {\r\n            return this.tabs.find(t => t.id === this.activeTabId);\r\n        }\r\n\r\n        //  RENDER \r\n\r\n        render() {\r\n            const containerClass = [\r\n                bb_.container,\r\n                `__tabbedview__--${this.position}`,\r\n                `__tabbedview__--${this.style}`,\r\n                this.className\r\n            ].filter(Boolean).join(' ');\r\n\r\n            return createElement('div', { className: containerClass },\r\n                this.renderTabList(),\r\n                this.renderTabContent()\r\n            );\r\n        }\r\n\r\n        renderTabList() {\r\n            const headerClass = [\r\n                bb_.header,\r\n                this.headerClassName\r\n            ].filter(Boolean).join(' ');\r\n\r\n            return createElement('div', { className: headerClass },\r\n                ...this.tabs.map(tab => this.renderTab(tab))\r\n            );\r\n        }\r\n\r\n        renderTab(tab: Tab) {\r\n            const isActive = this.activeTabId === tab.id;\r\n\r\n            const tabClass = [\r\n                bb_.tab.base,\r\n                isActive ? bb_.tab.active : '',\r\n                tab.disabled ? bb_.tab.disabled : ''\r\n            ].filter(Boolean).join(' ');\r\n\r\n            const label = tab.translateKey ? t(tab.translateKey) : tab.label;\r\n\r\n            return createElement('button', {\r\n                key: tab.id,\r\n                className: tabClass,\r\n                onclick: () => this.setActiveTab(tab.id),\r\n                disabled: tab.disabled,\r\n                'data-translate': tab.translateKey,\r\n                'aria-selected': isActive,\r\n                role: 'tab'\r\n            },\r\n                tab.icon ? createElement('i', { className: tab.icon }) : null,\r\n                createElement('span', {}, label),\r\n                tab.badge !== undefined && tab.badge !== null && tab.badge !== 0 ?\r\n                    createElement('span', { className: bb_.tab.badge },\r\n                        typeof tab.badge === 'number' && tab.badge > 99 ? '99+' : String(tab.badge)\r\n                    ) : null\r\n            );\r\n        }\r\n\r\n        renderTabContent() {\r\n            const contentClass = [\r\n                bb_.content.container,\r\n                this.contentClassName\r\n            ].filter(Boolean).join(' ');\r\n\r\n            const activeTab = this.getActiveTab();\r\n            if (!activeTab) {\r\n                return createElement('div', { className: contentClass },\r\n                    createElement('div', { className: bb_.content.emptyState },\r\n                        createElement('p', {}, 'No tab selected')\r\n                    )\r\n                );\r\n            }\r\n\r\n            return createElement('div', {\r\n                className: contentClass,\r\n                role: 'tabpanel'\r\n            },\r\n                this.renderActiveTabContent(activeTab)\r\n            );\r\n        }\r\n\r\n        renderActiveTabContent(tab: Tab) {\r\n            // If tab has a component class/function\r\n            if (tab.component) {\r\n                try {\r\n                    // Check if it's a Component instance\r\n                    if (tab.component instanceof Component) {\r\n                        // It's already an instance, just render it\r\n                        this.currentTabComponent = tab.component;\r\n\r\n                        // Get the VNode from render()\r\n                        const vnode = this.currentTabComponent.render();\r\n\r\n                        // Wrap the VNode to set _element when it's mounted via ref callback\r\n                        const wrappedProps = {\r\n                            ...vnode.props,\r\n                            ref: (el: HTMLElement | null) => {\r\n                                if (el && this.currentTabComponent) {\r\n                                    // Set the component's _element through the private field\r\n                                    (this.currentTabComponent as any)._element = el;\r\n                                    // console.log(' TabbedView set component._element via ref');\r\n                                }\r\n                                // Call original ref if it exists\r\n                                if (typeof vnode.props.ref === 'function') {\r\n                                    vnode.props.ref(el);\r\n                                }\r\n                            }\r\n                        };\r\n\r\n                        // Create a new VNode with the wrapped props\r\n                        const wrappedVNode = {\r\n                            ...vnode,\r\n                            props: wrappedProps\r\n                        };\r\n\r\n                        // Schedule onMount to be called after element is in DOM\r\n                        if (typeof this.currentTabComponent.onMount === 'function') {\r\n                            setTimeout(() => {\r\n                                if (this.currentTabComponent && typeof this.currentTabComponent.onMount === 'function') {\r\n                                    this.currentTabComponent.onMount();\r\n                                }\r\n                            }, 0);\r\n                        }\r\n\r\n                        return wrappedVNode;\r\n                    }\r\n\r\n                    // Check if it's a function\r\n                    if (typeof tab.component === 'function') {\r\n                        const ComponentClass = tab.component as any;\r\n\r\n                        // Check if it's a Component class (has prototype.render)\r\n                        if (ComponentClass.prototype && typeof ComponentClass.prototype.render === 'function') {\r\n                            // It's a Component class - create new instance\r\n                            if (!this.currentTabComponent) {\r\n                                this.currentTabComponent = new ComponentClass();\r\n\r\n                                // Schedule onMount\r\n                                if (this.currentTabComponent && typeof this.currentTabComponent.onMount === 'function') {\r\n                                    setTimeout(() => {\r\n                                        if (this.currentTabComponent && typeof this.currentTabComponent.onMount === 'function') {\r\n                                            this.currentTabComponent.onMount();\r\n                                        }\r\n                                    }, 0);\r\n                                }\r\n                            }\r\n\r\n                            return this.currentTabComponent!.render();\r\n                        } else {\r\n                            // It's a function returning VNode\r\n                            return ComponentClass();\r\n                        }\r\n                    }\r\n                } catch (error) {\r\n                    console.error('Error rendering tab component:', error);\r\n                    return createElement('div', { className: bb_.content.error },\r\n                        'Error rendering tab content'\r\n                    );\r\n                }\r\n            }\r\n\r\n            // If tab has direct content VNode\r\n            if (tab.content) {\r\n                return tab.content;\r\n            }\r\n\r\n            // Fallback\r\n            return createElement('div', { className: bb_.content.emptyState },\r\n                createElement('p', {}, 'No content available')\r\n            );\r\n        }\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  GLOBAL \r\n\r\n    /**\r\n     * Create a new TabbedView instance with options\r\n     */\r\n    export function createTabbedView(options: TabbedViewOptions): TabbedView {\r\n        const view = new TabbedView();\r\n        view.init(options);\r\n        return view;\r\n    }\r\n\r\n    /**\r\n     * Helper to create a simple tabbed view and mount it\r\n     */\r\n    export async function mountTabbedView(\r\n        container: HTMLElement,\r\n        options: TabbedViewOptions\r\n    ): Promise<TabbedView> {\r\n        const view = createTabbedView(options);\r\n        await view.mount(container);\r\n        return view;\r\n    }\r\n\r\n// ","/* eslint-disable @typescript-eslint/no-explicit-any */\r\n// src/frontend/app/gui/layout/items_loader.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { createDOMElement, createElement } from \"@je-es/vdom\";\r\n    import { Component } from \"../core/component\";\r\n    import { t } from \"../services/i18n\";\r\n\r\n// \r\n\r\n\r\n\r\n//  INIT \r\n\r\n    // Blah Blah Style Map\r\n    const bb_ = {\r\n        container: 'bb_itemsLoaderContainer',\r\n        list: 'bb_itemsLoaderList',\r\n        searchbar: 'bb_itemsLoaderSearchbar',\r\n        loading: 'bb_itemsLoaderLoading',\r\n        error: 'bb_itemsLoaderError',\r\n        trigger: 'bb_itemsLoaderTrigger',\r\n        end: 'bb_itemsLoaderEnd',\r\n        emptyState: 'bb_tabbedviewEmptyState',\r\n        button: 'bb_btn',\r\n    };\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export interface ItemsLoaderConfig<T> {\r\n        fetchUrl: string | ((page: number, filters: Record<string, any>) => string);\r\n        renderItem: (item: T, index: number) => HTMLElement;\r\n        pageSize?: number;\r\n        emptyStateConfig?: {\r\n            icon: string;\r\n            title: string;\r\n            description: string;\r\n        };\r\n        loadMoreText?: string;\r\n        loadingText?: string;\r\n        errorText?: string;\r\n        containerClassName?: string;\r\n        itemClassName?: string;\r\n        filters?: Record<string, any>;\r\n        onFiltersChange?: (filters: Record<string, any>) => void;\r\n        onItemClick?: (item: T, index: number) => void;\r\n        onLoadMore?: (page: number, items: T[]) => void;\r\n        onError?: (error: Error) => void;\r\n        initialItems?: T[];\r\n        extractItems?: (response: any) => T[];\r\n        extractTotal?: (response: any) => number;\r\n        getAuthToken?: () => string | null;\r\n        enableInfiniteScroll?: boolean;\r\n        scrollThreshold?: number;\r\n        enableSearch?: boolean;\r\n        searchPlaceholder?: string;\r\n        searchFilterKey?: string;\r\n        searchDebounceMs?: number;\r\n    }\r\n\r\n    interface LoadState {\r\n        loading: boolean;\r\n        error: string | null;\r\n        hasMore: boolean;\r\n        page: number;\r\n        total: number;\r\n    }\r\n\r\n    export class ItemsLoader<T = any> extends Component {\r\n        items: T[] = [];\r\n        loadState: LoadState = {\r\n            loading: false,\r\n            error: null,\r\n            hasMore: true,\r\n            page: 0,\r\n            total: 0\r\n        };\r\n        filters: Record<string, any> = {};\r\n\r\n        public config!: ItemsLoaderConfig<T>;\r\n        private scrollContainer: HTMLElement | null = null;\r\n        private loadMoreObserver: IntersectionObserver | null = null;\r\n        private currentLoadMoreTrigger: Element | null = null;\r\n        private isUpdating: boolean = false;\r\n        private observerReconnectAttempts: number = 0;\r\n        private maxObserverAttempts: number = 5;\r\n        private itemsListContainer: HTMLElement | null = null;\r\n        private searchInput: HTMLInputElement | null = null;\r\n        private searchDebounceTimer: NodeJS.Timeout | null = null;\r\n\r\n        initialize(config: ItemsLoaderConfig<T>) {\r\n\r\n            this.config = {\r\n                pageSize: 10,\r\n                loadMoreText: 'Load More',\r\n                loadingText: 'Loading...',\r\n                errorText: 'Failed to load items',\r\n                containerClassName: bb_.container,\r\n                itemClassName: '__itemsLoader-item',\r\n                enableInfiniteScroll: true,\r\n                scrollThreshold: 200,\r\n                enableSearch: false,\r\n                searchPlaceholder: 'Search...',\r\n                searchFilterKey: 'search',\r\n                searchDebounceMs: 300,\r\n                extractItems: (response) => response.notifications || response.items || response.data || [],\r\n                extractTotal: (response) => response.total || response.count || 0,\r\n                ...config\r\n            };\r\n\r\n            if (this.config.filters) {\r\n                this.filters = { ...this.config.filters };\r\n            }\r\n\r\n            if (this.config.initialItems) {\r\n                this.items = [...this.config.initialItems];\r\n            }\r\n        }\r\n\r\n        async onMount() {\r\n            if (this.items.length === 0) {\r\n                await this.loadMore();\r\n            }\r\n\r\n            if (this.config.enableInfiniteScroll) {\r\n                this.setupInfiniteScroll();\r\n            }\r\n\r\n            if (this.config.scrollThreshold) {\r\n                this.setupScrollListener();\r\n            }\r\n        }\r\n\r\n        onUnmount() {\r\n            this.disconnectObserver();\r\n            if (this.scrollContainer) {\r\n                this.scrollContainer.removeEventListener('scroll', this.handleScroll);\r\n                this.scrollContainer = null;\r\n            }\r\n        }\r\n\r\n        async loadMore() {\r\n            if (this.loadState.loading || !this.loadState.hasMore) {\r\n                return;\r\n            }\r\n\r\n            try {\r\n                this.loadState = { ...this.loadState, loading: true, error: null };\r\n                // Don't call update() - instead show loading indicator directly\r\n                this.updateLoadingState();\r\n\r\n                const nextPage = this.loadState.page + 1;\r\n\r\n                let url: string;\r\n                if (typeof this.config.fetchUrl === 'function') {\r\n                    url = this.config.fetchUrl(nextPage, this.filters);\r\n                } else {\r\n                    const separator = this.config.fetchUrl.includes('?') ? '&' : '?';\r\n                    const params = new URLSearchParams({\r\n                        page: nextPage.toString(),\r\n                        limit: this.config.pageSize!.toString(),\r\n                        ...this.filters\r\n                    });\r\n                    url = `${this.config.fetchUrl}${separator}${params}`;\r\n                }\r\n\r\n                const headers: HeadersInit = {\r\n                    'Content-Type': 'application/json'\r\n                };\r\n\r\n                const token = this.config.getAuthToken?.();\r\n                if (token) {\r\n                    headers['Authorization'] = `Bearer ${token}`;\r\n                }\r\n\r\n                const response = await fetch(url, {\r\n                    credentials: 'include',\r\n                    headers\r\n                });\r\n\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n                }\r\n\r\n                const data = await response.json();\r\n\r\n                const newItems = this.config.extractItems!(data);\r\n                const total = this.config.extractTotal!(data);\r\n\r\n                this.items = [...this.items, ...newItems];\r\n\r\n                this.loadState = {\r\n                    loading: false,\r\n                    error: null,\r\n                    hasMore: this.items.length < total,\r\n                    page: nextPage,\r\n                    total\r\n                };\r\n\r\n                //  FIX: Update existing DOM instead of full re-render\r\n                this.appendNewItems(newItems);\r\n\r\n                // Reconnect observer\r\n                this.observerReconnectAttempts = 0;\r\n                this.reconnectObserver();\r\n\r\n                this.config.onLoadMore?.(nextPage, this.items);\r\n\r\n            } catch (error) {\r\n                this.loadState = {\r\n                    ...this.loadState,\r\n                    loading: false,\r\n                    error: error instanceof Error ? error.message : this.config.errorText!\r\n                };\r\n                // Show error and hide loading\r\n                this.updateLoadingState();\r\n                this.updateFooter();\r\n\r\n                this.config.onError?.(error instanceof Error ? error : new Error('Unknown error'));\r\n            }\r\n        }\r\n\r\n        async reload() {\r\n            this.items = [];\r\n            this.loadState = {\r\n                loading: false,\r\n                error: null,\r\n                hasMore: true,\r\n                page: 0,\r\n                total: 0\r\n            };\r\n            await this.loadMore();\r\n        }\r\n\r\n        async applyFilters(newFilters: Record<string, any>) {\r\n            if (this.isUpdating) {\r\n                return;\r\n            }\r\n\r\n            this.isUpdating = true;\r\n            this.filters = { ...newFilters };\r\n\r\n            //  Reset items and pagination when applying new filters\r\n            this.items = [];\r\n            this.loadState = {\r\n                loading: true,\r\n                error: null,\r\n                hasMore: true,\r\n                page: 0,\r\n                total: 0\r\n            };\r\n\r\n            // Show loading indicator\r\n            this.updateLoadingState();\r\n\r\n            try {\r\n                const url = typeof this.config.fetchUrl === 'function'\r\n                    ? this.config.fetchUrl(1, this.filters)\r\n                    : (() => {\r\n                        const separator = this.config.fetchUrl.includes('?') ? '&' : '?';\r\n                        const params = new URLSearchParams({\r\n                            page: '1',\r\n                            limit: this.config.pageSize!.toString(),\r\n                            ...this.filters\r\n                        });\r\n                        return `${this.config.fetchUrl}${separator}${params}`;\r\n                    })();\r\n\r\n                const headers: HeadersInit = {\r\n                    'Content-Type': 'application/json'\r\n                };\r\n\r\n                const token = this.config.getAuthToken?.();\r\n                if (token) {\r\n                    headers['Authorization'] = `Bearer ${token}`;\r\n                }\r\n\r\n                const response = await fetch(url, {\r\n                    credentials: 'include',\r\n                    headers\r\n                });\r\n\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n                }\r\n\r\n                const data = await response.json();\r\n\r\n                const newItems = this.config.extractItems!(data);\r\n                const total = this.config.extractTotal!(data);\r\n\r\n                // Update state\r\n                this.items = [...newItems];\r\n                this.loadState = {\r\n                    loading: false,\r\n                    error: null,\r\n                    hasMore: this.items.length < total,\r\n                    page: 1,\r\n                    total\r\n                };\r\n\r\n                //  For filters, we need to clear the list and update\r\n                // Clear the list container\r\n                if (this.itemsListContainer) {\r\n                    this.itemsListContainer.innerHTML = '';\r\n                }\r\n\r\n                // Clear old footer and empty state elements\r\n                if (this.element) {\r\n                    this.element.querySelectorAll(`${bb_.trigger}, ${bb_.end}, ${bb_.error}, ${bb_.loading}, ${bb_.emptyState}`).forEach(el => el.remove());\r\n                }\r\n\r\n                // If there are items after filter, append them\r\n                if (this.items.length > 0) {\r\n                    // Make sure list container is ready\r\n                    if (!this.itemsListContainer) {\r\n                        this.itemsListContainer = this.element?.querySelector(`.${bb_.list}`) as HTMLElement;\r\n                    }\r\n\r\n                    if (this.itemsListContainer) {\r\n                        this.appendNewItems(this.items);\r\n                    }\r\n                } else {\r\n                    // Show empty state - append to container, not list\r\n                    if (this.config.emptyStateConfig && this.element) {\r\n                        const emptyVNode = this.renderEmptyState();\r\n                        const emptyElement = createDOMElement(emptyVNode);\r\n                        this.element.appendChild(emptyElement);\r\n                    }\r\n                }\r\n\r\n                // Re-establish container reference\r\n                this.itemsListContainer = this.element?.querySelector(`.${bb_.list}`) as HTMLElement;\r\n                this.observerReconnectAttempts = 0;\r\n                this.reconnectObserver();\r\n\r\n                this.config.onFiltersChange?.(this.filters);\r\n\r\n            } catch (error) {\r\n                this.loadState = {\r\n                    ...this.loadState,\r\n                    loading: false,\r\n                    error: error instanceof Error ? error.message : this.config.errorText!\r\n                };\r\n\r\n                // Show error directly\r\n                this.updateLoadingState();\r\n\r\n                this.config.onError?.(error instanceof Error ? error : new Error('Unknown error'));\r\n            } finally {\r\n                this.isUpdating = false;\r\n            }\r\n        }\r\n\r\n        async handleSearch(searchQuery: string) {\r\n            // Clear existing debounce timer\r\n            if (this.searchDebounceTimer) {\r\n                clearTimeout(this.searchDebounceTimer);\r\n            }\r\n\r\n            // Set up new debounce timer\r\n            this.searchDebounceTimer = setTimeout(async () => {\r\n                const newFilters = { ...this.filters };\r\n\r\n                if (searchQuery.trim()) {\r\n                    newFilters[this.config.searchFilterKey!] = searchQuery.trim();\r\n                } else {\r\n                    delete newFilters[this.config.searchFilterKey!];\r\n                }\r\n\r\n                await this.applyFilters(newFilters);\r\n            }, this.config.searchDebounceMs);\r\n        }\r\n\r\n        updateItems(updatedItems: T[]) {\r\n            this.items = [...updatedItems];\r\n\r\n            // Clear the list and re-append items instead of full re-render\r\n            if (this.itemsListContainer) {\r\n                this.itemsListContainer.innerHTML = '';\r\n                this.appendNewItems(updatedItems);\r\n            }\r\n        }\r\n\r\n        // \r\n        // DOM UPDATE HELPERS -  NEW: Append without full re-render\r\n        // \r\n\r\n        private appendNewItems(newItems: T[]) {\r\n            // Ensure we have the list container reference\r\n            if (!this.itemsListContainer) {\r\n                this.itemsListContainer = this.element?.querySelector(`.${bb_.list}`) as HTMLElement;\r\n            }\r\n\r\n            if (!this.itemsListContainer) {\r\n                return;\r\n            }\r\n\r\n            // Append new items to existing list\r\n            const startIndex = this.items.length - newItems.length;\r\n            newItems.forEach((item, index) => {\r\n                const itemElement = this.config.renderItem(item, startIndex + index);\r\n\r\n                if (this.config.onItemClick) {\r\n                    itemElement.className = `${itemElement.className} ${this.config.itemClassName} clickable`;\r\n                    itemElement.onclick = () => this.handleItemClick(item, startIndex + index);\r\n                } else {\r\n                    itemElement.className = `${itemElement.className} ${this.config.itemClassName}`;\r\n                }\r\n\r\n                this.itemsListContainer!.appendChild(itemElement);\r\n            });\r\n\r\n            // Update end message and trigger\r\n            this.updateFooter();\r\n        }\r\n\r\n        private updateLoadingState() {\r\n            const container = this.element?.querySelector(`.${bb_.container}`);\r\n            if (!container) return;\r\n\r\n            // Find or create loading indicator\r\n            let loadingEl = container.querySelector(`.${bb_.loading}`) as HTMLElement;\r\n\r\n            if (this.loadState.loading) {\r\n                if (!loadingEl) {\r\n                    loadingEl = this.renderLoading() as any;\r\n                    container.appendChild(loadingEl);\r\n                }\r\n            } else {\r\n                if (loadingEl) {\r\n                    loadingEl.remove();\r\n                }\r\n            }\r\n        }\r\n\r\n        //  PUBLIC: Update footer to show empty state, trigger, or end message\r\n        public updateFooter() {\r\n            // The container is what ItemsLoader renders as its root\r\n            // So this.element points to the outermost div created by render()\r\n            // which has className this.config.containerClassName (bb_itemsLoaderContainer)\r\n            const container = this.element;\r\n            if (!container) {\r\n                return;\r\n            }\r\n\r\n            // Remove old footer elements AND empty state\r\n            container.querySelectorAll(`.${bb_.trigger}, .${bb_.end}, .${bb_.emptyState}`).forEach(el => {\r\n                el.remove();\r\n            });\r\n\r\n            //  NEW: Show empty state if there are no items after loading\r\n            if (this.items.length === 0 && !this.loadState.loading && this.config.emptyStateConfig) {\r\n                const emptyVNode = this.renderEmptyState();\r\n                const emptyElement = createDOMElement(emptyVNode);\r\n                container.appendChild(emptyElement);\r\n                return; // Don't add trigger/end message if showing empty state\r\n            }\r\n\r\n            // Add new footer elements\r\n            if (this.loadState.hasMore && !this.loadState.loading && this.items.length > 0) {\r\n                const triggerVNode = this.renderLoadMoreTrigger();\r\n                const triggerElement = createDOMElement(triggerVNode);\r\n                container.appendChild(triggerElement);\r\n            }\r\n\r\n            if (!this.loadState.hasMore && this.items.length > 0) {\r\n                const endMsgVNode = this.renderEndMessage();\r\n                const endMsgElement = createDOMElement(endMsgVNode);\r\n                container.appendChild(endMsgElement);\r\n            }\r\n        }\r\n\r\n        // \r\n        // INFINITE SCROLL SETUP\r\n        // \r\n\r\n        private setupInfiniteScroll() {\r\n            if (this.loadMoreObserver) {\r\n                this.loadMoreObserver.disconnect();\r\n            }\r\n\r\n            this.loadMoreObserver = new IntersectionObserver(\r\n                (entries) => {\r\n                    const [entry] = entries;\r\n\r\n                    if (entry.isIntersecting && !this.loadState.loading && this.loadState.hasMore) {\r\n                        this.loadMore();\r\n                    }\r\n                },\r\n                {\r\n                    threshold: 0.1,\r\n                    rootMargin: '50px'\r\n                }\r\n            );\r\n\r\n            this.reconnectObserver();\r\n        }\r\n\r\n        private reconnectObserver() {\r\n\r\n            if (!this.config.enableInfiniteScroll || !this.loadMoreObserver) {\r\n                return;\r\n            }\r\n\r\n            if (this.currentLoadMoreTrigger) {\r\n                this.loadMoreObserver.unobserve(this.currentLoadMoreTrigger);\r\n                this.currentLoadMoreTrigger = null;\r\n            }\r\n\r\n            const tryObserve = () => {\r\n                this.observerReconnectAttempts++;\r\n\r\n                // Always look from the root element (this.element)\r\n                const trigger = this.element?.querySelector('[data-load-more-trigger=\"true\"]');\r\n\r\n                if (trigger) {\r\n                    this.loadMoreObserver!.observe(trigger);\r\n                    this.currentLoadMoreTrigger = trigger;\r\n                    this.observerReconnectAttempts = 0;\r\n                    return true;\r\n                }\r\n\r\n                if (this.observerReconnectAttempts < this.maxObserverAttempts) {\r\n                    const delay = [50, 100, 200, 300, 500][Math.min(this.observerReconnectAttempts - 1, 4)];\r\n                    setTimeout(tryObserve, delay);\r\n                } else {\r\n                    this.observerReconnectAttempts = 0;\r\n                }\r\n\r\n                return false;\r\n            };\r\n\r\n            requestAnimationFrame(tryObserve);\r\n        }\r\n\r\n        private disconnectObserver() {\r\n            if (this.loadMoreObserver && this.currentLoadMoreTrigger) {\r\n                this.loadMoreObserver.unobserve(this.currentLoadMoreTrigger);\r\n                this.currentLoadMoreTrigger = null;\r\n            }\r\n        }\r\n\r\n        private setupScrollListener() {\r\n            requestAnimationFrame(() => {\r\n                // Try to find the scroll container - it should be the notifications loader div\r\n                this.scrollContainer = this.element?.querySelector('[data-notifications-loader]') as HTMLElement;\r\n\r\n                // If not found, try the element itself\r\n                if (!this.scrollContainer) {\r\n                    this.scrollContainer = this.element as HTMLElement;\r\n                }\r\n\r\n                if (this.scrollContainer) {\r\n                    this.scrollContainer.addEventListener('scroll', this.handleScroll);\r\n                }\r\n            });\r\n        }\r\n\r\n        private handleScroll = () => {\r\n            if (!this.scrollContainer || this.loadState.loading || !this.loadState.hasMore) {\r\n                return;\r\n            }\r\n\r\n            const { scrollTop, scrollHeight, clientHeight } = this.scrollContainer;\r\n            const distanceFromBottom = scrollHeight - scrollTop - clientHeight;\r\n\r\n            if (distanceFromBottom < this.config.scrollThreshold!) {\r\n                this.loadMore();\r\n            }\r\n        };\r\n\r\n        private handleItemClick = (item: T, index: number) => {\r\n            this.config.onItemClick?.(item, index);\r\n        };\r\n\r\n        // \r\n        // RENDER\r\n        // \r\n\r\n        render() {\r\n            if (this.items.length === 0 && !this.loadState.loading && this.loadState.page > 0 && this.config.emptyStateConfig) {\r\n                return this.renderEmptyState();\r\n            }\r\n\r\n            //  Don't include HTMLElements in VNode tree. Instead, create empty containers\r\n            // and populate them via DOM manipulation in appendNewItems()\r\n            return createElement('div', {\r\n                className: this.config.containerClassName\r\n            },\r\n                this.config.enableSearch ? this.renderSearchBar() : null,\r\n                createElement('div', {\r\n                    className: bb_.list,\r\n                    ref: (el: HTMLElement | null) => {\r\n                        if (el) {\r\n                            this.itemsListContainer = el;\r\n                        }\r\n                    }\r\n                }),\r\n\r\n                this.loadState.error ? this.renderError() : null,\r\n                this.loadState.loading ? this.renderLoading() : null,\r\n                this.loadState.hasMore && !this.loadState.loading && this.items.length > 0 ? this.renderLoadMoreTrigger() : null,\r\n                !this.loadState.hasMore && this.items.length > 0 ? this.renderEndMessage() : null\r\n            );\r\n        }\r\n\r\n        private renderSearchBar() {\r\n            return createElement('div', { className: bb_.searchbar, style: 'margin-bottom: 12px;' },\r\n                createElement('div', { className: 'row gap-sm', style: 'position: relative;' },\r\n                    createElement('i', { className: 'fas fa-search', style: 'position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--text-color-quaternary);' }),\r\n                    createElement('input', {\r\n                        type: 'text',\r\n                        className: '__input',\r\n                        placeholder: this.config.searchPlaceholder,\r\n                        style: 'padding-left: 36px; flex: 1;',\r\n                        ref: (el: HTMLElement | null) => {\r\n                            if (el) {\r\n                                this.searchInput = el as HTMLInputElement;\r\n                                this.searchInput.addEventListener('input', (e) => {\r\n                                    const query = (e.target as HTMLInputElement).value;\r\n                                    this.handleSearch(query);\r\n                                });\r\n                            }\r\n                        }\r\n                    })\r\n                )\r\n            );\r\n        }\r\n\r\n        private renderEmptyState() {\r\n            const config = this.config.emptyStateConfig!;\r\n            return createElement('div', { className: bb_.emptyState },\r\n                createElement('i', { className: `__icon ${config.icon}` }),\r\n                createElement('h3', { className: '__title' }, config.title),\r\n                createElement('p', { className: '__desc' }, config.description)\r\n            );\r\n        }\r\n\r\n        private renderLoading() {\r\n            return createElement('div', { className: bb_.loading },\r\n                createElement('i', { className: 'fas fa-spinner fa-spin' }),\r\n                createElement('p', {}, this.config.loadingText)\r\n            );\r\n        }\r\n\r\n        private renderError() {\r\n            return createElement('div', { className: bb_.error },\r\n                createElement('i', { className: 'fas fa-exclamation-triangle' }),\r\n                createElement('p', {}, this.loadState.error),\r\n                createElement('button', {\r\n                    className: `${bb_.button} secondary`,\r\n                    onclick: () => this.loadMore()\r\n                },\r\n                    createElement('i', { className: 'fas fa-redo' }),\r\n                    ' Retry'\r\n                )\r\n            );\r\n        }\r\n\r\n        private renderLoadMoreTrigger() {\r\n            return createElement('div', {\r\n                className: bb_.trigger,\r\n                'data-load-more-trigger': 'true',\r\n                style: 'height: 1px; visibility: hidden;'\r\n            });\r\n        }\r\n\r\n        private renderEndMessage() {\r\n            return createElement('div', { className: bb_.end },\r\n                createElement('i', { className: 'fas fa-check-circle' }),\r\n                t(`global.all_loaded`, { count: String(this.loadState.total), title: 'global.sm.notifications' })\r\n                // `All ${total} ${title} loaded`\r\n            );\r\n        }\r\n    }\r\n\r\n    export function createItemsLoader<T>(config: ItemsLoaderConfig<T>): ItemsLoader<T> {\r\n        const loader = new ItemsLoader<T>();\r\n        loader.initialize(config);\r\n        return loader;\r\n    }\r\n\r\n// ","// src/mod/help.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import type { ClassValue } from '../types';\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * Debounce function\r\n     * Delays function execution until after wait time\r\n     */\r\n    export function debounce<T extends (...args: never[]) => unknown>(\r\n        fn: T,\r\n        delay: number\r\n    ): (...args: Parameters<T>) => void {\r\n        let timeoutId: ReturnType<typeof setTimeout> | null = null;\r\n\r\n        return (...args: Parameters<T>): void => {\r\n            if (timeoutId !== null) {\r\n                clearTimeout(timeoutId);\r\n            }\r\n\r\n            timeoutId = setTimeout(() => {\r\n                timeoutId = null;\r\n                fn(...args);\r\n            }, delay);\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Throttle function\r\n     * Limits function execution to once per time period\r\n     */\r\n    export function throttle<T extends (...args: never[]) => unknown>(\r\n        fn: T,\r\n        delay: number\r\n    ): (...args: Parameters<T>) => void {\r\n        let lastCall = 0;\r\n        let timeoutId: ReturnType<typeof setTimeout> | null = null;\r\n\r\n        return (...args: Parameters<T>): void => {\r\n            const now = Date.now();\r\n            const timeSinceLastCall = now - lastCall;\r\n\r\n            if (timeSinceLastCall >= delay) {\r\n                lastCall = now;\r\n                fn(...args);\r\n            } else if (!timeoutId) {\r\n                // Schedule execution at the end of the throttle period\r\n                timeoutId = setTimeout(() => {\r\n                    lastCall = Date.now();\r\n                    timeoutId = null;\r\n                    fn(...args);\r\n                }, delay - timeSinceLastCall);\r\n            }\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Class names utility\r\n     * Combines class names conditionally\r\n     */\r\n    export function classNames(...classes: ClassValue[]): string {\r\n        const result: string[] = [];\r\n\r\n        for (const cls of classes) {\r\n            if (!cls) continue;\r\n\r\n            if (typeof cls === 'string') {\r\n                result.push(cls);\r\n            } else if (typeof cls === 'object') {\r\n                for (const [key, value] of Object.entries(cls)) {\r\n                    if (value) {\r\n                        result.push(key);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return result.join(' ');\r\n    }\r\n\r\n    /**\r\n     * Format date\r\n     * Simple date formatting utility with validation\r\n     */\r\n    export function formatDate(date: Date | string | number, format: string = 'YYYY-MM-DD'): string {\r\n        const d = date instanceof Date ? date : new Date(date);\r\n\r\n        // Validate date\r\n        if (isNaN(d.getTime())) {\r\n            throw new Error('Invalid date provided to formatDate');\r\n        }\r\n\r\n        const year = d.getFullYear();\r\n        const month = String(d.getMonth() + 1).padStart(2, '0');\r\n        const day = String(d.getDate()).padStart(2, '0');\r\n        const hours = String(d.getHours()).padStart(2, '0');\r\n        const minutes = String(d.getMinutes()).padStart(2, '0');\r\n        const seconds = String(d.getSeconds()).padStart(2, '0');\r\n\r\n        return format\r\n            .replace('YYYY', String(year))\r\n            .replace('MM', month)\r\n            .replace('DD', day)\r\n            .replace('HH', hours)\r\n            .replace('mm', minutes)\r\n            .replace('ss', seconds);\r\n    }\r\n\r\n    /**\r\n     * Deep clone object\r\n     * Handles Date, Array, and nested objects\r\n     */\r\n    export function deepClone<T>(obj: T): T {\r\n        if (obj === null || typeof obj !== 'object') {\r\n            return obj;\r\n        }\r\n\r\n        if (obj instanceof Date) {\r\n            return new Date(obj.getTime()) as T;\r\n        }\r\n\r\n        if (Array.isArray(obj)) {\r\n            return obj.map(item => deepClone(item)) as T;\r\n        }\r\n\r\n        if (obj instanceof RegExp) {\r\n            return new RegExp(obj.source, obj.flags) as T;\r\n        }\r\n\r\n        if (obj instanceof Map) {\r\n            const clonedMap = new Map();\r\n            obj.forEach((value, key) => {\r\n                clonedMap.set(deepClone(key), deepClone(value));\r\n            });\r\n            return clonedMap as T;\r\n        }\r\n\r\n        if (obj instanceof Set) {\r\n            const clonedSet = new Set();\r\n            obj.forEach(value => {\r\n                clonedSet.add(deepClone(value));\r\n            });\r\n            return clonedSet as T;\r\n        }\r\n\r\n        if (Object.prototype.toString.call(obj) === '[object Object]') {\r\n            const cloned: Record<string, unknown> = {};\r\n            for (const key in obj) {\r\n                if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n                    cloned[key] = deepClone((obj as Record<string, unknown>)[key]);\r\n                }\r\n            }\r\n            return cloned as T;\r\n        }\r\n\r\n        return obj;\r\n    }\r\n\r\n    /**\r\n     * Merge objects deeply\r\n     * Properly handles nested objects and arrays\r\n     */\r\n    export function deepMerge<T extends Record<string, unknown>>(\r\n        target: T,\r\n        ...sources: Partial<T>[]\r\n    ): T {\r\n        if (!sources.length) return target;\r\n\r\n        const source = sources.shift();\r\n        if (!source) return target;\r\n\r\n        if (isObject(target) && isObject(source)) {\r\n            for (const key in source) {\r\n                if (Object.prototype.hasOwnProperty.call(source, key)) {\r\n                    const sourceValue = source[key];\r\n                    const targetValue = target[key];\r\n\r\n                    if (sourceValue !== undefined) {\r\n                        if (isObject(sourceValue) && !Array.isArray(sourceValue)) {\r\n                            if (!targetValue || !isObject(targetValue)) {\r\n                                target[key] = {} as T[Extract<keyof T, string>];\r\n                            }\r\n                            deepMerge(target[key] as Record<string, unknown>, sourceValue as Record<string, unknown>);\r\n                        } else {\r\n                            target[key] = sourceValue as T[Extract<keyof T, string>];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return deepMerge(target, ...sources);\r\n    }\r\n\r\n    /**\r\n     * Helper to check if value is a plain object\r\n     */\r\n    function isObject(item: unknown): item is Record<string, unknown> {\r\n        return item !== null && typeof item === 'object' && !Array.isArray(item);\r\n    }\r\n\r\n    /**\r\n     * Generate unique ID with better entropy\r\n     */\r\n    let uniqueIdCounter = 0;\r\n\r\n    export function uniqueId(prefix: string = 'id'): string {\r\n        const timestamp = Date.now().toString(36);\r\n        const randomPart = Math.random().toString(36).substring(2, 11);\r\n        uniqueIdCounter = (uniqueIdCounter || 0) + 1;\r\n        const counter = uniqueIdCounter.toString(36);\r\n        return `${prefix}_${timestamp}_${randomPart}_${counter}`;\r\n    }\r\n\r\n    /**\r\n     * Sleep/delay utility\r\n     */\r\n    export function sleep(ms: number): Promise<void> {\r\n        if (ms < 0) {\r\n            throw new Error('Sleep duration must be non-negative');\r\n        }\r\n        return new Promise(resolve => setTimeout(resolve, ms));\r\n    }\r\n\r\n    /**\r\n     * Check if value is empty\r\n     */\r\n    export function isEmpty(value: unknown): boolean {\r\n        if (value == null) return true;\r\n        if (typeof value === 'string') return value.trim().length === 0;\r\n        if (Array.isArray(value)) return value.length === 0;\r\n        if (value instanceof Map || value instanceof Set) return value.size === 0;\r\n        if (typeof value === 'object') return Object.keys(value).length === 0;\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Capitalize first letter\r\n     */\r\n    export function capitalize(str: string): string {\r\n        if (!str) return '';\r\n        return str.charAt(0).toUpperCase() + str.slice(1);\r\n    }\r\n\r\n    /**\r\n     * Convert to kebab-case\r\n     */\r\n    export function kebabCase(str: string): string {\r\n        if (!str) return '';\r\n        return str\r\n            .replace(/([a-z])([A-Z])/g, '$1-$2')\r\n            .replace(/[\\s_]+/g, '-')\r\n            .toLowerCase();\r\n    }\r\n\r\n    /**\r\n     * Convert to camelCase\r\n     */\r\n    export function camelCase(str: string): string {\r\n        if (!str) return '';\r\n        return str\r\n            .replace(/[-_\\s]+(.)?/g, (_, char: string) => (char ? char.toUpperCase() : ''))\r\n            .replace(/^[A-Z]/, char => char.toLowerCase());\r\n    }\r\n\r\n    /**\r\n     * Convert to PascalCase\r\n     */\r\n    export function pascalCase(str: string): string {\r\n        if (!str) return '';\r\n        const camel = camelCase(str);\r\n        return camel.charAt(0).toUpperCase() + camel.slice(1);\r\n    }\r\n\r\n    /**\r\n     * Truncate string\r\n     */\r\n    export function truncate(str: string, length: number, suffix: string = '...'): string {\r\n        if (!str || str.length <= length) return str;\r\n        return str.substring(0, length - suffix.length) + suffix;\r\n    }\r\n\r\n    /**\r\n     * Parse query string\r\n     */\r\n    export function parseQuery(queryString: string): Record<string, string | string[]> {\r\n        const query: Record<string, string | string[]> = {};\r\n        const cleaned = queryString.replace(/^\\?/, '');\r\n\r\n        if (!cleaned) return query;\r\n\r\n        const pairs = cleaned.split('&');\r\n\r\n        for (const pair of pairs) {\r\n            const [key, value] = pair.split('=').map(decodeURIComponent);\r\n            if (!key) continue;\r\n\r\n            const decodedValue = value || '';\r\n\r\n            // Handle array parameters (key[]=value)\r\n            if (key.endsWith('[]')) {\r\n                const actualKey = key.slice(0, -2);\r\n                if (!query[actualKey]) {\r\n                    query[actualKey] = [];\r\n                }\r\n                (query[actualKey] as string[]).push(decodedValue);\r\n            } else {\r\n                query[key] = decodedValue;\r\n            }\r\n        }\r\n\r\n        return query;\r\n    }\r\n\r\n    /**\r\n     * Stringify object to query string\r\n     */\r\n    export function stringifyQuery(obj: Record<string, unknown>): string {\r\n        const pairs: string[] = [];\r\n\r\n        for (const [key, value] of Object.entries(obj)) {\r\n            if (value == null) continue;\r\n\r\n            if (Array.isArray(value)) {\r\n                // Handle arrays\r\n                for (const item of value) {\r\n                    if (item != null) {\r\n                        pairs.push(`${encodeURIComponent(key)}[]=${encodeURIComponent(String(item))}`);\r\n                    }\r\n                }\r\n            } else {\r\n                pairs.push(`${encodeURIComponent(key)}=${encodeURIComponent(String(value))}`);\r\n            }\r\n        }\r\n\r\n        return pairs.length > 0 ? `?${pairs.join('&')}` : '';\r\n    }\r\n\r\n    /**\r\n     * Clamp a number between min and max\r\n     */\r\n    export function clamp(value: number, min: number, max: number): number {\r\n        return Math.min(Math.max(value, min), max);\r\n    }\r\n\r\n    /**\r\n     * Check if code is running in browser\r\n     */\r\n    export function isBrowser(): boolean {\r\n        return typeof window !== 'undefined' && typeof document !== 'undefined';\r\n    }\r\n\r\n    /**\r\n     * Safe JSON parse with fallback\r\n     */\r\n    export function safeJsonParse<T = unknown>(json: string, fallback: T): T {\r\n        try {\r\n            return JSON.parse(json) as T;\r\n        } catch {\r\n            return fallback;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Export all utilities\r\n     */\r\n    export const utils = {\r\n        debounce,\r\n        throttle,\r\n        classNames,\r\n        formatDate,\r\n        deepClone,\r\n        deepMerge,\r\n        uniqueId,\r\n        sleep,\r\n        isEmpty,\r\n        capitalize,\r\n        kebabCase,\r\n        camelCase,\r\n        pascalCase,\r\n        truncate,\r\n        parseQuery,\r\n        stringifyQuery,\r\n        clamp,\r\n        isBrowser,\r\n        safeJsonParse,\r\n    };\r\n\r\n// ","// src/mod/utils/intersection-observer.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    /**\r\n     * Configuration for intersection observer\r\n     */\r\n    export interface IntersectionConfig {\r\n        root?: Element | null;\r\n        rootMargin?: string;\r\n        threshold?: number | number[];\r\n        onEnter?: (entry: IntersectionObserverEntry) => void;\r\n        onExit?: (entry: IntersectionObserverEntry) => void;\r\n        once?: boolean; // If true, unobserve after first intersection\r\n    }\r\n\r\n    /**\r\n     * Simple wrapper around Intersection Observer API\r\n     * Makes it easy to detect when elements become visible\r\n     */\r\n    export class VisibilityObserver {\r\n        private observer: IntersectionObserver | null = null;\r\n        private observedElements = new Map<Element, boolean>(); // Track visibility state\r\n\r\n        constructor(config: IntersectionConfig) {\r\n            this.observer = new IntersectionObserver((entries) => {\r\n                entries.forEach(entry => {\r\n                    const wasVisible = this.observedElements.get(entry.target) ?? false;\r\n                    const isNowVisible = entry.isIntersecting;\r\n\r\n                    // Only trigger callbacks on state change\r\n                    if (isNowVisible && !wasVisible) {\r\n                        // Element entered viewport\r\n                        this.observedElements.set(entry.target, true);\r\n                        config.onEnter?.(entry);\r\n\r\n                        if (config.once) {\r\n                            this.unobserve(entry.target);\r\n                        }\r\n                    } else if (!isNowVisible && wasVisible) {\r\n                        // Element left viewport\r\n                        this.observedElements.set(entry.target, false);\r\n                        config.onExit?.(entry);\r\n                    }\r\n                });\r\n            }, {\r\n                root: config.root || null,\r\n                rootMargin: config.rootMargin || '0px',\r\n                threshold: config.threshold ?? 0.1\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Start observing an element\r\n         */\r\n        observe(element: Element): void {\r\n            if (this.observer) {\r\n                this.observer.observe(element);\r\n                this.observedElements.set(element, false);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Stop observing an element\r\n         */\r\n        unobserve(element: Element): void {\r\n            if (this.observer) {\r\n                this.observer.unobserve(element);\r\n                this.observedElements.delete(element);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Disconnect the observer\r\n         */\r\n        disconnect(): void {\r\n            if (this.observer) {\r\n                this.observer.disconnect();\r\n                this.observedElements.clear();\r\n            }\r\n        }\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * Helper function to observe when element becomes visible (once)\r\n     * @param element - Element to observe\r\n     * @param callback - Callback when element becomes visible\r\n     * @returns Function to stop observing\r\n     */\r\n    export function observeVisibility(\r\n        element: Element,\r\n        callback: (entry: IntersectionObserverEntry) => void\r\n    ): () => void {\r\n        const observer = new IntersectionObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    callback(entry);\r\n                    observer.unobserve(element);\r\n                }\r\n            });\r\n        }, {\r\n            threshold: 0.1\r\n        });\r\n\r\n        observer.observe(element);\r\n\r\n        return () => observer.disconnect();\r\n    }\r\n\r\n// \r\n","// src/mod/utils/intersection-observer.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    type DropdownId = string;\r\n\r\n    interface DropdownConfig {\r\n        id: DropdownId;\r\n        element: HTMLElement;\r\n        parentId?: DropdownId;  // Parent dropdown ID for hierarchy\r\n        onOpen?: () => void;\r\n        onClose?: () => void;\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class DropdownManager {\r\n        private static instance: DropdownManager;\r\n        private dropdowns = new Map<DropdownId, DropdownConfig>();\r\n        private openDropdowns = new Set<DropdownId>();  // Track ALL open dropdowns, not just one\r\n        private clickHandler?: EventListener;\r\n\r\n        private constructor() {\r\n            this.setupGlobalClickHandler();\r\n        }\r\n\r\n        /**\r\n         * Get singleton instance\r\n         */\r\n        public static getInstance(): DropdownManager {\r\n            if (!DropdownManager.instance) {\r\n                DropdownManager.instance = new DropdownManager();\r\n            }\r\n            return DropdownManager.instance;\r\n        }\r\n\r\n        /**\r\n         * Register a dropdown\r\n         */\r\n        public register(id: DropdownId, element: HTMLElement, callbacks?: { onOpen?: () => void; onClose?: () => void }, parentId?: DropdownId): void {\r\n            this.dropdowns.set(id, {\r\n                id,\r\n                element,\r\n                parentId,\r\n                onOpen: callbacks?.onOpen,\r\n                onClose: callbacks?.onClose\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Unregister a dropdown\r\n         */\r\n        public unregister(id: DropdownId): void {\r\n            if (this.openDropdowns.has(id)) {\r\n                this.closeDropdown(id);\r\n            }\r\n            this.dropdowns.delete(id);\r\n        }\r\n\r\n        /**\r\n         * Open a dropdown and close all others (except parent chain and children)\r\n         */\r\n        public openDropdown(id: DropdownId): void {\r\n            const config = this.dropdowns.get(id);\r\n            if (!config) {\r\n                console.warn('DropdownManager: Dropdown not registered:', id);\r\n                return;\r\n            }\r\n\r\n            // If already open, just return\r\n            if (this.openDropdowns.has(id)) {\r\n                return;\r\n            }\r\n\r\n            // Get parent chain for this dropdown\r\n            const parentChain = this.getParentChain(id);\r\n\r\n            // Collect IDs to close (don't modify set while iterating)\r\n            const toClose: DropdownId[] = [];\r\n            for (const openId of this.openDropdowns) {\r\n                const openConfig = this.dropdowns.get(openId);\r\n                if (!openConfig) continue;\r\n\r\n                // Keep it open if it's in the parent chain\r\n                if (parentChain.includes(openId)) continue;\r\n\r\n                // Keep it open if it's a child of the one we're opening\r\n                if (this.getParentChain(openId).includes(id)) continue;\r\n\r\n                // Otherwise mark for closing (all others including siblings)\r\n                toClose.push(openId);\r\n            }\r\n\r\n            // Close collected dropdowns\r\n            for (const closeId of toClose) {\r\n                this.closeDropdown(closeId);\r\n            }\r\n\r\n            // Add this dropdown to open set and call onOpen callback\r\n            this.openDropdowns.add(id);\r\n            if (config.onOpen) {\r\n                config.onOpen();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get the parent chain for a dropdown (including itself)\r\n         */\r\n        private getParentChain(id: DropdownId): DropdownId[] {\r\n            const chain: DropdownId[] = [id];\r\n            let currentId: DropdownId | undefined = id;\r\n\r\n            while (currentId) {\r\n                const config = this.dropdowns.get(currentId);\r\n                if (config?.parentId) {\r\n                    chain.push(config.parentId);\r\n                    currentId = config.parentId;\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n\r\n            return chain;\r\n        }\r\n\r\n        /**\r\n         * Close a specific dropdown and any children it has\r\n         */\r\n        public closeDropdown(id: DropdownId): void {\r\n            if (!this.openDropdowns.has(id)) {\r\n                return;\r\n            }\r\n\r\n            // Close any child dropdowns first (recursively)\r\n            const childrenToClose: DropdownId[] = [];\r\n            for (const openId of this.openDropdowns) {\r\n                const openConfig = this.dropdowns.get(openId);\r\n                if (openConfig?.parentId === id) {\r\n                    childrenToClose.push(openId);\r\n                }\r\n            }\r\n\r\n            // Close all children first\r\n            for (const childId of childrenToClose) {\r\n                this.closeDropdown(childId);\r\n            }\r\n\r\n            // Now close this dropdown and call onClose callback\r\n            this.openDropdowns.delete(id);\r\n            const config = this.dropdowns.get(id);\r\n            if (config?.onClose) {\r\n                config.onClose();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Close all open dropdowns\r\n         */\r\n        public closeAllDropdowns(): void {\r\n            if (this.openDropdowns.size === 0) {\r\n                return;\r\n            }\r\n            \r\n            // Get all currently open dropdowns (make a copy to avoid modification during iteration)\r\n            const toClose = Array.from(this.openDropdowns);\r\n            \r\n            // Close top-level dropdowns (ones without parents that are open)\r\n            for (const id of toClose) {\r\n                const config = this.dropdowns.get(id);\r\n                const parentInOpen = config?.parentId && this.openDropdowns.has(config.parentId);\r\n                \r\n                // Only close top-level dropdowns (those whose parents aren't open)\r\n                if (!parentInOpen) {\r\n                    this.closeDropdown(id);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Check if a dropdown is open\r\n         */\r\n        public isOpen(id: DropdownId): boolean {\r\n            return this.openDropdowns.has(id);\r\n        }\r\n\r\n        /**\r\n         * Check if any dropdown is open\r\n         */\r\n        public isAnyOpen(): boolean {\r\n            return this.openDropdowns.size > 0;\r\n        }\r\n\r\n        /**\r\n         * Setup global click handler to close dropdowns when clicking outside\r\n         */\r\n        private setupGlobalClickHandler(): void {\r\n            this.clickHandler = (event: Event) => {\r\n                const target = event.target as HTMLElement;\r\n\r\n                // Check if clicking on any dropdown element (including nested ones)\r\n                for (const [, config] of this.dropdowns) {\r\n                    if (config.element.contains(target)) {\r\n                        // Clicked inside this dropdown, don't close any\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                // Close all dropdowns if clicking outside all of them\r\n                this.closeAllDropdowns();\r\n            };\r\n\r\n            // Use bubble phase (false), not capture phase\r\n            document.addEventListener('click', this.clickHandler, false);\r\n        }\r\n\r\n        /**\r\n         * Cleanup - removes global click handler\r\n         */\r\n        public destroy(): void {\r\n            if (this.clickHandler) {\r\n                document.removeEventListener('click', this.clickHandler, false);\r\n                this.clickHandler = undefined;\r\n            }\r\n            this.dropdowns.clear();\r\n            this.openDropdowns.clear();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Convenience function to get dropdown manager instance\r\n     */\r\n    export function getDropdownManager(): DropdownManager {\r\n        return DropdownManager.getInstance();\r\n    }\r\n\r\n// \r\n","// src/mod/utils/time_formatter.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    import { t } from \"../services/i18n\";\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * Formats a timestamp into a relative time string with translation\r\n     * Returns the formatted time and original ISO string as title attribute\r\n     *\r\n     * @param timestamp - ISO 8601 timestamp string or Date object\r\n     * @returns Object with formatted time and original timestamp for title\r\n     */\r\n    export function formatRelativeTime(timestamp: string | Date) {\r\n        const date = typeof timestamp === 'string' ? new Date(timestamp) : timestamp;\r\n        const now = new Date();\r\n        const diffMs = now.getTime() - date.getTime();\r\n        const diffSecs = Math.floor(diffMs / 1000);\r\n        const diffMins = Math.floor(diffSecs / 60);\r\n        const diffHours = Math.floor(diffMins / 60);\r\n        const diffDays = Math.floor(diffHours / 24);\r\n        const diffWeeks = Math.floor(diffDays / 7);\r\n        const diffMonths = Math.floor(diffDays / 30);\r\n        const diffYears = Math.floor(diffDays / 365);\r\n\r\n        let formatted = '';\r\n\r\n        if (diffSecs < 0) {\r\n            // Future date\r\n            formatted = t('time.just_now');\r\n        } else if (diffSecs < 60) {\r\n            // Less than a minute\r\n            formatted = t('time.just_now');\r\n        } else if (diffMins < 2) {\r\n            // 1 minute\r\n            formatted = t('time.minute_ago');\r\n        } else if (diffMins < 60) {\r\n            // Multiple minutes\r\n            formatted = t('time.minutes_ago', { count: diffMins.toString() });\r\n        } else if (diffHours < 2) {\r\n            // 1 hour\r\n            formatted = t('time.hour_ago');\r\n        } else if (diffHours < 24) {\r\n            // Multiple hours\r\n            formatted = t('time.hours_ago', { count: diffHours.toString() });\r\n        } else if (diffDays < 2) {\r\n            // 1 day\r\n            formatted = t('time.day_ago');\r\n        } else if (diffDays < 7) {\r\n            // Multiple days\r\n            formatted = t('time.days_ago', { count: diffDays.toString() });\r\n        } else if (diffWeeks < 2) {\r\n            // 1 week\r\n            formatted = t('time.week_ago');\r\n        } else if (diffWeeks < 4) {\r\n            // Multiple weeks\r\n            formatted = t('time.weeks_ago', { count: diffWeeks.toString() });\r\n        } else if (diffMonths < 2) {\r\n            // 1 month\r\n            formatted = t('time.month_ago');\r\n        } else if (diffMonths < 12) {\r\n            // Multiple months\r\n            formatted = t('time.months_ago', { count: diffMonths.toString() });\r\n        } else if (diffYears < 2) {\r\n            // 1 year\r\n            formatted = t('time.year_ago');\r\n        } else {\r\n            // Multiple years\r\n            formatted = t('time.years_ago', { count: diffYears.toString() });\r\n        }\r\n\r\n        return {\r\n            formatted,\r\n            originalDate: date.toISOString(),\r\n            title: date.toLocaleString()\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Creates an HTML time element with relative time and title attribute\r\n     * Usage: place this directly in your component render\r\n     *\r\n     * @param timestamp - ISO 8601 timestamp string or Date object\r\n     * @returns Object with text content and title for use in createElement\r\n     */\r\n    export function getTimeDisplay(timestamp: string | Date) {\r\n        const { formatted, title } = formatRelativeTime(timestamp);\r\n        return {\r\n            text: formatted,\r\n            title\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Format time for display with full date fallback\r\n     * @param timestamp - ISO 8601 timestamp string or Date object\r\n     * @returns Formatted string like \"2 hours ago\"\r\n     */\r\n    export function formatTimeAgo(timestamp: string | Date): string {\r\n        return formatRelativeTime(timestamp).formatted;\r\n    }\r\n\r\n    /**\r\n     * Get the ISO string for title attribute\r\n     * @param timestamp - ISO 8601 timestamp string or Date object\r\n     * @returns Localized full date string\r\n     */\r\n    export function getTimeTitle(timestamp: string | Date): string {\r\n        return formatRelativeTime(timestamp).title;\r\n    }\r\n\r\n// \r\n","// src/main.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    // Config VDOM\r\n    import { setConfig } from '@je-es/vdom';\r\n    setConfig({\r\n        devMode: false,             // Enable warnings\r\n        sanitizeHTML: true,         // XSS protection\r\n        // onError: (err) => {      // Custom error handler\r\n        //     console.error('VDOM Error:', err);\r\n        // }\r\n    });\r\n\r\n    // Types\r\n    export * from './types';\r\n\r\n    // Core\r\n    export * from './mod/core/component';\r\n    export * from './mod/core/decorators';\r\n    export * from './mod/core/scheduler';\r\n    export * from './mod/core/context';\r\n    export * from './mod/core/hooks';\r\n    export * from './mod/core/router';\r\n    export * from './mod/core/store';\r\n    export * from './mod/core/client';\r\n    export * from './mod/core/styles';\r\n\r\n    // Services\r\n    export * from './mod/services/i18n';\r\n\r\n    // Components\r\n    export * from './mod/components/toast';\r\n    export * from './mod/components/loader';\r\n    export * from './mod/components/popup';\r\n    export * from './mod/components/smart_form';\r\n    export * from './mod/components/tabbed_view';\r\n    export * from './mod/components/items_loader';\r\n\r\n    // Utilities\r\n    export * from './mod/help';\r\n    export * from './mod/utils/intersection-observer';\r\n    export * from './mod/utils/dropdown-manager';\r\n    export * from './mod/utils/time_formatter';\r\n\r\n    // Third-party packages\r\n    export { api, http, configureApi, getApiConfig, resetApiConfig, type ApiError } from '@je-es/capi';\r\n    export { createElement, html, patch, createDOMElement } from '@je-es/vdom';\r\n\r\n// "]}