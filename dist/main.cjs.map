{"version":3,"sources":["../src/mod/core/styles.ts","../src/mod/core/scheduler.ts","../src/mod/core/component.ts","../src/mod/core/decorators.ts","../src/mod/core/context.ts","../src/mod/core/hooks.ts","../src/mod/core/i18n.ts","../src/mod/core/router.ts","../src/mod/core/store.ts","../src/mod/services/fa_config.ts","../src/mod/core/client.ts","../src/mod/helpers/index.ts","../src/mod/components/bb_map.json","../src/mod/components/toast.ts","../src/mod/components/loader.ts","../src/mod/components/smart_form.ts","../src/mod/components/popup.ts","../src/mod/components/tabbed_view.ts","../src/mod/components/items_loader.ts","../src/mod/components/dropdown.ts","../src/mod/help.ts","../src/mod/utils/intersection_observer.ts","../src/mod/utils/time_formatter.ts","../src/main.ts"],"names":["StyleManager","css","componentName","id","styleElement","scopedCSS","scope","lines","scopedLines","braceCount","line","selector","rest","scopedSelector","element","strings","values","result","i","UpdateScheduler","callback","callbacks","error","scheduler","Component","props","initialState","partialState","newState","prevState","hasChanged","key","newProps","prevProps","updater","prevIsScheduled","container","unsubscribe","name","el","compute","deps","cached","subscription","fn","delay","timeoutId","args","lastCall","now","timeSinceLastCall","newVNode","parent","index","oldVDomNode","newVDomNode","patch","data","originalElement","newElement","attrs","attr","child","vnode","convertedProps","value","convertedChildren","eventName","errorInfo","prevDeps","nextDeps","dep","propertyName","newValue","oldValue","watchers","methodName","state","target","context","propertyKey","instance","initialValue","hiddenKey","inst","targetConstructor","initKey","computed","targetOrGetter","descriptor","ctx","originalGetter","cacheKey","dirtyKey","watch","decorator","targetOrMethod","Context","defaultValue","subscriber","createContext","Provider","children","html","useContext","component","CombinedContext","initialValues","createCombinedContext","currentComponent","currentHookIndex","hookStates","setHookContext","clearHookContext","getHookStates","useState","hookIndex","states","setState","nextValue","useEffect","effect","areDepsEqual","cleanup","useMemo","factory","useCallback","useRef","useReducer","reducer","dispatch","action","useLocalStorage","storedValue","setStoredValue","item","prevValue","valueToStore","useDebounce","debouncedValue","setDebouncedValue","handler","usePrevious","ref","useToggle","setValue","toggle","v","useInterval","savedCallback","useFetch","url","options","setData","loading","setLoading","setError","fetchData","response","json","e","useWindowSize","size","setSize","handleResize","useEventListener","savedHandler","eventListener","event","createFunctionalComponent","displayName","FunctionalComponent","I18nManager","config","lang","translations","flattened","obj","prefix","newKey","trans","params","translation","param","paramValue","currentLang","htmlString","processedString","regex","match","openingTag","pairedContent","selfClosingTag","textContent","tagName","createElement","updateCallback","urlPattern","urls","pattern","langCodes","fullUrl","langMatch","listener","i18nInstance","getI18n","t","tLang","tHtml","setLanguage","setLanguageAsync","staticPath","manager","currentTranslations","baseUrl","getCurrentLanguage","loadLanguage","loadTranslations","getSupportedLanguages","hasKey","getTranslations","createTranslator","loadFromUrl","initializeI18n","setupI18n","langToLoad","langUrl","loadLanguageFile","path","Router","routes","mode","base","scrollBehavior","delta","hook","exact","r","route","matchedRoute","link","href","to","from","guard","resolve","nextPath","ComponentClass","ComponentCtor","proto","exp","errorMessage","normalizedPath","cleanPath","paramNames","regexPattern","_","paramName","search","query","pair","router","navigate","replace","goBack","goForward","getCurrentPath","isCurrentPath","isCurrentPathPrefix","reloadRoute","currentPath","navigateWithQuery","getQueryParams","getQueryParam","Store","stored","update","middleware","updates","prevNotify","shouldNotify","stateCopy","createStore","createComputedStore","stores","computer","computedStore","s","store","connect","mapStateToProps","defaultFATheme","getDefaultFATheme","setDefaultFATheme","theme","initializeFAConfig","faConfig","client","_config","stylesDir","outputPath","sass","writeFileSync","existsSync","mkdirSync","join","dirname","outputDir","outputFile","mainScssFile","fullOutputPath","dir","readdirSync","statSync","extname","files","entries","entry","fullPath","stat","entryDir","eventType","filename","capiConfig","configureApi","ClassMaker","icon","style","resolvedStyle","level","className","baseClass","levelClass","CM","ElementCreator","div","span","h1","h2","h3","h4","h5","h6","p","img","a","button","input","select","option","textarea","form","EC","EventsManager","listeners","sum","set","getToast","getPopup","getLoader","hideLoader","showLoader","message","Window","bb_map_exports","__export","bb_map_default","dropdown","itemsLoader","loader","popup","tabbedView","toast","bb_","Toast","type","duration","translateKey","msg","iconMap","displayMessage","__decorateClass","globalToast","initToast","toastContainer","Loader","containerClasses","spinnerClass","text","progress","increment","FORM_STYLES","SmartFormComponent","allFields","groupItem","field","fieldName","f","validation","stringValue","isValid","errors","firstErrorField","api","labelConfig","labelText","labelIcon","labelTitle","labelAttrs","label","bbMap","buttons","b","btn","buttonType","isVisible","inputElement","toggleBtn","iconSpan","rules","rule","buttonElements","labelNode","fieldClass","errorMsg","optionNodes","opt","isChecked","checkboxClass","inputType","buttonKey","buttonConfig","isSubmitButton","isDisabled","buttonLabel","fieldNodes","groupItems","formClass","SmartForm","Popup","sizeClass","variantClass","_reject","wrappedFormConfig","lastPopup","globalPopup","initPopup","popupContainer","TabbedView","savedTab","tabId","tab","containerClass","headerClass","isActive","tabClass","contentClass","activeTab","wrappedProps","wrappedVNode","createTabbedView","view","mountTabbedView","ItemsLoader","scrollTop","scrollHeight","clientHeight","scrollContainer","savedScrollTop","savedScrollHeight","nextPage","newItems","total","scrollHeightDiff","newFilters","searchQuery","updatedItems","itemIndex","itemId","shouldTrack","items","containerRect","rect","viewedItemsArray","itemIds","fragment","startIndex","actualIndex","itemElement","loadingEl","loadingVNode","emptyVNode","emptyElement","createDOMElement","triggerVNode","triggerElement","endMsgVNode","endMsgElement","tryObserve","trigger","candidates","candidate","page","separator","headers","token","createItemsLoader","DropdownManagerSingleton","_DropdownManagerSingleton","d","ancestorId","descendantId","currentId","ancestors","parentId","descendants","addChildren","childId","sibling","current","dropdownId","clickedDropdownId","rootDropdown","rootId","dropdownManager","Dropdown","open","menu","menuContainer","menuVNode","menuElement","customElement","triggerClassName","arrowClasses","isSelected","itemClassName","buttonProps","createDropdown","debounce","throttle","classNames","classes","cls","formatDate","date","format","year","month","day","hours","minutes","seconds","deepClone","clonedMap","clonedSet","cloned","deepMerge","sources","source","isObject","sourceValue","targetValue","uniqueIdCounter","uniqueId","timestamp","randomPart","counter","sleep","ms","isEmpty","capitalize","str","kebabCase","camelCase","char","pascalCase","camel","truncate","length","suffix","parseQuery","queryString","cleaned","pairs","decodedValue","actualKey","stringifyQuery","clamp","min","max","isBrowser","safeJsonParse","fallback","utils","VisibilityObserver","wasVisible","isNowVisible","observeVisibility","observer","formatRelativeTime","diffMs","diffSecs","diffMins","diffHours","diffDays","diffWeeks","diffMonths","diffYears","formatted","getTimeDisplay","title","formatTimeAgo","getTimeTitle","setConfig"],"mappings":"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","file":"main.cjs","sourcesContent":["// src/mod/core/styles.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * Style Manager - handles CSS injection and scoping\r\n     */\r\n    export class StyleManager {\r\n        private static styles = new Map<string, HTMLStyleElement>();\r\n        private static scopeCounter = 0;\r\n\r\n        /**\r\n         * Inject styles into document\r\n         */\r\n        static inject(css: string, componentName?: string): string {\r\n            const id = componentName || `style-${this.scopeCounter++}`;\r\n\r\n            if (this.styles.has(id)) {\r\n                return id;\r\n            }\r\n\r\n            const styleElement = document.createElement('style');\r\n            styleElement.setAttribute('data-component', id);\r\n\r\n            // Scope the CSS\r\n            const scopedCSS = this.scopeStyles(css, id);\r\n            styleElement.textContent = scopedCSS;\r\n\r\n            document.head.appendChild(styleElement);\r\n            this.styles.set(id, styleElement);\r\n\r\n            return id;\r\n        }\r\n\r\n        /**\r\n         * Remove styles from document\r\n         */\r\n        static remove(id: string): void {\r\n            const styleElement = this.styles.get(id);\r\n            if (styleElement && styleElement.parentElement) {\r\n                styleElement.parentElement.removeChild(styleElement);\r\n                this.styles.delete(id);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Scope CSS selectors\r\n         */\r\n        private static scopeStyles(css: string, scope: string): string {\r\n            // Simple scoping - prefix all selectors with [data-scope=\"id\"]\r\n            // This is a basic implementation. A production version would use a proper CSS parser\r\n\r\n            const lines = css.split('\\n');\r\n            const scopedLines: string[] = [];\r\n            let inMediaQuery = false;\r\n            let braceCount = 0;\r\n\r\n            for (let line of lines) {\r\n                line = line.trim();\r\n\r\n                // Handle media queries\r\n                if (line.startsWith('@media')) {\r\n                    inMediaQuery = true;\r\n                    scopedLines.push(line);\r\n                    continue;\r\n                }\r\n\r\n                // Count braces\r\n                braceCount += (line.match(/{/g) || []).length;\r\n                braceCount -= (line.match(/}/g) || []).length;\r\n\r\n                if (inMediaQuery && braceCount === 0) {\r\n                    inMediaQuery = false;\r\n                }\r\n\r\n                // Scope selectors\r\n                if (line.includes('{') && !line.startsWith('@') && !line.startsWith('}')) {\r\n                    const selector = line.substring(0, line.indexOf('{')).trim();\r\n                    const rest = line.substring(line.indexOf('{'));\r\n\r\n                    // Don't scope :root, *, or @-rules\r\n                    if (selector === ':root' || selector === '*' || line.startsWith('@')) {\r\n                        scopedLines.push(line);\r\n                    } else {\r\n                        const scopedSelector = `[data-scope=\"${scope}\"] ${selector}`;\r\n                        scopedLines.push(`${scopedSelector} ${rest}`);\r\n                    }\r\n                } else {\r\n                    scopedLines.push(line);\r\n                }\r\n            }\r\n\r\n            return scopedLines.join('\\n');\r\n        }\r\n\r\n        /**\r\n         * Clear all styles\r\n         */\r\n        static clear(): void {\r\n            for (const [, element] of this.styles) {\r\n                if (element.parentElement) {\r\n                    element.parentElement.removeChild(element);\r\n                }\r\n            }\r\n            this.styles.clear();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * CSS template literal tag\r\n     * Usage: css`.class { color: red; }`\r\n     */\r\n    export function css(\r\n        strings: TemplateStringsArray,\r\n        ...values: (string | number | boolean | null | undefined)[]\r\n    ): string {\r\n        let result = '';\r\n\r\n        for (let i = 0; i < strings.length; i++) {\r\n            result += strings[i];\r\n            if (i < values.length) {\r\n                result += values[i];\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n// ","// src/mod/core/scheduler.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    type UpdateCallback = () => void;\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * Update Scheduler\r\n     * Batches multiple state changes into a single render\r\n     */\r\n    class UpdateScheduler {\r\n        private queue = new Set<UpdateCallback>();\r\n        private isFlushScheduled = false;\r\n        private isFlushing = false;\r\n\r\n        /**\r\n         * Schedule a component update\r\n         */\r\n        schedule(callback: UpdateCallback): void {\r\n            if (this.isFlushing) {\r\n                // If we're currently flushing, schedule for next batch\r\n                requestAnimationFrame(() => this.schedule(callback));\r\n                return;\r\n            }\r\n\r\n            this.queue.add(callback);\r\n\r\n            if (!this.isFlushScheduled) {\r\n                this.isFlushScheduled = true;\r\n\r\n                // Use microtask for immediate batching, then RAF for rendering\r\n                Promise.resolve().then(() => {\r\n                    requestAnimationFrame(() => this.flush());\r\n                });\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Force immediate flush (for urgent updates)\r\n         */\r\n        flushSync(callback: UpdateCallback): void {\r\n            callback();\r\n        }\r\n\r\n        /**\r\n         * Flush all pending updates\r\n         */\r\n        private flush(): void {\r\n            if (this.queue.size === 0) {\r\n                this.isFlushScheduled = false;\r\n                return;\r\n            }\r\n\r\n            this.isFlushing = true;\r\n            this.isFlushScheduled = false;\r\n\r\n            const callbacks = Array.from(this.queue);\r\n            this.queue.clear();\r\n\r\n            // Execute all updates\r\n            for (const callback of callbacks) {\r\n                try {\r\n                    callback();\r\n                } catch (error) {\r\n                    console.error('Error during update:', error);\r\n                }\r\n            }\r\n\r\n            this.isFlushing = false;\r\n\r\n            // If new updates were scheduled during flush, process them\r\n            if (this.queue.size > 0) {\r\n                this.schedule(() => {});\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Clear all pending updates\r\n         */\r\n        clear(): void {\r\n            this.queue.clear();\r\n            this.isFlushScheduled = false;\r\n        }\r\n\r\n        /**\r\n         * Get queue size (for debugging)\r\n         */\r\n        get size(): number {\r\n            return this.queue.size;\r\n        }\r\n    }\r\n\r\n    // Export singleton instance\r\n    export const scheduler = new UpdateScheduler();\r\n\r\n// ","// src/mod/core/component.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { patch }            from '@je-es/vdom';\r\n    import type { VNode }       from '../../types';\r\n    import { StyleManager }     from './styles';\r\n    import { scheduler }        from './scheduler';\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export abstract class Component<P = Record<string, unknown>, S = Record<string, unknown>> {\r\n\r\n        //  INIT \r\n\r\n            public props                    : P;\r\n            public state                    : S;\r\n            public _isMounted               : boolean                   = false;\r\n\r\n            private _isUnmounting           : boolean                   = false;\r\n            private _element                : HTMLElement | null        = null;\r\n            private _vnode                  : VNode  | null             = null;\r\n            private _styleId                : string | null             = null;\r\n            private _isScheduledForUpdate   : boolean                   = false;\r\n            private _updateBatch            = new Set<string>();\r\n            private _refs                   = new Map<string, HTMLElement>();\r\n            private _subscriptions          : (() => void)[] = [];\r\n            private _memoCache              = new Map<string, { args: unknown[]; result: unknown }>();\r\n            private _isInitializing         : boolean = false;\r\n            private _skipNextUpdate         : boolean = false;\r\n            private _preservedElements      = new Map<Element, { parent: Element; children: Node[] }>();\r\n            private _updateInProgress       : boolean = false;\r\n\r\n            constructor(props?: P, initialState?: S) {\r\n                this.props = props || {} as P;\r\n                this.state = initialState || {} as S;\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            onBeforeMount?(): void | Promise<void>;\r\n            onMount?(): void | Promise<void>;\r\n            onBeforeUpdate?(prevProps: P, prevState: S): void | Promise<void>;\r\n            onUpdate?(prevProps: P, prevState: S): void;\r\n            onBeforeUnmount?(): void;\r\n            onUnmount?(): void;\r\n            onError?(error: Error, errorInfo: { componentStack?: string }): void;\r\n            onPropsChange?(prevProps: P, newProps: P): void;\r\n            onStateChange?(prevState: S, newState: S): void;\r\n            shouldUpdate?(prevProps: P, prevState: S): boolean;\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            abstract render(): VNode;\r\n            styles?(): string;\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            setState(\r\n                partialState: Partial<S> | ((prevState: S) => Partial<S>),\r\n                callback?: () => void\r\n            ): void {\r\n                // Don't trigger updates during initialization\r\n                if (this._isInitializing) {\r\n                    const newState = typeof partialState === 'function'\r\n                        ? partialState(this.state)\r\n                        : partialState;\r\n                    this.state = { ...this.state, ...newState };\r\n                    return;\r\n                }\r\n\r\n                // Don't trigger updates during unmounting\r\n                if (this._isUnmounting) {\r\n                    return;\r\n                }\r\n\r\n                const prevState = { ...this.state };\r\n                const newState = typeof partialState === 'function'\r\n                    ? partialState(this.state)\r\n                    : partialState;\r\n\r\n                // Check if state actually changed\r\n                let hasChanged = false;\r\n                for (const key in newState) {\r\n                    if (prevState[key] !== newState[key]) {\r\n                        hasChanged = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (!hasChanged) {\r\n                    // State didn't change, just run callback if provided\r\n                    if (callback) {\r\n                        scheduler.schedule(callback);\r\n                    }\r\n                    return;\r\n                }\r\n\r\n                this.state = { ...this.state, ...newState };\r\n\r\n                this.onStateChange?.(prevState, this.state);\r\n                this.update();\r\n\r\n                if (callback) {\r\n                    scheduler.schedule(callback);\r\n                }\r\n            }\r\n\r\n            setProps(newProps: Partial<P>): void {\r\n                if (this._isUnmounting) {\r\n                    return;\r\n                }\r\n\r\n                const prevProps = { ...this.props };\r\n\r\n                // Check if props actually changed\r\n                let hasChanged = false;\r\n                for (const key in newProps) {\r\n                    if (prevProps[key] !== newProps[key]) {\r\n                        hasChanged = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (!hasChanged) {\r\n                    return;\r\n                }\r\n\r\n                this.props = { ...this.props, ...newProps };\r\n\r\n                this.onPropsChange?.(prevProps, this.props);\r\n                this.update();\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            batchUpdate(updater: () => void): void {\r\n                const prevIsScheduled = this._isScheduledForUpdate;\r\n                this._isScheduledForUpdate = true;\r\n\r\n                try {\r\n                    updater();\r\n                } finally {\r\n                    if (!prevIsScheduled) {\r\n                        this._isScheduledForUpdate = false;\r\n                        this.update();\r\n                    }\r\n                }\r\n            }\r\n\r\n            update(key?: string): void {\r\n                // Guard conditions\r\n                if (this._skipNextUpdate) {\r\n                    this._skipNextUpdate = false;\r\n                    return;\r\n                }\r\n\r\n                if (this._isInitializing || this._isUnmounting || !this._isMounted) {\r\n                    return;\r\n                }\r\n\r\n                // Prevent concurrent updates\r\n                if (this._updateInProgress) {\r\n                    return;\r\n                }\r\n\r\n                if (key) {\r\n                    this._updateBatch.add(key);\r\n                }\r\n\r\n                if (this._isScheduledForUpdate) {\r\n                    return;\r\n                }\r\n\r\n                this._isScheduledForUpdate = true;\r\n                scheduler.schedule(() => {\r\n                    this._isScheduledForUpdate = false;\r\n                    this._updateBatch.clear();\r\n                    this._performUpdate();\r\n                });\r\n            }\r\n\r\n            forceUpdate(): void {\r\n                if (!this._isMounted || this._isUnmounting || this._updateInProgress) {\r\n                    return;\r\n                }\r\n\r\n                scheduler.flushSync(() => {\r\n                    this._performUpdate();\r\n                });\r\n            }\r\n\r\n            skipNextUpdate(): void {\r\n                this._skipNextUpdate = true;\r\n            }\r\n\r\n            beginInitialization(): void {\r\n                this._isInitializing = true;\r\n            }\r\n\r\n            endInitialization(): void {\r\n                this._isInitializing = false;\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            async mount(container: HTMLElement): Promise<void> {\r\n                if (this._isMounted) {\r\n                    console.warn(`Component ${this.constructor.name} is already mounted`);\r\n                    return;\r\n                }\r\n\r\n                if (!container) {\r\n                    throw new Error(`Cannot mount ${this.constructor.name}: container is null or undefined`);\r\n                }\r\n\r\n                try {\r\n                    this._isInitializing = true;\r\n\r\n                    await this.onBeforeMount?.();\r\n\r\n                    this._vnode = this.render();\r\n                    this._element = this._createElementFromVNode(this._vnode);\r\n\r\n                    if (this.styles) {\r\n                        this._styleId = StyleManager.inject(\r\n                            this.styles(),\r\n                            this.constructor.name\r\n                        );\r\n                        this._element?.setAttribute('data-scope', this.constructor.name);\r\n                    }\r\n\r\n                    container.appendChild(this._element);\r\n                    this._isMounted = true;\r\n                    this._isInitializing = false;\r\n\r\n                    await this.onMount?.();\r\n                } catch (error) {\r\n                    this._isInitializing = false;\r\n                    this._isMounted = false;\r\n                    this._handleError(error as Error, { componentStack: this.constructor.name });\r\n                    throw error;\r\n                }\r\n            }\r\n\r\n            unmount(): void {\r\n                if (!this._isMounted || this._isUnmounting) {\r\n                    return;\r\n                }\r\n\r\n                this._isUnmounting = true;\r\n\r\n                try {\r\n                    this.onBeforeUnmount?.();\r\n\r\n                    // Cancel pending updates\r\n                    this._isScheduledForUpdate = false;\r\n                    this._updateBatch.clear();\r\n\r\n                    // Remove styles\r\n                    if (this._styleId) {\r\n                        StyleManager.remove(this._styleId);\r\n                        this._styleId = null;\r\n                    }\r\n\r\n                    // Unsubscribe from all subscriptions\r\n                    this._subscriptions.forEach(unsubscribe => {\r\n                        try {\r\n                            unsubscribe();\r\n                        } catch (error) {\r\n                            console.error('Error during unsubscribe:', error);\r\n                        }\r\n                    });\r\n                    this._subscriptions = [];\r\n\r\n                    // Remove from DOM\r\n                    if (this._element?.parentElement) {\r\n                        this._element.parentElement.removeChild(this._element);\r\n                    }\r\n\r\n                    // Clear state\r\n                    this._isMounted = false;\r\n                    this._element = null;\r\n                    this._vnode = null;\r\n\r\n                    this.onUnmount?.();\r\n\r\n                    // Clear caches\r\n                    this._refs.clear();\r\n                    this._memoCache.clear();\r\n                    this._preservedElements.clear();\r\n                } catch (error) {\r\n                    this._handleError(error as Error, { componentStack: this.constructor.name });\r\n                } finally {\r\n                    this._isUnmounting = false;\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            getRef(name: string): HTMLElement | undefined {\r\n                return this._refs.get(name);\r\n            }\r\n\r\n            createRef(name: string): (el: HTMLElement | null) => void {\r\n                return (el: HTMLElement | null) => {\r\n                    if (el) {\r\n                        this._refs.set(name, el);\r\n                    } else {\r\n                        this._refs.delete(name);\r\n                    }\r\n                };\r\n            }\r\n\r\n            memo<T>(key: string, compute: () => T, deps: unknown[]): T {\r\n                const cached = this._memoCache.get(key);\r\n\r\n                if (cached && this._areDepsEqual(cached.args, deps)) {\r\n                    return cached.result as T;\r\n                }\r\n\r\n                const result = compute();\r\n                this._memoCache.set(key, { args: deps, result });\r\n                return result;\r\n            }\r\n\r\n            subscribe(subscription: () => void): void {\r\n                this._subscriptions.push(subscription);\r\n            }\r\n\r\n            debounce<T extends (...args: unknown[]) => unknown>(\r\n                fn: T,\r\n                delay: number\r\n            ): (...args: Parameters<T>) => void {\r\n                let timeoutId: ReturnType<typeof setTimeout> | null = null;\r\n\r\n                return (...args: Parameters<T>): void => {\r\n                    if (timeoutId !== null) {\r\n                        clearTimeout(timeoutId);\r\n                    }\r\n\r\n                    timeoutId = setTimeout(() => {\r\n                        timeoutId = null;\r\n                        fn.apply(this, args);\r\n                    }, delay);\r\n                };\r\n            }\r\n\r\n            throttle<T extends (...args: unknown[]) => unknown>(\r\n                fn: T,\r\n                delay: number\r\n            ): (...args: Parameters<T>) => void {\r\n                let lastCall = 0;\r\n                let timeoutId: ReturnType<typeof setTimeout> | null = null;\r\n\r\n                return (...args: Parameters<T>): void => {\r\n                    const now = Date.now();\r\n                    const timeSinceLastCall = now - lastCall;\r\n\r\n                    if (timeSinceLastCall >= delay) {\r\n                        lastCall = now;\r\n                        fn.apply(this, args);\r\n                    } else if (!timeoutId) {\r\n                        timeoutId = setTimeout(() => {\r\n                            lastCall = Date.now();\r\n                            timeoutId = null;\r\n                            fn.apply(this, args);\r\n                        }, delay - timeSinceLastCall);\r\n                    }\r\n                };\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            get element(): HTMLElement | null {\r\n                return this._element;\r\n            }\r\n\r\n            get isMounted(): boolean {\r\n                return this._isMounted;\r\n            }\r\n\r\n            get isUnmounting(): boolean {\r\n                return this._isUnmounting;\r\n            }\r\n\r\n            get isInitializing(): boolean {\r\n                return this._isInitializing;\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            private async _performUpdate(): Promise<void> {\r\n                // Guard against invalid states\r\n                if (!this._isMounted || !this._element || this._isUnmounting || this._isInitializing) {\r\n                    return;\r\n                }\r\n\r\n                // Prevent concurrent updates\r\n                if (this._updateInProgress) {\r\n                    return;\r\n                }\r\n\r\n                this._updateInProgress = true;\r\n\r\n                const prevProps = { ...this.props };\r\n                const prevState = { ...this.state };\r\n\r\n                try {\r\n                    // Check if update should proceed\r\n                    if (this.shouldUpdate && !this.shouldUpdate(prevProps, prevState)) {\r\n                        return;\r\n                    }\r\n\r\n                    await this.onBeforeUpdate?.(prevProps, prevState);\r\n\r\n                    // Preserve mounted child components before patching\r\n                    this._preserveComponentMounts();\r\n\r\n                    const newVNode = this.render();\r\n                    const parent = this._element.parentElement;\r\n\r\n                    if (this._vnode && parent) {\r\n                        const index = Array.from(parent.childNodes).indexOf(this._element);\r\n\r\n                        if (index === -1) {\r\n                            // Element was removed from parent, skip update\r\n                            console.warn(`Component ${this.constructor.name} element removed from parent, skipping update`);\r\n                            return;\r\n                        }\r\n\r\n                        const oldVDomNode = this._convertToVDomNode(this._vnode);\r\n                        const newVDomNode = this._convertToVDomNode(newVNode);\r\n\r\n                        patch(parent, oldVDomNode, newVDomNode, index);\r\n                        this._element = parent.childNodes[index] as HTMLElement;\r\n                    }\r\n\r\n                    this._vnode = newVNode;\r\n\r\n                    // Restore preserved elements after patching\r\n                    this._restoreComponentMounts();\r\n\r\n                    this.onUpdate?.(prevProps, prevState);\r\n                } catch (error) {\r\n                    this._handleError(error as Error, { componentStack: this.constructor.name });\r\n                } finally {\r\n                    this._updateInProgress = false;\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            private _preserveComponentMounts(): void {\r\n                if (!this._element) return;\r\n\r\n                this._preservedElements.clear();\r\n\r\n                // Selectors for elements that contain mounted components\r\n                const preserveSelectors = [\r\n                    '[data-language-dropdown-mount]',\r\n                    '[data-user-dropdown-mount]',\r\n                    '[data-notifications-dropdown-mount]',\r\n                    '[data-dropdown-id]',\r\n                    '[data-preserve]',\r\n                    '[data-toast-mount]',\r\n                    '[data-popup-mount]',\r\n                    '[data-loader-mount]',\r\n                    '[data-navbar-notifications-list]'\r\n                ];\r\n\r\n                preserveSelectors.forEach(selector => {\r\n                    const elements = this._element!.querySelectorAll(selector);\r\n                    elements.forEach(el => {\r\n                        if (el.children.length > 0 && el.parentElement) {\r\n                            this._preservedElements.set(el, {\r\n                                parent: el,\r\n                                children: Array.from(el.childNodes)\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n\r\n            private _restoreComponentMounts(): void {\r\n                if (!this._element) return;\r\n\r\n                this._preservedElements.forEach((data, originalElement) => {\r\n                    let newElement: Element | null = null;\r\n\r\n                    // Find corresponding element in updated DOM by matching attributes\r\n                    const attrs = Array.from(originalElement.attributes);\r\n                    for (const attr of attrs) {\r\n                        // Match by data attributes that identify mount points\r\n                        if (attr.name.startsWith('data-')) {\r\n                            const selector = `[${attr.name}=\"${attr.value}\"]`;\r\n                            newElement = this._element!.querySelector(selector);\r\n                            if (newElement) break;\r\n                        }\r\n                    }\r\n\r\n                    if (newElement && data.children.length > 0) {\r\n                        // Clear any new children added during patch\r\n                        while (newElement.firstChild) {\r\n                            newElement.removeChild(newElement.firstChild);\r\n                        }\r\n\r\n                        // Restore original children\r\n                        data.children.forEach(child => {\r\n                            newElement!.appendChild(child);\r\n                        });\r\n                    }\r\n                });\r\n\r\n                this._preservedElements.clear();\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            private _convertToVDomNode(vnode: VNode): VNode {\r\n                if (typeof vnode.type !== 'string') {\r\n                    throw new Error('Component VNodes cannot be converted to VDom nodes');\r\n                }\r\n\r\n                const convertedProps: Record<string, unknown> = {};\r\n                for (const [key, value] of Object.entries(vnode.props)) {\r\n                    if (key === 'children') continue;\r\n\r\n                    if (key === 'style' && typeof value === 'object' && value !== null && !Array.isArray(value)) {\r\n                        convertedProps[key] = value as Record<string, string | number>;\r\n                    } else {\r\n                        convertedProps[key] = value;\r\n                    }\r\n                }\r\n\r\n                const convertedChildren = vnode.children.map(child => {\r\n                    if (child == null || typeof child === 'boolean') return null;\r\n                    if (typeof child === 'string' || typeof child === 'number') return child;\r\n                    return this._convertToVDomNode(child as VNode);\r\n                }).filter((child): child is string | number | VNode => child !== null);\r\n\r\n                return {\r\n                    type: vnode.type,\r\n                    props: convertedProps as never,\r\n                    children: convertedChildren\r\n                };\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            private _createElementFromVNode(vnode: VNode): HTMLElement {\r\n                if (typeof vnode.type !== 'string') {\r\n                    throw new Error('Component VNodes not supported in _createElementFromVNode');\r\n                }\r\n\r\n                const element = document.createElement(vnode.type);\r\n\r\n                // Set properties\r\n                for (const [key, value] of Object.entries(vnode.props)) {\r\n                    if (key === 'children') continue;\r\n                    this._setElementProperty(element, key, value);\r\n                }\r\n\r\n                // Add children\r\n                for (const child of vnode.children) {\r\n                    if (child == null || child === false) continue;\r\n\r\n                    if (typeof child === 'string' || typeof child === 'number') {\r\n                        element.appendChild(document.createTextNode(String(child)));\r\n                    } else if (typeof child === 'object' && 'type' in child) {\r\n                        element.appendChild(this._createElementFromVNode(child as VNode));\r\n                    }\r\n                }\r\n\r\n                return element;\r\n            }\r\n\r\n            private _setElementProperty(element: HTMLElement, key: string, value: unknown): void {\r\n                // Event handlers\r\n                if (key.startsWith('on') && typeof value === 'function') {\r\n                    const eventName = key.substring(2).toLowerCase();\r\n                    element.addEventListener(eventName, value as EventListener);\r\n                    return;\r\n                }\r\n\r\n                // Class names\r\n                if (key === 'className' && typeof value === 'string') {\r\n                    element.className = value;\r\n                    return;\r\n                }\r\n\r\n                // Styles\r\n                if (key === 'style') {\r\n                    if (typeof value === 'string') {\r\n                        element.setAttribute('style', value);\r\n                    } else if (typeof value === 'object' && value !== null) {\r\n                        Object.assign(element.style, value);\r\n                    }\r\n                    return;\r\n                }\r\n\r\n                // Refs\r\n                if (key === 'ref' && typeof value === 'function') {\r\n                    (value as (el: HTMLElement) => void)(element);\r\n                    return;\r\n                }\r\n\r\n                // Boolean attributes\r\n                if (key === 'checked' || key === 'disabled' || key === 'selected') {\r\n                    const boolValue = value === 'true' || value === true || value === '';\r\n                    if (boolValue) {\r\n                        element.setAttribute(key, '');\r\n                    }\r\n                    return;\r\n                }\r\n\r\n                // Regular attributes\r\n                if (value != null && value !== false) {\r\n                    element.setAttribute(key, String(value));\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            private _handleError(error: Error, errorInfo: { componentStack?: string }): void {\r\n                console.error(`Error in component ${this.constructor.name}:`, error);\r\n                console.error('Component stack:', errorInfo.componentStack);\r\n\r\n                if (this.onError) {\r\n                    this.onError(error, errorInfo);\r\n                } else {\r\n                    // Re-throw if no error handler\r\n                    throw error;\r\n                }\r\n            }\r\n\r\n            private _areDepsEqual(prevDeps: unknown[], nextDeps: unknown[]): boolean {\r\n                if (prevDeps.length !== nextDeps.length) return false;\r\n                return prevDeps.every((dep, i) => Object.is(dep, nextDeps[i]));\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            _invalidateAllComputed(): void {\r\n                for (const key in this) {\r\n                    if (key.startsWith('_computed_dirty_')) {\r\n                        (this as Record<string, unknown>)[key] = true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            _triggerWatchers(propertyName: string, newValue: unknown, oldValue: unknown): void {\r\n                const watchers = (this.constructor as ComponentConstructor).__watchers__;\r\n                if (!watchers?.[propertyName]) return;\r\n\r\n                for (const methodName of watchers[propertyName]) {\r\n                    if (typeof (this as Record<string, unknown>)[methodName] === 'function') {\r\n                        try {\r\n                            ((this as Record<string, unknown>)[methodName] as (nv: unknown, ov: unknown) => void).call(this, newValue, oldValue);\r\n                        } catch (error) {\r\n                            console.error(`Watcher error in ${methodName}:`, error);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            setElement(element: HTMLElement): void {\r\n                this._element = element;\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n    export interface ComponentConstructor {\r\n        __watchers__?       : Record<string, string[]>;\r\n        __reactiveProps__?  : string[];\r\n    }\r\n\r\n// ","// src/mod/core/decorators.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    // Type for decorator context (Stage 3 decorators)\r\n    interface ClassFieldDecoratorContext<This = unknown, Value = unknown> {\r\n        kind: 'field';\r\n        name: string | symbol;\r\n        access: {\r\n            get(object: This): Value;\r\n            set(object: This, value: Value): void;\r\n        };\r\n        addInitializer(initializer: (this: This) => void): void;\r\n    }\r\n\r\n    interface ClassGetterDecoratorContext<This = unknown, Value = unknown> {\r\n        kind: 'getter';\r\n        name: string | symbol;\r\n        access: {\r\n            get(object: This): Value;\r\n        };\r\n        addInitializer(initializer: (this: This) => void): void;\r\n    }\r\n\r\n    interface ClassMethodDecoratorContext<This = unknown, Value = unknown> {\r\n        kind: 'method';\r\n        name: string | symbol;\r\n        access: {\r\n            get(object: This): Value;\r\n        };\r\n        addInitializer(initializer: (this: This) => void): void;\r\n    }\r\n\r\n    // Component metadata interface\r\n    interface ComponentMetadata {\r\n        __reactiveProps__?: string[];\r\n        __watchers__?: Record<string, string[]>;\r\n    }\r\n\r\n    // Helper type for component instance\r\n    type ComponentInstance = Record<string, unknown> & {\r\n        constructor: ComponentMetadata;\r\n        _invalidateAllComputed?: () => void;\r\n        _triggerWatchers?: (key: string, newVal: unknown, oldVal: unknown) => void;\r\n        _isMounted?: boolean;\r\n        update?: () => void;\r\n    };\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * State decorator - makes property reactive\r\n     * Usage: @state fields = [];\r\n     *\r\n     * Supports both TypeScript 5 decorators and legacy decorators\r\n     */\r\n    export function state<This, Value>(\r\n        target: undefined,\r\n        context: ClassFieldDecoratorContext<This, Value>\r\n    ): (this: This, initialValue: Value) => Value;\r\n    export function state(\r\n        target: Record<string, unknown>,\r\n        context: string\r\n    ): void;\r\n    export function state<This, Value>(\r\n        target: Record<string, unknown> | undefined,\r\n        context: string | ClassFieldDecoratorContext<This, Value>\r\n    ): unknown {\r\n        // TypeScript 5+ decorator (Stage 3)\r\n        if (context && typeof context === 'object' && 'kind' in context) {\r\n            const propertyKey = context.name as string;\r\n\r\n            context.addInitializer(function(this: unknown) {\r\n                const instance = this as ComponentInstance;\r\n                if (!instance.constructor.__reactiveProps__) {\r\n                    instance.constructor.__reactiveProps__ = [];\r\n                }\r\n                if (!instance.constructor.__reactiveProps__.includes(propertyKey)) {\r\n                    instance.constructor.__reactiveProps__.push(propertyKey);\r\n                }\r\n            });\r\n\r\n            return function(this: This, initialValue: Value): Value {\r\n                const instance = this as ComponentInstance;\r\n                const hiddenKey = `_state_${propertyKey}`;\r\n\r\n                // Store initial value\r\n                instance[hiddenKey] = initialValue;\r\n\r\n                // Define getter/setter\r\n                Object.defineProperty(this, propertyKey, {\r\n                    get(this: This) {\r\n                        const inst = this as Record<string, unknown>;\r\n                        return inst[hiddenKey];\r\n                    },\r\n                    set(this: This, newValue: Value) {\r\n                        const inst = this as ComponentInstance;\r\n                        const oldValue = inst[hiddenKey];\r\n\r\n                        if (oldValue !== newValue) {\r\n                            inst[hiddenKey] = newValue;\r\n\r\n                            // Invalidate all computed properties\r\n                            if (typeof inst._invalidateAllComputed === 'function') {\r\n                                inst._invalidateAllComputed();\r\n                            }\r\n\r\n                            // Trigger watchers with correct old/new values\r\n                            if (typeof inst._triggerWatchers === 'function') {\r\n                                inst._triggerWatchers(propertyKey, newValue, oldValue);\r\n                            }\r\n\r\n                            // Trigger update if component is mounted\r\n                            if (inst._isMounted && typeof inst.update === 'function') {\r\n                                inst.update();\r\n                            }\r\n                        }\r\n                    },\r\n                    enumerable: true,\r\n                    configurable: true,\r\n                });\r\n\r\n                return initialValue;\r\n            };\r\n        }\r\n\r\n        // Legacy decorator (for backwards compatibility)\r\n        const propertyKey = context as string;\r\n\r\n        // Store reactive property metadata\r\n        const targetConstructor = (target as { constructor: ComponentMetadata }).constructor;\r\n        if (!targetConstructor.__reactiveProps__) {\r\n            targetConstructor.__reactiveProps__ = [];\r\n        }\r\n        if (!targetConstructor.__reactiveProps__.includes(propertyKey)) {\r\n            targetConstructor.__reactiveProps__.push(propertyKey);\r\n        }\r\n\r\n        // Create hidden property key\r\n        const hiddenKey = `_state_${propertyKey}`;\r\n        const initKey = `_state_init_${propertyKey}`;\r\n\r\n        // Define getter/setter\r\n        Object.defineProperty(target, propertyKey, {\r\n            get(this: unknown) {\r\n                const instance = this as Record<string, unknown>;\r\n                // If not initialized yet, return undefined (don't trigger getter before init)\r\n                if (!instance[initKey]) {\r\n                    return undefined;\r\n                }\r\n                return instance[hiddenKey];\r\n            },\r\n            set(this: unknown, newValue: unknown) {\r\n                const instance = this as ComponentInstance;\r\n                // On first set (during construction), just store the value\r\n                if (!instance[initKey]) {\r\n                    instance[hiddenKey] = newValue;\r\n                    instance[initKey] = true;\r\n                    return;\r\n                }\r\n\r\n                const oldValue = instance[hiddenKey];\r\n\r\n                if (oldValue !== newValue) {\r\n                    instance[hiddenKey] = newValue;\r\n\r\n                    // Invalidate all computed properties\r\n                    if (typeof instance._invalidateAllComputed === 'function') {\r\n                        instance._invalidateAllComputed();\r\n                    }\r\n\r\n                    // Trigger watchers with correct old/new values\r\n                    if (typeof instance._triggerWatchers === 'function') {\r\n                        instance._triggerWatchers(propertyKey, newValue, oldValue);\r\n                    }\r\n\r\n                    // Trigger update if component is mounted\r\n                    if (instance._isMounted && typeof instance.update === 'function') {\r\n                        instance.update();\r\n                    }\r\n                }\r\n            },\r\n            enumerable: true,\r\n            configurable: true,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Computed decorator - creates computed property\r\n     * Usage: @computed get fullName() { return this.firstName + ' ' + this.lastName; }\r\n     */\r\n    export function computed<This, Value>(\r\n        originalGetter: (this: This) => Value,\r\n        context: ClassGetterDecoratorContext<This, Value>\r\n    ): (this: This) => Value;\r\n    export function computed(\r\n        target: Record<string, unknown>,\r\n        context: string,\r\n        descriptor: PropertyDescriptor\r\n    ): PropertyDescriptor;\r\n    // Catch-all for invalid uses (like methods) to provide better error messages\r\n    export function computed(\r\n        targetOrGetter: unknown,\r\n        context: unknown\r\n    ): never;\r\n    export function computed<This, Value>(\r\n        targetOrGetter: Record<string, unknown> | ((this: This) => Value) | unknown,\r\n        context: string | ClassGetterDecoratorContext<This, Value> | unknown,\r\n        descriptor?: PropertyDescriptor\r\n    ): unknown {\r\n        // TypeScript 5+ decorator (Stage 3)\r\n        if (context && typeof context === 'object' && 'kind' in context) {\r\n            const ctx = context as ClassGetterDecoratorContext<This, Value>;\r\n            if (ctx.kind !== 'getter') {\r\n                throw new Error('@computed can only be used on getters');\r\n            }\r\n\r\n            const originalGetter = targetOrGetter as (this: This) => Value;\r\n            const propertyKey = ctx.name as string;\r\n            const cacheKey = `_computed_cache_${propertyKey}`;\r\n            const dirtyKey = `_computed_dirty_${propertyKey}`;\r\n\r\n            return function(this: This): Value {\r\n                const instance = this as Record<string, unknown>;\r\n                // Initialize as dirty on first access\r\n                if (instance[dirtyKey] === undefined) {\r\n                    instance[dirtyKey] = true;\r\n                }\r\n\r\n                // Recompute if dirty\r\n                if (instance[dirtyKey] === true) {\r\n                    instance[cacheKey] = originalGetter.call(this);\r\n                    instance[dirtyKey] = false;\r\n                }\r\n\r\n                return instance[cacheKey] as Value;\r\n            };\r\n        }\r\n\r\n        // Legacy decorator\r\n        const propertyKey = context as string;\r\n        if (!descriptor) {\r\n            throw new Error('@computed requires a property descriptor');\r\n        }\r\n\r\n        const originalGetter = descriptor.get;\r\n\r\n        if (!originalGetter) {\r\n            throw new Error('@computed can only be used on getters');\r\n        }\r\n\r\n        const cacheKey = `_computed_cache_${propertyKey}`;\r\n        const dirtyKey = `_computed_dirty_${propertyKey}`;\r\n\r\n        return {\r\n            get(this: unknown) {\r\n                const instance = this as Record<string, unknown>;\r\n                // Initialize as dirty on first access\r\n                if (instance[dirtyKey] === undefined) {\r\n                    instance[dirtyKey] = true;\r\n                }\r\n\r\n                // Recompute if dirty\r\n                if (instance[dirtyKey] === true) {\r\n                    instance[cacheKey] = originalGetter.call(this);\r\n                    instance[dirtyKey] = false;\r\n                }\r\n\r\n                return instance[cacheKey];\r\n            },\r\n            enumerable: descriptor.enumerable,\r\n            configurable: descriptor.configurable,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Watch decorator - watches for property changes\r\n     * Usage: @watch('propertyName') onPropertyChange(newValue, oldValue) {}\r\n     */\r\n    export function watch(propertyName: string) {\r\n        function decorator<This, Args extends unknown[], Return>(\r\n            originalMethod: (this: This, ...args: Args) => Return,\r\n            context: ClassMethodDecoratorContext<This, (this: This, ...args: Args) => Return>\r\n        ): void;\r\n        function decorator(\r\n            target: Record<string, unknown>,\r\n            context: string,\r\n            descriptor: PropertyDescriptor\r\n        ): PropertyDescriptor;\r\n        function decorator<This, Args extends unknown[], Return>(\r\n            targetOrMethod: Record<string, unknown> | ((this: This, ...args: Args) => Return),\r\n            context: string | ClassMethodDecoratorContext<This, (this: This, ...args: Args) => Return>,\r\n            descriptor?: PropertyDescriptor\r\n        ): PropertyDescriptor | void {\r\n            // TypeScript 5+ decorator (Stage 3)\r\n            if (context && typeof context === 'object' && 'kind' in context) {\r\n                if (context.kind !== 'method') {\r\n                    throw new Error('@watch can only be used on methods');\r\n                }\r\n\r\n                const methodName = context.name as string;\r\n\r\n                context.addInitializer(function(this: unknown) {\r\n                    const instance = this as ComponentInstance;\r\n                    if (!instance.constructor.__watchers__) {\r\n                        instance.constructor.__watchers__ = {};\r\n                    }\r\n                    if (!instance.constructor.__watchers__[propertyName]) {\r\n                        instance.constructor.__watchers__[propertyName] = [];\r\n                    }\r\n                    if (!instance.constructor.__watchers__[propertyName].includes(methodName)) {\r\n                        instance.constructor.__watchers__[propertyName].push(methodName);\r\n                    }\r\n                });\r\n\r\n                return;\r\n            }\r\n\r\n            // Legacy decorator\r\n            const methodName = context as string;\r\n            if (!descriptor) {\r\n                throw new Error('@watch requires a property descriptor');\r\n            }\r\n\r\n            const target = targetOrMethod as Record<string, unknown>;\r\n            const targetConstructor = (target as { constructor: ComponentMetadata }).constructor;\r\n            if (!targetConstructor.__watchers__) {\r\n                targetConstructor.__watchers__ = {};\r\n            }\r\n            if (!targetConstructor.__watchers__[propertyName]) {\r\n                targetConstructor.__watchers__[propertyName] = [];\r\n            }\r\n            if (!targetConstructor.__watchers__[propertyName].includes(methodName)) {\r\n                targetConstructor.__watchers__[propertyName].push(methodName);\r\n            }\r\n\r\n            return descriptor;\r\n        }\r\n\r\n        return decorator;\r\n    }\r\n\r\n// ","// src/mod/core/context.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { Component } from './component';\r\n    import { html, type VNode } from '@je-es/vdom';\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    export type ContextSubscriber<T> = (value: T) => void;\r\n\r\n    export interface ProviderProps<T> {\r\n        context: Context<T>;\r\n        value: T;\r\n        children: VNode | VNode[];\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * Context class for sharing data across component tree\r\n     */\r\n    export class Context<T = unknown> {\r\n        private _value: T;\r\n        private _subscribers = new Set<ContextSubscriber<T>>();\r\n        private _defaultValue: T;\r\n\r\n        constructor(defaultValue: T) {\r\n            this._value = defaultValue;\r\n            this._defaultValue = defaultValue;\r\n        }\r\n\r\n        get value(): T {\r\n            return this._value;\r\n        }\r\n\r\n        set value(newValue: T) {\r\n            if (this._value !== newValue) {\r\n                this._value = newValue;\r\n                this._notify();\r\n            }\r\n        }\r\n\r\n        subscribe(subscriber: ContextSubscriber<T>): () => void {\r\n            this._subscribers.add(subscriber);\r\n\r\n            // Immediately call with current value (wrapped in try-catch)\r\n            try {\r\n                subscriber(this._value);\r\n            } catch (error) {\r\n                console.error('Context subscriber error:', error);\r\n                // Don't throw - the test expects this to not throw\r\n            }\r\n\r\n            // Return unsubscribe function\r\n            return () => {\r\n                this._subscribers.delete(subscriber);\r\n            };\r\n        }\r\n\r\n        reset(): void {\r\n            this.value = this._defaultValue;\r\n        }\r\n\r\n        update(updater: (prev: T) => T): void {\r\n            this.value = updater(this._value);\r\n        }\r\n\r\n        private _notify(): void {\r\n            for (const subscriber of this._subscribers) {\r\n                try {\r\n                    subscriber(this._value);\r\n                } catch (error) {\r\n                    console.error('Context subscriber error:', error);\r\n                    // Continue notifying other subscribers\r\n                }\r\n            }\r\n        }\r\n\r\n        get subscriberCount(): number {\r\n            return this._subscribers.size;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create a new context\r\n     */\r\n    export function createContext<T>(defaultValue: T): Context<T> {\r\n        return new Context(defaultValue);\r\n    }\r\n\r\n    export class Provider<T> extends Component<ProviderProps<T>> {\r\n        onMount(): void {\r\n            // Update context value\r\n            this.props.context.value = this.props.value;\r\n        }\r\n\r\n        onUpdate(): void {\r\n            // Update context when props change\r\n            this.props.context.value = this.props.value;\r\n        }\r\n\r\n        onUnmount(): void {\r\n            // Optionally reset context on unmount\r\n            // this.props.context.reset();\r\n        }\r\n\r\n        render(): VNode {\r\n            const children = Array.isArray(this.props.children)\r\n                ? this.props.children\r\n                : [this.props.children];\r\n\r\n            return html`\r\n                <div class=\"context-provider\" style=\"display: contents;\">\r\n                    ${children}\r\n                </div>\r\n            `;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Hook-like function to use context in components\r\n     * Call this in your component to get context value\r\n     */\r\n    export function useContext<T>(context: Context<T>, component: Component): T {\r\n        // Subscribe to context changes\r\n        const unsubscribe = context.subscribe(() => {\r\n            if (component.isMounted) {\r\n                component.update();\r\n            }\r\n        });\r\n\r\n        // Cleanup on unmount\r\n        component.subscribe(() => unsubscribe);\r\n\r\n        return context.value;\r\n    }\r\n\r\n    /**\r\n     * Combined context for complex state management\r\n     */\r\n    export class CombinedContext<T extends Record<string, unknown>> {\r\n        private contexts = new Map<keyof T, Context<T[keyof T]>>();\r\n\r\n        constructor(initialValues: T) {\r\n            for (const [key, value] of Object.entries(initialValues)) {\r\n                this.contexts.set(key as keyof T, new Context(value) as unknown as Context<T[keyof T]>);\r\n            }\r\n        }\r\n\r\n        get<K extends keyof T>(key: K): Context<T[K]> {\r\n            const context = this.contexts.get(key);\r\n            if (!context) {\r\n                throw new Error(`Context key \"${String(key)}\" not found`);\r\n            }\r\n            return context as unknown as Context<T[K]>;\r\n        }\r\n\r\n        set<K extends keyof T>(key: K, value: T[K]): void {\r\n            const context = this.contexts.get(key);\r\n            if (context) {\r\n                (context as unknown as Context<T[K]>).value = value;\r\n            }\r\n        }\r\n\r\n        subscribe<K extends keyof T>(\r\n            key: K,\r\n            subscriber: ContextSubscriber<T[K]>\r\n        ): () => void {\r\n            const context = this.contexts.get(key);\r\n            if (!context) {\r\n                throw new Error(`Context key \"${String(key)}\" not found`);\r\n            }\r\n            return (context as unknown as Context<T[K]>).subscribe(subscriber);\r\n        }\r\n\r\n        reset(): void {\r\n            for (const context of this.contexts.values()) {\r\n                context.reset();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create combined context\r\n     */\r\n    export function createCombinedContext<T extends Record<string, unknown>>(\r\n        initialValues: T\r\n    ): CombinedContext<T> {\r\n        return new CombinedContext(initialValues);\r\n    }\r\n\r\n// \r\n","// src/mod/core/hooks.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { Component }    from './component';\r\n    import type { VNode }   from '../../types';\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    interface HookState {\r\n        value: unknown;\r\n        deps?: unknown[];\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  INIT \r\n\r\n    let currentComponent: Component | null = null;\r\n    let currentHookIndex: number = 0;\r\n    const hookStates = new WeakMap<Component, HookState[]>();\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * Set current component context for hooks\r\n     */\r\n    export function setHookContext(component: Component): void {\r\n        currentComponent = component;\r\n        currentHookIndex = 0;\r\n    }\r\n\r\n    /**\r\n     * Clear hook context\r\n     */\r\n    export function clearHookContext(): void {\r\n        currentComponent = null;\r\n        currentHookIndex = 0;\r\n    }\r\n\r\n    /**\r\n     * Get or create hook states for component\r\n     */\r\n    function getHookStates(component: Component): HookState[] {\r\n        if (!hookStates.has(component)) {\r\n            hookStates.set(component, []);\r\n        }\r\n        return hookStates.get(component)!;\r\n    }\r\n\r\n    //  Core Hooks \r\n\r\n    /**\r\n     * useState hook - manages component state\r\n     */\r\n    export function useState<T>(initialValue: T | (() => T)): [T, (newValue: T | ((prev: T) => T)) => void] {\r\n        if (!currentComponent) {\r\n            throw new Error('useState must be called inside a component');\r\n        }\r\n\r\n        const component = currentComponent;\r\n        const hookIndex = currentHookIndex++;\r\n        const states = getHookStates(component);\r\n\r\n        // Initialize state if first render\r\n        if (states[hookIndex] === undefined) {\r\n            states[hookIndex] = {\r\n                value: typeof initialValue === 'function' ? (initialValue as () => T)() : initialValue\r\n            };\r\n        }\r\n\r\n        const setState = (newValue: T | ((prev: T) => T)) => {\r\n            const state = states[hookIndex];\r\n            const nextValue = typeof newValue === 'function'\r\n                ? (newValue as (prev: T) => T)(state.value as T)\r\n                : newValue;\r\n\r\n            if (state.value !== nextValue) {\r\n                state.value = nextValue;\r\n                component.update();\r\n            }\r\n        };\r\n\r\n        return [states[hookIndex].value as T, setState];\r\n    }\r\n\r\n    /**\r\n     * useEffect hook - side effects\r\n     */\r\n    export function useEffect(\r\n        effect: () => void | (() => void),\r\n        deps?: unknown[]\r\n    ): void {\r\n        if (!currentComponent) {\r\n            throw new Error('useEffect must be called inside a component');\r\n        }\r\n\r\n        const component = currentComponent;\r\n        const hookIndex = currentHookIndex++;\r\n        const states = getHookStates(component);\r\n\r\n        const prevState = states[hookIndex];\r\n        const hasChanged = !prevState || !deps || !areDepsEqual(prevState.deps, deps);\r\n\r\n        if (hasChanged) {\r\n            // Cleanup previous effect\r\n            if (prevState?.value && typeof prevState.value === 'function') {\r\n                try {\r\n                    (prevState.value as () => void)();\r\n                } catch (error) {\r\n                    console.error('Error in effect cleanup:', error);\r\n                }\r\n            }\r\n\r\n            // Run new effect after a microtask (so it runs after render completes)\r\n            Promise.resolve().then(() => {\r\n                try {\r\n                    const cleanup = effect();\r\n\r\n                    // Store cleanup and deps\r\n                    states[hookIndex] = {\r\n                        value: cleanup,\r\n                        deps: deps ? [...deps] : undefined\r\n                    };\r\n                } catch (error) {\r\n                    console.error('Error in effect:', error);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * useMemo hook - memoize expensive computations\r\n     */\r\n    export function useMemo<T>(\r\n        factory: () => T,\r\n        deps: unknown[]\r\n    ): T {\r\n        if (!currentComponent) {\r\n            throw new Error('useMemo must be called inside a component');\r\n        }\r\n\r\n        const hookIndex = currentHookIndex++;\r\n        const states = getHookStates(currentComponent);\r\n\r\n        const prevState = states[hookIndex];\r\n        const hasChanged = !prevState || !areDepsEqual(prevState.deps, deps);\r\n\r\n        if (hasChanged) {\r\n            states[hookIndex] = {\r\n                value: factory(),\r\n                deps: [...deps]\r\n            };\r\n        }\r\n\r\n        return states[hookIndex].value as T;\r\n    }\r\n\r\n    /**\r\n     * useCallback hook - memoize callbacks\r\n     */\r\n    export function useCallback<T extends (...args: unknown[]) => unknown>(\r\n        callback: T,\r\n        deps: unknown[]\r\n    ): T {\r\n        return useMemo(() => callback, deps);\r\n    }\r\n\r\n    /**\r\n     * useRef hook - persistent value across renders\r\n     */\r\n    export function useRef<T>(initialValue: T): { current: T } {\r\n        if (!currentComponent) {\r\n            throw new Error('useRef must be called inside a component');\r\n        }\r\n\r\n        const hookIndex = currentHookIndex++;\r\n        const states = getHookStates(currentComponent);\r\n\r\n        if (states[hookIndex] === undefined) {\r\n            states[hookIndex] = {\r\n                value: { current: initialValue }\r\n            };\r\n        }\r\n\r\n        return states[hookIndex].value as { current: T };\r\n    }\r\n\r\n    /**\r\n     * useReducer hook - complex state management\r\n     */\r\n    export function useReducer<S, A>(\r\n        reducer: (state: S, action: A) => S,\r\n        initialState: S\r\n    ): [S, (action: A) => void] {\r\n        const [state, setState] = useState(initialState);\r\n\r\n        const dispatch = useCallback((action: unknown) => {\r\n            setState(prevState => reducer(prevState, action as A));\r\n        }, [reducer]) as (action: A) => void;\r\n\r\n        return [state, dispatch];\r\n    }\r\n\r\n    //  Custom Hooks \r\n\r\n    /**\r\n     * useLocalStorage hook - sync state with localStorage\r\n     */\r\n    export function useLocalStorage<T>(\r\n        key: string,\r\n        initialValue: T\r\n    ): [T, (value: T | ((prev: T) => T)) => void] {\r\n        // Initialize from localStorage\r\n        const [storedValue, setStoredValue] = useState<T>(() => {\r\n            try {\r\n                const item = window.localStorage.getItem(key);\r\n                return item ? JSON.parse(item) as T : initialValue;\r\n            } catch (error) {\r\n                console.error('Error loading from localStorage:', error);\r\n                return initialValue;\r\n            }\r\n        });\r\n\r\n        // Create setValue wrapper (recreated each render, but that's okay)\r\n        const setValue = (newValue: T | ((prev: T) => T)) => {\r\n            setStoredValue((prevValue: T) => {\r\n                const valueToStore = newValue instanceof Function\r\n                    ? newValue(prevValue)\r\n                    : newValue;\r\n\r\n                // Update localStorage synchronously\r\n                try {\r\n                    window.localStorage.setItem(key, JSON.stringify(valueToStore));\r\n                } catch (error) {\r\n                    console.error('Error saving to localStorage:', error);\r\n                }\r\n\r\n                return valueToStore;\r\n            });\r\n        };\r\n\r\n        return [storedValue, setValue];\r\n    }\r\n\r\n    /**\r\n     * useDebounce hook - debounce value changes\r\n     */\r\n    export function useDebounce<T>(value: T, delay: number): T {\r\n        const [debouncedValue, setDebouncedValue] = useState(value);\r\n\r\n        useEffect(() => {\r\n            // Set up the timeout\r\n            const handler = setTimeout(() => {\r\n                setDebouncedValue(value);\r\n            }, delay);\r\n\r\n            // Cleanup function that clears the timeout\r\n            return () => {\r\n                clearTimeout(handler);\r\n            };\r\n        }, [value, delay]);\r\n\r\n        return debouncedValue;\r\n    }\r\n\r\n    /**\r\n     * usePrevious hook - get previous value\r\n     */\r\n    export function usePrevious<T>(value: T): T | undefined {\r\n        const ref = useRef<T | undefined>(undefined);\r\n\r\n        // Use effect to update the ref after render\r\n        useEffect(() => {\r\n            ref.current = value;\r\n        });\r\n\r\n        // Return the previous value (what ref was BEFORE this render)\r\n        const prevValue = ref.current;\r\n\r\n        return prevValue;\r\n    }\r\n\r\n    /**\r\n     * useToggle hook - boolean toggle\r\n     */\r\n    export function useToggle(initialValue: boolean = false): [boolean, () => void] {\r\n        const [value, setValue] = useState(initialValue);\r\n\r\n        const toggle = useCallback(() => {\r\n            setValue(v => !v);\r\n        }, []);\r\n\r\n        return [value, toggle];\r\n    }\r\n\r\n    /**\r\n     * useInterval hook - setInterval with cleanup\r\n     */\r\n    export function useInterval(callback: () => void, delay: number | null): void {\r\n        const savedCallback = useRef(callback);\r\n\r\n        useEffect(() => {\r\n            savedCallback.current = callback;\r\n        }, [callback]);\r\n\r\n        useEffect(() => {\r\n            if (delay === null) return;\r\n\r\n            const id = setInterval(() => savedCallback.current(), delay);\r\n\r\n            return () => clearInterval(id);\r\n        }, [delay]);\r\n    }\r\n\r\n    /**\r\n     * useFetch hook - data fetching\r\n     */\r\n    export function useFetch<T>(\r\n        url: string,\r\n        options?: RequestInit\r\n    ): {\r\n        data: T | null;\r\n        loading: boolean;\r\n        error: Error | null;\r\n        refetch: () => void;\r\n    } {\r\n        const [data, setData] = useState<T | null>(null);\r\n        const [loading, setLoading] = useState(true);\r\n        const [error, setError] = useState<Error | null>(null);\r\n\r\n        const fetchData = useCallback(async () => {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            try {\r\n                const response = await fetch(url, options);\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP error! status: ${response.status}`);\r\n                }\r\n                const json = await response.json() as T;\r\n                setData(json);\r\n            } catch (e) {\r\n                setError(e as Error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }, [url]);\r\n\r\n        useEffect(() => {\r\n            fetchData();\r\n        }, [fetchData]);\r\n\r\n        return { data, loading, error, refetch: fetchData };\r\n    }\r\n\r\n    /**\r\n     * useWindowSize hook - track window dimensions\r\n     */\r\n    export function useWindowSize(): { width: number; height: number } {\r\n        const [size, setSize] = useState({\r\n            width: window.innerWidth,\r\n            height: window.innerHeight\r\n        });\r\n\r\n        useEffect(() => {\r\n            const handleResize = () => {\r\n                setSize({\r\n                    width: window.innerWidth,\r\n                    height: window.innerHeight\r\n                });\r\n            };\r\n\r\n            window.addEventListener('resize', handleResize);\r\n            return () => window.removeEventListener('resize', handleResize);\r\n        }, []);\r\n\r\n        return size;\r\n    }\r\n\r\n    /**\r\n     * useEventListener hook - add event listener\r\n     */\r\n    export function useEventListener<K extends keyof WindowEventMap>(\r\n        eventName: K,\r\n        handler: (event: WindowEventMap[K]) => void,\r\n        element: HTMLElement | Window = window\r\n    ): void {\r\n        const savedHandler = useRef(handler);\r\n\r\n        useEffect(() => {\r\n            savedHandler.current = handler;\r\n        }, [handler]);\r\n\r\n        useEffect(() => {\r\n            const isSupported = element && 'addEventListener' in element;\r\n            if (!isSupported) return;\r\n\r\n            const eventListener = (event: Event) => {\r\n                savedHandler.current(event as WindowEventMap[K]);\r\n            };\r\n\r\n            element.addEventListener(eventName, eventListener);\r\n\r\n            return () => {\r\n                element.removeEventListener(eventName, eventListener);\r\n            };\r\n        }, [eventName, element]);\r\n    }\r\n\r\n    /**\r\n     * Create a functional component with hooks\r\n     * Returns a component class that can be instantiated\r\n     */\r\n    export function createFunctionalComponent<P extends Record<string, unknown> = Record<string, unknown>>(\r\n        fn: (props: P) => VNode,\r\n        displayName?: string\r\n    ): new (props?: P) => Component<P> {\r\n        class FunctionalComponent extends Component<P> {\r\n            render(): VNode {\r\n                setHookContext(this);\r\n                try {\r\n                    return fn(this.props) as VNode;\r\n                } finally {\r\n                    clearHookContext();\r\n                }\r\n            }\r\n        }\r\n\r\n        if (displayName) {\r\n            Object.defineProperty(FunctionalComponent, 'name', { value: displayName });\r\n        }\r\n\r\n        return FunctionalComponent as new (props?: P) => Component<P>;\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  HELP \r\n\r\n    function areDepsEqual(prevDeps: unknown[] | undefined, nextDeps: unknown[]): boolean {\r\n        if (!prevDeps || prevDeps.length !== nextDeps.length) {\r\n            return false;\r\n        }\r\n\r\n        for (let i = 0; i < prevDeps.length; i++) {\r\n            if (prevDeps[i] !== nextDeps[i]) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n// \r\n","/* eslint-disable @typescript-eslint/no-explicit-any */\r\n// src/mod/core/i18n.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  CORE \r\n\r\n    import type { TranslationSet, LanguageCode, I18nConfig, VNode } from '../../types';\r\n    import { createElement } from '@je-es/vdom';\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    class I18nManager {\r\n\r\n        //  INIT \r\n\r\n            private translations            : TranslationSet    = {};\r\n            private currentLanguage         : LanguageCode      = 'en';\r\n            private defaultLanguage         : LanguageCode      = 'en';\r\n            private supportedLanguages      : Set<LanguageCode> = new Set<LanguageCode>(['en']);\r\n            private cachePath               : string            = '';\r\n            private readyListeners          : (() => void)[]    = [];\r\n\r\n            constructor(config?: I18nConfig) {\r\n                if (config) {\r\n                    this.defaultLanguage    = config.defaultLanguage    || 'en';\r\n                    this.cachePath          = config.staticPath         || 'static/i18n';\r\n                    this.currentLanguage    = this.getStoredLanguage()  || config.defaultLanguage || 'en';\r\n\r\n                    if (config.supportedLanguages) {\r\n                        this.supportedLanguages = new Set(config.supportedLanguages);\r\n                    }\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            /**\r\n             * Load translations for a specific language\r\n             * @param lang Language code (e.g., 'en', 'ar', 'fr')\r\n             * @param translations Translation object (can be nested)\r\n             */\r\n            public loadLanguage(lang: LanguageCode, translations: Record<string, any>): void {\r\n                if (!this.translations[lang]) {\r\n                    this.translations[lang] = {};\r\n                }\r\n                // Flatten the nested translations\r\n                const flattened = this.flattenObject(translations);\r\n                this.translations[lang] = { ...this.translations[lang], ...flattened };\r\n                this.supportedLanguages.add(lang);\r\n            }\r\n\r\n            /**\r\n             * Flatten nested object into dot notation\r\n             * @param obj Nested object\r\n             * @param prefix Current prefix\r\n             * @returns Flattened object with dot notation keys\r\n             */\r\n            private flattenObject(obj: Record<string, any>, prefix: string = ''): Record<string, string> {\r\n                const flattened: Record<string, string> = {};\r\n\r\n                for (const key in obj) {\r\n                    if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n                        const value = obj[key];\r\n                        const newKey = prefix ? `${prefix}.${key}` : key;\r\n\r\n                        if (typeof value === 'object' && value !== null && !Array.isArray(value)) {\r\n                            // Recursively flatten nested objects\r\n                            Object.assign(flattened, this.flattenObject(value, newKey));\r\n                        } else {\r\n                            // Store the value\r\n                            flattened[newKey] = String(value);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return flattened;\r\n            }\r\n\r\n            /**\r\n             * Load all translations from static files\r\n             * @param translations Object with language codes as keys and translation objects as values\r\n             */\r\n            public loadTranslations(translations: TranslationSet): void {\r\n                Object.entries(translations).forEach(([lang, trans]) => {\r\n                    this.loadLanguage(lang, trans);\r\n                });\r\n            }\r\n\r\n            /**\r\n             * Set the current language\r\n             * @param lang Language code\r\n             */\r\n            public setLanguage(lang: LanguageCode): void {\r\n                if (this.supportedLanguages.has(lang)) {\r\n                    this.currentLanguage = lang;\r\n                    this.storeLanguage(lang);\r\n                    this.dispatchLanguageChangeEvent();\r\n                } else if (this.supportedLanguages.has(this.defaultLanguage)) {\r\n                    this.currentLanguage = this.defaultLanguage;\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Get the current language\r\n             */\r\n            public getLanguage(): LanguageCode {\r\n                return this.currentLanguage;\r\n            }\r\n\r\n            /**\r\n             * Get all supported languages\r\n             */\r\n            public getSupportedLanguages(): LanguageCode[] {\r\n                return Array.from(this.supportedLanguages);\r\n            }\r\n\r\n            /**\r\n             * Translate a key with smart parameter replacement\r\n             * Supports nested translation keys as parameter values\r\n             *\r\n             * @example\r\n             * // Simple translation\r\n             * t('button.login') // => \"Login\" or \"\" depending on current language\r\n             *\r\n             * @example\r\n             * // With parameters\r\n             * t('nav.credits', { count: '100' })\r\n             * // => \"Available Credits: 100\"\r\n             *\r\n             * @example\r\n             * // With nested translation keys as parameters\r\n             * t('language.switching_to', { language: 'button.login' })\r\n             * // => \"Switching to Login...\"\r\n             *\r\n             * @param key Translation key (supports dot notation for nested keys)\r\n             * @param params Optional parameters for replacement\r\n             * @param defaultValue Optional default translation key\r\n             * @returns Translated string with replaced parameters\r\n             */\r\n            public t(key: string, params?: Record<string, string>, defaultValue?: string): string {\r\n                const lang = this.currentLanguage;\r\n\r\n                let translation = this.getTranslation(key, defaultValue);\r\n\r\n                if (params) {\r\n                    Object.entries(params).forEach(([param, value]) => {\r\n                        const paramValue =\r\n                            this.translations[lang]?.[value] ||\r\n                            this.translations[this.defaultLanguage]?.[value] ||\r\n                            value;\r\n\r\n                        translation = translation.replace(\r\n                            new RegExp(`\\\\{${param}\\\\}`, 'g'),\r\n                            paramValue\r\n                        );\r\n                    });\r\n                }\r\n\r\n                return translation;\r\n            }\r\n\r\n            private getTranslation(key: string, defaultValue?: string): string {\r\n                const lang = this.currentLanguage;\r\n\r\n                // warn if not found\r\n                if (!this.translations[lang]?.[key]) {\r\n                    console.warn(`Translation key not found: ${key}`);\r\n\r\n                    return defaultValue || key;\r\n                }\r\n\r\n                return this.translations[lang]?.[key] || this.translations[this.defaultLanguage]?.[key];\r\n            }\r\n\r\n            /**\r\n             * Translate with a specific language (overrides current language temporarily)\r\n             *\r\n             * @param key Translation key\r\n             * @param lang Language code\r\n             * @param params Optional parameters\r\n             * @returns Translated string\r\n             */\r\n            public tLang(key: string, lang: LanguageCode, params?: Record<string, string>): string {\r\n                const currentLang = this.currentLanguage;\r\n                this.currentLanguage = lang;\r\n                const result = this.t(key, params);\r\n                this.currentLanguage = currentLang;\r\n                return result;\r\n            }\r\n\r\n            /**\r\n             * Translate a key and convert HTML tags in the translation to VNode elements\r\n             * Supports tags like <br>, <strong>, <em>, <b>, <i>, etc.\r\n             * Useful for multiline translations with formatting\r\n             *\r\n             * @example\r\n             * // Translation: \"Hello <br> World\"\r\n             * tHtml('page.home.title') // => [text node, br element, text node]\r\n             *\r\n             * @param key Translation key\r\n             * @param params Optional parameters for replacement\r\n             * @param defaultValue Optional default translation key\r\n             * @returns Array of VNode and string elements that can be used as children\r\n             */\r\n            public tHtml(key: string, params?: Record<string, string>, defaultValue?: string): (VNode | string)[] {\r\n                const translation = this.t(key, params, defaultValue);\r\n                return this.parseHtmlString(translation);\r\n            }\r\n\r\n            /**\r\n             * Parse HTML string into VNode and text elements\r\n             * Converts \\n and /n sequences to <br> tags\r\n             * @private\r\n             */\r\n            private parseHtmlString(htmlString: string): (VNode | string)[] {\r\n                // Replace both \\n and /n with <br> tags\r\n                const processedString = htmlString.replace(/\\\\n|\\/n/g, '<br>');\r\n\r\n                const result: (VNode | string)[] = [];\r\n                const regex = /<([^/>]+)>([^<]*)<\\/\\1>|<([^/>]+)\\s*\\/?>|([^<]+)/g;\r\n                let match;\r\n\r\n                while ((match = regex.exec(processedString)) !== null) {\r\n                    const openingTag = match[1]; // For paired tags like <strong>text</strong>\r\n                    const pairedContent = match[2];\r\n                    const selfClosingTag = match[3]; // For self-closing tags like <br/>\r\n                    const textContent = match[4];\r\n\r\n                    if (textContent) {\r\n                        // Plain text content\r\n                        result.push(textContent);\r\n                    } else if (openingTag) {\r\n                        // Paired tag like <strong>text</strong>\r\n                        const tagName = openingTag.split(/\\s+/)[0].toLowerCase();\r\n                        result.push(createElement(tagName, {}, pairedContent));\r\n                    } else if (selfClosingTag) {\r\n                        // Self-closing tag like <br/> or <br>\r\n                        const tagName = selfClosingTag.trim().toLowerCase();\r\n                        result.push(createElement(tagName, {}));\r\n                    }\r\n                }\r\n\r\n                return result.length > 0 ? result : [htmlString];\r\n            }\r\n\r\n            /**\r\n             * Get all translations for current language\r\n             */\r\n            public getTranslations(): Record<string, string> {\r\n                return this.translations[this.currentLanguage] || {};\r\n            }\r\n\r\n            /**\r\n             * Check if a translation key exists\r\n             * @param key Translation key\r\n             * @returns true if key exists in current or default language\r\n             */\r\n            public hasKey(key: string): boolean {\r\n                return !!(\r\n                    this.translations[this.currentLanguage]?.[key] ||\r\n                    this.translations[this.defaultLanguage]?.[key]\r\n                );\r\n            }\r\n\r\n            /**\r\n             * Create a reactive translation function that listens to language changes\r\n             * @param updateCallback Callback function to execute when language changes\r\n             * @returns Function to unsubscribe from language changes\r\n             */\r\n            public createTranslator(updateCallback: () => void): () => void {\r\n                const handler = () => updateCallback();\r\n                if (typeof window !== 'undefined') {\r\n                    window.addEventListener('languagechange', handler);\r\n                    return () => window.removeEventListener('languagechange', handler);\r\n                }\r\n                return () => {};\r\n            }\r\n\r\n            /**\r\n             * Load translations from URL(s)\r\n             * Supports patterns like '/static/i18n/*.json' or specific URLs\r\n             *\r\n             * @example\r\n             * // Load from a pattern\r\n             * await loadFromUrl('/static/i18n/*.json');\r\n             *\r\n             * @example\r\n             * // Load specific language files\r\n             * await loadFromUrl(['/static/i18n/en.json', '/static/i18n/ar.json']);\r\n             *\r\n             * @param urlPattern String pattern or array of URLs\r\n             * @returns Promise that resolves when all translations are loaded\r\n             */\r\n            public async loadFromUrl(urlPattern: string | string[]): Promise<void> {\r\n                const urls = Array.isArray(urlPattern) ? urlPattern : [urlPattern];\r\n                const translations: TranslationSet = {};\r\n                // let loadedCount = 0;\r\n\r\n                for (const url of urls) {\r\n                    if (url.includes('*')) {\r\n                        const pattern = url.replace('*.json', '');\r\n                        const langCodes = this.supportedLanguages;\r\n\r\n                        for (const lang of langCodes) {\r\n                            try {\r\n                                let fullUrl = `${pattern}${lang}.json`;\r\n\r\n                                if (typeof window !== 'undefined' && !fullUrl.startsWith('http')) {\r\n                                    // Always use domain root + path, ignoring current page path\r\n                                    fullUrl = window.location.origin + (fullUrl.startsWith('/') ? fullUrl : '/' + fullUrl);\r\n                                }\r\n\r\n                                const response = await fetch(fullUrl);\r\n                                if (response.ok) {\r\n                                    const data = await response.json();\r\n                                    translations[lang] = data;\r\n                                    // loadedCount++;\r\n                                }\r\n                            } catch {\r\n                                // Silently continue on error\r\n                            }\r\n                        }\r\n                    } else {\r\n                        try {\r\n                            let fullUrl = url;\r\n\r\n                            if (typeof window !== 'undefined' && !fullUrl.startsWith('http')) {\r\n                                // Always use domain root + path, ignoring current page path\r\n                                fullUrl = window.location.origin + (fullUrl.startsWith('/') ? fullUrl : '/' + fullUrl);\r\n                            }\r\n\r\n                            const response = await fetch(fullUrl);\r\n                            if (response.ok) {\r\n                                const data = await response.json();\r\n                                const langMatch = url.match(/([a-z]{2,3})\\.json$/i);\r\n                                const lang = langMatch ? langMatch[1].toLowerCase() : 'en';\r\n                                translations[lang] = data;\r\n                                this.supportedLanguages.add(lang);\r\n                                // loadedCount++;\r\n                            }\r\n                        } catch {\r\n                            // Silently continue on error\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (Object.keys(translations).length > 0) {\r\n                    this.loadTranslations(translations);\r\n                    this.notifyReady();\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Register a callback for when i18n is ready\r\n             */\r\n            public onReady(callback: () => void): void {\r\n                if (Object.keys(this.translations).length > 0) {\r\n                    // Already loaded, call immediately\r\n                    callback();\r\n                } else {\r\n                    // Not loaded yet, add to listeners\r\n                    this.readyListeners.push(callback);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Notify all listeners that i18n is ready\r\n             */\r\n            private notifyReady(): void {\r\n                for (const listener of this.readyListeners) {\r\n                    listener();\r\n                }\r\n                this.readyListeners = [];\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  HELP \r\n\r\n            /**\r\n             * Get language from localStorage\r\n             */\r\n            private getStoredLanguage(): LanguageCode | null {\r\n                if (typeof localStorage !== 'undefined') {\r\n                    return (localStorage.getItem('app-language') as LanguageCode) || null;\r\n                }\r\n                return null;\r\n            }\r\n\r\n            /**\r\n             * Store language in localStorage\r\n             */\r\n            private storeLanguage(lang: LanguageCode): void {\r\n                if (typeof localStorage !== 'undefined') {\r\n                    localStorage.setItem('app-language', lang);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Dispatch language change event\r\n             */\r\n            private dispatchLanguageChangeEvent(): void {\r\n                if (typeof window !== 'undefined') {\r\n                    window.dispatchEvent(new CustomEvent('languagechange', { detail: { language: this.currentLanguage } }));\r\n                }\r\n            }\r\n\r\n        // \r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  HELP \r\n\r\n    // Singleton instance\r\n    let i18nInstance: I18nManager | null = null;\r\n\r\n    /**\r\n     * Get the global i18n instance\r\n     */\r\n    export function getI18n(): I18nManager {\r\n        if (!i18nInstance) {\r\n            i18nInstance = new I18nManager();\r\n        }\r\n        return i18nInstance;\r\n    }\r\n\r\n    export { I18nManager };\r\n\r\n    export type { TranslationSet, LanguageCode, I18nConfig };\r\n\r\n    /**\r\n     * Global translation function\r\n     * @param key Translation key (supports dot notation for nested keys)\r\n     * @param params Optional parameters\r\n     * @param defaultValue Optional default translation key\r\n     * @returns Translated string\r\n     */\r\n    export function t(key: string, params?: Record<string, string>, defaultValue?: string): string {\r\n        return getI18n().t(key, params, defaultValue);\r\n    }\r\n\r\n    /**\r\n     * Translate with a specific language (overrides current language temporarily)\r\n     * @param key Translation key\r\n     * @param lang Language code\r\n     * @param params Optional parameters\r\n     * @returns Translated string\r\n     */\r\n    export function tLang(key: string, lang: string, params?: Record<string, string>): string {\r\n        return getI18n().tLang(key, lang, params);\r\n    }\r\n\r\n    /**\r\n     * Translate a key and convert HTML tags to VNode elements\r\n     * Useful for multiline translations with formatting like <br>\r\n     * @param key Translation key\r\n     * @param params Optional parameters\r\n     * @param defaultValue Optional default translation key\r\n     * @returns Array of VNode and string elements that can be used as children\r\n     */\r\n    export function tHtml(key: string, params?: Record<string, string>, defaultValue?: string): (VNode | string)[] {\r\n        return getI18n().tHtml(key, params, defaultValue);\r\n    }\r\n\r\n    /**\r\n     * Set the current language globally (synchronous)\r\n     * @param lang Language code\r\n     */\r\n    export function setLanguage(lang: string): void {\r\n        getI18n().setLanguage(lang);\r\n    }\r\n\r\n    /**\r\n     * Set the current language globally with lazy-loading support (asynchronous)\r\n     * Use this when you want to lazy-load language files on demand\r\n     * @param lang Language code\r\n     * @param staticPath Path to language files for lazy-loading\r\n     * @returns Promise that resolves when language is loaded and set\r\n     */\r\n    export async function setLanguageAsync(lang: string, staticPath?: string): Promise<void> {\r\n        const manager = getI18n();\r\n\r\n        // Check if language is already loaded\r\n        const currentTranslations = manager.getTranslations();\r\n        const isLanguageLoaded = Object.keys(currentTranslations).length > 0;\r\n\r\n        if (!isLanguageLoaded && staticPath) {\r\n            // Language not loaded yet, try to lazy-load it\r\n            const baseUrl = staticPath.endsWith('/') ? staticPath : staticPath + '/';\r\n            try {\r\n                await manager.loadFromUrl(baseUrl + `${lang}.json`);\r\n            } catch (error) {\r\n                console.warn(`Failed to lazy-load language: ${lang}`, error);\r\n            }\r\n        }\r\n\r\n        manager.setLanguage(lang);\r\n    }\r\n\r\n    /**\r\n     * Get the current language\r\n     */\r\n    export function getCurrentLanguage(): string {\r\n        return getI18n().getLanguage();\r\n    }\r\n\r\n    /**\r\n     * Load translations for a specific language\r\n     * @param lang Language code\r\n     * @param translations Translation object (can be nested)\r\n     */\r\n    export function loadLanguage(lang: string, translations: Record<string, any>): void {\r\n        getI18n().loadLanguage(lang, translations);\r\n    }\r\n\r\n    /**\r\n     * Load all translations\r\n     * @param translations The translations object (can be nested)\r\n     */\r\n    export function loadTranslations(translations: Record<string, Record<string, any>>): void {\r\n        getI18n().loadTranslations(translations);\r\n    }\r\n\r\n    /**\r\n     * Get all supported languages\r\n     */\r\n    export function getSupportedLanguages(): string[] {\r\n        return getI18n().getSupportedLanguages();\r\n    }\r\n\r\n    /**\r\n     * Check if a translation key exists\r\n     * @param key The translation key to check\r\n     * @returns Whether the key exists\r\n     */\r\n    export function hasKey(key: string): boolean {\r\n        return getI18n().hasKey(key);\r\n    }\r\n\r\n    /**\r\n     * Get all translations for current language\r\n     */\r\n    export function getTranslations(): Record<string, string> {\r\n        return getI18n().getTranslations();\r\n    }\r\n\r\n    /**\r\n     * Create a reactive translator that listens to language changes\r\n     * @param updateCallback Callback function to execute when language changes\r\n     * @returns Function to unsubscribe from language changes\r\n     */\r\n    export function createTranslator(updateCallback: () => void): () => void {\r\n        return getI18n().createTranslator(updateCallback);\r\n    }\r\n\r\n    /**\r\n     * Load translations from URL(s)\r\n     * Supports patterns like '/static/i18n/*.json' or specific URLs\r\n     *\r\n     * @example\r\n     * // Load from a pattern\r\n     * await loadFromUrl('/static/i18n/*.json');\r\n     *\r\n     * @example\r\n     * // Load specific language files\r\n     * await loadFromUrl(['/static/i18n/en.json', '/static/i18n/ar.json']);\r\n     *\r\n     * @param urlPattern String pattern or array of URLs\r\n     * @returns Promise that resolves when all translations are loaded\r\n     */\r\n    export async function loadFromUrl(urlPattern: string | string[]): Promise<void> {\r\n        return getI18n().loadFromUrl(urlPattern);\r\n    }\r\n\r\n    /**\r\n     * Initialize i18n synchronously (useful for testing)\r\n     * Creates a new I18nManager instance with the provided config\r\n     *\r\n     * @param config I18n configuration\r\n     *\r\n     * @example\r\n     * initializeI18n({\r\n     *     defaultLanguage: 'en',\r\n     *     supportedLanguages: ['en', 'ar']\r\n     * });\r\n     */\r\n    export function initializeI18n(config?: I18nConfig): void {\r\n        i18nInstance = new I18nManager(config);\r\n    }\r\n\r\n    /**\r\n     * Setup i18n: Initialize and load the currently selected language\r\n     * Uses stored language from localStorage if available, otherwise uses default\r\n     * Other languages are lazy-loaded when setLanguage is called\r\n     *\r\n     * @param config I18n configuration\r\n     * @returns Promise that resolves when the selected language is loaded\r\n     *\r\n     * @example\r\n     * await setupI18n({\r\n     *     defaultLanguage: 'en',\r\n     *     supportedLanguages: ['en', 'ar'],\r\n     *     staticPath: 'static/i18n'\r\n     * });\r\n     * console.log(t('button.login')); // Ready to use in current language!\r\n     */\r\n    export async function setupI18n(config: I18nConfig): Promise<void> {\r\n        // Initialize i18n with config\r\n        const manager = new I18nManager(config);\r\n        i18nInstance = manager;\r\n\r\n        // Load the CURRENT language (stored or default)\r\n        if (config.staticPath) {\r\n            const baseUrl = config.staticPath.endsWith('/')\r\n                ? config.staticPath\r\n                : config.staticPath + '/';\r\n\r\n            // Get the language to load: stored language or default\r\n            const langToLoad = manager.getLanguage();\r\n            const langUrl = baseUrl + `${langToLoad}.json`;\r\n\r\n            await manager.loadFromUrl(langUrl);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Load a specific language file on-demand\r\n     * Use this when user switches to a language that hasn't been loaded yet\r\n     *\r\n     * @param lang Language code (e.g., 'ar', 'fr')\r\n     * @param staticPath Optional path to language files (defaults to 'static/i18n')\r\n     * @returns Promise that resolves when language is loaded\r\n     *\r\n     * @example\r\n     * // User switches to Arabic - load it first if not already loaded\r\n     * await loadLanguageFile('ar');\r\n     * setLanguage('ar');\r\n     */\r\n    export async function loadLanguageFile(lang: string, staticPath?: string): Promise<void> {\r\n        const manager = getI18n();\r\n        const path = staticPath || 'static/i18n';\r\n        const baseUrl = path.endsWith('/') ? path : path + '/';\r\n        const langUrl = baseUrl + lang + '.json';\r\n\r\n        await manager.loadFromUrl(langUrl);\r\n    }\r\n\r\n// ","// src/mod/core/router.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import type { Route, RouteConfig, NavigationGuard } from '../../types';\r\n    import type { VNode }                               from '@je-es/vdom';\r\n    import { Component, ComponentConstructor }          from './component';\r\n    import { createElement }                            from '@je-es/vdom';\r\nimport { t } from './i18n';\r\n\r\n    export type { Route, RouteConfig, NavigationGuard };\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    // Type for lazy-loaded module\r\n    interface LazyModule {\r\n        default?        : ComponentConstructor;\r\n        HomePage?       : ComponentConstructor;\r\n        TodoPage?       : ComponentConstructor;\r\n        [key: string]   : unknown;\r\n    }\r\n\r\n// \r\n\r\n\r\n//  CORE \r\n\r\n    export class Router {\r\n        private routes: RouteConfig[] = [];\r\n        private currentRoute: Route | null = null;\r\n        private mode: 'history' | 'hash' = 'history';\r\n        private base: string = '/';\r\n        private beforeEachHooks: NavigationGuard[] = [];\r\n        private afterEachHooks: ((to: Route, from: Route) => void)[] = [];\r\n        private currentComponent: Component | null = null;\r\n        private routerOutlet: HTMLElement | null = null;\r\n        private isNavigating: boolean = false;\r\n        private scrollBehavior: 'auto' | 'smooth' | 'instant' = 'auto';\r\n        private notFoundHandler: (() => void) | null = null;\r\n        private _internalPath: string | null = null;\r\n\r\n        /**\r\n         * Initialize router\r\n         */\r\n        init(\r\n            routes: RouteConfig[],\r\n            mode: 'history' | 'hash' = 'history',\r\n            base: string = '/',\r\n            scrollBehavior: 'auto' | 'smooth' | 'instant' = 'auto'\r\n        ): void {\r\n            this.routes = routes;\r\n            this.mode = mode;\r\n            this.base = base.endsWith('/') ? base.slice(0, -1) : base;\r\n            this.scrollBehavior = scrollBehavior;\r\n\r\n            this._initializeRouting();\r\n            this._handleRoute();\r\n        }\r\n\r\n        /**\r\n         * Navigate to a path\r\n         */\r\n        async push(path: string, state?: Record<string, unknown>): Promise<void> {\r\n            if (this.isNavigating) {\r\n                // console.warn('Navigation already in progress');\r\n                this.isNavigating = false;\r\n                // return;\r\n            }\r\n\r\n            this._internalPath = path;\r\n\r\n            if (this.mode === 'history') {\r\n                window.history.pushState(state || {}, '', this._buildFullPath(path));\r\n            } else {\r\n                window.location.hash = path;\r\n            }\r\n\r\n            await this._handleRoute();\r\n        }\r\n\r\n        /**\r\n         * Replace current route\r\n         */\r\n        async replace(path: string, state?: Record<string, unknown>): Promise<void> {\r\n            this._internalPath = path;\r\n\r\n            if (this.mode === 'history') {\r\n                window.history.replaceState(state || {}, '', this._buildFullPath(path));\r\n            } else {\r\n                window.location.hash = path;\r\n            }\r\n\r\n            return this._handleRoute();\r\n        }\r\n\r\n        back(): void { window.history.back(); }\r\n        forward(): void { window.history.forward(); }\r\n        go(delta: number): void { window.history.go(delta); }\r\n\r\n        /**\r\n         * Navigation guards\r\n         */\r\n        beforeEach(hook: NavigationGuard): void {\r\n            this.beforeEachHooks.push(hook);\r\n        }\r\n\r\n        afterEach(hook: (to: Route, from: Route) => void): void {\r\n            this.afterEachHooks.push(hook);\r\n        }\r\n\r\n        onNotFound(handler: () => void): void {\r\n            this.notFoundHandler = handler;\r\n        }\r\n\r\n        /**\r\n         * Route utilities\r\n         */\r\n        getCurrentRoute(): Route | null {\r\n            return this.currentRoute ? { ...this.currentRoute } : null;\r\n        }\r\n\r\n        isActive(path: string, exact: boolean = false): boolean {\r\n            if (!this.currentRoute) return false;\r\n            return exact\r\n                ? this.currentRoute.path === path\r\n                : this.currentRoute.path.startsWith(path);\r\n        }\r\n\r\n        outlet(): VNode {\r\n            return createElement('div', {\r\n                'data-router-outlet': 'true',\r\n                style: 'display: contents;'\r\n            }) as VNode;\r\n        }\r\n\r\n        getRoute(name: string): RouteConfig | undefined {\r\n            return this.routes.find(r => r.name === name);\r\n        }\r\n\r\n        async pushNamed(name: string, params?: Record<string, string>): Promise<void> {\r\n            const route = this.getRoute(name);\r\n            if (!route) {\r\n                console.error(`Route with name \"${name}\" not found`);\r\n                return;\r\n            }\r\n\r\n            let path = route.path;\r\n            if (params) {\r\n                for (const [key, value] of Object.entries(params)) {\r\n                    path = path.replace(`:${key}`, value);\r\n                }\r\n            }\r\n\r\n            return this.push(path);\r\n        }\r\n\r\n        resolve(path: string): Route | null {\r\n            const matchedRoute = this._matchRoute(path);\r\n            if (!matchedRoute) return null;\r\n\r\n            const { route, params } = matchedRoute;\r\n            return {\r\n                path,\r\n                params,\r\n                query: this._parseQuery(path),\r\n                meta: route.meta || {},\r\n                hash: path.includes('#') ? path.split('#')[1] : '',\r\n                name: route.name,\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Initialize routing handlers\r\n         */\r\n        private _initializeRouting(): void {\r\n            // Handle browser navigation\r\n            window.addEventListener('popstate', () => {\r\n                this._internalPath = null;\r\n                this._handleRoute();\r\n            });\r\n\r\n            if (this.mode === 'hash') {\r\n                window.addEventListener('hashchange', () => {\r\n                    this._internalPath = null;\r\n                    this._handleRoute();\r\n                });\r\n            }\r\n\r\n            // Intercept link clicks\r\n            document.addEventListener('click', (e) => {\r\n                const link = (e.target as HTMLElement).closest('a[href]') as HTMLAnchorElement | null;\r\n\r\n                if (link && this._shouldInterceptLink(link)) {\r\n                    e.preventDefault();\r\n                    const href = link.getAttribute('href');\r\n                    if (href) {\r\n                        const path = this.mode === 'hash' && href.startsWith('#')\r\n                            ? href.substring(1)\r\n                            : href.replace(this.base, '');\r\n                        this.push(path);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        private _shouldInterceptLink(link: HTMLAnchorElement): boolean {\r\n            const href = link.getAttribute('href');\r\n            return !!(\r\n                href &&\r\n                link.hostname === window.location.hostname &&\r\n                link.target !== '_blank' &&\r\n                !link.hasAttribute('download') &&\r\n                link.rel !== 'external'\r\n            );\r\n        }\r\n\r\n        /**\r\n         * Handle route change\r\n         */\r\n        private async _handleRoute(): Promise<void> {\r\n            if (this.isNavigating) return;\r\n\r\n            this.isNavigating = true;\r\n\r\n            try {\r\n                const path = this._getCurrentPath();\r\n                const matchedRoute = this._matchRoute(path);\r\n\r\n                if (!matchedRoute) {\r\n                    this._handleNotFound(path);\r\n                    return;\r\n                }\r\n\r\n                const { route, params } = matchedRoute;\r\n                const to = this._buildRouteObject(path, params, route);\r\n                const from = this.currentRoute || this._buildEmptyRoute();\r\n\r\n                // Run guards\r\n                const canProceed = await this._runNavigationGuards(route, to, from);\r\n                if (!canProceed) return;\r\n\r\n                this.currentRoute = to;\r\n\r\n                await this._renderComponent(route);\r\n                this._handleScrollBehavior(to, from);\r\n\r\n                if (route.meta?.t_title && typeof route.meta.t_title === 'string') {\r\n                    document.title = t(route.meta.t_title);\r\n                } else if (route.meta?.title && typeof route.meta.title === 'string') {\r\n                    document.title = route.meta.title;\r\n                }\r\n\r\n                // Run after hooks\r\n                this.afterEachHooks.forEach(hook => hook(to, from));\r\n\r\n            } catch (error) {\r\n                console.error('Router error:', error);\r\n            } finally {\r\n                this.isNavigating = false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Handle 404 not found\r\n         */\r\n        private _handleNotFound(path: string): void {\r\n            console.warn(`No route matched for path: ${path}`);\r\n\r\n            this.currentRoute = {\r\n                path,\r\n                params: {},\r\n                query: this._parseQuery(),\r\n                meta: {},\r\n                hash: window.location.hash.substring(1),\r\n            };\r\n\r\n            if (this.notFoundHandler) {\r\n                this.notFoundHandler();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Build route object\r\n         */\r\n        private _buildRouteObject(\r\n            path: string,\r\n            params: Record<string, string>,\r\n            route: RouteConfig\r\n        ): Route {\r\n            return {\r\n                path,\r\n                params,\r\n                query: this._parseQuery(),\r\n                meta: route.meta || {},\r\n                hash: window.location.hash.substring(1),\r\n                name: route.name,\r\n            };\r\n        }\r\n\r\n        private _buildEmptyRoute(): Route {\r\n            return {\r\n                path: '',\r\n                params: {},\r\n                query: {},\r\n                meta: {},\r\n                hash: '',\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Run navigation guards\r\n         */\r\n        private async _runNavigationGuards(\r\n            route: RouteConfig,\r\n            to: Route,\r\n            from: Route\r\n        ): Promise<boolean> {\r\n            // Route-specific guard\r\n            if (route.beforeEnter) {\r\n                const result = await this._runGuard(route.beforeEnter, to, from);\r\n                if (!result) return false;\r\n            }\r\n\r\n            // Global guards\r\n            for (const guard of this.beforeEachHooks) {\r\n                const result = await this._runGuard(guard, to, from);\r\n                if (!result) return false;\r\n            }\r\n\r\n            return true;\r\n        }\r\n\r\n        private _runGuard(\r\n            guard: NavigationGuard,\r\n            to: Route,\r\n            from: Route\r\n        ): Promise<boolean> {\r\n            return new Promise((resolve) => {\r\n                guard(to, from, (nextPath?: string | false) => {\r\n                    if (nextPath === false) {\r\n                        resolve(false);\r\n                    } else if (typeof nextPath === 'string') {\r\n                        this.push(nextPath);\r\n                        resolve(false);\r\n                    } else {\r\n                        resolve(true);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Render component - simplified component resolution\r\n         */\r\n        private async _renderComponent(route: RouteConfig): Promise<void> {\r\n            // Get or find outlet\r\n            if (!this.routerOutlet) {\r\n                this.routerOutlet = document.querySelector('[data-router-outlet=\"true\"]') as HTMLElement;\r\n                if (!this.routerOutlet) {\r\n                    console.warn('Router outlet not found');\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // Unmount previous component\r\n            if (this.currentComponent) {\r\n                this.currentComponent.unmount();\r\n                this.currentComponent = null;\r\n            }\r\n\r\n            // Clear outlet\r\n            this.routerOutlet.innerHTML = '';\r\n\r\n            try {\r\n                const ComponentClass = await this._resolveComponent(route.component);\r\n\r\n                if (!ComponentClass || typeof ComponentClass !== 'function') {\r\n                    throw new Error('Component is null or not a constructor');\r\n                }\r\n\r\n                const ComponentCtor = ComponentClass as new () => Component;\r\n                // console.log(' Mounting:', ComponentCtor.name || 'Component');\r\n                this.currentComponent = new ComponentCtor();\r\n\r\n                if (this.currentComponent) {\r\n                    await this.currentComponent.mount(this.routerOutlet);\r\n                    // console.log(' Mounted successfully!');\r\n                }\r\n\r\n            } catch (error) {\r\n                this._renderError(route.path, error);\r\n                throw error;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Resolve component (handle lazy loading)\r\n         */\r\n        private async _resolveComponent(\r\n            component: ComponentConstructor | (() => Promise<LazyModule>)\r\n        ): Promise<ComponentConstructor | null> {\r\n            // console.log(' Resolving component...');\r\n\r\n            // Check if it's a class constructor\r\n            if (typeof component === 'function') {\r\n                // Try to determine if it's a class vs a loader function\r\n                const hasPrototype = 'prototype' in component && component.prototype;\r\n                const proto = hasPrototype ? (component as { prototype: unknown }).prototype : null;\r\n                const hasConstructor = proto && typeof proto === 'object' && 'constructor' in proto;\r\n\r\n                if (hasConstructor && (proto as { constructor: unknown }).constructor === component) {\r\n                    // console.log(' Direct component class');\r\n                    return component as ComponentConstructor;\r\n                }\r\n\r\n                // Otherwise treat as lazy loader\r\n                // console.log(' Lazy loading...');\r\n                try {\r\n                    const result = await (component as () => Promise<LazyModule>)();\r\n                    // console.log(' Module keys:', Object.keys(result));\r\n\r\n                    // Find component in module\r\n                    const found = result.HomePage ||\r\n                        result.TodoPage ||\r\n                        result.default ||\r\n                        Object.values(result).find((exp: unknown): exp is ComponentConstructor => {\r\n                            if (typeof exp !== 'function') return false;\r\n                            // Type guard: check if it's a constructor function\r\n                            const possibleCtor = exp as { prototype?: unknown };\r\n                            const proto = possibleCtor.prototype;\r\n                            return proto !== null && typeof proto === 'object' && proto !== undefined && 'constructor' in proto;\r\n                        });\r\n\r\n                    return found || null;\r\n                } catch (error) {\r\n                    console.error('Failed to load lazy component:', error);\r\n                    return null;\r\n                }\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        /**\r\n         * Render error fallback\r\n         */\r\n        private _renderError(path: string, error: unknown): void {\r\n            if (this.routerOutlet) {\r\n                const errorMessage = error instanceof Error ? error.message : String(error);\r\n                this.routerOutlet.innerHTML = `\r\n                    <div style=\"padding: 2rem; background: #121212ff; border: 2px solid #303030ff; border-radius: 8px; margin: 2rem auto; max-width: 600px; direction: ltr;\">\r\n                        <h2 style=\"color: rgba(208, 31, 31, 1); margin-top: 0;\">Failed to Load Component</h2>\r\n                        <p style=\"color: #a3a3a3ff;\"><strong>Route:</strong> ${path}</p>\r\n                        <p style=\"color: #a3a3a3ff;\"><strong>Error:</strong> ${errorMessage}</p>\r\n                    </div>\r\n                `;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Handle scroll behavior\r\n         */\r\n        private _handleScrollBehavior(to: Route, from: Route): void {\r\n            if (to.hash) {\r\n                const element = document.getElementById(to.hash);\r\n                if (element) {\r\n                    element.scrollIntoView({ behavior: this.scrollBehavior });\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (to.path !== from.path) {\r\n                window.scrollTo({ top: 0, behavior: this.scrollBehavior });\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get current path (handles test environments)\r\n         */\r\n        private _getCurrentPath(): string {\r\n            if (this._internalPath !== null) {\r\n                return this._internalPath;\r\n            }\r\n\r\n            if (this.mode === 'hash') {\r\n                return window.location.hash.substring(1).split('?')[0] || '/';\r\n            }\r\n\r\n            let path = window.location.pathname;\r\n\r\n            // Handle test environments\r\n            if (!path || path === 'blank' || path === 'about:blank') {\r\n                path = '/';\r\n            }\r\n\r\n            if (this.base && path.startsWith(this.base)) {\r\n                path = path.substring(this.base.length);\r\n            }\r\n\r\n            return path || '/';\r\n        }\r\n\r\n        private _buildFullPath(path: string): string {\r\n            if (path.startsWith('http')) return path;\r\n            const normalizedPath = path.startsWith('/') ? path : '/' + path;\r\n            return this.base + normalizedPath;\r\n        }\r\n\r\n        /**\r\n         * Match route pattern to path\r\n         */\r\n        private _matchRoute(path: string): { route: RouteConfig; params: Record<string, string> } | null {\r\n            const cleanPath = path.split('?')[0].split('#')[0];\r\n\r\n            for (const route of this.routes) {\r\n                const params = this._matchPath(route.path, cleanPath);\r\n                if (params !== null) {\r\n                    return { route, params };\r\n                }\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        private _matchPath(pattern: string, path: string): Record<string, string> | null {\r\n            if (pattern === '*') return {};\r\n            if (pattern === path) return {};\r\n\r\n            const paramNames: string[] = [];\r\n            const regexPattern = pattern\r\n                .replace(/\\*/g, '.*')\r\n                .replace(/:([^/]+)/g, (_, paramName: string) => {\r\n                    paramNames.push(paramName);\r\n                    return '([^/]+)';\r\n                });\r\n\r\n            const regex = new RegExp(`^${regexPattern}$`);\r\n            const match = path.match(regex);\r\n\r\n            if (!match) return null;\r\n\r\n            return paramNames.reduce((params, name, i) => {\r\n                params[name] = decodeURIComponent(match[i + 1]);\r\n                return params;\r\n            }, {} as Record<string, string>);\r\n        }\r\n\r\n        /**\r\n         * Parse query string\r\n         */\r\n        private _parseQuery(path?: string): Record<string, string> {\r\n            const search = path\r\n                ? path.includes('?') ? path.split('?')[1].split('#')[0] : ''\r\n                : window.location.search.substring(1);\r\n\r\n            if (!search) return {};\r\n\r\n            return search.split('&').reduce((query, pair) => {\r\n                const [key, value] = pair.split('=').map(decodeURIComponent);\r\n                if (key) query[key] = value || '';\r\n                return query;\r\n            }, {} as Record<string, string>);\r\n        }\r\n    }\r\n\r\n    export const router = new Router();\r\n\r\n// \r\n\r\n\r\n//  HELP \r\n\r\n    /**\r\n     * Navigate to a new route\r\n     */\r\n    export function navigate(path: string, replace: boolean = false): void {\r\n       // console.log(`Navigating to ${path}`);\r\n        if (replace) {\r\n            router.replace(path);\r\n        } else {\r\n            router.push(path);\r\n        }\r\n\r\n        // Dispatch custom event for components listening to navigation\r\n        window.dispatchEvent(new CustomEvent('navigation', {\r\n            detail: { path }\r\n        }));\r\n    }\r\n\r\n    /**\r\n     * Navigate back in history\r\n     */\r\n    export function goBack(): void {\r\n        router.back();\r\n    }\r\n\r\n    /**\r\n     * Navigate forward in history\r\n     */\r\n    export function goForward(): void {\r\n        window.history.forward();\r\n    }\r\n\r\n    /**\r\n     * Get current path\r\n     */\r\n    export function getCurrentPath(): string {\r\n        return window.location.pathname;\r\n    }\r\n\r\n    /**\r\n     * Check if current path matches\r\n     */\r\n    export function isCurrentPath(path: string): boolean {\r\n        return getCurrentPath() === path;\r\n    }\r\n\r\n    /**\r\n     * Check if current path starts with\r\n     */\r\n    export function isCurrentPathPrefix(prefix: string): boolean {\r\n        return getCurrentPath().startsWith(prefix);\r\n    }\r\n\r\n    /**\r\n     * Reload current route\r\n     */\r\n    export function reloadRoute(): void {\r\n        const currentPath = getCurrentPath();\r\n        navigate(currentPath, true);\r\n    }\r\n\r\n    /**\r\n     * Navigate with query params\r\n     */\r\n    export function navigateWithQuery(path: string, params: Record<string, string>): void {\r\n        const query = new URLSearchParams(params).toString();\r\n        navigate(`${path}?${query}`);\r\n    }\r\n\r\n    /**\r\n     * Get query parameters\r\n     */\r\n    export function getQueryParams(): URLSearchParams {\r\n        return new URLSearchParams(window.location.search);\r\n    }\r\n\r\n    /**\r\n     * Get single query parameter\r\n     */\r\n    export function getQueryParam(key: string): string | null {\r\n        return getQueryParams().get(key);\r\n    }\r\n\r\n// \r\n","// src/mod/core/store.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { StoreOptions, StoreSubscriber } from '../../types';\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * Store - Global state management with improved features\r\n     */\r\n    export class Store<T extends Record<string, unknown> = Record<string, unknown>> {\r\n        private _state: T;\r\n        private _subscribers = new Set<StoreSubscriber<T>>();\r\n        private _persist: boolean;\r\n        private _storage: Storage | null = null;\r\n        private _storageKey: string;\r\n        private _middleware: ((state: T, action?: string) => void)[] = [];\r\n        private _isHydrating: boolean = false;\r\n\r\n        constructor(options: StoreOptions<T>) {\r\n            this._persist = options.persist ?? false;\r\n            this._storageKey = options.storageKey || `store_${Date.now()}`;\r\n\r\n            // Initialize storage\r\n            if (this._persist && typeof window !== 'undefined') {\r\n                this._storage = options.storage === 'sessionStorage'\r\n                    ? sessionStorage\r\n                    : localStorage;\r\n            }\r\n\r\n            // Load from storage if persisted\r\n            if (this._persist && this._storage) {\r\n                const stored = this._loadFromStorage();\r\n                this._state = stored !== null ? stored : options.state;\r\n            } else {\r\n                this._state = options.state;\r\n            }\r\n\r\n            // Apply initial middleware\r\n            if (options.middleware) {\r\n                this._middleware = options.middleware;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get current state (readonly)\r\n         */\r\n        get state(): Readonly<T> {\r\n            return { ...this._state };\r\n        }\r\n\r\n        /**\r\n         * Set entire state (replaces state)\r\n         */\r\n        set state(newState: T) {\r\n            this.setState(newState);\r\n        }\r\n\r\n        /**\r\n         * Update state (merges with existing state)\r\n         */\r\n        setState(update: Partial<T> | ((prevState: T) => Partial<T>), action?: string): void {\r\n            const prevState = { ...this._state };\r\n\r\n            const partialState = typeof update === 'function'\r\n                ? update(prevState)\r\n                : update;\r\n\r\n            this._state = { ...prevState, ...partialState };\r\n\r\n            // Apply middleware\r\n            for (const middleware of this._middleware) {\r\n                try {\r\n                    middleware(this._state, action);\r\n                } catch (error) {\r\n                    console.error('Store middleware error:', error);\r\n                }\r\n            }\r\n\r\n            // Persist to storage\r\n            if (this._persist && !this._isHydrating) {\r\n                this._saveToStorage();\r\n            }\r\n\r\n            // Notify subscribers\r\n            this._notify();\r\n        }\r\n\r\n        /**\r\n         * Get a specific value from state\r\n         */\r\n        get<K extends keyof T>(key: K): T[K] {\r\n            return this._state[key];\r\n        }\r\n\r\n        /**\r\n         * Set a specific value in state\r\n         */\r\n        set<K extends keyof T>(key: K, value: T[K], action?: string): void {\r\n            const update = { [key]: value } as unknown as Partial<T>;\r\n            this.setState(update, action);\r\n        }\r\n\r\n        /**\r\n         * Subscribe to state changes\r\n         * Returns unsubscribe function\r\n         */\r\n        subscribe(listener: StoreSubscriber<T>): () => void {\r\n            this._subscribers.add(listener);\r\n\r\n            // Immediately call listener with current state\r\n            listener(this._state);\r\n\r\n            // Return unsubscribe function\r\n            return () => {\r\n                this._subscribers.delete(listener);\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Subscribe to specific key changes\r\n         */\r\n        subscribeToKey<K extends keyof T>(\r\n            key: K,\r\n            listener: (value: T[K]) => void\r\n        ): () => void {\r\n            let prevValue = this._state[key];\r\n\r\n            const subscriber = (state: T) => {\r\n                const newValue = state[key];\r\n                if (prevValue !== newValue) {\r\n                    prevValue = newValue;\r\n                    listener(newValue);\r\n                }\r\n            };\r\n\r\n            return this.subscribe(subscriber);\r\n        }\r\n\r\n        /**\r\n         * Add middleware\r\n         */\r\n        use(middleware: (state: T, action?: string) => void): void {\r\n            this._middleware.push(middleware);\r\n        }\r\n\r\n        /**\r\n         * Clear all state\r\n         */\r\n        clear(): void {\r\n            this._state = {} as T;\r\n\r\n            if (this._persist && this._storage) {\r\n                try {\r\n                    this._storage.removeItem(this._storageKey);\r\n                } catch (error) {\r\n                    console.error('Failed to clear storage:', error);\r\n                }\r\n            }\r\n\r\n            this._notify();\r\n        }\r\n\r\n        /**\r\n         * Reset state to initial value\r\n         */\r\n        reset(initialState: T): void {\r\n            this._state = { ...initialState };\r\n\r\n            if (this._persist) {\r\n                this._saveToStorage();\r\n            }\r\n\r\n            this._notify();\r\n        }\r\n\r\n        /**\r\n         * Hydrate state from storage\r\n         */\r\n        hydrate(): void {\r\n            if (!this._persist || !this._storage) {\r\n                console.warn('Cannot hydrate: persistence not enabled');\r\n                return;\r\n            }\r\n\r\n            this._isHydrating = true;\r\n            const stored = this._loadFromStorage();\r\n\r\n            if (stored !== null) {\r\n                this._state = stored;\r\n                this._notify();\r\n            }\r\n\r\n            this._isHydrating = false;\r\n        }\r\n\r\n        /**\r\n         * Get store snapshot for debugging\r\n         */\r\n        getSnapshot(): { state: T; subscribers: number; storageKey: string } {\r\n            return {\r\n                state: { ...this._state },\r\n                subscribers: this._subscribers.size,\r\n                storageKey: this._storageKey,\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Batch multiple updates\r\n         */\r\n        batch(updates: () => void): void {\r\n            const prevNotify = this._notify.bind(this);\r\n            let shouldNotify = false;\r\n\r\n            // Temporarily override notify\r\n            this._notify = () => {\r\n                shouldNotify = true;\r\n            };\r\n\r\n            try {\r\n                updates();\r\n            } finally {\r\n                this._notify = prevNotify;\r\n                if (shouldNotify) {\r\n                    this._notify();\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Notify all subscribers\r\n         */\r\n        private _notify(): void {\r\n            const stateCopy = { ...this._state };\r\n\r\n            for (const subscriber of this._subscribers) {\r\n                try {\r\n                    subscriber(stateCopy);\r\n                } catch (error) {\r\n                    console.error('Store subscriber error:', error);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Load state from storage\r\n         */\r\n        private _loadFromStorage(): T | null {\r\n            if (!this._storage) return null;\r\n\r\n            try {\r\n                const stored = this._storage.getItem(this._storageKey);\r\n                return stored ? JSON.parse(stored) as T : null;\r\n            } catch (error) {\r\n                console.error('Failed to load from storage:', error);\r\n                return null;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Save state to storage\r\n         */\r\n        private _saveToStorage(): void {\r\n            if (!this._storage) return;\r\n\r\n            try {\r\n                this._storage.setItem(this._storageKey, JSON.stringify(this._state));\r\n            } catch (error) {\r\n                console.error('Failed to save to storage:', error);\r\n\r\n                // Handle quota exceeded\r\n                if (error instanceof DOMException && error.name === 'QuotaExceededError') {\r\n                    console.warn('Storage quota exceeded');\r\n                    // Could implement cleanup strategy here\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Destroy store and cleanup\r\n         */\r\n        destroy(): void {\r\n            this._subscribers.clear();\r\n            this._middleware = [];\r\n            this._state = {} as T;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create a store with type inference\r\n     */\r\n    export function createStore<T extends Record<string, unknown>>(\r\n        options: StoreOptions<T>\r\n    ): Store<T> {\r\n        return new Store(options);\r\n    }\r\n\r\n    /**\r\n     * Create a computed store that derives from other stores\r\n     */\r\n    export function createComputedStore<T, S extends Store<Record<string, unknown>>[]>(\r\n        stores: S,\r\n        computer: (...states: unknown[]) => T\r\n    ): Store<{ value: T }> {\r\n        const computedStore = createStore<{ value: T }>({\r\n            state: { value: computer(...stores.map(s => s.state)) },\r\n        });\r\n\r\n        // Subscribe to all source stores\r\n        for (const store of stores) {\r\n            store.subscribe(() => {\r\n                computedStore.setState({\r\n                    value: computer(...stores.map(s => s.state)),\r\n                });\r\n            });\r\n        }\r\n\r\n        return computedStore;\r\n    }\r\n\r\n    /**\r\n     * Connect a component to a store\r\n     */\r\n    export function connect<T extends Record<string, unknown>, C extends { update?: () => void }>(\r\n        store: Store<T>,\r\n        component: C,\r\n        mapStateToProps: (state: T) => Partial<C>\r\n    ): () => void {\r\n        const unsubscribe = store.subscribe((state) => {\r\n            const props = mapStateToProps(state);\r\n            Object.assign(component, props);\r\n\r\n            // Trigger update if component has update method\r\n            if (typeof component.update === 'function') {\r\n                component.update();\r\n            }\r\n        });\r\n\r\n        return unsubscribe;\r\n    }\r\n\r\n// ","// src/mod/services/fa_config.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    import type { FAConfig } from '../../types';\r\n\r\n    type FATheme = 'solid' | 'regular' | 'light' | 'thin' | 'duotone' | 'brands' | 'sharp-solid' | 'sharp-regular' | 'sharp-light' | 'sharp-thin' | 'sharp-duotone-solid' | 'sharp-duotone-regular' | 'sharp-duotone-light' | 'sharp-duotone-thin' | 'notdog' | 'notdog-duo' | 'jelly' | 'jelly-fill' | 'jelly-duo' | 'chisel' | 'etch' | 'slab' | 'slab-press' | 'thumbprint' | 'utility' | 'utility-fill' | 'utility-duo' | 'whiteboard';\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    let defaultFATheme: FATheme = 'solid';\r\n\r\n    /**\r\n     * Get the default FontAwesome theme\r\n     */\r\n    export function getDefaultFATheme(): FATheme {\r\n        return defaultFATheme;\r\n    }\r\n\r\n    /**\r\n     * Set the default FontAwesome theme\r\n     * @param theme The FontAwesome theme to use as default\r\n     */\r\n    export function setDefaultFATheme(theme: FATheme): void {\r\n        defaultFATheme = theme;\r\n    }\r\n\r\n    /**\r\n     * Initialize FontAwesome config from ClientConfig\r\n     * @param faConfig The FA configuration from ClientConfig\r\n     */\r\n    export function initializeFAConfig(faConfig?: FAConfig): void {\r\n        if (faConfig?.theme) {\r\n            setDefaultFATheme(faConfig.theme);\r\n        }\r\n    }\r\n\r\n// \r\n","// src/mod/core/client.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import type { ClientConfig }                    from '../../types';\r\n    import type { ApiConfig as CapiConfigType }     from '@je-es/capi';\r\n    import { router }                               from './router';\r\n    import { configureApi }                         from '@je-es/capi';\r\n    import { initializeFAConfig }                   from '../services/fa_config';\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    export type { ClientConfig };\r\n\r\n    // Bun build types\r\n    interface BunBuildOptions {\r\n        entrypoints: string[];\r\n        outdir: string;\r\n        target: string;\r\n        minify?: boolean;\r\n        sourcemap?: 'none' | 'external' | 'inline';\r\n        splitting?: boolean;\r\n        naming?: { entry?: string };\r\n        external?: string[];\r\n    }\r\n\r\n    interface BunBuildResult {\r\n        success: boolean;\r\n        logs: {\r\n            message: string;\r\n            level: 'error' | 'warning' | 'info';\r\n        }[];\r\n    }\r\n\r\n    declare const Bun: {\r\n        build(options: BunBuildOptions): Promise<BunBuildResult>;\r\n    };\r\n\r\n    // Window type extension for dev tools\r\n    declare global {\r\n        interface Window {\r\n            __JEES_DEV__?: {\r\n                router: typeof router;\r\n                config: ClientConfig;\r\n                version: string;\r\n            };\r\n        }\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * Client builder\r\n     * Handles build process and runtime configuration\r\n     */\r\n    export function client(config: ClientConfig) {\r\n        // Store configuration\r\n        const _config = config;\r\n\r\n        return {\r\n            /**\r\n             * Build the client application\r\n             * This compiles TypeScript components to vanilla JavaScript\r\n             */\r\n            async build(): Promise<void> {\r\n                if (!_config.build) {\r\n                    console.warn('No build configuration provided');\r\n                    return;\r\n                }\r\n\r\n                console.log(' Building @je-es/client application...');\r\n\r\n                try {\r\n                    // Build JavaScript\r\n                    await this._buildJS();\r\n\r\n                    // Build SCSS/CSS\r\n                    await this._buildStyles();\r\n\r\n                    console.log(' Build completed successfully!');\r\n\r\n                } catch (error) {\r\n                    console.error(' Build error:', error);\r\n                    throw error;\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Build JavaScript bundle\r\n             */\r\n            async _buildJS(): Promise<void> {\r\n                if (!_config.build) return;\r\n\r\n                const result = await Bun.build({\r\n                    entrypoints     : [_config.build.entry],\r\n                    outdir          : _config.build.output.substring(0, _config.build.output.lastIndexOf('/')),\r\n                    target          : 'browser',\r\n                    minify          : _config.build.minify ?? false,\r\n                    sourcemap       : _config.build.sourcemap ? 'external' : 'none',\r\n                    splitting       : _config.build.optimization?.splitChunks ?? false,\r\n                    naming          : {\r\n                        entry       : _config.build.output.substring(_config.build.output.lastIndexOf('/') + 1),\r\n                    },\r\n                    // Exclude server-side packages from browser bundle\r\n                    external        : [\r\n                        'sass',\r\n                        'fs',\r\n                        'path',\r\n                        'url',\r\n                        'util',\r\n                        'stream',\r\n                        'buffer',\r\n                        'events',\r\n                        'crypto',\r\n                        'os',\r\n                        'child_process',\r\n                    ],\r\n                });\r\n\r\n                if (!result.success) {\r\n                    console.error(' JS Build failed:', result.logs);\r\n                    throw new Error('JS Build failed');\r\n                }\r\n\r\n                // console.log(' JavaScript bundled');\r\n            },\r\n\r\n            /**\r\n             * Build SCSS/CSS styles\r\n             */\r\n            async _buildStyles(): Promise<void> {\r\n                const stylesDir = _config.build?.styles?.input || './app/gui/style';\r\n                const outputPath = _config.build?.styles?.output || './static/client.css';\r\n\r\n                // Dynamically import server-side modules only when building\r\n                const sass = await import('sass');\r\n                const { writeFileSync, existsSync, mkdirSync } = await import('fs');\r\n                const { join, dirname } = await import('path');\r\n\r\n                const outputDir = dirname(outputPath);\r\n                const outputFile = outputPath.split('/').pop() || 'client.css';\r\n\r\n                // Main SCSS entry file\r\n                const mainScssFile = join(stylesDir, 'index.scss');\r\n\r\n                // Check if main entry file exists\r\n                if (!existsSync(mainScssFile)) {\r\n                    console.log('  No index.scss found, skipping CSS build');\r\n                    return;\r\n                }\r\n\r\n                try {\r\n                    // Ensure output directory exists\r\n                    if (!existsSync(outputDir)) {\r\n                        mkdirSync(outputDir, { recursive: true });\r\n                    }\r\n\r\n                    // Compile the main SCSS file (it will automatically include all @use imports)\r\n                    const result = sass.compile(mainScssFile, {\r\n                        style: _config.build?.minify ? 'compressed' : 'expanded',\r\n                        sourceMap: _config.build?.sourcemap ? true : false,\r\n                        loadPaths: [stylesDir], // Allow SCSS to resolve @use paths\r\n                    });\r\n\r\n                    // Write compiled CSS\r\n                    const fullOutputPath = join(outputDir, outputFile);\r\n                    writeFileSync(fullOutputPath, result.css, 'utf-8');\r\n\r\n                    // console.log(` Styles compiled to ${fullOutputPath}`);\r\n\r\n                    // Write source map if enabled\r\n                    if (_config.build?.sourcemap && result.sourceMap) {\r\n                        writeFileSync(\r\n                            `${fullOutputPath}.map`,\r\n                            JSON.stringify(result.sourceMap),\r\n                            'utf-8'\r\n                        );\r\n                    }\r\n\r\n                } catch (error) {\r\n                    console.error(' CSS Build failed:', error);\r\n                    throw error;\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Recursively collect all SCSS files (excluding .sass)\r\n             */\r\n            async _collectScssFiles(dir: string): Promise<string[]> {\r\n                const { readdirSync, statSync, existsSync } = await import('fs');\r\n                const { join, extname } = await import('path');\r\n\r\n                const files: string[] = [];\r\n\r\n                if (!existsSync(dir)) {\r\n                    return files;\r\n                }\r\n\r\n                const entries = readdirSync(dir);\r\n\r\n                for (const entry of entries) {\r\n                    const fullPath = join(dir, entry);\r\n                    const stat = statSync(fullPath);\r\n\r\n                    if (stat.isDirectory()) {\r\n                        // Recursively scan subdirectories\r\n                        files.push(...await this._collectScssFiles(fullPath));\r\n                    } else if (stat.isFile()) {\r\n                        const ext = extname(entry);\r\n                        // Only include .scss files, skip partials (starting with _)\r\n                        if (ext === '.scss' && !entry.startsWith('_')) {\r\n                            files.push(fullPath);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Sort files to ensure consistent order\r\n                return files.sort();\r\n            },\r\n\r\n            /**\r\n             * Watch mode for development\r\n             */\r\n            async watch(): Promise<void> {\r\n                console.log(' Watching for changes...');\r\n\r\n                // Initial build\r\n                await this.build();\r\n\r\n                // Watch for file changes\r\n                const { watch } = await import('fs');\r\n                const { dirname } = await import('path');\r\n                const { existsSync } = await import('fs');\r\n\r\n                // Watch TypeScript files\r\n                if (_config.build?.entry) {\r\n                    const entryDir = dirname(_config.build.entry);\r\n                    watch(entryDir, { recursive: true }, async (eventType, filename) => {\r\n                        if (filename && (filename.endsWith('.ts') || filename.endsWith('.tsx'))) {\r\n                            console.log(` ${filename} changed, rebuilding JS...`);\r\n                            try {\r\n                                await this._buildJS();\r\n                                console.log(' JS rebuild complete');\r\n                            } catch (error) {\r\n                                console.error(' JS rebuild failed:', error);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n\r\n                // Watch SCSS files\r\n                const stylesDir = './app/style';\r\n                if (existsSync(stylesDir)) {\r\n                    watch(stylesDir, { recursive: true }, async (eventType, filename) => {\r\n                        if (filename && filename.endsWith('.scss')) {\r\n                            console.log(` ${filename} changed, rebuilding CSS...`);\r\n                            try {\r\n                                await this._buildStyles();\r\n                                console.log(' CSS rebuild complete');\r\n                            } catch (error) {\r\n                                console.error(' CSS rebuild failed:', error);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Initialize the client runtime\r\n             * This runs in the browser\r\n             */\r\n            async init(): Promise<void> {\r\n                console.log(' [client] Initializing @je-es/client...');\r\n\r\n                // i18n is now auto-loaded on DOM ready, no need to do it here\r\n                // But we keep this for backward compatibility if someone wants to force-reload\r\n\r\n                // Configure API client\r\n                if (_config.api) {\r\n                    // Build the capi-compatible config\r\n                    const capiConfig: Partial<CapiConfigType> = {\r\n                        baseURL: _config.api.baseURL,\r\n                        timeout: _config.api.timeout,\r\n                        headers: _config.api.headers,\r\n                    };\r\n\r\n                    // Add interceptors if they exist\r\n                    if (_config.api.interceptors) {\r\n                        capiConfig.interceptors = {\r\n                            request: _config.api.interceptors.request || null,\r\n                            response: _config.api.interceptors.response || null,\r\n                            error: _config.api.interceptors.error || null,\r\n                        };\r\n                    }\r\n\r\n                    configureApi(capiConfig);\r\n                }\r\n\r\n                // Initialize FontAwesome config\r\n                if (_config.fa) {\r\n                    initializeFAConfig(_config.fa);\r\n                }\r\n\r\n                // Configure router\r\n                if (_config.router && _config.app?.routes) {\r\n                    router.init(\r\n                        _config.app.routes,\r\n                        _config.router.mode,\r\n                        _config.router.base\r\n                    );\r\n\r\n                    if (_config.router.beforeEach) {\r\n                        router.beforeEach(_config.router.beforeEach);\r\n                    }\r\n\r\n                    if (_config.router.afterEach) {\r\n                        router.afterEach(_config.router.afterEach);\r\n                    }\r\n                }\r\n\r\n                // Mount root component\r\n                if (_config.app?.root) {\r\n                    const rootElement = document.querySelector(_config.app.root);\r\n                    if (rootElement) {\r\n                        // console.log(' Client initialized successfully!');\r\n                    } else {\r\n                        console.error(` Root element \"${_config.app.root}\" not found`);\r\n                    }\r\n                }\r\n\r\n                // Enable dev tools\r\n                if (_config.devTools?.enabled) {\r\n                    this._enableDevTools();\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Enable development tools\r\n             */\r\n            _enableDevTools(): void {\r\n                // console.log(' Dev tools enabled');\r\n\r\n                // Add dev tools to window\r\n                window.__JEES_DEV__ = {\r\n                    router,\r\n                    config: _config,\r\n                    version: '0.0.1',\r\n                };\r\n\r\n                // // Log router changes\r\n                // if (_config.devTools?.showRouterInfo) {\r\n                //     router.afterEach((to: Route, from: Route) => {\r\n                //         console.log(' Route changed:', {\r\n                //             from: from.path,\r\n                //             to: to.path,\r\n                //             params: to.params,\r\n                //             query: to.query,\r\n                //         });\r\n                //     });\r\n                // }\r\n            },\r\n\r\n            /**\r\n             * Get configuration\r\n             */\r\n            getConfig(): ClientConfig {\r\n                return _config;\r\n            },\r\n        };\r\n    }\r\n\r\n// ","// src/mod/helpers/index.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { div, span, h1, h2, h3, h4, h5, h6, p, i, img, a, button, input, select, option, textarea, form } from \"@je-es/vdom\";\r\n    import type { VNode } from \"@je-es/vdom\";\r\n    import { getDefaultFATheme } from '../services/fa_config';\r\nimport { Popup } from \"../components/popup\";\r\nimport { Toast } from \"../components/toast\";\r\nimport { Loader } from \"../components/loader\";\r\n\r\n// \r\n\r\n\r\n\r\n//  _CM_ \r\n\r\n    export const ClassMaker = {\r\n        /**\r\n         * Generate Font Awesome icon classes\r\n         * @param icon Icon name (without 'fa-' prefix)\r\n         * @param style Font Awesome style (default: global default theme or 'solid')\r\n         */\r\n        fa: (icon: string, style?: 'solid' | 'regular' | 'light' | 'thin' | 'duotone' | 'brands' | 'sharp-solid' | 'sharp-regular' | 'sharp-light' | 'sharp-thin' | 'sharp-duotone-solid' | 'sharp-duotone-regular' | 'sharp-duotone-light' | 'sharp-duotone-thin' | 'notdog' | 'notdog-duo' | 'jelly' | 'jelly-fill' | 'jelly-duo' | 'chisel' | 'etch' | 'slab' | 'slab-press' | 'thumbprint' | 'utility' | 'utility-fill' | 'utility-duo' | 'whiteboard'): string => {\r\n            const base = 'bb_icon';\r\n\r\n            // if contains fa- return as it\r\n            if(icon.includes('fa-')) return base + ' ' + icon;\r\n\r\n            // Use provided style or fall back to default theme\r\n            const resolvedStyle = style || getDefaultFATheme();\r\n\r\n            const styleMap: Record<string, string> = {\r\n                'solid': 'fas',\r\n                'regular': 'far',\r\n                'light': 'fal',\r\n                'thin': 'fat',\r\n                'duotone': 'fad',\r\n                'brands': 'fab',\r\n\r\n                // Sharp styles\r\n                'sharp-solid': 'fass',\r\n                'sharp-regular': 'fasr',\r\n                'sharp-light': 'fasl',\r\n                'sharp-thin': 'fast',\r\n\r\n                // Sharp Duotone styles\r\n                'sharp-duotone-solid': 'fasds',\r\n                'sharp-duotone-regular': 'fasdr',\r\n                'sharp-duotone-light': 'fasdl',\r\n                'sharp-duotone-thin': 'fasdt',\r\n\r\n                // Special styles\r\n                'notdog': 'fa-notdog',\r\n                'notdog-duo': 'fa-notdog-duo',\r\n                'jelly': 'fa-jelly',\r\n                'jelly-fill': 'fa-jelly-fill',\r\n                'jelly-duo': 'fa-jelly-duo',\r\n                'chisel': 'fa-chisel',\r\n                'etch': 'fa-etch',\r\n                'slab': 'fa-slab',\r\n                'slab-press': 'fa-slab-press',\r\n                'thumbprint': 'fa-thumbprint',\r\n                'utility': 'fa-utility',\r\n                'utility-fill': 'fa-utility-fill',\r\n                'utility-duo': 'fa-utility-duo',\r\n                'whiteboard': 'fa-whiteboard'\r\n            };\r\n\r\n            const prefix = styleMap[resolvedStyle] || 'fas';\r\n            return `${base} ${prefix} fa-${icon}`;\r\n        },\r\n\r\n        /**\r\n         * Generate button classes\r\n         * @param level Button level (primary, secondary, tertiary)\r\n         * @param className Additional classes\r\n         */\r\n        btn: (level: 'primary' | 'secondary' | 'tertiary', className = ''): string => {\r\n            const baseClass = 'bb_btn';\r\n            const levelClass = `bb_btn_${level}`;\r\n            return `${baseClass} ${levelClass} ${className}`.trim();\r\n        },\r\n    };\r\n\r\n    export const CM = ClassMaker;\r\n\r\n// \r\n\r\n\r\n\r\n//  _EC_ \r\n\r\n    export const ElementCreator = {\r\n        div,\r\n        span,\r\n        h1,\r\n        h2,\r\n        h3,\r\n        h4,\r\n        h5,\r\n        h6,\r\n        p,\r\n        i,\r\n        img,\r\n        a,\r\n        button,\r\n        input,\r\n        select,\r\n        option,\r\n        textarea,\r\n        form,\r\n\r\n        /**\r\n         * Create icon element with Font Awesome classes\r\n         * @param icon Icon name (without 'fa-' prefix)\r\n         * @param style Font Awesome style (default: 'solid')\r\n         */\r\n        icon: (icon: string, style?: 'solid' | 'regular' | 'light' | 'thin' | 'duotone' | 'brands' | 'sharp-solid' | 'sharp-regular' | 'sharp-light' | 'sharp-thin' | 'sharp-duotone-solid' | 'sharp-duotone-regular' | 'sharp-duotone-light' | 'sharp-duotone-thin' | 'notdog' | 'notdog-duo' | 'jelly' | 'jelly-fill' | 'jelly-duo' | 'chisel' | 'etch' | 'slab' | 'slab-press' | 'thumbprint' | 'utility' | 'utility-fill' | 'utility-duo' | 'whiteboard'): VNode => {\r\n            return i(ClassMaker.fa(icon, style)) as VNode;\r\n        },\r\n\r\n        /**\r\n         * Create button element\r\n         */\r\n        btn: (args: {\r\n            label               : string;\r\n            onClick?            : () => void | Promise<void>;\r\n            className?          : string;\r\n            icon?               : string;\r\n            iconStyle?          : 'solid' | 'regular' | 'light' | 'thin' | 'duotone' | 'brands' | 'sharp-solid' | 'sharp-regular' | 'sharp-light' | 'sharp-thin' | 'sharp-duotone-solid' | 'sharp-duotone-regular' | 'sharp-duotone-light' | 'sharp-duotone-thin' | 'notdog' | 'notdog-duo' | 'jelly' | 'jelly-fill' | 'jelly-duo' | 'chisel' | 'etch' | 'slab' | 'slab-press' | 'thumbprint' | 'utility' | 'utility-fill' | 'utility-duo' | 'whiteboard';\r\n            level?              : 'primary' | 'secondary' | 'tertiary';\r\n            disabled?           : boolean;\r\n        }): VNode => {\r\n            return button(\r\n                {\r\n                    class       : ClassMaker.btn(args.level || 'secondary', args.className),\r\n                    onclick     : args.onClick,\r\n                    disabled    : args.disabled\r\n                },\r\n                args.icon ? ElementCreator.icon(args.icon, args.iconStyle) : null,\r\n                args.label\r\n            ) as VNode;\r\n        },\r\n    };\r\n\r\n    export const EC = ElementCreator;\r\n\r\n// \r\n\r\n\r\n\r\n//  _DOM \r\n\r\n    // EventsManager - manages all window event listeners with automatic cleanup\r\n    class EventsManager {\r\n        private _handlers: Map<string, Set<EventListener>>;\r\n\r\n        constructor() {\r\n            this._handlers = new Map<string, Set<EventListener>>();\r\n        }\r\n\r\n        add(event: string, listener: EventListener): void {\r\n            if (!this._handlers.has(event)) {\r\n                this._handlers.set(event, new Set());\r\n            }\r\n            this._handlers.get(event)!.add(listener);\r\n            window.addEventListener(event, listener);\r\n        }\r\n\r\n        remove(event: string, listener: EventListener): void {\r\n            window.removeEventListener(event, listener);\r\n            this._handlers.get(event)?.delete(listener);\r\n        }\r\n\r\n        removeAll(event?: string): void {\r\n            if (event) {\r\n                const listeners = this._handlers.get(event);\r\n                if (listeners) {\r\n                    listeners.forEach(listener => window.removeEventListener(event, listener));\r\n                    this._handlers.delete(event);\r\n                }\r\n            } else {\r\n                // Remove all listeners for all events\r\n                this._handlers.forEach((listeners, eventName) => {\r\n                    listeners.forEach(listener => window.removeEventListener(eventName, listener));\r\n                });\r\n                this._handlers.clear();\r\n            }\r\n        }\r\n\r\n        get(event: string): Set<EventListener> | undefined {\r\n            return this._handlers.get(event);\r\n        }\r\n\r\n        has(event: string): boolean {\r\n            return this._handlers.has(event);\r\n        }\r\n\r\n        count(event?: string): number {\r\n            if (event) {\r\n                return this._handlers.get(event)?.size ?? 0;\r\n            }\r\n            return Array.from(this._handlers.values()).reduce((sum, set) => sum + set.size, 0);\r\n        }\r\n    }\r\n\r\n    // @je-es/client components\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    export function getToast() : Toast { return (window as any).__globalToast; }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    export function getPopup() : Popup { return (window as any).__globalPopup; }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    export function getLoader() : Loader { return (window as any).__globalLoader; }\r\n    export function hideLoader() { getLoader().hide(); }\r\n    export function showLoader(message?:string) { getLoader().show(message); }\r\n\r\n    // browser `window` helpers\r\n    export const Window = {\r\n\r\n        // Event management system\r\n        Events: new EventsManager(),\r\n\r\n        toast: getToast,\r\n        popup: getPopup,\r\n        loader: getLoader,\r\n        showLoader: showLoader,\r\n        hideLoader: hideLoader,\r\n\r\n        reload: () => {\r\n            window.location.reload();\r\n        },\r\n\r\n        getPathName: (): string => {\r\n            return window.location.pathname;\r\n        },\r\n\r\n        setAttributes: (key: string, value: string) => {\r\n            document.documentElement.setAttribute(key, value);\r\n        },\r\n\r\n        getAttributes: (key: string): string | null => {\r\n            return document.documentElement.getAttribute(key);\r\n        },\r\n\r\n        setLocalStorage: (key: string, value: string) => {\r\n            localStorage.setItem(key, value);\r\n        },\r\n\r\n        getLocalStorage: (key: string): string | null => {\r\n            return localStorage.getItem(key);\r\n        },\r\n\r\n        addEventListener: (event: string, listener: EventListener) => {\r\n            Window.Events.add(event, listener);\r\n        },\r\n\r\n        removeEventListener: (event: string, listener: EventListener) => {\r\n            Window.Events.remove(event, listener);\r\n        },\r\n\r\n        dispatchEvent: (event: CustomEvent) => {\r\n            window.dispatchEvent(event);\r\n        },\r\n\r\n        onScroll: (callback: () => void) => {\r\n            Window.Events.add('scroll', callback as EventListener);\r\n        },\r\n\r\n        getScrollY: (): number => {\r\n            return window.pageYOffset;\r\n        },\r\n    };\r\n\r\n// \r\n","{\r\n    \"form\": {\r\n        \"base\": \"bb_form\",\r\n        \"field\": \"bb_formField\",\r\n        \"fieldCheckbox\": \"bb_formFieldCheckbox\",\r\n        \"fieldInput\": \"bb_formFieldInput\",\r\n        \"fieldInputContainer\": \"bb_formFieldInputContainer\",\r\n        \"fieldInputButtons\": \"bb_formFieldInputButtons\",\r\n        \"fieldInputButton\": \"bb_formFieldInputButton\",\r\n        \"fieldInputButtonRules\": \"bb_formFieldInputButtonRules\",\r\n        \"fieldInputButtonRulesContent\": \"bb_formFieldInputButtonRulesContent\",\r\n        \"fieldTextarea\": \"bb_formFieldTextarea\",\r\n        \"fieldSelect\": \"bb_formFieldSelect\",\r\n        \"fieldLabel\": \"bb_formFieldLabel\",\r\n        \"fieldError\": \"bb_formFieldError\",\r\n        \"fieldTitle\": \"bb_formFieldTitle\",\r\n        \"buttonsContainer\": \"bb_formButtonsContainer\",\r\n        \"button\": \"bb_formButton\",\r\n        \"alert\": \"bb_formAlert\",\r\n        \"alertError\": \"bb_formAlert-error\",\r\n        \"alertSuccess\": \"bb_formAlert-success\"\r\n    },\r\n    \"toast\": {\r\n        \"container\": \"bb_toastContainer\",\r\n        \"toast\": \"bb_toast\",\r\n        \"icon\": \"bb_toastIcon\",\r\n        \"msg\": \"bb_toastMsg\"\r\n    },\r\n    \"loader\": {\r\n        \"container\": \"bb_loaderContainer\",\r\n        \"containerOverlay\": \"bb_loaderContainer--overlay\",\r\n        \"bg\": \"bb_loaderBg\",\r\n        \"loader\": \"bb_loader\",\r\n        \"spinner\": {\r\n            \"container\": \"bb_loaderSpinnerContainer\",\r\n            \"icon\": \"bb_loaderSpinnerIcon\",\r\n            \"dot\": \"bb_loaderSpinnerDot\",\r\n            \"pulse\": \"bb_loaderSpinnerPulse\",\r\n            \"text\": \"bb_loaderSpinnerText\"\r\n        },\r\n        \"progress\": {\r\n            \"container\": \"bb_loaderProgressContainer\",\r\n            \"bar\": \"bb_loaderProgressBar\",\r\n            \"text\": \"bb_loaderProgressText\"\r\n        }\r\n    },\r\n    \"popup\": {\r\n        \"container\": \"bb_popupContainer\",\r\n        \"overlay\": \"bb_popupOverlay\",\r\n        \"popup\": {\r\n            \"base\": \"bb_popup\",\r\n            \"close\": \"bb_popupClose\"\r\n        },\r\n        \"header\": {\r\n            \"container\": \"bb_popupHeader\",\r\n            \"icon\": \"bb_popupHeaderIcon\",\r\n            \"content\": \"bb_popupHeaderContent\",\r\n            \"title\": \"bb_popupHeaderContentTitle\",\r\n            \"description\": \"bb_popupHeaderContentDesc\"\r\n        },\r\n        \"body\": {\r\n            \"container\": \"bb_popupBody\",\r\n            \"message\": \"bb_popupBodyMsg\",\r\n            \"input\": \"bb_popupBodyInput\",\r\n            \"formContainer\": \"bb_popupBodyFormContainer\"\r\n        },\r\n        \"footer\": \"bb_popupFooter\",\r\n        \"button\": \"bb_btn\"\r\n    },\r\n    \"dropdown\": {\r\n        \"container\": \"bb_dropdown\",\r\n        \"trigger\": \"bb_dropdownTrigger\",\r\n        \"menu\": \"bb_dropdownMenu\",\r\n        \"item\": \"bb_dropdownItem\",\r\n        \"divider\": \"bb_dropdownDivider\",\r\n        \"icon\": \"bb_dropdownIcon\"\r\n    },\r\n    \"itemsLoader\": {\r\n        \"container\": \"bb_itemsLoaderContainer\",\r\n        \"list\": \"bb_itemsLoaderList\",\r\n        \"searchbar\": \"bb_itemsLoaderSearchbar\",\r\n        \"loading\": \"bb_itemsLoaderLoading\",\r\n        \"error\": \"bb_itemsLoaderError\",\r\n        \"trigger\": \"bb_itemsLoaderTrigger\",\r\n        \"end\": \"bb_itemsLoaderEnd\",\r\n        \"emptyState\": \"bb_tabbedviewEmptyState\",\r\n        \"button\": \"bb_btn\",\r\n        \"item\": \"bb_itemsLoader-item\",\r\n        \"formFieldInput\": \"bb_formFieldInput\"\r\n    },\r\n    \"tabbedView\": {\r\n        \"container\": \"bb_tabbedview\",\r\n        \"header\": \"bb_tabbedviewHeader\",\r\n        \"tab\": {\r\n            \"base\": \"bb_tabbedviewTab\",\r\n            \"active\": \"bb_tabbedviewTab--active\",\r\n            \"disabled\": \"bb_tabbedviewTab--disabled\",\r\n            \"badge\": \"bb_tabbedviewBadge\"\r\n        },\r\n        \"content\": {\r\n            \"container\": \"bb_tabbedviewContent\",\r\n            \"emptyState\": \"bb_tabbedviewEmptyState\",\r\n            \"error\": \"bb_tabbedviewError\"\r\n        }\r\n    }\r\n}","// src/mod/components/toast.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { Component } from '../core/component';\r\n    import { div, html, i, span } from '@je-es/vdom';\r\n    import { ClassMaker } from '../helpers';\r\n    import { state } from '../core/decorators';\r\n    import { t } from '../core/i18n';\r\n    import type { VNode } from '../../types';\r\n    import styleMap from './bb_map.json';\r\n\r\n// \r\n\r\n\r\n\r\n//  INIT \r\n\r\n    export type ToastType = 'success' | 'error' | 'info' | 'warning';\r\n\r\n    export interface ToastMessage {\r\n        id: number;\r\n        message: string;\r\n        type: ToastType;\r\n        translateKey?: string;\r\n    }\r\n\r\n    // Reference to style map\r\n    const bb_ = styleMap.toast;\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class Toast extends Component {\r\n\r\n        //  INIT \r\n\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state messages: ToastMessage[] = [];\r\n\r\n            private nextId = 0;\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            /**\r\n             * Show a toast notification\r\n             */\r\n            show(message: string, type: ToastType = 'info', duration: number = 2000, translateKey?: string) {\r\n                const id = this.nextId++;\r\n\r\n                this.messages = [...this.messages, { id, message, type, translateKey }];\r\n\r\n                setTimeout(() => {\r\n                    this.messages = this.messages.filter(msg => msg.id !== id);\r\n                    this.update();\r\n                }, duration);\r\n            }\r\n\r\n            /**\r\n             * Convenience methods\r\n             */\r\n            success(message: string, duration?: number, translateKey?: string) {\r\n                this.show(message, 'success', duration, translateKey);\r\n            }\r\n\r\n            error(message: string, duration?: number, translateKey?: string) {\r\n                this.show(message, 'error', duration, translateKey);\r\n            }\r\n\r\n            info(message: string, duration?: number, translateKey?: string) {\r\n                this.show(message, 'info', duration, translateKey);\r\n            }\r\n\r\n            warning(message: string, duration?: number, translateKey?: string) {\r\n                this.show(message, 'warning', duration, translateKey);\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            render(): VNode {\r\n                if (this.messages.length === 0) return html``;\r\n\r\n                return div(\r\n                    bb_.container,\r\n                    ...this.messages.map(msg => this.renderToast(msg))\r\n                ) as VNode;\r\n            }\r\n\r\n            renderToast(msg: ToastMessage): VNode {\r\n                const iconMap = {\r\n                    success: ClassMaker.fa('check-circle'),\r\n                    error: ClassMaker.fa('exclamation-circle'),\r\n                    info: ClassMaker.fa('info-circle'),\r\n                    warning: ClassMaker.fa('exclamation-triangle')\r\n                };\r\n\r\n                const displayMessage = msg.translateKey ? t(msg.translateKey) : msg.message;\r\n\r\n                return div(\r\n                    {\r\n                        key: String(msg.id),\r\n                        class: `${bb_.toast} ${bb_.toast}--${msg.type}`,\r\n                        'data-translate': msg.translateKey || undefined\r\n                    },\r\n                    i(`${iconMap[msg.type]} ${bb_.icon}`),\r\n                    span(bb_.msg, displayMessage)\r\n                ) as VNode;\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  GLOB \r\n\r\n    let globalToast: Toast | null = null;\r\n\r\n    export function initToast(container?: HTMLElement): Toast {\r\n        if (globalToast) return globalToast;\r\n\r\n        const toastContainer = container || document.createElement('div');\r\n        if (!container) {\r\n            document.body.appendChild(toastContainer);\r\n        }\r\n\r\n        globalToast = new Toast();\r\n        globalToast.mount(toastContainer);\r\n\r\n        return globalToast;\r\n    }\r\n\r\n    export function getToast(): Toast {\r\n        if (!globalToast) {\r\n            globalToast = initToast();\r\n        }\r\n        return globalToast;\r\n    }\r\n\r\n    // Convenience exports\r\n    export const toast = {\r\n        show: (message: string, type: ToastType = 'info', duration?: number, translateKey?: string) => {\r\n            getToast().show(message, type, duration, translateKey);\r\n        },\r\n        success: (message: string, duration?: number, translateKey?: string) => {\r\n            getToast().success(message, duration, translateKey);\r\n        },\r\n        error: (message: string, duration?: number, translateKey?: string) => {\r\n            getToast().error(message, duration, translateKey);\r\n        },\r\n        info: (message: string, duration?: number, translateKey?: string) => {\r\n            getToast().info(message, duration, translateKey);\r\n        },\r\n        warning: (message: string, duration?: number, translateKey?: string) => {\r\n            getToast().warning(message, duration, translateKey);\r\n        }\r\n    };\r\n\r\n// ","// src/mod/components/loader.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { Component } from \"../core/component\";\r\n    import { div, type VNode } from \"@je-es/vdom\";\r\n    import { state } from \"../core/decorators\";\r\n    import { t } from \"../core/i18n\";\r\n    import styleMap from \"./bb_map.json\";\r\n\r\n// \r\n\r\n\r\n\r\n//  INIT \r\n\r\n    export type LoaderSize          = 'small' | 'medium' | 'large';\r\n    export type LoaderVariant       = 'spinner' | 'dots' | 'pulse';\r\n\r\n    export interface LoaderOptions {\r\n        message?                    : string;\r\n        variant?                    : LoaderVariant;\r\n        size?                       : LoaderSize;\r\n        overlay?                    : boolean;\r\n    }\r\n\r\n    // Reference to style map\r\n    const bb_ = styleMap.loader;\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class Loader extends Component {\r\n\r\n        //  INIT \r\n\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state visible          = false;\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state message          = '';\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state variant          : LoaderVariant = 'spinner';\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state size             : LoaderSize = 'medium';\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state overlay          = true;\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state progress         = 0;\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state showProgress     = false;\r\n\r\n            private animationFrame  : number | null = null;\r\n            private hideTimeout     : number | null = null;\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            async onMount() {\r\n                this.setupKeyboardListener();\r\n                this.initializeAccessibility();\r\n\r\n                window.addEventListener('languagechange', () => {\r\n                    if (!this.message) {\r\n                        this.update();\r\n                    }\r\n                });\r\n            }\r\n\r\n            onUnmount() {\r\n                if (this.animationFrame) {\r\n                    cancelAnimationFrame(this.animationFrame);\r\n                }\r\n                if (this.hideTimeout) {\r\n                    clearTimeout(this.hideTimeout);\r\n                }\r\n                document.removeEventListener('keydown', this.handleKeyPress);\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            render(): VNode {\r\n                const { loader: bb_ } = styleMap;\r\n                const containerClasses = [\r\n                    bb_.container,\r\n                    this.overlay ? `${bb_.containerOverlay}` : '',\r\n                    `${bb_.container}--${this.size}`\r\n                ].filter(Boolean).join(' ');\r\n\r\n                return div(\r\n                    {\r\n                        class: containerClasses,\r\n                        'data-status': this.visible ? 'visible' : 'hidden',\r\n                        role: 'status',\r\n                        'aria-live': 'polite',\r\n                        'aria-busy': 'true',\r\n                    },\r\n                    // bg for blur\r\n                    div(bb_.bg),\r\n\r\n                    div(\r\n                        bb_.loader,\r\n                        this.renderSpinner(),\r\n                        this.renderMessage(),\r\n                        this.showProgress ? this.renderProgressBar() : null\r\n                    )\r\n                ) as VNode;\r\n            }\r\n\r\n            renderSpinner(): VNode {\r\n                const { loader: bb_ } = styleMap;\r\n                const spinnerClass = `${bb_.spinner.container} ${bb_.spinner.container}--${this.variant}`;\r\n\r\n                switch (this.variant) {\r\n                    case 'dots':\r\n                        return div(\r\n                            spinnerClass,\r\n                            div(bb_.spinner.dot),\r\n                            div(bb_.spinner.dot),\r\n                            div(bb_.spinner.dot)\r\n                        ) as VNode;\r\n\r\n                    case 'pulse':\r\n                        return div(\r\n                            spinnerClass,\r\n                            div(bb_.spinner.pulse)\r\n                        ) as VNode;\r\n\r\n                    case 'spinner':\r\n                    default:\r\n                        return div(\r\n                            spinnerClass,\r\n                            div(bb_.spinner.icon)\r\n                        ) as VNode;\r\n                }\r\n            }\r\n\r\n            renderMessage(): VNode {\r\n                const { loader: bb_ } = styleMap;\r\n                const text = this.message || t('loader.loading');\r\n\r\n                return div({\r\n                    class: bb_.spinner.text,\r\n                    'data-translate': this.message ? undefined : 'loader.loading'\r\n                }, text) as VNode;\r\n            }\r\n\r\n            renderProgressBar(): VNode {\r\n                const { loader: bb_ } = styleMap;\r\n                return div(\r\n                    bb_.progress.container,\r\n                    div({\r\n                        class: bb_.progress.bar,\r\n                        style: `width: ${this.progress}%`,\r\n                        'aria-valuenow': this.progress.toString(),\r\n                        'aria-valuemin': '0',\r\n                        'aria-valuemax': '100'\r\n                    }),\r\n                    div(\r\n                        bb_.progress.text,\r\n                        `${Math.round(this.progress)}%`\r\n                    )\r\n                ) as VNode;\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  CTRL \r\n\r\n            show(options?: LoaderOptions | string) {\r\n                if (typeof options === 'string') {\r\n                    this.message = options;\r\n                } else if (options) {\r\n                    this.message = options.message || '';\r\n                    this.variant = options.variant || 'spinner';\r\n                    this.size = options.size || 'medium';\r\n                    this.overlay = options.overlay !== undefined ? options.overlay : true;\r\n                }\r\n\r\n                this.visible = true;\r\n                this.progress = 0;\r\n                this.showProgress = false;\r\n\r\n                this.applyBodyLock();\r\n                this.update();\r\n            }\r\n\r\n            hide(delay: number = 0) {\r\n                if (this.hideTimeout) {\r\n                    clearTimeout(this.hideTimeout);\r\n                }\r\n\r\n                if (delay > 0) {\r\n                    this.hideTimeout = window.setTimeout(() => {\r\n                        this.performHide();\r\n                    }, delay);\r\n                } else {\r\n                    this.performHide();\r\n                }\r\n            }\r\n\r\n            setMessage(message: string) {\r\n                this.message = message;\r\n                this.update();\r\n            }\r\n\r\n            setProgress(progress: number) {\r\n                this.showProgress = true;\r\n                this.progress = Math.max(0, Math.min(100, progress));\r\n                this.update();\r\n            }\r\n\r\n            updateProgress(increment: number) {\r\n                this.setProgress(this.progress + increment);\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  HELP \r\n\r\n            private performHide() {\r\n                this.visible = false;\r\n                this.message = '';\r\n                this.progress = 0;\r\n                this.showProgress = false;\r\n\r\n                this.removeBodyLock();\r\n                this.update();\r\n            }\r\n\r\n            private applyBodyLock() {\r\n                if (this.overlay) {\r\n                    document.body.style.overflow = 'hidden';\r\n                }\r\n            }\r\n\r\n            private removeBodyLock() {\r\n                document.body.style.overflow = '';\r\n            }\r\n\r\n            private setupKeyboardListener() {\r\n                this.handleKeyPress = this.handleKeyPress.bind(this);\r\n                document.addEventListener('keydown', this.handleKeyPress);\r\n            }\r\n\r\n            private handleKeyPress = (e: KeyboardEvent) => {\r\n                if (e.key === 'Escape' && this.visible && !this.overlay) {\r\n                    this.hide();\r\n                }\r\n            };\r\n\r\n            private initializeAccessibility() {\r\n                const container = this.element?.querySelector(`.${bb_.spinner.container}`);\r\n                if (container) {\r\n                    container.setAttribute('aria-label', t('loading'));\r\n                }\r\n            }\r\n\r\n            isVisible(): boolean {\r\n                return this.visible;\r\n            }\r\n\r\n            getStatus(): { visible: boolean; message: string; progress: number } {\r\n                return {\r\n                    visible: this.visible,\r\n                    message: this.message,\r\n                    progress: this.progress\r\n                };\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// ","// src/mod/components/smart_form.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { Component } from '../core/component';\r\n    import { div, label, input, select, option, span, textarea, button, form } from '@je-es/vdom';\r\n    import type { FormFieldOption, VNode, FieldButtonConfig, LabelConfig } from '../../types';\r\n    import { css } from '../core/styles';\r\n    import { state } from '../core/decorators';\r\n    import { api } from '@je-es/capi';\r\n    import type { FormFieldConfig, ValidationRule } from '../../types';\r\n    import { t } from '../core/i18n';\r\n    import { bbMap, CM } from '../../main';\r\n\r\n// \r\n\r\n\r\n\r\n//  STYLE MAP \r\n\r\n    // Style map for form components\r\n    interface StyleMapForm {\r\n        form: string;\r\n        field: string;\r\n        fieldCheckbox: string;\r\n        fieldInput: string;\r\n        fieldInputContainer: string;\r\n        fieldInputButtons: string;\r\n        fieldInputButton: string;\r\n        fieldInputButtonRules: string;\r\n        fieldInputButtonRulesContent: string;\r\n        fieldTextarea: string;\r\n        fieldSelect: string;\r\n        fieldLabel: string;\r\n        fieldError: string;\r\n        buttonsContainer: string;\r\n        button: string;\r\n        alert: string;\r\n        alertError: string;\r\n        alertSuccess: string;\r\n    }\r\n\r\n    const FORM_STYLES: StyleMapForm = {\r\n        form: 'bb_form',\r\n        field: 'bb_formField',\r\n        fieldCheckbox: 'bb_formFieldCheckbox',\r\n        fieldInput: 'bb_formFieldInput',\r\n        fieldInputContainer: 'bb_formFieldInputContainer',\r\n        fieldInputButtons: 'bb_formFieldInputButtons',\r\n        fieldInputButton: 'bb_formFieldInputButton',\r\n        fieldInputButtonRules: 'bb_formFieldInputButtonRules',\r\n        fieldInputButtonRulesContent: 'bb_formFieldInputButtonRulesContent',\r\n        fieldTextarea: 'bb_formFieldTextarea',\r\n        fieldSelect: 'bb_formFieldSelect',\r\n        fieldLabel: 'bb_formFieldLabel',\r\n        fieldError: 'bb_formFieldError',\r\n        buttonsContainer: 'bb_formButtonsContainer',\r\n        button: 'bb_formButton',\r\n        alert: 'bb_formAlert',\r\n        alertError: 'bb_formAlert-error',\r\n        alertSuccess: 'bb_formAlert-success',\r\n    };\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    export type { FormFieldConfig, ValidationRule };\r\n\r\n    export interface ButtonConfig {\r\n        label?: string;\r\n        className?: string;\r\n        icon?: string;\r\n        title?: string;\r\n        loadingLabel?: string;\r\n        onClick?: 'submit' | (() => void | Promise<void>);\r\n    }\r\n\r\n    export interface FormConfig {\r\n        fields: (FormFieldConfig | (FormFieldConfig | VNode)[])[];\r\n        endpoint?: string;\r\n        method?: 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE';\r\n        onSubmit?: (data: Record<string, unknown>, event: Event) => void | Promise<void>;\r\n        onSuccess?: (data: unknown) => void;\r\n        onError?: (error: unknown) => void;\r\n        onValidationError?: (errors: Record<string, string>) => void;\r\n        buttons?: Record<string, ButtonConfig>;\r\n        className?: string;\r\n        autoValidate?: boolean;\r\n    }\r\n\r\n    export interface FormField extends FormFieldConfig {\r\n        error?: string;\r\n        touched?: boolean;\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * SmartForm Component\r\n     * Auto-validation, CSRF protection, API submission\r\n     */\r\n    export class SmartFormComponent extends Component<FormConfig> {\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state fields: FormField[] = [];\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state formData: Record<string, unknown> = {};\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state isSubmitting = false;\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state submitError = '';\r\n        // @ts-expect-error - TypeScript decorator limitation with class property types\r\n        @state submitSuccess = false;\r\n\r\n        // Simple object for tracking password visibility (no state needed)\r\n        passwordVisibility: Record<string, boolean> = {};\r\n\r\n        constructor(props: FormConfig) {\r\n            super(props);\r\n\r\n            // Extract all FormFieldConfig objects from fields (including grouped fields)\r\n            const allFields: FormFieldConfig[] = [];\r\n            for (const item of this.props.fields) {\r\n                if (Array.isArray(item)) {\r\n                    // Handle grouped fields - extract only FormFieldConfig objects\r\n                    for (const groupItem of item) {\r\n                        if (groupItem && typeof groupItem === 'object' && 'name' in groupItem && 'type' in groupItem) {\r\n                            allFields.push(groupItem as FormFieldConfig);\r\n                        }\r\n                    }\r\n                } else {\r\n                    // Handle individual field\r\n                    allFields.push(item as FormFieldConfig);\r\n                }\r\n            }\r\n\r\n            // Initialize fields immediately in constructor\r\n            this.fields = allFields.map((field: FormFieldConfig) => ({\r\n                ...field,\r\n                error: undefined,\r\n                touched: false,\r\n            })) as FormField[];\r\n\r\n            // Initialize form data\r\n            for (const field of this.fields) {\r\n                this.formData[field.name] = field.value || '';\r\n            }\r\n        }\r\n\r\n        onMount(): void {\r\n            // console.log(' SmartForm mounted with', this.fields.length, 'fields');\r\n        }\r\n\r\n        /**\r\n         * Handle field change\r\n         */\r\n        handleChange(fieldName: string, value: unknown): void {\r\n            this.formData[fieldName] = value;\r\n\r\n            // Auto-validate if enabled\r\n            const field = this.fields.find(f => f.name === fieldName);\r\n            if (field && this.props.autoValidate) {\r\n                field.error = this.validateField(field, value);\r\n                field.touched = true;\r\n            }\r\n\r\n            this.update();\r\n        }\r\n\r\n        /**\r\n         * Handle field blur\r\n         */\r\n        handleBlur(fieldName: string): void {\r\n            const field = this.fields.find(f => f.name === fieldName);\r\n            if (field) {\r\n                field.touched = true;\r\n                field.error = this.validateField(field, this.formData[fieldName]);\r\n                this.update();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Validate single field\r\n         */\r\n        validateField(field: FormField, value: unknown): string | undefined {\r\n            const validation = field.validation;\r\n            if (!validation) return undefined;\r\n\r\n            // Required\r\n            if (validation.required && !value) {\r\n                return validation.message || `${field.label || field.name} is required`;\r\n            }\r\n\r\n            if (!value) return undefined;\r\n\r\n            // Convert to string for string validations\r\n            const stringValue = String(value);\r\n\r\n            // Min length\r\n            if (validation.minLength && stringValue.length < validation.minLength) {\r\n                return validation.message || `Minimum ${validation.minLength} characters required`;\r\n            }\r\n\r\n            // Max length\r\n            if (validation.maxLength && stringValue.length > validation.maxLength) {\r\n                return validation.message || `Maximum ${validation.maxLength} characters allowed`;\r\n            }\r\n\r\n            // Min value\r\n            if (validation.min !== undefined && Number(value) < validation.min) {\r\n                return validation.message || `Minimum value is ${validation.min}`;\r\n            }\r\n\r\n            // Max value\r\n            if (validation.max !== undefined && Number(value) > validation.max) {\r\n                return validation.message || `Maximum value is ${validation.max}`;\r\n            }\r\n\r\n            // Pattern\r\n            if (validation.pattern && !validation.pattern.test(stringValue)) {\r\n                return validation.message || 'Invalid format';\r\n            }\r\n\r\n            // Email\r\n            if (validation.email && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(stringValue)) {\r\n                return validation.message || 'Invalid email format';\r\n            }\r\n\r\n            // URL\r\n            if (validation.url && !/^https?:\\/\\/.+/.test(stringValue)) {\r\n                return validation.message || 'Invalid URL format';\r\n            }\r\n\r\n            // Custom validation\r\n            if (validation.custom) {\r\n                const result = validation.custom(value);\r\n                if (result !== true) {\r\n                    return typeof result === 'string' ? result : undefined;\r\n                }\r\n            }\r\n\r\n            return undefined;\r\n        }\r\n\r\n        /**\r\n         * Validate all fields\r\n         */\r\n        validateForm(): boolean {\r\n            let isValid = true;\r\n            const errors: Record<string, string> = {};\r\n\r\n            for (const field of this.fields) {\r\n                const error = this.validateField(field, this.formData[field.name]);\r\n                field.error = error;\r\n                field.touched = true;\r\n\r\n                if (error) {\r\n                    isValid = false;\r\n                    errors[field.name] = error;\r\n                }\r\n            }\r\n\r\n            this.update();\r\n\r\n            // Call validation error callback\r\n            if (!isValid && this.props.onValidationError) {\r\n                this.props.onValidationError(errors);\r\n            }\r\n\r\n            return isValid;\r\n        }\r\n\r\n        /**\r\n         * Handle form submission\r\n         */\r\n        async handleSubmit(event: Event): Promise<void> {\r\n            event.preventDefault();\r\n\r\n            // Validate form\r\n            if (!this.validateForm()) {\r\n                // Focus first error field\r\n                const firstErrorField = this.fields.find(f => f.error);\r\n                if (firstErrorField) {\r\n                    const element = document.querySelector(`[name=\"${firstErrorField.name}\"]`) as HTMLElement;\r\n                    element?.focus();\r\n                }\r\n                return;\r\n            }\r\n\r\n            this.isSubmitting = true;\r\n            this.submitError = '';\r\n            this.submitSuccess = false;\r\n            this.update();\r\n\r\n            try {\r\n                // Custom submit handler\r\n                if (this.props.onSubmit) {\r\n                    await this.props.onSubmit(this.formData, event);\r\n                }\r\n                // API submission\r\n                else if (this.props.endpoint) {\r\n                    const response = await api({\r\n                        method: this.props.method || 'POST',\r\n                        url: this.props.endpoint,\r\n                        data: this.formData,\r\n                    });\r\n\r\n                    this.submitSuccess = true;\r\n\r\n                    if (this.props.onSuccess) {\r\n                        this.props.onSuccess(response.data);\r\n                    }\r\n                }\r\n\r\n            } catch (error) {\r\n                const errorMessage = error instanceof Error ? error.message : t('global.loading');\r\n                this.submitError = errorMessage;\r\n\r\n                if (this.props.onError) {\r\n                    this.props.onError(error);\r\n                }\r\n            } finally {\r\n                this.isSubmitting = false;\r\n                this.update();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Render label with optional icon\r\n         */\r\n        renderLabel(field: FormField): VNode | string {\r\n            // Handle new label object format\r\n            if (typeof field.label === 'object' && field.label !== null) {\r\n                const labelConfig = field.label as LabelConfig;\r\n                const labelText = labelConfig.text;\r\n                const labelIcon = labelConfig.icon;\r\n                const labelTitle = labelConfig.title;\r\n\r\n                if (!labelText && !labelIcon) return '';\r\n\r\n                const labelAttrs: Record<string, string> = { for: field.name };\r\n                if (labelTitle) {\r\n                    labelAttrs.title = labelTitle;\r\n                }\r\n\r\n                if (labelIcon) {\r\n                    return label(\r\n                        labelAttrs,\r\n                        span(CM.fa(labelIcon)),\r\n                        labelText ? span(bbMap.form.fieldTitle, labelText) : ''\r\n                    ) as VNode;\r\n                }\r\n\r\n                return label(labelAttrs, labelText || '') as VNode;\r\n            }\r\n\r\n            // Handle old string format (backward compatibility)\r\n            if (!field.label) return '';\r\n\r\n            const labelAttrs: Record<string, string> = { for: field.name };\r\n\r\n            return label(labelAttrs, String(field.label)) as VNode;\r\n        }\r\n\r\n        /**\r\n         * Get field buttons configuration\r\n         */\r\n        getFieldButtons(field: FormField): FieldButtonConfig[] {\r\n            const buttons: FieldButtonConfig[] = [];\r\n\r\n            if (!field.fieldButtons && !field.showValidationRules) {\r\n                return buttons;\r\n            }\r\n\r\n            // Add password toggle button\r\n            if (field.type === 'password' && (field.fieldButtons?.includes('togglePassword') || field.fieldButtons?.some(b => (b as FieldButtonConfig)?.type === 'togglePassword'))) {\r\n                buttons.push({\r\n                    type: 'togglePassword',\r\n                    icon: 'eye',\r\n                    title: t('form.showPassword', {}, 'Show Password'),\r\n                });\r\n            }\r\n\r\n            // Add auto validation rules button\r\n            if ((field.showValidationRules === true || field.fieldButtons?.includes('rules')) && field.validation) {\r\n                buttons.push({\r\n                    type: 'rules',\r\n                    icon: 'list-check',\r\n                });\r\n            }\r\n\r\n            // Add custom buttons\r\n            if (field.fieldButtons) {\r\n                for (const btn of field.fieldButtons) {\r\n                    if (typeof btn === 'object' && btn.type === 'custom') {\r\n                        buttons.push(btn);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return buttons;\r\n        }\r\n\r\n        /**\r\n         * Handle field button click\r\n         */\r\n        handleFieldButton(field: FormField, buttonType: string): void {\r\n            if (buttonType === 'togglePassword') {\r\n                // Toggle visibility state\r\n                this.passwordVisibility[field.name] = !this.passwordVisibility[field.name];\r\n                const isVisible = this.passwordVisibility[field.name];\r\n\r\n                // Directly manipulate the input element's type\r\n                const inputElement = document.querySelector(`input[name=\"${field.name}\"]`) as HTMLInputElement;\r\n                if (inputElement) {\r\n                    inputElement.type = isVisible ? 'text' : 'password';\r\n                }\r\n\r\n                // Update the button icon\r\n                const buttonContainer = inputElement?.closest(`.${FORM_STYLES.fieldInputContainer}`)\r\n                    ?.querySelector(`.${FORM_STYLES.fieldInputButtons}`);\r\n                const toggleBtn = buttonContainer?.querySelector('button') as HTMLButtonElement;\r\n                if (toggleBtn) {\r\n                    // Update the icon class\r\n                    const iconSpan = toggleBtn.querySelector('span');\r\n                    if (iconSpan) {\r\n                        // Remove all fa-* classes\r\n                        iconSpan.className = iconSpan.className.replace(/fa-eye(-slash)?/, isVisible ? 'fa-eye-slash' : 'fa-eye');\r\n                    }\r\n                    // Update title\r\n                    toggleBtn.title = isVisible\r\n                        ? t('form.hidePassword', {}, 'Hide Password')\r\n                        : t('form.showPassword', {}, 'Show Password');\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Render validation rules popup\r\n         */\r\n        renderValidationRules(field: FormField): VNode | string {\r\n            if (!field.validation) return '';\r\n\r\n            const rules: string[] = [];\r\n\r\n            if (field.validation.required) {\r\n                rules.push(t('form.rule.required', {}, 'This field is required'));\r\n            }\r\n            if (field.validation.minLength) {\r\n                rules.push(t('form.rule.minLength', { length: String(field.validation.minLength) }, `Minimum ${field.validation.minLength} characters`));\r\n            }\r\n            if (field.validation.maxLength) {\r\n                rules.push(t('form.rule.maxLength', { length: String(field.validation.maxLength) }, `Maximum ${field.validation.maxLength} characters`));\r\n            }\r\n            if (field.validation.min !== undefined) {\r\n                rules.push(t('form.rule.min', { value: String(field.validation.min) }, `Minimum value: ${field.validation.min}`));\r\n            }\r\n            if (field.validation.max !== undefined) {\r\n                rules.push(t('form.rule.max', { value: String(field.validation.max) }, `Maximum value: ${field.validation.max}`));\r\n            }\r\n            if (field.validation.email) {\r\n                rules.push(t('form.rule.email', {}, 'Valid email format required'));\r\n            }\r\n            if (field.validation.url) {\r\n                rules.push(t('form.rule.url', {}, 'Valid URL format required'));\r\n            }\r\n            if (field.validation.pattern) {\r\n                rules.push(t('form.rule.pattern', {}, 'Pattern does not match'));\r\n            }\r\n\r\n            if (rules.length === 0) return '';\r\n\r\n            return div(\r\n                { class: FORM_STYLES.fieldInputButtonRulesContent },\r\n                ...rules.map(rule => div({}, rule))\r\n            ) as VNode;\r\n        }\r\n\r\n        /**\r\n         * Render field input buttons\r\n         */\r\n        renderFieldButtons(field: FormField): VNode | string {\r\n            const buttons = this.getFieldButtons(field);\r\n            if (buttons.length === 0) return '';\r\n\r\n            const buttonElements: VNode[] = [];\r\n\r\n            for (const btn of buttons) {\r\n                if (btn.type === 'rules') {\r\n                    // Rules button with hover popup\r\n                    buttonElements.push(\r\n                        div(\r\n                            { class: FORM_STYLES.fieldInputButtonRules, title: btn.title },\r\n                            button(\r\n                                {\r\n                                    type: 'button',\r\n                                    class: FORM_STYLES.fieldInputButton,\r\n                                    tabindex: -1,\r\n                                    onclick: (e: Event) => {\r\n                                        e.preventDefault();\r\n                                        e.stopPropagation();\r\n                                    },\r\n                                },\r\n                                span(CM.fa(btn.icon || 'fa-circle-info'))\r\n                            ),\r\n                            this.renderValidationRules(field)\r\n                        ) as VNode\r\n                    );\r\n                } else {\r\n                    // Standard button\r\n                    buttonElements.push(\r\n                        button(\r\n                            {\r\n                                type: 'button',\r\n                                class: FORM_STYLES.fieldInputButton,\r\n                                title: btn.title,\r\n                                tabindex: -1,\r\n                                onclick: (e: Event) => {\r\n                                    e.preventDefault();\r\n                                    e.stopPropagation();\r\n                                    if (btn.type === 'togglePassword') {\r\n                                        this.handleFieldButton(field, btn.type);\r\n                                    } else if (btn.onClick) {\r\n                                        btn.onClick();\r\n                                    }\r\n                                },\r\n                            },\r\n                            span(CM.fa(btn.icon || 'fa-gear'))\r\n                        ) as VNode\r\n                    );\r\n                }\r\n            }\r\n\r\n            return div({ class: FORM_STYLES.fieldInputButtons }, ...buttonElements) as VNode;\r\n        }\r\n\r\n        /**\r\n         * Render form field\r\n         */\r\n        renderField(field: FormField): VNode {\r\n            const value = this.formData[field.name] || '';\r\n            const labelNode = this.renderLabel(field);\r\n            const fieldClass = [FORM_STYLES.field, field.className].filter(Boolean).join(' ');\r\n            const errorMsg = field.error && field.touched ? span({ class: FORM_STYLES.fieldError }, field.error) : '';\r\n\r\n            switch (field.type) {\r\n                case 'textarea':\r\n                    return div(\r\n                        { class: fieldClass },\r\n                        labelNode,\r\n                        div(\r\n                            { class: FORM_STYLES.fieldInputContainer },\r\n                            textarea(\r\n                                {\r\n                                    id: field.name,\r\n                                    name: field.name,\r\n                                    placeholder: field.placeholder || '',\r\n                                    disabled: field.disabled || this.isSubmitting,\r\n                                    oninput: (e: Event) => {\r\n                                        const target = e.target as HTMLTextAreaElement;\r\n                                        this.handleChange(field.name, target.value);\r\n                                    },\r\n                                    onblur: () => this.handleBlur(field.name),\r\n                                    class: FORM_STYLES.fieldTextarea,\r\n                                },\r\n                                String(value)\r\n                            ),\r\n                            this.renderFieldButtons(field)\r\n                        ),\r\n                        errorMsg\r\n                    ) as VNode;\r\n\r\n                case 'select': {\r\n                    const options = field.options || [];\r\n                    const optionNodes = options.map((opt: FormFieldOption) =>\r\n                        option(\r\n                            { value: String(opt.value), selected: String(opt.value) === String(value) },\r\n                            opt.label\r\n                        )\r\n                    );\r\n\r\n                    return div(\r\n                        { class: fieldClass },\r\n                        labelNode,\r\n                        div(\r\n                            { class: FORM_STYLES.fieldInputContainer },\r\n                            select(\r\n                                {\r\n                                    id: field.name,\r\n                                    name: field.name,\r\n                                    disabled: field.disabled || this.isSubmitting,\r\n                                    onchange: (e: Event) => {\r\n                                        const target = e.target as HTMLSelectElement;\r\n                                        this.handleChange(field.name, target.value);\r\n                                    },\r\n                                    onblur: () => this.handleBlur(field.name),\r\n                                    class: FORM_STYLES.fieldSelect,\r\n                                },\r\n                                option({ value: '', selected: String(value) === '' }, t('form.select_placeholder', {}, 'Select...')),\r\n                                ...optionNodes\r\n                            ),\r\n                            this.renderFieldButtons(field)\r\n                        ),\r\n                        errorMsg\r\n                    ) as VNode;\r\n                }\r\n\r\n                case 'checkbox': {\r\n                    const isChecked = Boolean(value);\r\n                    const checkboxClass = [FORM_STYLES.field, FORM_STYLES.fieldCheckbox, field.className].filter(Boolean).join(' ');\r\n                    \r\n                    // Extract icon and text from label\r\n                    let labelIcon = '';\r\n                    let labelText = '';\r\n                    \r\n                    if (typeof field.label === 'object' && field.label !== null) {\r\n                        labelIcon = (field.label as LabelConfig).icon || '';\r\n                        labelText = (field.label as LabelConfig).text || '';\r\n                    } else if (typeof field.label === 'string') {\r\n                        labelText = field.label;\r\n                    }\r\n                    \r\n                    return div(\r\n                        { class: checkboxClass },\r\n                        input(\r\n                            {\r\n                                type: 'checkbox',\r\n                                id: field.name,\r\n                                name: field.name,\r\n                                checked: isChecked,\r\n                                disabled: field.disabled || this.isSubmitting,\r\n                                onchange: (e: Event) => {\r\n                                    const target = e.target as HTMLInputElement;\r\n                                    this.handleChange(field.name, target.checked);\r\n                                },\r\n                                class: FORM_STYLES.fieldCheckbox,\r\n                            }\r\n                        ),\r\n                        label(\r\n                            { for: field.name },\r\n                            labelIcon ? span(CM.fa(labelIcon)) : '',\r\n                            labelText || ''\r\n                        ),\r\n                        errorMsg\r\n                    ) as VNode;\r\n                }\r\n\r\n                default: {\r\n                    const isPasswordField = field.type === 'password';\r\n                    const inputType = isPasswordField && this.passwordVisibility[field.name] ? 'text' : field.type || 'text';\r\n\r\n                    return div(\r\n                        { class: fieldClass },\r\n                        labelNode,\r\n                        div(\r\n                            { class: FORM_STYLES.fieldInputContainer },\r\n                            input(\r\n                                {\r\n                                    type: inputType,\r\n                                    id: field.name,\r\n                                    name: field.name,\r\n                                    placeholder: field.placeholder || '',\r\n                                    value: String(value),\r\n                                    disabled: field.disabled || this.isSubmitting,\r\n                                    oninput: (e: Event) => {\r\n                                        const target = e.target as HTMLInputElement;\r\n                                        this.handleChange(field.name, target.value);\r\n                                    },\r\n                                    onblur: () => this.handleBlur(field.name),\r\n                                    class: FORM_STYLES.fieldInput,\r\n                                }\r\n                            ),\r\n                            this.renderFieldButtons(field)\r\n                        ),\r\n                        errorMsg\r\n                    ) as VNode;\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Render buttons section\r\n         */\r\n        renderButtons(): VNode {\r\n            const buttons = this.props.buttons || {\r\n                submit: {\r\n                    label: t('form.submit', {}, 'Submit'),\r\n                    onClick: 'submit'\r\n                }\r\n            };\r\n\r\n            const buttonElements: VNode[] = [];\r\n\r\n            for (const [buttonKey, buttonConfig] of Object.entries(buttons)) {\r\n                const isSubmitButton = buttonConfig.onClick === 'submit' || buttonKey === 'submit';\r\n                const isDisabled = this.isSubmitting && isSubmitButton;\r\n                const buttonLabel = this.isSubmitting && isSubmitButton\r\n                    ? (buttonConfig.loadingLabel || buttonConfig.label)\r\n                    : buttonConfig.label;\r\n\r\n                buttonElements.push(button(\r\n                    {\r\n                        type: isSubmitButton ? 'submit' : 'button',\r\n                        class: [FORM_STYLES.button, buttonConfig.className].filter(Boolean).join(' '),\r\n                        disabled: isDisabled,\r\n                        title: buttonConfig.title,\r\n                        onclick: !isSubmitButton ? async (e: Event) => {\r\n                            e.preventDefault();\r\n                            if (typeof buttonConfig.onClick === 'function') {\r\n                                try {\r\n                                    this.isSubmitting = true;\r\n                                    this.update();\r\n                                    await buttonConfig.onClick();\r\n                                } finally {\r\n                                    this.isSubmitting = false;\r\n                                    this.update();\r\n                                }\r\n                            }\r\n                        } : undefined,\r\n                    },\r\n                    buttonConfig.icon ? span(CM.fa(buttonConfig.icon), ' ') : '',\r\n                    buttonLabel\r\n                ) as VNode);\r\n            }\r\n\r\n            return div({ class: FORM_STYLES.buttonsContainer }, ...buttonElements) as VNode;\r\n        }\r\n\r\n        render(): VNode {\r\n            // Render all fields/groups into an array first\r\n            const fieldNodes: VNode[] = [];\r\n\r\n            for (const item of this.props.fields) {\r\n                if (Array.isArray(item)) {\r\n                    // Handle grouped fields\r\n                    const groupItems: VNode[] = [];\r\n                    for (const groupItem of item) {\r\n                        if (groupItem && typeof groupItem === 'object' && 'name' in groupItem && 'type' in groupItem) {\r\n                            // It's a FormFieldConfig\r\n                            const field = this.fields.find(f => f.name === (groupItem as FormFieldConfig).name);\r\n                            if (field) {\r\n                                groupItems.push(this.renderField(field));\r\n                            }\r\n                        } else {\r\n                            // It's a VNode\r\n                            groupItems.push(groupItem as VNode);\r\n                        }\r\n                    }\r\n                    // Wrap grouped items in a container\r\n                    fieldNodes.push(div({ class: 'bb_formFieldGroup' }, ...groupItems) as VNode);\r\n                } else {\r\n                    // Handle individual field\r\n                    const field = this.fields.find(f => f.name === (item as FormFieldConfig).name);\r\n                    if (field) {\r\n                        fieldNodes.push(this.renderField(field));\r\n                    }\r\n                }\r\n            }\r\n\r\n            const formClass = [FORM_STYLES.form, this.props.className].filter(Boolean).join(' ');\r\n\r\n            return form(\r\n                { class: formClass, onsubmit: (e: Event) => this.handleSubmit(e) },\r\n                this.submitError ? div({ class: [FORM_STYLES.alert, FORM_STYLES.alertError].join(' ') }, this.submitError) : '',\r\n                this.submitSuccess ? div({ class: [FORM_STYLES.alert, FORM_STYLES.alertSuccess].join(' ') }, t('form.success', {}, 'Success')) : '',\r\n                ...fieldNodes,\r\n                this.renderButtons()\r\n            ) as VNode;\r\n        }\r\n\r\n        styles() { return css``; }\r\n    }\r\n\r\n    /**\r\n     * SmartForm helper function\r\n     */\r\n    export function SmartForm(config: FormConfig): VNode {\r\n        const form = new SmartFormComponent(config);\r\n        return form.render();\r\n    }\r\n\r\n// ","// src/mod/components/popup.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { type VNode, div, button, h2, p, i, input }     from \"@je-es/vdom\";\r\n    import { Component }                from \"../core/component\";\r\n    import { state }                    from \"../core/decorators\";\r\n    import { t, tHtml }                 from \"../core/i18n\";\r\n    import { FormConfig, SmartForm }    from \"./smart_form\";\r\n    import { ClassMaker }               from \"../helpers\";\r\n    import styleMap from \"./bb_map.json\";\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    export type PopupType           = 'confirm' | 'alert'  | 'form'    | 'custom'  | 'prompt';\r\n    export type PopupVariant        = 'default' | 'danger' | 'warning' | 'success' | 'info';\r\n    export type PopupSize           = 'small'   | 'medium' | 'large'   | 'xlarge'  | 'fullscreen';\r\n\r\n    export interface PopupButton {\r\n        label                       : string;\r\n        translateKey?               : string;\r\n        variant?                    : 'primary' | 'secondary' | 'danger' | 'success';\r\n        icon?                       : string;\r\n        onClick                     : () => void | Promise<void>;\r\n        loading?                    : boolean;\r\n    }\r\n\r\n    export interface PopupFormOptions {\r\n        title                       : string;\r\n        titleTranslateKey?          : string;\r\n        description?                : string;\r\n        descriptionTranslateKey?    : string;\r\n        formConfig                  : FormConfig;\r\n        variant?                    : PopupVariant;\r\n        icon?                       : string;\r\n        size?                       : PopupSize;\r\n        closeOnOverlay?             : boolean;\r\n        closeOnEscape?              : boolean;\r\n        showCloseButton?            : boolean;\r\n    }\r\n\r\n    export interface PopupOptions {\r\n        title                       : string;\r\n        titleTranslateKey?          : string;\r\n        message?                    : string;\r\n        messageTranslateKey?        : string;\r\n        description?                : string;\r\n        descriptionTranslateKey?    : string;\r\n        type?                       : PopupType;\r\n        variant?                    : PopupVariant;\r\n        size?                       : PopupSize;\r\n        buttons?                    : PopupButton[];\r\n        customContent?              : VNode;\r\n        formConfig?                 : FormConfig;\r\n        closeOnOverlay?             : boolean;\r\n        closeOnEscape?              : boolean;\r\n        showCloseButton?            : boolean;\r\n        icon?                       : string;\r\n        onConfirm?                  : () => void | Promise<void>;\r\n        onCancel?                   : () => void | Promise<void>;\r\n    }\r\n\r\n    interface ActivePopup extends PopupOptions {\r\n        id                          : number;\r\n        resolve?                    : (value: boolean | string | null | Record<string, unknown>) => void;\r\n        inputValue?                 : string;\r\n        isSubmitting?               : boolean;\r\n    }\r\n\r\n    // Reference to style map\r\n    const bb_ = styleMap.popup;\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class Popup extends Component {\r\n\r\n        //  INIT \r\n\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state popups               : ActivePopup[]     = [];\r\n            private nextId                                  = 0;\r\n            private handleEscapeKey?    : (e: KeyboardEvent) => void;\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            async onMount() {\r\n                this.setupKeyboardListener();\r\n\r\n                window.addEventListener('languagechange', () => {\r\n                    this.update();\r\n                });\r\n            }\r\n\r\n            onUnmount() {\r\n                if (this.handleEscapeKey) {\r\n                    document.removeEventListener('keydown', this.handleEscapeKey);\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            render(): VNode {\r\n                if (this.popups.length === 0) {\r\n                    return div(bb_.container) as VNode;\r\n                }\r\n\r\n                return div(\r\n                    bb_.container,\r\n                    ...this.popups.map(popup => this.renderPopup(popup))\r\n                ) as VNode;\r\n            }\r\n\r\n            renderPopup(popup: ActivePopup): VNode {\r\n                const sizeClass = `bb_popup--${popup.size || 'medium'}`;\r\n                const variantClass = popup.variant ? `bb_popup--${popup.variant}` : '';\r\n\r\n                return div(\r\n                    {\r\n                        key: String(popup.id),\r\n                        class: bb_.overlay,\r\n                        'data-popup-id': popup.id,\r\n                        onclick: (e: Event) => {\r\n                            if ((e.target as HTMLElement).classList.contains(bb_.overlay) &&\r\n                                popup.closeOnOverlay !== false) {\r\n                                this.closePopup(popup.id, false);\r\n                            }\r\n                        }\r\n                    },\r\n                    div(\r\n                        {\r\n                            class: `${bb_.popup.base} ${sizeClass} ${variantClass}`,\r\n                            role: 'dialog',\r\n                            'aria-modal': 'true',\r\n                            'aria-labelledby': `popup-title-${popup.id}`\r\n                        },\r\n                        // Close button\r\n                        popup.showCloseButton !== false ? button(\r\n                            {\r\n                                class: bb_.popup.close,\r\n                                onclick: () => this.closePopup(popup.id, false),\r\n                                'aria-label': 'Close'\r\n                            },\r\n                            i(ClassMaker.fa('times'))\r\n                        ) : null,\r\n\r\n                        // Header\r\n                        div(\r\n                            bb_.header.container,\r\n                            popup.icon ? div(\r\n                                bb_.header.icon,\r\n                                i(popup.icon)\r\n                            ) : null,\r\n                            div(\r\n                                bb_.header.content,\r\n                                h2(\r\n                                    {\r\n                                        id: `popup-title-${popup.id}`,\r\n                                        class: bb_.header.title,\r\n                                        'data-translate': popup.titleTranslateKey\r\n                                    },\r\n                                    popup.titleTranslateKey ? t(popup.titleTranslateKey) : popup.title\r\n                                ),\r\n                                popup.description ? p(\r\n                                    {\r\n                                        class: bb_.header.description,\r\n                                        'data-translate': popup.descriptionTranslateKey\r\n                                    },\r\n                                    popup.descriptionTranslateKey\r\n                                        ? tHtml(popup.descriptionTranslateKey)\r\n                                        : popup.description\r\n                                ) : null\r\n                            )\r\n                        ),\r\n\r\n                        // Body\r\n                        div(\r\n                            bb_.body.container,\r\n                            popup.message ? p(\r\n                                {\r\n                                    class: bb_.body.message,\r\n                                    'data-translate': popup.messageTranslateKey\r\n                                },\r\n                                popup.messageTranslateKey\r\n                                    ? tHtml(popup.messageTranslateKey)\r\n                                    : popup.message\r\n                            ) : null,\r\n\r\n                            // Prompt input\r\n                            popup.type === 'prompt' ? input({\r\n                                type: 'text',\r\n                                class: bb_.body.input,\r\n                                value: popup.inputValue || '',\r\n                                placeholder: t('popup.prompt.placeholder'),\r\n                                'data-translate': 'popup.prompt.placeholder',\r\n                                oninput: (e: Event) => {\r\n                                    popup.inputValue = (e.target as HTMLInputElement).value;\r\n                                }\r\n                            }) : null,\r\n\r\n                            // Form rendering\r\n                            popup.type === 'form' && popup.formConfig ? div(\r\n                                bb_.body.formContainer,\r\n                                SmartForm(popup.formConfig)\r\n                            ) : null,\r\n\r\n                            // Custom content\r\n                            popup.customContent || null\r\n                        ),\r\n\r\n                        // Footer with buttons\r\n                        popup.buttons && popup.buttons.length > 0 && popup.type !== 'form' ? div(\r\n                            bb_.footer,\r\n                            ...popup.buttons.map(btn => button(\r\n                                {\r\n                                    class: `${bb_.button} ${btn.variant || 'secondary'}`,\r\n                                    'data-translate': btn.translateKey,\r\n                                    disabled: btn.loading || popup.isSubmitting,\r\n                                    onclick: async () => {\r\n                                        if (btn.loading || popup.isSubmitting) return;\r\n                                        await btn.onClick();\r\n                                    }\r\n                                },\r\n                                btn.icon ? i(btn.icon) : null,\r\n                                btn.loading || popup.isSubmitting ?\r\n                                    i(ClassMaker.fa('spinner', 'solid') + ' fa-spin') : null,\r\n                                ' ',\r\n                                btn.translateKey ? t(btn.translateKey) : btn.label\r\n                            ))\r\n                        ) : null\r\n                    )\r\n                ) as VNode;\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            /**\r\n             * Show a custom popup\r\n             */\r\n            show(options: PopupOptions): Promise<boolean | string | null | Record<string, unknown>> {\r\n                return new Promise((resolve) => {\r\n                    const id = this.nextId++;\r\n\r\n                    const popup: ActivePopup = {\r\n                        ...options,\r\n                        id,\r\n                        resolve,\r\n                        type: options.type || 'custom',\r\n                        size: options.size || 'medium',\r\n                        closeOnOverlay: options.closeOnOverlay !== false,\r\n                        closeOnEscape: options.closeOnEscape !== false,\r\n                        showCloseButton: options.showCloseButton !== false,\r\n                        isSubmitting: false\r\n                    };\r\n\r\n                    this.popups = [...this.popups, popup];\r\n                    this.applyBodyLock();\r\n                    this.update();\r\n                });\r\n            }\r\n\r\n            /**\r\n             * Show a form popup\r\n             */\r\n            showForm(options: PopupFormOptions): Promise<boolean | string | null | Record<string, unknown>> {\r\n                return new Promise((resolve, _reject) => {\r\n                    const id = this.nextId++;\r\n\r\n                    // Wrap the form config to handle submission\r\n                    const wrappedFormConfig: FormConfig = {\r\n                        ...options.formConfig,\r\n                        onSubmit: async (data) => {\r\n                            const popup = this.popups.find(p => p.id === id);\r\n                            if (popup) {\r\n                                popup.isSubmitting = true;\r\n                                this.update();\r\n                            }\r\n\r\n                            try {\r\n                                // Call original onSubmit\r\n                                if (options.formConfig.onSubmit) {\r\n                                    await options.formConfig.onSubmit(data, new Event('submit'));\r\n                                }\r\n\r\n                                this.closePopup(id, data);\r\n                                resolve(data);\r\n                            } catch (error) {\r\n                                if (popup) {\r\n                                    popup.isSubmitting = false;\r\n                                    this.update();\r\n                                }\r\n\r\n                                // Don't close popup on error\r\n                                if (options.formConfig.onError) {\r\n                                    options.formConfig.onError(error);\r\n                                }\r\n                            }\r\n                        },\r\n                        buttons: options.formConfig.buttons || {\r\n                            submit: {\r\n                                label: t('global.submit', {}, 'Submit'),\r\n                                className: `${bb_.button} primary wide`,\r\n                                onClick: 'submit'\r\n                            }\r\n                        }\r\n                    };\r\n\r\n                    const popup: ActivePopup = {\r\n                        title: options.title,\r\n                        titleTranslateKey: options.titleTranslateKey,\r\n                        description: options.description,\r\n                        descriptionTranslateKey: options.descriptionTranslateKey,\r\n                        type: 'form',\r\n                        variant: options.variant || 'default',\r\n                        size: options.size || 'medium',\r\n                        icon: options.icon,\r\n                        formConfig: wrappedFormConfig,\r\n                        closeOnOverlay: options.closeOnOverlay !== false,\r\n                        closeOnEscape: options.closeOnEscape !== false,\r\n                        showCloseButton: options.showCloseButton !== false,\r\n                        id,\r\n                        resolve,\r\n                        isSubmitting: false\r\n                    };\r\n\r\n                    this.popups = [...this.popups, popup];\r\n                    this.applyBodyLock();\r\n                    this.update();\r\n                });\r\n            }\r\n\r\n            /**\r\n             * Show a confirmation dialog\r\n             */\r\n            confirm(options: {\r\n                title: string;\r\n                titleTranslateKey?: string;\r\n                message: string;\r\n                messageTranslateKey?: string;\r\n                confirmLabel?: string;\r\n                confirmTranslateKey?: string;\r\n                cancelLabel?: string;\r\n                cancelTranslateKey?: string;\r\n                variant?: PopupVariant;\r\n                icon?: string;\r\n                size?: PopupSize;\r\n                onConfirm?: () => void | Promise<void>;\r\n                onCancel?: () => void | Promise<void>;\r\n            }): Promise<boolean> {\r\n                return new Promise((resolve) => {\r\n                    const id = this.nextId++;\r\n\r\n                    const popup: ActivePopup = {\r\n                        id,\r\n                        title: options.title,\r\n                        titleTranslateKey: options.titleTranslateKey,\r\n                        message: options.message,\r\n                        messageTranslateKey: options.messageTranslateKey,\r\n                        type: 'confirm',\r\n                        variant: options.variant || 'default',\r\n                        size: options.size || 'small',\r\n                        icon: options.icon,\r\n                        resolve: resolve as (value: boolean | string | null | Record<string, unknown>) => void,\r\n                        onConfirm: options.onConfirm,\r\n                        onCancel: options.onCancel,\r\n                        buttons: [\r\n                            {\r\n                                label: options.cancelLabel || 'Cancel',\r\n                                translateKey: options.cancelTranslateKey || 'button.cancel',\r\n                                variant: 'secondary',\r\n                                icon: ClassMaker.fa('times'),\r\n                                onClick: async () => {\r\n                                    if (options.onCancel) {\r\n                                        await options.onCancel();\r\n                                    }\r\n                                    this.closePopup(id, false);\r\n                                }\r\n                            },\r\n                            {\r\n                                label: options.confirmLabel || 'Confirm',\r\n                                translateKey: options.confirmTranslateKey || 'button.confirm',\r\n                                variant: options.variant === 'danger' ? 'danger' : 'primary',\r\n                                icon: ClassMaker.fa('check'),\r\n                                onClick: async () => {\r\n                                    if (options.onConfirm) {\r\n                                        await options.onConfirm();\r\n                                    }\r\n                                    this.closePopup(id, true);\r\n                                }\r\n                            }\r\n                        ]\r\n                    };\r\n\r\n                    this.popups = [...this.popups, popup];\r\n                    this.applyBodyLock();\r\n                    this.update();\r\n                });\r\n            }\r\n\r\n            /**\r\n             * Show an alert dialog\r\n             */\r\n            alert(options: {\r\n                title: string;\r\n                titleTranslateKey?: string;\r\n                message: string;\r\n                messageTranslateKey?: string;\r\n                okLabel?: string;\r\n                okTranslateKey?: string;\r\n                variant?: PopupVariant;\r\n                icon?: string;\r\n                size?: PopupSize;\r\n                onConfirm?: () => void | Promise<void>;\r\n            }): Promise<boolean> {\r\n                return new Promise((resolve) => {\r\n                    const id = this.nextId++;\r\n\r\n                    const popup: ActivePopup = {\r\n                        id,\r\n                        title: options.title,\r\n                        titleTranslateKey: options.titleTranslateKey,\r\n                        message: options.message,\r\n                        messageTranslateKey: options.messageTranslateKey,\r\n                        type: 'alert',\r\n                        variant: options.variant || 'info',\r\n                        size: options.size || 'small',\r\n                        icon: options.icon,\r\n                        resolve: resolve as (value: boolean | string | null | Record<string, unknown>) => void,\r\n                        onConfirm: options.onConfirm,\r\n                        buttons: [\r\n                            {\r\n                                label: options.okLabel || 'OK',\r\n                                translateKey: options.okTranslateKey || 'popup.ok',\r\n                                variant: 'primary',\r\n                                icon: ClassMaker.fa('check'),\r\n                                onClick: async () => {\r\n                                    if (options.onConfirm) {\r\n                                        await options.onConfirm();\r\n                                    }\r\n                                    this.closePopup(id, true);\r\n                                }\r\n                            }\r\n                        ]\r\n                    };\r\n\r\n                    this.popups = [...this.popups, popup];\r\n                    this.applyBodyLock();\r\n                    this.update();\r\n                });\r\n            }\r\n\r\n            /**\r\n             * Show a prompt dialog\r\n             */\r\n            prompt(options: {\r\n                title: string;\r\n                titleTranslateKey?: string;\r\n                message: string;\r\n                messageTranslateKey?: string;\r\n                defaultValue?: string;\r\n                confirmLabel?: string;\r\n                confirmTranslateKey?: string;\r\n                cancelLabel?: string;\r\n                cancelTranslateKey?: string;\r\n                icon?: string;\r\n                onConfirm?: (value: string) => void | Promise<void>;\r\n                onCancel?: () => void | Promise<void>;\r\n            }): Promise<string | null> {\r\n                return new Promise((resolve) => {\r\n                    const id = this.nextId++;\r\n\r\n                    const popup: ActivePopup = {\r\n                        id,\r\n                        title: options.title,\r\n                        titleTranslateKey: options.titleTranslateKey,\r\n                        message: options.message,\r\n                        messageTranslateKey: options.messageTranslateKey,\r\n                        type: 'prompt',\r\n                        variant: 'default',\r\n                        icon: options.icon,\r\n                        inputValue: options.defaultValue || '',\r\n                        resolve: resolve as (value: boolean | string | null | Record<string, unknown>) => void,\r\n                        onConfirm: options.onConfirm as (() => void | Promise<void>) | undefined,\r\n                        onCancel: options.onCancel,\r\n                        buttons: [\r\n                            {\r\n                                label: options.cancelLabel || 'Cancel',\r\n                                translateKey: options.cancelTranslateKey || 'popup.cancel',\r\n                                variant: 'secondary',\r\n                                onClick: async () => {\r\n                                    if (options.onCancel) {\r\n                                        await options.onCancel();\r\n                                    }\r\n                                    this.closePopup(id, null);\r\n                                }\r\n                            },\r\n                            {\r\n                                label: options.confirmLabel || 'OK',\r\n                                translateKey: options.confirmTranslateKey || 'popup.ok',\r\n                                variant: 'primary',\r\n                                onClick: async () => {\r\n                                    const value = popup.inputValue || '';\r\n                                    if (options.onConfirm) {\r\n                                        await options.onConfirm(value);\r\n                                    }\r\n                                    this.closePopup(id, value);\r\n                                }\r\n                            }\r\n                        ]\r\n                    };\r\n\r\n                    this.popups = [...this.popups, popup];\r\n                    this.applyBodyLock();\r\n                });\r\n            }\r\n\r\n            /**\r\n             * Close a specific popup\r\n             */\r\n            closePopup(id: number, result: boolean | string | null | Record<string, unknown>) {\r\n                const popup = this.popups.find(p => p.id === id);\r\n                if (popup?.resolve) {\r\n                    popup.resolve(result);\r\n                }\r\n\r\n                this.popups = this.popups.filter(p => p.id !== id);\r\n\r\n                if (this.popups.length === 0) {\r\n                    this.removeBodyLock();\r\n                }\r\n\r\n                this.update();\r\n            }\r\n\r\n            /**\r\n             * Close all popups\r\n             */\r\n            closeAll() {\r\n                this.popups.forEach(popup => {\r\n                    if (popup.resolve) {\r\n                        popup.resolve(false);\r\n                    }\r\n                });\r\n                this.popups = [];\r\n                this.removeBodyLock();\r\n                this.update();\r\n            }\r\n\r\n\r\n        // \r\n\r\n\r\n        //  HELP \r\n\r\n            private applyBodyLock() {\r\n                document.body.style.overflow = 'hidden';\r\n            }\r\n\r\n            private removeBodyLock() {\r\n                document.body.style.overflow = '';\r\n            }\r\n\r\n            private setupKeyboardListener() {\r\n                this.handleEscapeKey = (e: KeyboardEvent) => {\r\n                    if (e.key === 'Escape' && this.popups.length > 0) {\r\n                        const lastPopup = this.popups[this.popups.length - 1];\r\n                        if (lastPopup.closeOnEscape !== false) {\r\n                            this.closePopup(lastPopup.id, false);\r\n                        }\r\n                    }\r\n                };\r\n                document.addEventListener('keydown', this.handleEscapeKey);\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  GLOBAL \r\n\r\n    let globalPopup: Popup | null = null;\r\n\r\n    export function initPopup(container?: HTMLElement): Popup {\r\n        if (globalPopup) return globalPopup;\r\n\r\n        const popupContainer = container || document.createElement('div');\r\n        if (!container) {\r\n            document.body.appendChild(popupContainer);\r\n        }\r\n\r\n        globalPopup = new Popup();\r\n        globalPopup.mount(popupContainer);\r\n\r\n        return globalPopup;\r\n    }\r\n\r\n    export function getPopup(): Popup {\r\n        if (!globalPopup) {\r\n            globalPopup = initPopup();\r\n        }\r\n        return globalPopup;\r\n    }\r\n\r\n    // Convenience exports\r\n    export const popup = {\r\n        show: (options: PopupOptions) => getPopup().show(options),\r\n\r\n        confirm: (options: Parameters<Popup['confirm']>[0]) =>\r\n            getPopup().confirm(options),\r\n\r\n        alert: (options: Parameters<Popup['alert']>[0]) =>\r\n            getPopup().alert(options),\r\n\r\n        prompt: (options: {\r\n            title: string;\r\n            titleTranslateKey?: string;\r\n            message: string;\r\n            icon?: string;\r\n            messageTranslateKey?: string;\r\n            onConfirm?: () => void | Promise<void>;\r\n        }) => getPopup().prompt(options),\r\n\r\n        showForm: (options: PopupFormOptions) =>\r\n            getPopup().showForm(options),\r\n\r\n        closePopup: (id: number, result: boolean | string | null | Record<string, unknown>) =>\r\n            getPopup().closePopup(id, result),\r\n\r\n        closeLastPopup: () => getPopup().closePopup(getPopup().popups.length - 1, false),\r\n\r\n        closeFirstPopup: () => getPopup().closePopup(0, false),\r\n\r\n        closeAll: () => getPopup().closeAll()\r\n    };\r\n\r\n// ","// src/frontend/app/gui/layout/tabbed-view.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { type VNode, div, button, span, p, i }  from \"@je-es/vdom\";\r\n    import { Component }            from \"../core/component\";\r\n    import { state }                from \"../core/decorators\";\r\n    import { t }                    from \"../core/i18n\";\r\n    import styleMap                 from \"./bb_map.json\";\r\n\r\n// \r\n\r\n\r\n\r\n//  INIT \r\n\r\n    // Blah Blah Style Map\r\n    const { tabbedView: bb_ } = styleMap;\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    export type TabPosition     = 'top' | 'side';\r\n    export type TabStyle        = 'default' | 'pills' | 'minimal';\r\n\r\n    export interface Tab {\r\n        id                      : string;\r\n        label                   : string;\r\n        translateKey?           : string;\r\n        icon?                   : string;\r\n        badge?                  : number | string;\r\n        disabled?               : boolean;\r\n        component?              : Component | (() => VNode);\r\n        content?                : VNode;\r\n        onActivate?             : () => void | Promise<void>;\r\n    }\r\n\r\n    export interface TabbedViewOptions {\r\n        tabs                    : Tab[];\r\n        defaultTab?             : string;\r\n        position?               : TabPosition;\r\n        style?                  : TabStyle;\r\n        className?              : string;\r\n        headerClassName?        : string;\r\n        contentClassName?       : string;\r\n        showTabCount?           : boolean;\r\n        persistState?           : boolean; // Save active tab to localStorage\r\n        storageKey?             : string;  // Key for localStorage\r\n        onChange?               : (tabId: string) => void | Promise<void>;\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class TabbedView extends Component {\r\n\r\n        //  INIT \r\n\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state activeTabId          : string            = '';\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state tabs                 : Tab[]             = [];\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state position             : TabPosition       = 'top';\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state style                : TabStyle          = 'default';\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state className            : string            = '';\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state headerClassName      : string            = '';\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state contentClassName     : string            = '';\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state showTabCount         : boolean           = false;\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state persistState         : boolean           = false;\r\n            // @ts-expect-error - TypeScript decorator limitation with class property types\r\n            @state storageKey           : string            = 'tabbedview-active';\r\n\r\n            private currentTabComponent : Component | null  = null;\r\n            private onChange?           : (tabId: string) => void | Promise<void>;\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            async onMount() {\r\n                // Listen for language changes\r\n                window.addEventListener('languagechange', () => {\r\n                    this.update();\r\n                });\r\n            }\r\n\r\n            onUnmount() {\r\n                // Clean up current tab component\r\n                if (this.currentTabComponent && typeof this.currentTabComponent.onUnmount === 'function') {\r\n                    this.currentTabComponent.onUnmount();\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            /**\r\n             * Initialize the tabbed view with options\r\n             */\r\n            init(options: TabbedViewOptions) {\r\n                this.tabs = options.tabs;\r\n                this.position = options.position || 'top';\r\n                this.style = options.style || 'default';\r\n                this.className = options.className || '';\r\n                this.headerClassName = options.headerClassName || '';\r\n                this.contentClassName = options.contentClassName || '';\r\n                this.showTabCount = options.showTabCount || false;\r\n                this.persistState = options.persistState || false;\r\n                this.storageKey = options.storageKey || 'tabbedview-active';\r\n                this.onChange = options.onChange;\r\n\r\n                // Determine initial active tab\r\n                if (this.persistState) {\r\n                    const savedTab = localStorage.getItem(this.storageKey);\r\n                    if (savedTab && this.tabs.find(t => t.id === savedTab)) {\r\n                        this.activeTabId = savedTab;\r\n                    }\r\n                }\r\n\r\n                if (!this.activeTabId) {\r\n                    this.activeTabId = options.defaultTab || this.tabs[0]?.id || '';\r\n                }\r\n\r\n                this.update();\r\n                return this;\r\n            }\r\n\r\n            /**\r\n             * Set active tab\r\n             */\r\n            async setActiveTab(tabId: string) {\r\n                const tab = this.tabs.find(t => t.id === tabId);\r\n                if (!tab || tab.disabled) return;\r\n\r\n                // Clean up old tab component\r\n                if (this.currentTabComponent && typeof this.currentTabComponent.onUnmount === 'function') {\r\n                    this.currentTabComponent.onUnmount();\r\n                }\r\n                this.currentTabComponent = null;\r\n\r\n                this.activeTabId = tabId;\r\n\r\n                // Save to localStorage if persistence is enabled\r\n                if (this.persistState) {\r\n                    localStorage.setItem(this.storageKey, tabId);\r\n                }\r\n\r\n                // Call tab's onActivate callback\r\n                if (tab.onActivate) {\r\n                    await tab.onActivate();\r\n                    // (window as any).__globalLoader?.show();\r\n                    // TODO: better use in-container loading indicator\r\n                }\r\n\r\n                // Call global onChange callback\r\n                if (this.onChange) {\r\n                    await this.onChange(tabId);\r\n                }\r\n\r\n                this.update();\r\n            }\r\n\r\n            /**\r\n             * Add a new tab dynamically\r\n             */\r\n            addTab(tab: Tab) {\r\n                this.tabs = [...this.tabs, tab];\r\n                this.update();\r\n            }\r\n\r\n            /**\r\n             * Remove a tab\r\n             */\r\n            removeTab(tabId: string) {\r\n                this.tabs = this.tabs.filter(t => t.id !== tabId);\r\n                if (this.activeTabId === tabId && this.tabs.length > 0) {\r\n                    this.activeTabId = this.tabs[0].id;\r\n                }\r\n                this.update();\r\n            }\r\n\r\n            /**\r\n             * Update tab properties\r\n             */\r\n            updateTab(tabId: string, updates: Partial<Tab>) {\r\n                const tab = this.tabs.find(t => t.id === tabId);\r\n                if (tab) {\r\n                    Object.assign(tab, updates);\r\n                    this.update();\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Get active tab\r\n             */\r\n            getActiveTab(): Tab | undefined {\r\n                return this.tabs.find(t => t.id === this.activeTabId);\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            render(): VNode {\r\n                const containerClass = [\r\n                    bb_.container,\r\n                    `bb_tabbedview__--${this.position}`,\r\n                    `bb_tabbedview__--${this.style}`,\r\n                    this.className\r\n                ].filter(Boolean).join(' ');\r\n\r\n                return div(\r\n                    containerClass,\r\n                    this.renderTabList(),\r\n                    this.renderTabContent()\r\n                ) as VNode;\r\n            }\r\n\r\n            renderTabList(): VNode {\r\n                const headerClass = [\r\n                    bb_.header,\r\n                    this.headerClassName\r\n                ].filter(Boolean).join(' ');\r\n\r\n                return div(\r\n                    headerClass,\r\n                    ...this.tabs.map(tab => this.renderTab(tab))\r\n                ) as VNode;\r\n            }\r\n\r\n            renderTab(tab: Tab): VNode {\r\n                const isActive = this.activeTabId === tab.id;\r\n\r\n                const tabClass = [\r\n                    bb_.tab.base,\r\n                    isActive ? bb_.tab.active : '',\r\n                    tab.disabled ? bb_.tab.disabled : ''\r\n                ].filter(Boolean).join(' ');\r\n\r\n                const label = tab.translateKey ? t(tab.translateKey) : tab.label;\r\n\r\n                return button(\r\n                    {\r\n                        key: tab.id,\r\n                        class: tabClass,\r\n                        onclick: () => this.setActiveTab(tab.id),\r\n                        disabled: tab.disabled,\r\n                        'data-translate': tab.translateKey,\r\n                        'aria-selected': isActive,\r\n                        role: 'tab'\r\n                    },\r\n                    tab.icon ? i(tab.icon) : null,\r\n                    span({}, label),\r\n                    tab.badge !== undefined && tab.badge !== null && tab.badge !== 0 ?\r\n                        span(\r\n                            bb_.tab.badge,\r\n                            typeof tab.badge === 'number' && tab.badge > 99 ? '99+' : String(tab.badge)\r\n                        ) : null\r\n                ) as VNode;\r\n            }\r\n\r\n            renderTabContent(): VNode {\r\n                const contentClass = [\r\n                    bb_.content.container,\r\n                    this.contentClassName\r\n                ].filter(Boolean).join(' ');\r\n\r\n                const activeTab = this.getActiveTab();\r\n                if (!activeTab) {\r\n                    return div(\r\n                        contentClass,\r\n                        div(\r\n                            bb_.content.emptyState,\r\n                            p({}, t('tabbedView.no_content'))\r\n                        )\r\n                    ) as VNode;\r\n                }\r\n\r\n                return div(\r\n                    {\r\n                        class: contentClass,\r\n                        role: 'tabpanel'\r\n                    },\r\n                    this.renderActiveTabContent(activeTab)\r\n                ) as VNode;\r\n            }\r\n\r\n            renderActiveTabContent(tab: Tab): VNode {\r\n                // If tab has a component class/function\r\n                if (tab.component) {\r\n                    try {\r\n                        // Check if it's a Component instance\r\n                        if (tab.component instanceof Component) {\r\n                            // It's already an instance, just render it\r\n                            this.currentTabComponent = tab.component;\r\n\r\n                            // Get the VNode from render()\r\n                            const vnode = this.currentTabComponent.render();\r\n\r\n                            // Wrap the VNode to set _element when it's mounted via ref callback\r\n                            const wrappedProps = {\r\n                                ...vnode.props,\r\n                                ref: (el: HTMLElement | null) => {\r\n                                    if (el && this.currentTabComponent) {\r\n                                        // Set the component's _element through the private field\r\n                                        (this.currentTabComponent as Component<Record<string, unknown>, Record<string, unknown>>).setElement(el);\r\n                                        // console.log(' TabbedView set component._element via ref');\r\n                                    }\r\n                                    // Call original ref if it exists\r\n                                    if (typeof vnode.props.ref === 'function') {\r\n                                        vnode.props.ref(el);\r\n                                    }\r\n                                }\r\n                            };\r\n\r\n                            // Create a new VNode with the wrapped props\r\n                            const wrappedVNode = {\r\n                                ...vnode,\r\n                                props: wrappedProps\r\n                            };\r\n\r\n                            // Schedule onMount to be called after element is in DOM\r\n                            if (typeof this.currentTabComponent.onMount === 'function') {\r\n                                setTimeout(() => {\r\n                                    if (this.currentTabComponent && typeof this.currentTabComponent.onMount === 'function') {\r\n                                        this.currentTabComponent.onMount();\r\n                                    }\r\n                                }, 0);\r\n                            }\r\n\r\n                            return wrappedVNode as VNode;\r\n                        }\r\n\r\n                        // Check if it's a function\r\n                        if (typeof tab.component === 'function') {\r\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                            const fn = tab.component as any;\r\n\r\n                            // Check if it's a Component class (has prototype.render)\r\n                            if (fn.prototype && typeof fn.prototype.render === 'function') {\r\n                                // It's a Component class - create new instance\r\n                                if (!this.currentTabComponent) {\r\n                                    this.currentTabComponent = new fn();\r\n\r\n                                    // Schedule onMount\r\n                                    if (this.currentTabComponent && typeof this.currentTabComponent.onMount === 'function') {\r\n                                        setTimeout(() => {\r\n                                            if (this.currentTabComponent && typeof this.currentTabComponent.onMount === 'function') {\r\n                                                this.currentTabComponent.onMount();\r\n                                            }\r\n                                        }, 0);\r\n                                    }\r\n                                }\r\n\r\n                                return this.currentTabComponent!.render() as VNode;\r\n                            } else {\r\n                                // It's a function returning VNode\r\n                                return fn() as VNode;\r\n                            }\r\n                        }\r\n                    } catch (error) {\r\n                        console.error('Error rendering tab component:', error);\r\n                        return div(\r\n                            bb_.content.error,\r\n                            t('global.loading')\r\n                        ) as VNode;\r\n                    }\r\n                }\r\n\r\n                // If tab has direct content VNode\r\n                if (tab.content) {\r\n                    return tab.content;\r\n                }\r\n\r\n                // Fallback\r\n                return div(\r\n                    bb_.content.emptyState,\r\n                    p({}, t('tabbedView.no_content'))\r\n                ) as VNode;\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  GLOB \r\n\r\n    /**\r\n     * Create a new TabbedView instance with options\r\n     */\r\n    export function createTabbedView(options: TabbedViewOptions): TabbedView {\r\n        const view = new TabbedView();\r\n        view.init(options);\r\n        return view;\r\n    }\r\n\r\n    /**\r\n     * Helper to create a simple tabbed view and mount it\r\n     */\r\n    export async function mountTabbedView(\r\n        container: HTMLElement,\r\n        options: TabbedViewOptions\r\n    ): Promise<TabbedView> {\r\n        const view = createTabbedView(options);\r\n        await view.mount(container);\r\n        return view;\r\n    }\r\n\r\n// ","// src/frontend/app/gui/layout/items_loader.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { createDOMElement, div, input, p, button, span, i, type VNode, type VNodeChild } from \"@je-es/vdom\";\r\n    import { Component }    from \"../core/component\";\r\n    import { t }            from \"../core/i18n\";\r\n    import { ClassMaker }   from \"../helpers\";\r\n    import styleMap from \"./bb_map.json\";\r\n\r\n// \r\n\r\n\r\n\r\n//  INIT \r\n\r\n    // Reference to style map\r\n    const bb_ = styleMap.itemsLoader;\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPES \r\n\r\n    export interface ItemsLoaderConfig<T> {\r\n        // Core configuration\r\n        fetchUrl                    : string | ((page: number, filters: Record<string, unknown>) => string);\r\n        renderItem                  : (item: T, index: number) => HTMLElement;\r\n        pageSize?                   : number;\r\n\r\n        // Empty state\r\n        emptyStateConfig?: {\r\n            icon                    : string;\r\n            title                   : string;\r\n            description             : string;\r\n        };\r\n\r\n        // UI text\r\n        loadMoreText?               : string;\r\n        loadingText?                : string;\r\n        errorText?                  : string;\r\n        containerClassName?         : string;\r\n        itemClassName?              : string;\r\n\r\n        // Filtering\r\n        filters?                    : Record<string, unknown>;\r\n        onFiltersChange?            : (filters: Record<string, unknown>) => void;\r\n\r\n        // Search\r\n        enableSearch?               : boolean;\r\n        searchPlaceholder?          : string;\r\n        searchFilterKey?            : string;\r\n        searchDebounceMs?           : number;\r\n\r\n        // Callbacks\r\n        onItemClick?                : (item: T, index: number) => void;\r\n        onLoadMore?                 : (page: number, items: T[]) => void;\r\n        onError?                    : (error: Error) => void;\r\n\r\n        // Data extraction\r\n        initialItems?               : T[];\r\n        extractItems?               : (response: Record<string, unknown>) => T[];\r\n        extractTotal?               : (response: Record<string, unknown>) => number;\r\n\r\n        // Authentication\r\n        getAuthToken?               : () => string | null;\r\n\r\n        // Scroll behavior\r\n        enableInfiniteScroll?       : boolean;\r\n        scrollThreshold?            : number;\r\n\r\n        //  Visibility tracking (for auto-mark-as-read, analytics, etc.)\r\n        enableVisibilityTracking?   : boolean;\r\n        visibilityThreshold?        : number;\r\n        visibilityRootMargin?       : string;\r\n        onItemsViewed?              : (viewedItems: T[]) => Promise<void>;\r\n        getItemId?                  : (item: T) => number | string;\r\n        shouldTrackItem?            : (item: T) => boolean; // e.g., only track unread items\r\n\r\n        //  Dropdown lifecycle (for nested dropdowns)\r\n        onDropdownOpen?             : () => void;\r\n        onDropdownClose?            : () => void;\r\n\r\n        //  Batch operations\r\n        onBatchAction?              : (action: string, itemIds: (number | string)[]) => Promise<void>;\r\n    }\r\n\r\n    interface LoadState {\r\n        loading                     : boolean;\r\n        error                       : string | null;\r\n        hasMore                     : boolean;\r\n        page                        : number;\r\n        total                       : number;\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class ItemsLoader<T = unknown> extends Component {\r\n\r\n        //  INIT \r\n\r\n            items                               : T[] = [];\r\n            loadState                           : LoadState = {\r\n                loading                         : false,\r\n                error                           : null,\r\n                hasMore                         : true,\r\n                page                            : 0,\r\n                total                           : 0\r\n            };\r\n            filters                             : Record<string, unknown> = {};\r\n\r\n            public config!                      : ItemsLoaderConfig<T>;\r\n\r\n            // Scroll management\r\n            private scrollContainer             : HTMLElement | null = null;\r\n\r\n            // Infinite scroll\r\n            private loadMoreObserver            : IntersectionObserver | null = null;\r\n            private currentLoadMoreTrigger      : Element | null = null;\r\n            private loadMoreMutationObserver    : MutationObserver | null = null;\r\n\r\n            // Visibility tracking\r\n            private visibilityObserver          : IntersectionObserver | null = null;\r\n            private viewedItems                 = new Set<number | string>();\r\n            private dropdownIsOpen              : boolean = false;\r\n\r\n            // DOM references\r\n            private itemsListContainer          : HTMLElement | null = null;\r\n            private searchInput                 : HTMLInputElement | null = null;\r\n\r\n            // State flags\r\n            private isUpdating                  : boolean = false;\r\n            private searchDebounceTimer         : NodeJS.Timeout | null = null;\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            initialize(config: ItemsLoaderConfig<T>) {\r\n                this.config = {\r\n                    pageSize: 10,\r\n                    loadMoreText: 'Load More',\r\n                    loadingText: 'Loading...',\r\n                    errorText: 'Failed to load items',\r\n                    containerClassName: bb_.container,\r\n                    itemClassName: bb_.item,\r\n                    enableInfiniteScroll: true,\r\n                    scrollThreshold: 200,\r\n                    enableSearch: false,\r\n                    searchPlaceholder: 'Search...',\r\n                    searchFilterKey: 'search',\r\n                    searchDebounceMs: 300,\r\n                    enableVisibilityTracking: false,\r\n                    visibilityThreshold: 0.5,\r\n                    visibilityRootMargin: '0px',\r\n                    extractItems: (response: { notifications?: T[]; items?: T[]; data?: T[]; logs?: T[] }) =>\r\n                        response.notifications || response.items || response.data || response.logs || [],\r\n                    extractTotal: (response: { total?: number; count?: number; pagination?: { total?: number } }) =>\r\n                        response.pagination?.total || response.total || response.count || 0,\r\n                    ...config\r\n                };\r\n\r\n                if (this.config.filters) {\r\n                    this.filters = { ...this.config.filters };\r\n                }\r\n\r\n                if (this.config.initialItems) {\r\n                    this.items = [...this.config.initialItems];\r\n                }\r\n            }\r\n\r\n            async onMount() {\r\n                if (this.items.length === 0) {\r\n                    await this.loadMore();\r\n                }\r\n\r\n                if (this.config.enableInfiniteScroll) {\r\n                    this.setupInfiniteScroll();\r\n                }\r\n\r\n                if (this.config.scrollThreshold) {\r\n                    this.setupScrollListener();\r\n                }\r\n\r\n                if (this.config.enableVisibilityTracking) {\r\n                    this.setupVisibilityTracking();\r\n                }\r\n            }\r\n\r\n            onUnmount() {\r\n                this.disconnectInfiniteScrollObserver();\r\n                this.disconnectVisibilityObserver();\r\n\r\n                if (this.loadMoreMutationObserver) {\r\n                    this.loadMoreMutationObserver.disconnect();\r\n                    this.loadMoreMutationObserver = null;\r\n                }\r\n\r\n                if (this.scrollContainer) {\r\n                    this.scrollContainer.removeEventListener('scroll', this.handleScroll);\r\n                    this.scrollContainer = null;\r\n                }\r\n\r\n                if (this.searchDebounceTimer) {\r\n                    clearTimeout(this.searchDebounceTimer);\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            async loadMore() {\r\n                if (this.loadState.loading || !this.loadState.hasMore) {\r\n                    return;\r\n                }\r\n\r\n                try {\r\n                    const scrollContainer = this.scrollContainer || this.findScrollContainer();\r\n                    const savedScrollTop = scrollContainer?.scrollTop || 0;\r\n                    const savedScrollHeight = scrollContainer?.scrollHeight || 0;\r\n\r\n                    this.loadState = { ...this.loadState, loading: true, error: null };\r\n                    this.updateLoadingState();\r\n\r\n                    const nextPage = this.loadState.page + 1;\r\n                    const url = this.buildUrl(nextPage);\r\n\r\n                    const response = await fetch(url, {\r\n                        credentials: 'include',\r\n                        headers: this.buildHeaders()\r\n                    });\r\n\r\n                    if (!response.ok) {\r\n                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n                    }\r\n\r\n                    const data = await response.json();\r\n                    const newItems = this.config.extractItems!(data);\r\n                    const total = this.config.extractTotal!(data);\r\n\r\n                    this.items = [...this.items, ...newItems];\r\n                    this.loadState = {\r\n                        loading: false,\r\n                        error: null,\r\n                        hasMore: this.items.length < total,\r\n                        page: nextPage,\r\n                        total\r\n                    };\r\n\r\n                    this.updateLoadingState();\r\n                    this.appendNewItems(newItems);\r\n\r\n                    // Restore scroll position\r\n                    if (scrollContainer && savedScrollTop > 0) {\r\n                        scrollContainer.scrollTop = savedScrollTop;\r\n\r\n                        requestAnimationFrame(() => {\r\n                            const newScrollHeight = scrollContainer.scrollHeight;\r\n                            const scrollHeightDiff = newScrollHeight - savedScrollHeight;\r\n\r\n                            if (Math.abs(scrollHeightDiff) > 10) {\r\n                                scrollContainer.scrollTop = savedScrollTop;\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    this.reconnectInfiniteScrollObserver();\r\n                    this.config.onLoadMore?.(nextPage, this.items);\r\n\r\n                } catch (error) {\r\n                    this.loadState = {\r\n                        ...this.loadState,\r\n                        loading: false,\r\n                        error: error instanceof Error ? error.message : this.config.errorText!\r\n                    };\r\n\r\n                    this.updateLoadingState();\r\n                    this.updateFooter();\r\n                    this.config.onError?.(error instanceof Error ? error : new Error('Unknown error'));\r\n                }\r\n            }\r\n\r\n            async reload() {\r\n                this.items = [];\r\n                this.loadState = {\r\n                    loading: false,\r\n                    error: null,\r\n                    hasMore: true,\r\n                    page: 0,\r\n                    total: 0\r\n                };\r\n                await this.loadMore();\r\n            }\r\n\r\n            async applyFilters(newFilters: Record<string, unknown>) {\r\n                if (this.isUpdating) return;\r\n\r\n                this.isUpdating = true;\r\n                this.filters = { ...newFilters };\r\n\r\n                this.items = [];\r\n                this.loadState = {\r\n                    loading: true,\r\n                    error: null,\r\n                    hasMore: true,\r\n                    page: 0,\r\n                    total: 0\r\n                };\r\n\r\n                this.updateLoadingState();\r\n\r\n                try {\r\n                    const url = this.buildUrl(1);\r\n                    const response = await fetch(url, {\r\n                        credentials: 'include',\r\n                        headers: this.buildHeaders()\r\n                    });\r\n\r\n                    if (!response.ok) {\r\n                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n                    }\r\n\r\n                    const data = await response.json();\r\n                    const newItems = this.config.extractItems!(data);\r\n                    const total = this.config.extractTotal!(data);\r\n\r\n                    this.items = [...newItems];\r\n                    this.loadState = {\r\n                        loading: false,\r\n                        error: null,\r\n                        hasMore: this.items.length < total,\r\n                        page: 1,\r\n                        total\r\n                    };\r\n\r\n                    // Clear container\r\n                    if (this.itemsListContainer) {\r\n                        this.itemsListContainer.innerHTML = '';\r\n                    }\r\n\r\n                    if (this.element) {\r\n                        this.element.querySelectorAll(`.${bb_.trigger}, .${bb_.end}, .${bb_.error}, .${bb_.loading}, .${bb_.emptyState}`).forEach(el => el.remove());\r\n                    }\r\n\r\n                    // Append items or show empty state\r\n                    if (this.items.length > 0) {\r\n                        if (!this.itemsListContainer) {\r\n                            this.itemsListContainer = this.element?.querySelector(`.${bb_.list}`) as HTMLElement;\r\n                        }\r\n\r\n                        if (this.itemsListContainer) {\r\n                            this.appendNewItems(this.items);\r\n                        }\r\n                    } else {\r\n                        this.updateFooter();\r\n                    }\r\n\r\n                    this.itemsListContainer = this.element?.querySelector(`.${bb_.list}`) as HTMLElement;\r\n                    this.reconnectInfiniteScrollObserver();\r\n\r\n                    this.config.onLoadMore?.(1, this.items);\r\n                    this.config.onFiltersChange?.(this.filters);\r\n\r\n                } catch (error) {\r\n                    this.loadState = {\r\n                        ...this.loadState,\r\n                        loading: false,\r\n                        error: error instanceof Error ? error.message : this.config.errorText!\r\n                    };\r\n\r\n                    this.updateLoadingState();\r\n                    this.config.onError?.(error instanceof Error ? error : new Error('Unknown error'));\r\n                } finally {\r\n                    this.isUpdating = false;\r\n                }\r\n            }\r\n\r\n            async handleSearch(searchQuery: string) {\r\n                if (this.searchDebounceTimer) {\r\n                    clearTimeout(this.searchDebounceTimer);\r\n                }\r\n\r\n                this.searchDebounceTimer = setTimeout(async () => {\r\n                    const newFilters = { ...this.filters };\r\n\r\n                    if (searchQuery.trim()) {\r\n                        newFilters[this.config.searchFilterKey!] = searchQuery.trim();\r\n                    } else {\r\n                        delete newFilters[this.config.searchFilterKey!];\r\n                    }\r\n\r\n                    await this.applyFilters(newFilters);\r\n                }, this.config.searchDebounceMs);\r\n            }\r\n\r\n            updateItems(updatedItems: T[]) {\r\n                this.items = [...updatedItems];\r\n\r\n                if (this.itemsListContainer) {\r\n                    this.itemsListContainer.innerHTML = '';\r\n                    this.appendNewItems(updatedItems);\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            private setupVisibilityTracking() {\r\n                if (!this.config.enableVisibilityTracking) return;\r\n\r\n                if (this.visibilityObserver) {\r\n                    this.visibilityObserver.disconnect();\r\n                }\r\n\r\n                const scrollContainer = this.findScrollContainer();\r\n\r\n                this.visibilityObserver = new IntersectionObserver(\r\n                    (entries) => {\r\n                        entries.forEach(entry => {\r\n                            if (entry.isIntersecting && this.dropdownIsOpen) {\r\n                                const element = entry.target as HTMLElement;\r\n                                const itemIndex = parseInt(element.getAttribute('data-item-index') || '-1');\r\n\r\n                                if (itemIndex >= 0 && itemIndex < this.items.length) {\r\n                                    const item = this.items[itemIndex];\r\n                                    const itemId = this.config.getItemId?.(item);\r\n                                    const shouldTrack = this.config.shouldTrackItem?.(item) ?? true;\r\n\r\n                                    if (itemId && !this.viewedItems.has(itemId) && shouldTrack) {\r\n                                        this.viewedItems.add(itemId);\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n                    },\r\n                    {\r\n                        root: scrollContainer,\r\n                        rootMargin: this.config.visibilityRootMargin,\r\n                        threshold: this.config.visibilityThreshold\r\n                    }\r\n                );\r\n\r\n                this.observeTrackableItems();\r\n            }\r\n\r\n            private observeTrackableItems() {\r\n                if (!this.visibilityObserver || !this.itemsListContainer) return;\r\n\r\n                const items = this.itemsListContainer.querySelectorAll('[data-item-index]');\r\n                items.forEach(element => {\r\n                    const itemIndex = parseInt((element as HTMLElement).getAttribute('data-item-index') || '-1');\r\n                    if (itemIndex >= 0 && itemIndex < this.items.length) {\r\n                        const item = this.items[itemIndex];\r\n                        const shouldTrack = this.config.shouldTrackItem?.(item) ?? true;\r\n\r\n                        if (shouldTrack) {\r\n                            this.visibilityObserver!.observe(element);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\r\n            private trackAlreadyVisibleItems() {\r\n                if (!this.itemsListContainer) return;\r\n\r\n                const scrollContainer = this.findScrollContainer();\r\n                if (!scrollContainer) return;\r\n\r\n                const items = this.itemsListContainer.querySelectorAll('[data-item-index]');\r\n                const containerRect = scrollContainer.getBoundingClientRect();\r\n\r\n                items.forEach(element => {\r\n                    const itemIndex = parseInt((element as HTMLElement).getAttribute('data-item-index') || '-1');\r\n                    if (itemIndex < 0 || itemIndex >= this.items.length) return;\r\n\r\n                    const item = this.items[itemIndex];\r\n                    const itemId = this.config.getItemId?.(item);\r\n                    if (!itemId || this.viewedItems.has(itemId)) return;\r\n\r\n                    const shouldTrack = this.config.shouldTrackItem?.(item) ?? true;\r\n                    if (!shouldTrack) return;\r\n\r\n                    const rect = (element as HTMLElement).getBoundingClientRect();\r\n                    const isVisible = (\r\n                        rect.top < containerRect.bottom &&\r\n                        rect.bottom > containerRect.top &&\r\n                        rect.top >= containerRect.top - 100 &&\r\n                        rect.bottom <= containerRect.bottom + 100\r\n                    );\r\n\r\n                    if (isVisible) {\r\n                        this.viewedItems.add(itemId);\r\n                    }\r\n                });\r\n            }\r\n\r\n            private disconnectVisibilityObserver() {\r\n                if (this.visibilityObserver) {\r\n                    this.visibilityObserver.disconnect();\r\n                    this.visibilityObserver = null;\r\n                }\r\n            }\r\n\r\n            public handleDropdownOpen() {\r\n                this.dropdownIsOpen = true;\r\n                this.viewedItems.clear();\r\n\r\n                if (this.config.enableVisibilityTracking) {\r\n                    this.trackAlreadyVisibleItems();\r\n                    this.observeTrackableItems();\r\n                }\r\n\r\n                this.config.onDropdownOpen?.();\r\n            }\r\n\r\n            public async handleDropdownClose() {\r\n                this.dropdownIsOpen = false;\r\n\r\n                if (this.viewedItems.size > 0 && this.config.onItemsViewed) {\r\n                    const viewedItemsArray = this.items.filter(item => {\r\n                        const itemId = this.config.getItemId?.(item);\r\n                        return itemId && this.viewedItems.has(itemId);\r\n                    });\r\n\r\n                    await this.config.onItemsViewed(viewedItemsArray);\r\n                }\r\n\r\n                this.viewedItems.clear();\r\n                this.config.onDropdownClose?.();\r\n            }\r\n\r\n            public async performBatchAction(action: string, itemIds: (number | string)[]) {\r\n                if (this.config.onBatchAction) {\r\n                    await this.config.onBatchAction(action, itemIds);\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            private appendNewItems(newItems: T[]) {\r\n                if (!this.itemsListContainer) {\r\n                    this.itemsListContainer = this.element?.querySelector(`.${bb_.list}`) as HTMLElement;\r\n                }\r\n\r\n                if (!this.itemsListContainer) return;\r\n\r\n                const fragment = document.createDocumentFragment();\r\n                const startIndex = this.items.length - newItems.length;\r\n\r\n                newItems.forEach((item, index) => {\r\n                    const actualIndex = startIndex + index;\r\n                    const itemElement = this.config.renderItem(item, actualIndex);\r\n\r\n                    itemElement.setAttribute('data-item-index', actualIndex.toString());\r\n\r\n                    if (this.config.onItemClick) {\r\n                        itemElement.className = `${itemElement.className} ${this.config.itemClassName} clickable`;\r\n                        itemElement.onclick = () => this.handleItemClick(item, actualIndex);\r\n                    } else {\r\n                        itemElement.className = `${itemElement.className} ${this.config.itemClassName}`;\r\n                    }\r\n\r\n                    fragment.appendChild(itemElement);\r\n                });\r\n\r\n                this.itemsListContainer.appendChild(fragment);\r\n                this.updateFooter();\r\n\r\n                if (this.config.enableVisibilityTracking && this.dropdownIsOpen) {\r\n                    setTimeout(() => this.observeTrackableItems(), 100);\r\n                }\r\n            }\r\n\r\n            private updateLoadingState() {\r\n                const container = this.element?.querySelector(`.${bb_.container}`);\r\n                if (!container) return;\r\n\r\n                let loadingEl = container.querySelector(`.${bb_.loading}`) as HTMLElement;\r\n\r\n                if (this.loadState.loading) {\r\n                    if (!loadingEl) {\r\n                        const loadingVNode = this.renderLoading();\r\n                        loadingEl = this.createElementFromVNode(loadingVNode);\r\n                        container.appendChild(loadingEl);\r\n                    }\r\n                } else {\r\n                    if (loadingEl) {\r\n                        loadingEl.remove();\r\n                    }\r\n                }\r\n            }\r\n\r\n            public updateFooter() {\r\n                const container = this.element;\r\n                if (!container) return;\r\n\r\n                container.querySelectorAll(`.${bb_.trigger}, .${bb_.end}, .${bb_.emptyState}`).forEach(el => {\r\n                    el.remove();\r\n                });\r\n\r\n                if (this.items.length === 0 && !this.loadState.loading && this.config.emptyStateConfig) {\r\n                    const emptyVNode = this.renderEmptyState();\r\n                    const emptyElement = createDOMElement(emptyVNode);\r\n                    container.appendChild(emptyElement);\r\n                    return;\r\n                }\r\n\r\n                if (this.loadState.hasMore && !this.loadState.loading && this.items.length > 0) {\r\n                    const triggerVNode = this.renderLoadMoreTrigger();\r\n                    const triggerElement = createDOMElement(triggerVNode);\r\n                    container.appendChild(triggerElement);\r\n                }\r\n\r\n                if (!this.loadState.hasMore && this.items.length > 0) {\r\n                    const endMsgVNode = this.renderEndMessage();\r\n                    const endMsgElement = createDOMElement(endMsgVNode);\r\n                    container.appendChild(endMsgElement);\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            private setupInfiniteScroll() {\r\n                if (this.loadMoreObserver) {\r\n                    this.loadMoreObserver.disconnect();\r\n                }\r\n\r\n                this.loadMoreObserver = new IntersectionObserver(\r\n                    (entries) => {\r\n                        const [entry] = entries;\r\n\r\n                        if (entry.isIntersecting && !this.loadState.loading && this.loadState.hasMore) {\r\n                            this.loadMore();\r\n                        }\r\n                    },\r\n                    {\r\n                        threshold: 0.1,\r\n                        rootMargin: '50px'\r\n                    }\r\n                );\r\n\r\n                this.reconnectInfiniteScrollObserver();\r\n            }\r\n\r\n            private reconnectInfiniteScrollObserver() {\r\n                if (!this.config.enableInfiniteScroll || !this.loadMoreObserver) return;\r\n\r\n                if (this.currentLoadMoreTrigger) {\r\n                    this.loadMoreObserver.unobserve(this.currentLoadMoreTrigger);\r\n                    this.currentLoadMoreTrigger = null;\r\n                }\r\n\r\n                const tryObserve = () => {\r\n                    const trigger = this.element?.querySelector('[data-load-more-trigger=\"true\"]');\r\n\r\n                    if (trigger) {\r\n                        this.loadMoreObserver!.observe(trigger);\r\n                        this.currentLoadMoreTrigger = trigger;\r\n                        return true;\r\n                    }\r\n\r\n                    return false;\r\n                };\r\n\r\n                if (!tryObserve()) {\r\n                    // Use MutationObserver to wait for trigger\r\n                    if (this.loadMoreMutationObserver) {\r\n                        this.loadMoreMutationObserver.disconnect();\r\n                    }\r\n\r\n                    this.loadMoreMutationObserver = new MutationObserver(() => {\r\n                        if (tryObserve() && this.loadMoreMutationObserver) {\r\n                            this.loadMoreMutationObserver.disconnect();\r\n                            this.loadMoreMutationObserver = null;\r\n                        }\r\n                    });\r\n\r\n                    if (this.element) {\r\n                        this.loadMoreMutationObserver.observe(this.element, {\r\n                            childList: true,\r\n                            subtree: true\r\n                        });\r\n\r\n                        setTimeout(() => {\r\n                            if (this.loadMoreMutationObserver) {\r\n                                this.loadMoreMutationObserver.disconnect();\r\n                                this.loadMoreMutationObserver = null;\r\n                            }\r\n                        }, 5000);\r\n                    }\r\n                }\r\n            }\r\n\r\n            private disconnectInfiniteScrollObserver() {\r\n                if (this.loadMoreObserver && this.currentLoadMoreTrigger) {\r\n                    this.loadMoreObserver.unobserve(this.currentLoadMoreTrigger);\r\n                    this.currentLoadMoreTrigger = null;\r\n                }\r\n            }\r\n\r\n            private setupScrollListener() {\r\n                requestAnimationFrame(() => {\r\n                    this.scrollContainer = this.findScrollContainer();\r\n\r\n                    if (this.scrollContainer) {\r\n                        if ('scrollRestoration' in history) {\r\n                            history.scrollRestoration = 'manual';\r\n                        }\r\n\r\n                        this.scrollContainer.addEventListener('scroll', this.handleScroll);\r\n                    }\r\n                });\r\n            }\r\n\r\n            private handleScroll = () => {\r\n                if (!this.scrollContainer || this.loadState.loading || !this.loadState.hasMore) {\r\n                    return;\r\n                }\r\n\r\n                const { scrollTop, scrollHeight, clientHeight } = this.scrollContainer;\r\n                const distanceFromBottom = scrollHeight - scrollTop - clientHeight;\r\n\r\n                if (distanceFromBottom < this.config.scrollThreshold!) {\r\n                    this.loadMore();\r\n                }\r\n            };\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            private findScrollContainer(): HTMLElement | null {\r\n                const candidates = [\r\n                    this.element?.closest('.bb_notificationsContent'),\r\n                    this.element?.closest('.bb_dropdownMenu'),\r\n                    this.element?.querySelector('[data-notifications-loader]'),\r\n                    this.element?.closest('[data-notifications-loader]'),\r\n                    this.element?.closest('.scrollbar-thin'),\r\n                    this.element?.parentElement,\r\n                    this.element\r\n                ];\r\n\r\n                for (const candidate of candidates) {\r\n                    if (candidate) {\r\n                        const el = candidate as HTMLElement;\r\n                        if (el.scrollHeight > el.clientHeight || el.classList.contains('scrollbar-thin')) {\r\n                            return el;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return null;\r\n            }\r\n\r\n            private buildUrl(page: number): string {\r\n                if (typeof this.config.fetchUrl === 'function') {\r\n                    return this.config.fetchUrl(page, this.filters);\r\n                }\r\n\r\n                const separator = this.config.fetchUrl.includes('?') ? '&' : '?';\r\n                const params = new URLSearchParams({\r\n                    page: page.toString(),\r\n                    limit: this.config.pageSize!.toString(),\r\n                    ...this.filters as Record<string, string>\r\n                });\r\n\r\n                return `${this.config.fetchUrl}${separator}${params}`;\r\n            }\r\n\r\n            private buildHeaders(): HeadersInit {\r\n                const headers: HeadersInit = {\r\n                    'Content-Type': 'application/json'\r\n                };\r\n\r\n                const token = this.config.getAuthToken?.();\r\n                if (token) {\r\n                    headers['Authorization'] = `Bearer ${token}`;\r\n                }\r\n\r\n                return headers;\r\n            }\r\n\r\n            private handleItemClick = (item: T, index: number) => {\r\n                this.config.onItemClick?.(item, index);\r\n            };\r\n\r\n            private createElementFromVNode(vnode: VNode): HTMLElement {\r\n                if (typeof vnode.type !== 'string') {\r\n                    throw new Error('Can only create elements from string types');\r\n                }\r\n\r\n                const element = document.createElement(vnode.type);\r\n\r\n                if (vnode.props) {\r\n                    Object.entries(vnode.props).forEach(([key, value]) => {\r\n                        if (key === 'className') {\r\n                            element.className = value as string;\r\n                        } else if (key === 'style') {\r\n                            if (typeof value === 'string') {\r\n                                element.setAttribute('style', value);\r\n                            } else if (typeof value === 'object' && value !== null) {\r\n                                Object.assign(element.style, value);\r\n                            }\r\n                        } else if (key === 'onclick' && typeof value === 'function') {\r\n                            element.addEventListener('click', value as EventListener);\r\n                        } else if (key !== 'children' && key !== 'ref') {\r\n                            element.setAttribute(key, String(value));\r\n                        }\r\n                    });\r\n                }\r\n\r\n                if (vnode.children) {\r\n                    vnode.children.forEach((child: VNodeChild) => {\r\n                        if (child === null || child === undefined) return;\r\n                        if (typeof child === 'string' || typeof child === 'number') {\r\n                            element.appendChild(document.createTextNode(String(child)));\r\n                        } else if (typeof child === 'object') {\r\n                            element.appendChild(this.createElementFromVNode(child));\r\n                        }\r\n                    });\r\n                }\r\n\r\n                return element;\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //   \r\n\r\n            render(): VNode {\r\n                return div(\r\n                    {\r\n                        class: this.config.containerClassName\r\n                    },\r\n                    this.config.enableSearch ? this.renderSearchBar() : null,\r\n                    div({\r\n                        class: bb_.list,\r\n                        ref: (el: HTMLElement | null) => {\r\n                            if (el) {\r\n                                this.itemsListContainer = el;\r\n                            }\r\n                        }\r\n                    }),\r\n\r\n                    this.loadState.error ? this.renderError() : null,\r\n                    this.loadState.loading ? this.renderLoading() : null,\r\n                    this.loadState.hasMore && !this.loadState.loading && this.items.length > 0 ? this.renderLoadMoreTrigger() : null,\r\n                    !this.loadState.hasMore && this.items.length > 0 ? this.renderEndMessage() : null\r\n                ) as VNode;\r\n            }\r\n\r\n\r\n            private renderSearchBar(): VNode {\r\n                return div(\r\n                    bb_.searchbar,\r\n                    div(\r\n                        'row gap-sm',\r\n                        i(ClassMaker.fa('search')),\r\n                        input({\r\n                            type: 'text',\r\n                            class: bb_.formFieldInput,\r\n                            placeholder: this.config.searchPlaceholder,\r\n                            ref: (el: HTMLElement | null) => {\r\n                                if (el) {\r\n                                    this.searchInput = el as HTMLInputElement;\r\n                                    this.searchInput.addEventListener('input', (e) => {\r\n                                        const query = (e.target as HTMLInputElement).value;\r\n                                        this.handleSearch(query);\r\n                                    });\r\n                                }\r\n                            }\r\n                        })\r\n                    )\r\n                ) as VNode;\r\n            }\r\n\r\n            public renderEmptyState(): VNode {\r\n                const config = this.config.emptyStateConfig!;\r\n                return div(\r\n                    bb_.emptyState,\r\n                    i(`__icon ${config.icon}`),\r\n                    span('__title', config.title),\r\n                    p('__desc', config.description)\r\n                ) as VNode;\r\n            }\r\n\r\n            private renderLoading(): VNode {\r\n                return div(\r\n                    bb_.loading,\r\n                    i(ClassMaker.fa('spinner') + ' fa-spin'),\r\n                    p({}, this.config.loadingText)\r\n                ) as VNode;\r\n            }\r\n\r\n            private renderError(): VNode {\r\n                return div(\r\n                    bb_.error,\r\n                    i(ClassMaker.fa('exclamation-triangle')),\r\n                    p({}, this.loadState.error),\r\n                    button(\r\n                        {\r\n                            class: `${bb_.button} secondary`,\r\n                            onclick: () => this.loadMore()\r\n                        },\r\n                        i(ClassMaker.fa('redo')),\r\n                        ' Retry'\r\n                    )\r\n                ) as VNode;\r\n            }\r\n\r\n            private renderLoadMoreTrigger(): VNode {\r\n                return div({\r\n                    class: bb_.trigger,\r\n                    'data-load-more-trigger': 'true',\r\n                    style: 'height: 1px; visibility: hidden;'\r\n                }) as VNode;\r\n            }\r\n\r\n            private renderEndMessage(): VNode {\r\n                return div(\r\n                    { class: bb_.end },\r\n                    i(ClassMaker.fa('check-circle')),\r\n                    t(`All loaded`, { count: String(this.loadState.total) })\r\n                ) as VNode;\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n    export function createItemsLoader<T>(config: ItemsLoaderConfig<T>): ItemsLoader<T> {\r\n        const loader = new ItemsLoader<T>();\r\n        loader.initialize(config);\r\n        return loader;\r\n    }\r\n\r\n// ","// src/mod/components/dropdown.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { button, div, span, i, type VNode, type VNodeChild } from \"@je-es/vdom\";\r\n    import { Component } from \"../core/component\";\r\n    import styleMap from \"./bb_map.json\";\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    export interface DropdownItemConfig {\r\n        id?                 : string;\r\n        icon?               : string;\r\n        label               : string;\r\n        onclick?            : (e: Event) => void;\r\n        className?          : string;\r\n        disabled?           : boolean;\r\n        selected?           : boolean;\r\n    }\r\n\r\n    export interface DropdownConfig {\r\n        id                  : string;\r\n        trigger             : {\r\n            text?           : string;\r\n            icon?           : string;\r\n            element?        : () => VNode | HTMLElement;\r\n            className?      : string;\r\n        };\r\n\r\n        items               : (DropdownItemConfig | 'divider')[];\r\n        position?           : 'left' | 'right';\r\n        parentId?           : string;  // For nested dropdowns - ID of parent dropdown\r\n        closeOnItemClick?   : boolean; // Default: true\r\n        preventAutoClose?   : boolean; // Prevent closing when clicking inside menu (for interactive content)\r\n        hideArrow?          : boolean; // Hide the dropdown arrow\r\n        asIcon?             : boolean; // Apply bb_dropdown--asIcon class\r\n        className?          : string;  // Custom classes for dropdown container\r\n        defaultSelected?    : string;  // ID of item to be selected by default\r\n\r\n        onOpen?             : () => void;\r\n        onClose?            : () => void;\r\n        onSelect?           : (item: DropdownItemConfig) => void;  // Called when an item is selected\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  HELP \r\n\r\n    /**\r\n     * Global dropdown manager - handles hierarchical dropdown system\r\n     * - Only one root dropdown open at a time\r\n     * - Child dropdowns can be open while parent is open\r\n     * - Clicking outside closes all dropdowns\r\n     * - Clicking inside a dropdown with preventAutoClose keeps it open\r\n     */\r\n    class DropdownManagerSingleton {\r\n\r\n        //  INIT \r\n\r\n            private static instance : DropdownManagerSingleton;\r\n            private dropdowns       = new Map<string, Dropdown>();  // id -> dropdown instance\r\n            private hierarchy       = new Map<string, string>();    // childId -> parentId\r\n            private clickHandler?   : EventListener;\r\n\r\n            private constructor() {\r\n                this.setupGlobalClickHandler();\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            static getInstance(): DropdownManagerSingleton {\r\n                if (!DropdownManagerSingleton.instance) {\r\n                    DropdownManagerSingleton.instance = new DropdownManagerSingleton();\r\n                }\r\n                return DropdownManagerSingleton.instance;\r\n            }\r\n\r\n            /**\r\n             * Register dropdown\r\n             */\r\n            public register(dropdown: Dropdown): void {\r\n                this.dropdowns.set(dropdown.config.id, dropdown);\r\n\r\n                // Register hierarchy if has parent\r\n                if (dropdown.config.parentId) {\r\n                    this.hierarchy.set(dropdown.config.id, dropdown.config.parentId);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Unregister dropdown\r\n             */\r\n            public unregister(id: string): void {\r\n                this.dropdowns.delete(id);\r\n                this.hierarchy.delete(id);\r\n            }\r\n\r\n            /**\r\n             * Open dropdown and close siblings (but not ancestors or descendants)\r\n             */\r\n            public open(id: string): void {\r\n                const dropdown = this.dropdowns.get(id);\r\n                if (!dropdown) return;\r\n\r\n                // console.log(` Opening dropdown: ${id}`);\r\n\r\n                // Close siblings (dropdowns at same level, excluding this one)\r\n                this.closeSiblings(id);\r\n\r\n                // Actually open the dropdown\r\n                dropdown.setOpen(true);\r\n            }\r\n\r\n            /**\r\n             * Close dropdown and all its children\r\n             */\r\n            public close(id: string): void {\r\n                const dropdown = this.dropdowns.get(id);\r\n                if (!dropdown) return;\r\n\r\n                // console.log(` Closing dropdown: ${id}`);\r\n\r\n                // Close this dropdown\r\n                dropdown.setOpen(false);\r\n\r\n                // Close all children\r\n                this.closeChildren(id);\r\n            }\r\n\r\n            /**\r\n             * Close all dropdowns\r\n             */\r\n            public closeAll(): void {\r\n                // console.log(' Closing all dropdowns');\r\n                // Close all root dropdowns (those without parents)\r\n                const rootDropdowns = Array.from(this.dropdowns.values())\r\n                    .filter(d => !d.config.parentId);\r\n\r\n                rootDropdowns.forEach(d => this.close(d.config.id));\r\n            }\r\n\r\n            public destroy(): void {\r\n                if (this.clickHandler && typeof window !== 'undefined') {\r\n                    document.removeEventListener('click', this.clickHandler, true);\r\n                }\r\n                this.dropdowns.clear();\r\n                this.hierarchy.clear();\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  HELP \r\n\r\n            /**\r\n             * Check if dropdown is ancestor of another\r\n             */\r\n            private isAncestor(ancestorId: string, descendantId: string): boolean {\r\n                let currentId: string | undefined = descendantId;\r\n\r\n                while (currentId) {\r\n                    if (currentId === ancestorId) return true;\r\n                    currentId = this.hierarchy.get(currentId);\r\n                }\r\n\r\n                return false;\r\n            }\r\n\r\n            /**\r\n             * Check if dropdown is descendant of another\r\n             */\r\n            private isDescendant(descendantId: string, ancestorId: string): boolean {\r\n                return this.isAncestor(ancestorId, descendantId);\r\n            }\r\n\r\n            /**\r\n             * Get all ancestor IDs of a dropdown (parent, grandparent, etc.)\r\n             */\r\n            private getAncestors(id: string): Set<string> {\r\n                const ancestors = new Set<string>();\r\n                let currentId: string | undefined = id;\r\n\r\n                while (currentId) {\r\n                    const parentId = this.hierarchy.get(currentId);\r\n                    if (parentId) {\r\n                        ancestors.add(parentId);\r\n                        currentId = parentId;\r\n                    } else {\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                return ancestors;\r\n            }\r\n\r\n            /**\r\n             *  NEW: Get all descendant IDs of a dropdown (children, grandchildren, etc.)\r\n             */\r\n            private getDescendants(id: string): Set<string> {\r\n                const descendants = new Set<string>();\r\n\r\n                const addChildren = (parentId: string) => {\r\n                    // Find all direct children\r\n                    const children = Array.from(this.hierarchy.entries())\r\n                        .filter(([_, parent]) => parent === parentId)\r\n                        .map(([childId, _]) => childId);\r\n\r\n                    // Add each child and recursively add their children\r\n                    children.forEach(childId => {\r\n                        descendants.add(childId);\r\n                        addChildren(childId); // Recursive call for grandchildren\r\n                    });\r\n                };\r\n\r\n                addChildren(id);\r\n                return descendants;\r\n            }\r\n\r\n            /**\r\n             * Close siblings (dropdowns at same hierarchy level)\r\n             */\r\n            private closeSiblings(id: string): void {\r\n                const dropdown = this.dropdowns.get(id);\r\n                if (!dropdown) return;\r\n\r\n                const parentId = dropdown.config.parentId;\r\n\r\n                // Get all dropdowns with same parent (siblings)\r\n                const siblings = Array.from(this.dropdowns.values())\r\n                    .filter(d => d.config.parentId === parentId && d.config.id !== id);\r\n\r\n            // console.log(` Closing ${siblings.length} siblings of ${id}`);\r\n                siblings.forEach(sibling => this.close(sibling.config.id));\r\n            }\r\n\r\n            /**\r\n             * Close all children of a dropdown\r\n             */\r\n            private closeChildren(parentId: string): void {\r\n                const children = Array.from(this.dropdowns.values())\r\n                    .filter(d => d.config.parentId === parentId);\r\n\r\n            // console.log(` Closing ${children.length} children of ${parentId}`);\r\n                children.forEach(child => this.close(child.config.id));\r\n            }\r\n\r\n            /**\r\n             * Check if there are any open dropdowns\r\n             */\r\n            private hasOpenDropdowns(): boolean {\r\n                return Array.from(this.dropdowns.values()).some(d => d.isOpen);\r\n            }\r\n\r\n            /**\r\n             * Find which dropdown an element belongs to (including nested)\r\n             */\r\n            private findDropdownForElement(element: HTMLElement): string | null {\r\n                // Walk up the DOM tree looking for dropdown containers\r\n                let current: HTMLElement | null = element;\r\n\r\n                while (current && current !== document.body) {\r\n                    const dropdownId = current.getAttribute('data-dropdown-id');\r\n                    if (dropdownId) {\r\n                        return dropdownId;\r\n                    }\r\n                    current = current.parentElement;\r\n                }\r\n\r\n                return null;\r\n            }\r\n\r\n            /**\r\n             * Setup global click handler\r\n             */\r\n            private setupGlobalClickHandler(): void {\r\n                if (typeof window === 'undefined') return;\r\n\r\n                this.clickHandler = (e: Event) => {\r\n                    const target = e.target as HTMLElement;\r\n\r\n                // console.log(' Global click detected');\r\n\r\n                    // No dropdowns open? Nothing to do\r\n                    if (!this.hasOpenDropdowns()) {\r\n                    // console.log('   No open dropdowns, ignoring');\r\n                        return;\r\n                    }\r\n\r\n                    // Find which dropdown (if any) was clicked\r\n                    const clickedDropdownId = this.findDropdownForElement(target);\r\n\r\n                    if (!clickedDropdownId) {\r\n                        // Clicked completely outside all dropdowns - close all\r\n                    // console.log('   Clicked outside all dropdowns, closing all');\r\n                        this.closeAll();\r\n                        return;\r\n                    }\r\n\r\n                // console.log(`   Clicked inside dropdown: ${clickedDropdownId}`);\r\n\r\n                    // Check if clicked dropdown has preventAutoClose\r\n                    const clickedDropdown = this.dropdowns.get(clickedDropdownId);\r\n                    if (clickedDropdown?.config.preventAutoClose) {\r\n                    // console.log('   Dropdown has preventAutoClose, keeping open');\r\n                        return;\r\n                    }\r\n\r\n                    // Check if clicked on a trigger button (to let toggle handle it)\r\n                    const clickedOnTrigger = target.closest('.bb_dropdownTrigger');\r\n                    if (clickedOnTrigger) {\r\n                    // console.log('   Clicked on trigger, letting toggle handle it');\r\n                        return;\r\n                    }\r\n\r\n                    // Clicked inside a dropdown menu but not on trigger\r\n                    const clickedOnMenu = target.closest('.bb_dropdownMenu');\r\n                    if (clickedOnMenu) {\r\n                        // Get ancestors of clicked dropdown\r\n                        const ancestors = this.getAncestors(clickedDropdownId);\r\n\r\n                        //  FIX: Get all descendants too\r\n                        const descendants = this.getDescendants(clickedDropdownId);\r\n\r\n                        // Close all dropdowns that are NOT:\r\n                        // 1. The clicked dropdown itself\r\n                        // 2. Ancestors of the clicked dropdown (parents)\r\n                        // 3. Descendants of the clicked dropdown (children)  NEW\r\n                        const rootDropdowns = Array.from(this.dropdowns.values())\r\n                            .filter(d => !d.config.parentId);\r\n\r\n                        rootDropdowns.forEach(rootDropdown => {\r\n                            const rootId = rootDropdown.config.id;\r\n\r\n                        // Keep open if:\r\n                        // - This is the clicked dropdown\r\n                        // - This is an ancestor of the clicked dropdown\r\n                        // - The clicked dropdown is an ancestor of this one (descendant)\r\n                        const shouldKeepOpen =\r\n                            rootId === clickedDropdownId ||\r\n                            ancestors.has(rootId) ||\r\n                            descendants.has(rootId) || //  NEW: Keep descendants open\r\n                            this.isDescendant(clickedDropdownId, rootId);\r\n\r\n                            if (!shouldKeepOpen) {\r\n                            // console.log(`   Closing unrelated dropdown: ${rootId}`);\r\n                                this.close(rootId);\r\n                            } else {\r\n                            // console.log(`   Keeping related dropdown open: ${rootId}`);\r\n                            }\r\n                        });\r\n                    }\r\n                };\r\n\r\n                document.addEventListener('click', this.clickHandler, true);\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n    const dropdownManager = DropdownManagerSingleton.getInstance();\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class Dropdown extends Component {\r\n\r\n        //  INIT \r\n\r\n            public config       : DropdownConfig;\r\n            public isOpen       = false;\r\n            private mounted     = false;\r\n            private bb_         = styleMap.dropdown;\r\n\r\n            constructor(config: DropdownConfig) {\r\n                super();\r\n                this.config = {\r\n                    closeOnItemClick: true,\r\n                    preventAutoClose: false,\r\n                    ...config\r\n                };\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            onMount() {\r\n                this.mounted = true;\r\n                dropdownManager.register(this);\r\n                // console.log(` Dropdown mounted: ${this.config.id}`);\r\n            }\r\n\r\n            onUnmount() {\r\n                this.mounted = false;\r\n                dropdownManager.unregister(this.config.id);\r\n                // console.log(` Dropdown unmounted: ${this.config.id}`);\r\n            }\r\n\r\n            /**\r\n             * Public method to set open state (called by manager)\r\n             */\r\n            public setOpen(open: boolean) {\r\n                // console.log(` Dropdown ${this.config.id} setOpen(${open}), current: ${this.isOpen}`);\r\n\r\n                if (this.isOpen === open) return;\r\n\r\n                this.isOpen = open;\r\n\r\n                if (open) {\r\n                    this.config.onOpen?.();\r\n                } else {\r\n                    this.config.onClose?.();\r\n                }\r\n\r\n                // Manually update DOM instead of triggering Component.update()\r\n                this.updateDOM();\r\n            }\r\n\r\n\r\n            /**\r\n             * Toggle dropdown\r\n             */\r\n            toggle(e: Event) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n\r\n                // console.log(` Dropdown ${this.config.id} toggle clicked, current state: ${this.isOpen}`);\r\n\r\n                if (this.isOpen) {\r\n                    dropdownManager.close(this.config.id);\r\n                } else {\r\n                    dropdownManager.open(this.config.id);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Handle item click\r\n             */\r\n            handleItemClick(item: DropdownItemConfig, e: Event) {\r\n                if (item.disabled) {\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    return;\r\n                }\r\n\r\n                // console.log(` Item clicked in dropdown ${this.config.id}:`, item.label);\r\n\r\n                // Don't prevent propagation - let it bubble up\r\n                // But stop it if we're going to close\r\n                if (this.config.closeOnItemClick) {\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    dropdownManager.close(this.config.id);\r\n                }\r\n\r\n                // Call item's onclick handler\r\n                item.onclick?.(e);\r\n\r\n                // Call onSelect hook\r\n                this.config.onSelect?.(item);\r\n            }\r\n\r\n\r\n            render(): VNode {\r\n                // console.log(` Dropdown ${this.config.id} render(), isOpen: ${this.isOpen}`);\r\n\r\n                const trigger = this.renderTrigger();\r\n                const menu = this.isOpen ? this.renderMenu() : null;\r\n\r\n                const containerClasses = [\r\n                    'bb_dropdown',\r\n                    `bb_dropdown--${this.config.position || 'left'}`,\r\n                    this.isOpen ? 'bb_dropdown--open' : '',\r\n                    this.config.asIcon ? 'bb_dropdown--asIcon' : '',\r\n                    this.config.className || ''\r\n                ].filter(Boolean).join(' ');\r\n\r\n                return div(\r\n                    {\r\n                        class: containerClasses,\r\n                        'data-dropdown-id': this.config.id\r\n                    },\r\n                    trigger,\r\n                    menu\r\n                ) as VNode;\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  HELP \r\n\r\n            /**\r\n             * Manually update the dropdown's DOM without triggering parent re-renders\r\n             */\r\n            private updateDOM() {\r\n                if (!this.mounted || !this.element) return;\r\n\r\n                // Update the container class\r\n                if (this.isOpen) {\r\n                    this.element.classList.add('bb_dropdown--open');\r\n                } else {\r\n                    this.element.classList.remove('bb_dropdown--open');\r\n                }\r\n\r\n                // Find the menu container (next sibling of trigger)\r\n                const trigger = this.element.querySelector('.bb_dropdownTrigger');\r\n                const menuContainer = trigger?.nextElementSibling;\r\n\r\n                if (this.isOpen) {\r\n                    // Create and append menu if it doesn't exist\r\n                    if (!menuContainer || !menuContainer.classList.contains('bb_dropdownMenu')) {\r\n                        const menuVNode = this.renderMenu();\r\n                        const menuElement = this.createElementFromVNode(menuVNode);\r\n                        this.element.appendChild(menuElement);\r\n                    }\r\n                } else {\r\n                    // Remove menu if it exists\r\n                    if (menuContainer && menuContainer.classList.contains('bb_dropdownMenu')) {\r\n                        menuContainer.remove();\r\n                    }\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Create DOM element from VNode (simplified version)\r\n             */\r\n            private createElementFromVNode(vnode: VNode): HTMLElement {\r\n                if (typeof vnode.type === 'string') {\r\n                    const element = document.createElement(vnode.type);\r\n\r\n                    // Set properties\r\n                    if (vnode.props) {\r\n                        Object.entries(vnode.props).forEach(([key, value]) => {\r\n                            if (key === 'className') {\r\n                                element.className = value as string;\r\n                            } else if (key === 'onclick' && typeof value === 'function') {\r\n                                element.addEventListener('click', value as EventListener);\r\n                            } else if (key !== 'children' && key !== 'key') {\r\n                                element.setAttribute(key, String(value));\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    // Add children\r\n                    if (vnode.children) {\r\n                        vnode.children.forEach((child: VNodeChild) => {\r\n                            if (child === null || child === undefined) return;\r\n                            if (typeof child === 'string' || typeof child === 'number') {\r\n                                element.appendChild(document.createTextNode(String(child)));\r\n                            } else if (typeof child === 'object') {\r\n                                element.appendChild(this.createElementFromVNode(child));\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    return element;\r\n                }\r\n\r\n                return document.createElement('div');\r\n            }\r\n\r\n\r\n            private renderTrigger(): VNode {\r\n                const customElement = this.config.trigger.element?.() as VNodeChild;\r\n\r\n                const triggerClassName = [\r\n                    'bb_dropdownTrigger',\r\n                    this.config.trigger.className || ''\r\n                ].filter(Boolean).join(' ');\r\n\r\n                if (customElement) {\r\n                    return button(\r\n                        {\r\n                            class: triggerClassName,\r\n                            onclick: (e: Event) => this.toggle(e)\r\n                        },\r\n                        customElement\r\n                    ) as VNode;\r\n                }\r\n\r\n                const arrowClasses = [\r\n                    'bb_dropdownArrow',\r\n                    'fas',\r\n                    'fa-chevron-down',\r\n                    this.isOpen ? 'bb_dropdownArrow--open' : '',\r\n                    this.config.hideArrow ? 'hidden' : ''\r\n                ].filter(Boolean).join(' ');\r\n\r\n                return button(\r\n                    {\r\n                        class: triggerClassName,\r\n                        onclick: (e: Event) => this.toggle(e)\r\n                    },\r\n                    this.config.trigger.icon ? i(this.config.trigger.icon) : null,\r\n                    this.config.trigger.text ? span({}, this.config.trigger.text) : null,\r\n                    i(arrowClasses)\r\n                ) as VNode;\r\n            }\r\n\r\n            private renderMenu(): VNode {\r\n                return div(\r\n                    {\r\n                        class: 'bb_dropdownMenu',\r\n                        onclick: (e: Event) => {\r\n                            // Only stop propagation if preventAutoClose is true\r\n                            if (this.config.preventAutoClose) {\r\n                                e.stopPropagation();\r\n                            }\r\n                        }\r\n                    },\r\n                    ...this.config.items.map((item, index) => {\r\n                        if (item === 'divider') {\r\n                            return div({ class: 'bb_dropdown__divider', key: `divider-${index}` }) as VNode;\r\n                        }\r\n\r\n                        const isSelected = item.selected || (this.config.defaultSelected && item.id === this.config.defaultSelected);\r\n\r\n                        const itemClassName = [\r\n                            'bb_dropdownItem',\r\n                            item.className || '',\r\n                            item.disabled ? 'bb_dropdownItem--disabled' : '',\r\n                            isSelected ? 'bb_dropdownItem--selected' : ''\r\n                        ].filter(Boolean).join(' ');\r\n\r\n                        const buttonProps: {\r\n                            key: string;\r\n                            class: string;\r\n                            onclick: (e: Event) => void;\r\n                            disabled?: boolean;\r\n                        } = {\r\n                            key: item.id || `item-${index}`,\r\n                            class: itemClassName,\r\n                            onclick: (e: Event) => this.handleItemClick(item, e)\r\n                        };\r\n\r\n                        // Only add disabled attribute if actually true\r\n                        if (item.disabled) {\r\n                            buttonProps.disabled = true;\r\n                        }\r\n\r\n                        return button(\r\n                            buttonProps,\r\n                            item.icon ? i(item.icon) : null,\r\n                            span({}, item.label)\r\n                        ) as VNode;\r\n                    })\r\n                ) as VNode;\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n    /**\r\n     * Create a dropdown instance\r\n     */\r\n    export function createDropdown(config: DropdownConfig): Dropdown {\r\n        return new Dropdown(config);\r\n    }\r\n\r\n// ","// src/mod/help.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import type { ClassValue } from '../types';\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * Debounce function\r\n     * Delays function execution until after wait time\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    export function debounce<T extends (...args: never[]) => any>(\r\n        fn: T,\r\n        delay: number\r\n    ): (...args: Parameters<T>) => void {\r\n        let timeoutId: ReturnType<typeof setTimeout> | null = null;\r\n\r\n        return (...args: Parameters<T>): void => {\r\n            if (timeoutId !== null) {\r\n                clearTimeout(timeoutId);\r\n            }\r\n\r\n            timeoutId = setTimeout(() => {\r\n                timeoutId = null;\r\n                fn(...args);\r\n            }, delay);\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Throttle function\r\n     * Limits function execution to once per time period\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    export function throttle<T extends (...args: never[]) => any>(\r\n        fn: T,\r\n        delay: number\r\n    ): (...args: Parameters<T>) => void {\r\n        let lastCall = 0;\r\n        let timeoutId: ReturnType<typeof setTimeout> | null = null;\r\n\r\n        return (...args: Parameters<T>): void => {\r\n            const now = Date.now();\r\n            const timeSinceLastCall = now - lastCall;\r\n\r\n            if (timeSinceLastCall >= delay) {\r\n                lastCall = now;\r\n                fn(...args);\r\n            } else if (!timeoutId) {\r\n                // Schedule execution at the end of the throttle period\r\n                timeoutId = setTimeout(() => {\r\n                    lastCall = Date.now();\r\n                    timeoutId = null;\r\n                    fn(...args);\r\n                }, delay - timeSinceLastCall);\r\n            }\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Class names utility\r\n     * Combines class names conditionally\r\n     */\r\n    export function classNames(...classes: ClassValue[]): string {\r\n        const result: string[] = [];\r\n\r\n        for (const cls of classes) {\r\n            if (!cls) continue;\r\n\r\n            if (typeof cls === 'string') {\r\n                result.push(cls);\r\n            } else if (typeof cls === 'object') {\r\n                for (const [key, value] of Object.entries(cls)) {\r\n                    if (value) {\r\n                        result.push(key);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return result.join(' ');\r\n    }\r\n\r\n    /**\r\n     * Format date\r\n     * Simple date formatting utility with validation\r\n     */\r\n    export function formatDate(date: Date | string | number, format: string = 'YYYY-MM-DD'): string {\r\n        const d = date instanceof Date ? date : new Date(date);\r\n\r\n        // Validate date\r\n        if (isNaN(d.getTime())) {\r\n            throw new Error('Invalid date provided to formatDate');\r\n        }\r\n\r\n        const year = d.getFullYear();\r\n        const month = String(d.getMonth() + 1).padStart(2, '0');\r\n        const day = String(d.getDate()).padStart(2, '0');\r\n        const hours = String(d.getHours()).padStart(2, '0');\r\n        const minutes = String(d.getMinutes()).padStart(2, '0');\r\n        const seconds = String(d.getSeconds()).padStart(2, '0');\r\n\r\n        return format\r\n            .replace('YYYY', String(year))\r\n            .replace('MM', month)\r\n            .replace('DD', day)\r\n            .replace('HH', hours)\r\n            .replace('mm', minutes)\r\n            .replace('ss', seconds);\r\n    }\r\n\r\n    /**\r\n     * Deep clone object\r\n     * Handles Date, Array, and nested objects\r\n     */\r\n    export function deepClone<T>(obj: T): T {\r\n        if (obj === null || typeof obj !== 'object') {\r\n            return obj;\r\n        }\r\n\r\n        if (obj instanceof Date) {\r\n            return new Date(obj.getTime()) as T;\r\n        }\r\n\r\n        if (Array.isArray(obj)) {\r\n            return obj.map(item => deepClone(item)) as T;\r\n        }\r\n\r\n        if (obj instanceof RegExp) {\r\n            return new RegExp(obj.source, obj.flags) as T;\r\n        }\r\n\r\n        if (obj instanceof Map) {\r\n            const clonedMap = new Map();\r\n            obj.forEach((value, key) => {\r\n                clonedMap.set(deepClone(key), deepClone(value));\r\n            });\r\n            return clonedMap as T;\r\n        }\r\n\r\n        if (obj instanceof Set) {\r\n            const clonedSet = new Set();\r\n            obj.forEach(value => {\r\n                clonedSet.add(deepClone(value));\r\n            });\r\n            return clonedSet as T;\r\n        }\r\n\r\n        if (Object.prototype.toString.call(obj) === '[object Object]') {\r\n            const cloned: Record<string, unknown> = {};\r\n            for (const key in obj) {\r\n                if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n                    cloned[key] = deepClone((obj as Record<string, unknown>)[key]);\r\n                }\r\n            }\r\n            return cloned as T;\r\n        }\r\n\r\n        return obj;\r\n    }\r\n\r\n    /**\r\n     * Merge objects deeply\r\n     * Properly handles nested objects and arrays\r\n     */\r\n    export function deepMerge<T extends Record<string, unknown>>(\r\n        target: T,\r\n        ...sources: Partial<T>[]\r\n    ): T {\r\n        if (!sources.length) return target;\r\n\r\n        const source = sources.shift();\r\n        if (!source) return target;\r\n\r\n        if (isObject(target) && isObject(source)) {\r\n            for (const key in source) {\r\n                if (Object.prototype.hasOwnProperty.call(source, key)) {\r\n                    const sourceValue = source[key];\r\n                    const targetValue = target[key];\r\n\r\n                    if (sourceValue !== undefined) {\r\n                        if (isObject(sourceValue) && !Array.isArray(sourceValue)) {\r\n                            if (!targetValue || !isObject(targetValue)) {\r\n                                target[key] = {} as T[Extract<keyof T, string>];\r\n                            }\r\n                            deepMerge(target[key] as Record<string, unknown>, sourceValue as Record<string, unknown>);\r\n                        } else {\r\n                            target[key] = sourceValue as T[Extract<keyof T, string>];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return deepMerge(target, ...sources);\r\n    }\r\n\r\n    /**\r\n     * Helper to check if value is a plain object\r\n     */\r\n    function isObject(item: unknown): item is Record<string, unknown> {\r\n        return item !== null && typeof item === 'object' && !Array.isArray(item);\r\n    }\r\n\r\n    /**\r\n     * Generate unique ID with better entropy\r\n     */\r\n    let uniqueIdCounter = 0;\r\n\r\n    export function uniqueId(prefix: string = 'id'): string {\r\n        const timestamp = Date.now().toString(36);\r\n        const randomPart = Math.random().toString(36).substring(2, 11);\r\n        uniqueIdCounter = (uniqueIdCounter || 0) + 1;\r\n        const counter = uniqueIdCounter.toString(36);\r\n        return `${prefix}_${timestamp}_${randomPart}_${counter}`;\r\n    }\r\n\r\n    /**\r\n     * Sleep/delay utility\r\n     */\r\n    export function sleep(ms: number): Promise<void> {\r\n        if (ms < 0) {\r\n            throw new Error('Sleep duration must be non-negative');\r\n        }\r\n        return new Promise(resolve => setTimeout(resolve, ms));\r\n    }\r\n\r\n    /**\r\n     * Check if value is empty\r\n     */\r\n    export function isEmpty(value: unknown): boolean {\r\n        if (value == null) return true;\r\n        if (typeof value === 'string') return value.trim().length === 0;\r\n        if (Array.isArray(value)) return value.length === 0;\r\n        if (value instanceof Map || value instanceof Set) return value.size === 0;\r\n        if (typeof value === 'object') return Object.keys(value).length === 0;\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Capitalize first letter\r\n     */\r\n    export function capitalize(str: string): string {\r\n        if (!str) return '';\r\n        return str.charAt(0).toUpperCase() + str.slice(1);\r\n    }\r\n\r\n    /**\r\n     * Convert to kebab-case\r\n     */\r\n    export function kebabCase(str: string): string {\r\n        if (!str) return '';\r\n        return str\r\n            .replace(/([a-z])([A-Z])/g, '$1-$2')\r\n            .replace(/[\\s_]+/g, '-')\r\n            .toLowerCase();\r\n    }\r\n\r\n    /**\r\n     * Convert to camelCase\r\n     */\r\n    export function camelCase(str: string): string {\r\n        if (!str) return '';\r\n        return str\r\n            .replace(/[-_\\s]+(.)?/g, (_, char: string) => (char ? char.toUpperCase() : ''))\r\n            .replace(/^[A-Z]/, char => char.toLowerCase());\r\n    }\r\n\r\n    /**\r\n     * Convert to PascalCase\r\n     */\r\n    export function pascalCase(str: string): string {\r\n        if (!str) return '';\r\n        const camel = camelCase(str);\r\n        return camel.charAt(0).toUpperCase() + camel.slice(1);\r\n    }\r\n\r\n    /**\r\n     * Truncate string\r\n     */\r\n    export function truncate(str: string, length: number, suffix: string = '...'): string {\r\n        if (!str || str.length <= length) return str;\r\n        return str.substring(0, length - suffix.length) + suffix;\r\n    }\r\n\r\n    /**\r\n     * Parse query string\r\n     */\r\n    export function parseQuery(queryString: string): Record<string, string | string[]> {\r\n        const query: Record<string, string | string[]> = {};\r\n        const cleaned = queryString.replace(/^\\?/, '');\r\n\r\n        if (!cleaned) return query;\r\n\r\n        const pairs = cleaned.split('&');\r\n\r\n        for (const pair of pairs) {\r\n            const [key, value] = pair.split('=').map(decodeURIComponent);\r\n            if (!key) continue;\r\n\r\n            const decodedValue = value || '';\r\n\r\n            // Handle array parameters (key[]=value)\r\n            if (key.endsWith('[]')) {\r\n                const actualKey = key.slice(0, -2);\r\n                if (!query[actualKey]) {\r\n                    query[actualKey] = [];\r\n                }\r\n                (query[actualKey] as string[]).push(decodedValue);\r\n            } else {\r\n                query[key] = decodedValue;\r\n            }\r\n        }\r\n\r\n        return query;\r\n    }\r\n\r\n    /**\r\n     * Stringify object to query string\r\n     */\r\n    export function stringifyQuery(obj: Record<string, unknown>): string {\r\n        const pairs: string[] = [];\r\n\r\n        for (const [key, value] of Object.entries(obj)) {\r\n            if (value == null) continue;\r\n\r\n            if (Array.isArray(value)) {\r\n                // Handle arrays\r\n                for (const item of value) {\r\n                    if (item != null) {\r\n                        pairs.push(`${encodeURIComponent(key)}[]=${encodeURIComponent(String(item))}`);\r\n                    }\r\n                }\r\n            } else {\r\n                pairs.push(`${encodeURIComponent(key)}=${encodeURIComponent(String(value))}`);\r\n            }\r\n        }\r\n\r\n        return pairs.length > 0 ? `?${pairs.join('&')}` : '';\r\n    }\r\n\r\n    /**\r\n     * Clamp a number between min and max\r\n     */\r\n    export function clamp(value: number, min: number, max: number): number {\r\n        return Math.min(Math.max(value, min), max);\r\n    }\r\n\r\n    /**\r\n     * Check if code is running in browser\r\n     */\r\n    export function isBrowser(): boolean {\r\n        return typeof window !== 'undefined' && typeof document !== 'undefined';\r\n    }\r\n\r\n    /**\r\n     * Safe JSON parse with fallback\r\n     */\r\n    export function safeJsonParse<T = unknown>(json: string, fallback: T): T {\r\n        try {\r\n            return JSON.parse(json) as T;\r\n        } catch {\r\n            return fallback;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Export all utilities\r\n     */\r\n    export const utils = {\r\n        debounce,\r\n        throttle,\r\n        classNames,\r\n        formatDate,\r\n        deepClone,\r\n        deepMerge,\r\n        uniqueId,\r\n        sleep,\r\n        isEmpty,\r\n        capitalize,\r\n        kebabCase,\r\n        camelCase,\r\n        pascalCase,\r\n        truncate,\r\n        parseQuery,\r\n        stringifyQuery,\r\n        clamp,\r\n        isBrowser,\r\n        safeJsonParse,\r\n    };\r\n\r\n// ","// src/mod/utils/intersection_observer.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    /**\r\n     * Configuration for intersection observer\r\n     */\r\n    export interface IntersectionConfig {\r\n        root?           : Element | null;\r\n        rootMargin?     : string;\r\n        threshold?      : number | number[];\r\n        onEnter?        : (entry: IntersectionObserverEntry) => void;\r\n        onExit?         : (entry: IntersectionObserverEntry) => void;\r\n        once?           : boolean; // If true, unobserve after first intersection\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * Simple wrapper around Intersection Observer API\r\n     * Makes it easy to detect when elements become visible\r\n     */\r\n    export class VisibilityObserver {\r\n\r\n        //  INIT \r\n\r\n            private observer: IntersectionObserver | null = null;\r\n            private observedElements = new Map<Element, boolean>(); // Track visibility state\r\n\r\n            constructor(config: IntersectionConfig) {\r\n                this.observer = new IntersectionObserver((entries) => {\r\n                    entries.forEach(entry => {\r\n                        const wasVisible = this.observedElements.get(entry.target) ?? false;\r\n                        const isNowVisible = entry.isIntersecting;\r\n\r\n                        // Only trigger callbacks on state change\r\n                        if (isNowVisible && !wasVisible) {\r\n                            // Element entered viewport\r\n                            this.observedElements.set(entry.target, true);\r\n                            config.onEnter?.(entry);\r\n\r\n                            if (config.once) {\r\n                                this.unobserve(entry.target);\r\n                            }\r\n                        } else if (!isNowVisible && wasVisible) {\r\n                            // Element left viewport\r\n                            this.observedElements.set(entry.target, false);\r\n                            config.onExit?.(entry);\r\n                        }\r\n                    });\r\n                }, {\r\n                    root: config.root || null,\r\n                    rootMargin: config.rootMargin || '0px',\r\n                    threshold: config.threshold ?? 0.1\r\n                });\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            /**\r\n             * Start observing an element\r\n             */\r\n            observe(element: Element): void {\r\n                if (this.observer) {\r\n                    this.observer.observe(element);\r\n                    this.observedElements.set(element, false);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Stop observing an element\r\n             */\r\n            unobserve(element: Element): void {\r\n                if (this.observer) {\r\n                    this.observer.unobserve(element);\r\n                    this.observedElements.delete(element);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Disconnect the observer\r\n             */\r\n            disconnect(): void {\r\n                if (this.observer) {\r\n                    this.observer.disconnect();\r\n                    this.observedElements.clear();\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  HELP \r\n\r\n    /**\r\n     * Helper function to observe when element becomes visible (once)\r\n     * @param element - Element to observe\r\n     * @param callback - Callback when element becomes visible\r\n     * @returns Function to stop observing\r\n     */\r\n    export function observeVisibility(\r\n        element: Element,\r\n        callback: (entry: IntersectionObserverEntry) => void\r\n    ): () => void {\r\n        const observer = new IntersectionObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    callback(entry);\r\n                    observer.unobserve(element);\r\n                }\r\n            });\r\n        }, {\r\n            threshold: 0.1\r\n        });\r\n\r\n        observer.observe(element);\r\n\r\n        return () => observer.disconnect();\r\n    }\r\n\r\n// \r\n","// src/mod/utils/time_formatter.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    import { t } from \"../core/i18n\";\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    /**\r\n     * Formats a timestamp into a relative time string with translation\r\n     * Returns the formatted time and original ISO string as title attribute\r\n     *\r\n     * @param timestamp - ISO 8601 timestamp string or Date object\r\n     * @returns Object with formatted time and original timestamp for title\r\n     */\r\n    export function formatRelativeTime(timestamp: string | Date) {\r\n        const date = typeof timestamp === 'string' ? new Date(timestamp) : timestamp;\r\n        const now = new Date();\r\n        const diffMs = now.getTime() - date.getTime();\r\n        const diffSecs = Math.floor(diffMs / 1000);\r\n        const diffMins = Math.floor(diffSecs / 60);\r\n        const diffHours = Math.floor(diffMins / 60);\r\n        const diffDays = Math.floor(diffHours / 24);\r\n        const diffWeeks = Math.floor(diffDays / 7);\r\n        const diffMonths = Math.floor(diffDays / 30);\r\n        const diffYears = Math.floor(diffDays / 365);\r\n\r\n        let formatted = '';\r\n\r\n        if (diffSecs < 0) {\r\n            // Future date\r\n            formatted = t('time.just_now');\r\n        } else if (diffSecs < 60) {\r\n            // Less than a minute\r\n            formatted = t('time.just_now');\r\n        } else if (diffMins < 2) {\r\n            // 1 minute\r\n            formatted = t('time.minute_ago');\r\n        } else if (diffMins < 60) {\r\n            // Multiple minutes\r\n            formatted = t('time.minutes_ago', { count: diffMins.toString() });\r\n        } else if (diffHours < 2) {\r\n            // 1 hour\r\n            formatted = t('time.hour_ago');\r\n        } else if (diffHours < 24) {\r\n            // Multiple hours\r\n            formatted = t('time.hours_ago', { count: diffHours.toString() });\r\n        } else if (diffDays < 2) {\r\n            // 1 day\r\n            formatted = t('time.day_ago');\r\n        } else if (diffDays < 7) {\r\n            // Multiple days\r\n            formatted = t('time.days_ago', { count: diffDays.toString() });\r\n        } else if (diffWeeks < 2) {\r\n            // 1 week\r\n            formatted = t('time.week_ago');\r\n        } else if (diffWeeks < 4) {\r\n            // Multiple weeks\r\n            formatted = t('time.weeks_ago', { count: diffWeeks.toString() });\r\n        } else if (diffMonths < 2) {\r\n            // 1 month\r\n            formatted = t('time.month_ago');\r\n        } else if (diffMonths < 12) {\r\n            // Multiple months\r\n            formatted = t('time.months_ago', { count: diffMonths.toString() });\r\n        } else if (diffYears < 2) {\r\n            // 1 year\r\n            formatted = t('time.year_ago');\r\n        } else {\r\n            // Multiple years\r\n            formatted = t('time.years_ago', { count: diffYears.toString() });\r\n        }\r\n\r\n        return {\r\n            formatted,\r\n            originalDate: date.toISOString(),\r\n            title: date.toLocaleString()\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Creates an HTML time element with relative time and title attribute\r\n     * Usage: place this directly in your component render\r\n     *\r\n     * @param timestamp - ISO 8601 timestamp string or Date object\r\n     * @returns Object with text content and title for use in createElement\r\n     */\r\n    export function getTimeDisplay(timestamp: string | Date) {\r\n        const { formatted, title } = formatRelativeTime(timestamp);\r\n        return {\r\n            text: formatted,\r\n            title\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Format time for display with full date fallback\r\n     * @param timestamp - ISO 8601 timestamp string or Date object\r\n     * @returns Formatted string like \"2 hours ago\"\r\n     */\r\n    export function formatTimeAgo(timestamp: string | Date): string {\r\n        return formatRelativeTime(timestamp).formatted;\r\n    }\r\n\r\n    /**\r\n     * Get the ISO string for title attribute\r\n     * @param timestamp - ISO 8601 timestamp string or Date object\r\n     * @returns Localized full date string\r\n     */\r\n    export function getTimeTitle(timestamp: string | Date): string {\r\n        return formatRelativeTime(timestamp).title;\r\n    }\r\n\r\n// \r\n","// src/main.ts\r\n//\r\n// Made with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    // Config VDOM\r\n    import { setConfig } from '@je-es/vdom';\r\n    setConfig({\r\n        devMode: false,             // Enable warnings\r\n        sanitizeHTML: true,         // XSS protection\r\n        // onError: (err) => {      // Custom error handler\r\n        //     console.error('VDOM Error:', err);\r\n        // }\r\n    });\r\n\r\n    // Types\r\n    export * from './types';\r\n\r\n    // Core\r\n    export * from './mod/core/component';\r\n    export * from './mod/core/decorators';\r\n    export * from './mod/core/scheduler';\r\n    export * from './mod/core/context';\r\n    export * from './mod/core/hooks';\r\n    export * from './mod/core/router';\r\n    export * from './mod/core/store';\r\n    export * from './mod/core/client';\r\n    export * from './mod/core/styles';\r\n\r\n    // Helpers\r\n    export { ClassMaker, CM, ElementCreator, EC, Window } from './mod/helpers';\r\n\r\n    // Services\r\n    export * from './mod/core/i18n';\r\n    export * from './mod/services/fa_config';\r\n\r\n    // Components\r\n    export * from './mod/components/toast';\r\n    export * from './mod/components/loader';\r\n    export * from './mod/components/popup';\r\n    export { SmartForm, SmartFormComponent } from './mod/components/smart_form';\r\n    export type { FormConfig, ButtonConfig } from './mod/components/smart_form';\r\n    export * from './mod/components/tabbed_view';\r\n    export * from './mod/components/items_loader';\r\n    export * from './mod/components/dropdown';\r\n\r\n    // Utilities\r\n    export * from './mod/help';\r\n    export * from './mod/utils/intersection_observer';\r\n    export * from './mod/utils/time_formatter';\r\n\r\n    // Third-party packages\r\n    export { api, http, configureApi, getApiConfig, resetApiConfig, type ApiError } from '@je-es/capi';\r\n    export {\r\n        createElement, html, patch, createDOMElement, isVNode, validateVNode,\r\n        div, span, p, h1, h2, h3, h4, h5, h6, a, img, i, form, input, label, textarea, button, select, option,\r\n    } from '@je-es/vdom';\r\n\r\n    export type {\r\n        VNode, VNodeChild, VNodeProps, VNodeChildren\r\n    } from '@je-es/vdom';\r\n\r\n    // Built-in Style Map (BlahBlah)\r\n    import * as bbMapInternal from \"./mod/components/bb_map.json\";\r\n    export const bbMap = bbMapInternal;\r\n\r\n// "]}